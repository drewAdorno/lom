System.register("chunks:///_virtual/WingDungeonFastView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./DungeonControl.ts","./MessageView.ts","./PrivilegeDataCache.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,l,d,u,f,c,h,v,p,g,m;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,r=t.Label,s=t.HorizontalTextAlignment,a=t.ScrollView,l=t.js},function(t){d=t.V2},function(t){u=t.ItemGrid},function(t){f=t.ListItem},function(t){c=t.default},function(t){h=t.default},null,function(t){v=t.default},function(t){p=t.default},function(t){g=t.PrivilegeDataCache},function(t){m=t.BaseView}],execute:function(){n._RF.push({},"5fab1Hts+JEM6mD8J6QNAuN","WingDungeonFastView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).txtRecord=void 0,e.txtTips=void 0,e.rewardScroll=void 0,e.stars=[],e.nodeModel=void 0,e.model=void 0,e.name="WingDungeonFastView",e.url="ui/module/wing/WingDungeonFastView",e}e(n,t);var u=n.prototype;return u.onInit=function(){var t=this,e=this.findChild("btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("view/btn");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.openArgs[0]&&(IS(v).reqWingQuickPass(t.openArgs[0].type),t.close())})),this.txtRecord=this.findChildComponent("view/record/Label",r),this.txtTips=this.findChildComponent("view/tips/Label",r);var n=this.findChild("view/tips/btnTips");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){var t=GetLanguage(201852);p.showBoxTip({tip:t,btnCnt:1,horizontalAlign:s.LEFT})}));var l=this.findChild("view/btnAttr");this.addComponentCallbackListener(l,o.EventType.CLICK,(function(){t.openArgs[0]&&uiMgr.openView("WingDungeonBossView",t.openArgs[0])})),this.nodeModel=this.findChild("view/model");for(var d=1;d<=5;d++)this.stars[d]=this.findChild("view/stars/star"+d+"/light");var u=this.findChildComponent("view/rewardScroll",a);this.rewardScroll=this.addUIList(u,C)},u.registerUpdateHandler=function(){},u.onAfterOpen=function(){var t=this.openArgs[0],e=this.openArgs[1],n=configDark_trial_chapter.getDatas(),o=n.find((function(e){return e.part_type==t.type&&e.level==t.max_level})),r=0==t.max_level?0:l.formatStr("%s-%s",o.difficulty,o.star);this.txtRecord.string=h.formatStrWithMirrorDeal(GetLanguage(201887),r);var s=n.find((function(i){return i.part_type==t.type&&i.level==e})),a=configUnitModel.getDataByKey(s.bossModel);this.model&&this.removeUIEffect(this.model),this.model=this.addUIEffect(a.path,this.nodeModel,-1,new d(0,0),a.scale/100*2);var u=0==t.max_level?0:l.formatStr("%s-%s",s.difficulty,s.star);this.txtTips.string=h.formatStrWithMirrorDeal(GetLanguage(201889),u);for(var f=1;f<this.stars.length;f++){this.stars[f].active=s.star>=f}for(var c,v=[],p=i(n);!(c=p()).done;){var m=c.value;if(m.part_type==t.type&&m.level>=t.cur_level&&m.level<=t.max_level)for(var C,y=i(m.daily_reward);!(C=y()).done;){var w=C.value;v[w[0]]||(v[w[0]]={id:w[0],num:0}),v[w[0]].num=v[w[0]].num+w[1]}}var L=[],I=IS(g).getPrivilegeCardInfo(5);for(var D in v)v.hasOwnProperty(D)&&(I&&(v[D].num=Math.floor(1.5*v[D].num)),L.push(v[D]));L.sort((function(t,e){var i=configGoods.getDataByKey(t.id),n=configGoods.getDataByKey(e.id);return i.quality==n.quality?t.id-e.id:n.quality-i.quality})),this.rewardScroll.datas=L},u.onBeforeClose=function(){},u.onDestroy=function(){},n}(m));var C=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.itemGridNode=c.findChild(this.node,"itemGrid"),this.itemGrid=new u(this.view,this.itemGridNode)},n.onRender=function(t,e){this.itemGrid.SetItemId(t.id,t.num)},i}(f);n._RF.pop()}}}));

