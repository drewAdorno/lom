System.register("chunks:///_virtual/SceneMiniMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./UIEffectAsset.ts","./RoleDataCache.ts","./CrossWarDefine.ts","./CrossWarSceneDataCache.ts"],(function(t){"use strict";var e,i,o,s,n,r,a,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,o=t.Vec3},function(t){s=t.V2},function(t){n=t.UIEffectAsset},function(t){r=t.RoleDataCache},function(t){a=t.SceneObjType},function(t){c=t.CrossWarSceneDataCache}],execute:function(){i._RF.push({},"2c318LFS1ZDnrOD1iC12pF7","SceneMiniMap",void 0);var p=["ui/module/crosswar/scene/MiniMapPoint_Green","ui/module/crosswar/scene/MiniMapPoint_Red","ui/module/crosswar/scene/MiniMapPoint_Red1","ui/module/crosswar/scene/MiniMapPoint_Self"],u=new s,h=[];t("SceneMiniMap",function(){function t(){this.ratio=.1,this.center=new o,this.nodeMap=void 0,this.points={}}var i=t.prototype;return i.setCenter=function(t,e){this.center.set(-t*this.ratio,-e*this.ratio),this.nodeMap.position=this.center},i.setPointPos=function(t){this.points[t.obj_id]&&(u.set(t.pos.x*this.ratio,t.pos.y*this.ratio),this.points[t.obj_id].position=u)},i.refreshPoint=function(){var t=IS(c).roleMap;for(var i in h.length=0,this.points)t[i]||(this.points[i].free(),h.push(i));for(var o,s=e(h);!(o=s()).done;){var f=o.value;delete this.points[f]}for(var l in h.length=0,t){var d=t[l];if(!this.points[l]){var M=1;d.obj_id==IS(r).GetRoleId()?M=3:d.obj_type==a.Player&&(M=d.role.serv_id==IS(r).GetServerId()?0:2),this.points[l]=n.alloc(p[M],this.nodeMap,-1)}u.set(d.pos.x*this.ratio,d.pos.y*this.ratio),this.points[l].position=u}},t}());i._RF.pop()}}}));

