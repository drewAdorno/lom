System.register("chunks:///_virtual/ShareView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./BaseView.ts","./BagModel.ts","./RoleControl.ts","./SdkControl.ts","./ShareControl.ts","./ShareDefine.ts","./ShareModel.ts"],(function(t){"use strict";var n,e,i,o,a,s,r,d,h,c,l,u,f,g,m,p,C,v,I,S;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.Button,o=t.ScrollView,a=t.Sprite,s=t.Label,r=t.ProgressBar,d=t.RichText,h=t.js},function(t){c=t.SelectedType,l=t.ListItem},function(t){u=t.default},function(t){f=t.BaseView},function(t){g=t.BagModel},function(t){m=t.default},function(t){p=t.default},function(t){C=t.default},function(t){v=t.ShareDefine,I=t.ShareWxUrlId},function(t){S=t.ShareModel}],execute:function(){e._RF.push({},"2f33cQRW/pBAb+QzEGRwL9h","ShareView",void 0);t("default",function(t){function e(){var n;return(n=t.call(this)||this).taskList=void 0,n.name="ShareView",n.url="ui/module/share/ShareView",n}n(e,t);var a=e.prototype;return a.onInit=function(){var t=this,n=this.findChild("root/content/btnClose");this.addComponentCallbackListener(n,i.EventType.CLICK,(function(){t.onMaskClick()}));this.findChild("root/content/taskList");var e=this.findChildComponent("root/content/taskList",o);this.taskList=this.addUIList(e,_),this.taskList.selectedMode=c.SINGLE},a.onMaskClick=function(){this.close()},a.onAfterOpen=function(){IS(C).reqOperateInfo()},a.onBeforeClose=function(){},a.registerUpdateHandler=function(){this.addEvent(v.ShareInfoBack,this.updateData,this),this.addEvent(v.ShareAwardBack,this.updateData,this)},a.updateData=function(){for(var t=configShare.getDatas(),n=[],e=0;e<t.length;e++)1==t[e].type&&n.push(t[e]);this.taskList.datas=n},a.onDestroy=function(){},e}(f));var _=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).imgFrame=void 0,n.imgIcon=void 0,n.txtNum=void 0,n.txtdesc=void 0,n.txtName=void 0,n.get_btn=void 0,n.get_btn_icon=void 0,n.get_btn_label=void 0,n.progress=void 0,n.redIcon=void 0,n.num_val=void 0,n}n(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.imgFrame=u.findChildComponent(this.node,"imgFrame",a),this.imgIcon=u.findChildComponent(this.node,"imgFrame/imgIcon",a),this.txtNum=u.findChildComponent(this.node,"imgFrame/num",s),this.progress=u.findChildComponent(this.node,"progress",r),this.get_btn=u.findChild(this.node,"get_btn"),this.redIcon=u.findChild(this.node,"get_btn/red"),this.view.addComponentCallbackListener(this.get_btn,i.EventType.CLICK,(function(){t.onBtnClick()})),this.num_val=u.findChildComponent(this.node,"num_val",d),this.txtdesc=u.findChildComponent(this.node,"des",s),this.get_btn_label=u.findChildComponent(this.node,"get_btn/Label",s),this.get_btn_icon=u.findChildComponent(this.node,"get_btn",a),this.view.addComponentCallbackListener(this.imgIcon.node,i.EventType.CLICK,(function(){IS(g).OpenItemTips(t.data.reward[0][0],t.imgIcon.node)}))},o.onRender=function(t,n){this.data=t,this.txtdesc.string=t.desc;var e=GetLanguage(200602),i=IS(S).GetShareNum(),o=IS(S).IsGetAward(this.data.id),a=i>=this.data.num?"#00ff00":"#cc5144",s=h.formatStr("<color=%s>%d</color>/%d",a,i,this.data.num);this.redIcon.active=!1,i>=this.data.num&&(o?(e=GetLanguage(200314),s=h.formatStr("<color=%s>%d/%d</color>",a,i,this.data.num)):(e=GetLanguage(200603),this.redIcon.active=!0)),this.progress.progress=i/this.data.num,this.num_val.string=s,this.get_btn_label.string=e,this.get_btn_icon.grayscale=o;var r=t.reward[0],d=configGoods.getDataByKey(r[0]);this.txtNum.string=r[1];var c=configColor.getDataByKey(d.quality);this.view.loadIcon(this.imgFrame,"icon_equip",c.path),this.view.loadIcon(this.imgIcon,d.icon_group,d.icon)},o.onBtnClick=function(){var t=IS(S).GetShareNum(),n=IS(S).IsGetAward(this.data.id);if(t>=this.data.num&&!n)IS(C).reqOperateAward(this.data.id);else{IS(m).send_3_30(2,0);var e=Math.floor(Math.random()*I.length);printLogErr(e),IS(p).weinxinShare(I[e].text,I[e].url,I[e].urlId,I[e].share_id)}},o.onItemClick=function(){},e}(l);e._RF.pop()}}}));

