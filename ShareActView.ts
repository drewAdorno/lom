System.register("chunks:///_virtual/ShareActView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./BaseView.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./BagModel.ts","./RoleControl.ts","./SdkControl.ts","./ShareDefine.ts"],(function(t){"use strict";var e,i,n,o,a,s,d,r,c,h,l,u,f,g,v,p,C,m,_,I,y,k;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.ScrollView,s=t.Sprite,d=t.Label,r=t.ProgressBar,c=t.RichText,h=t.js},function(t){l=t.SelectedType,u=t.ListItem},function(t){f=t.default},function(t){g=t.BaseView},function(t){v=t.default},function(t){p=t.default},function(t){C=t.ActivityEventDefine,m=t.ActivityTaskState},function(t){_=t.BagModel},function(t){I=t.default},function(t){y=t.default},function(t){k=t.ShareSpeWxUrlId}],execute:function(){n._RF.push({},"14d59v0BItEqYO2bWR+ay+O","ShareActView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).taskList=void 0,e.name="ShareActView",e.url="ui/module/share/ShareActView",e}e(n,t);var s=n.prototype;return s.onInit=function(){var t=this,e=this.findChild("root/content/btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.onMaskClick()}));this.findChild("root/content/taskList");var i=this.findChildComponent("root/content/taskList",a);this.taskList=this.addUIList(i,L),this.taskList.selectedMode=l.SINGLE},s.onMaskClick=function(){this.close()},s.onAfterOpen=function(){this.updateData()},s.onBeforeClose=function(){},s.registerUpdateHandler=function(){this.addEvent(C.OnActivityInfoTaskUpdate,this.updateData,this),this.addEvent(C.OnActivityInfoUpdate,this.updateData,this)},s.updateData=function(){for(var t,e=IS(p).GetActivityInfo(43),n=[],o=IS(p).GetRoundCfg(43,e.round),a=configActivity_task_group.getDataByKey(o.task_list[0]),s=i(a.task_list);!(t=s()).done;){var d=t.value;if(e.task_list.hasOwnProperty(d))n.push(e.task_list[d]);else{var r={cfg:configActivity_task.getDataByKey(d),state:0,count:0};n.push(r)}}n.sort((function(t,e){return t.state==m.CanGet&&e.state!=m.CanGet?-1:t.state!=m.CanGet&&e.state==m.CanGet?1:t.state!=e.state?t.state-e.state:t.id-e.id})),this.taskList.datas=n},s.onDestroy=function(){},n}(g));var L=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).imgFrame=void 0,e.imgIcon=void 0,e.txtNum=void 0,e.txtdesc=void 0,e.txtName=void 0,e.get_btn=void 0,e.get_btn_icon=void 0,e.get_btn_label=void 0,e.progress=void 0,e.redIcon=void 0,e.num_val=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this;this.imgFrame=f.findChildComponent(this.node,"imgFrame",s),this.imgIcon=f.findChildComponent(this.node,"imgFrame/imgIcon",s),this.txtNum=f.findChildComponent(this.node,"imgFrame/num",d),this.progress=f.findChildComponent(this.node,"progress",r),this.get_btn=f.findChild(this.node,"get_btn"),this.redIcon=f.findChild(this.node,"get_btn/red"),this.view.addComponentCallbackListener(this.get_btn,o.EventType.CLICK,(function(){t.onBtnClick()})),this.num_val=f.findChildComponent(this.node,"num_val",c),this.txtdesc=f.findChildComponent(this.node,"des",d),this.get_btn_label=f.findChildComponent(this.node,"get_btn/Label",d),this.get_btn_icon=f.findChildComponent(this.node,"get_btn",s),this.view.addComponentCallbackListener(this.imgIcon.node,o.EventType.CLICK,(function(){IS(_).OpenItemTips(t.data.reward[0][0],t.imgIcon.node)}))},n.onRender=function(t,e){this.txtdesc.string=t.cfg.desc;var i=GetLanguage(200602),n=t.cfg.condition[2]-t.cfg.difference,o=Math.min(Math.max(0,t.count-t.cfg.difference),n),a=!1,s=o>=n?"#6ae994":"#cc5144",d=h.formatStr("<outline color=#230e07 width=2><color=%s>%d</color>/%d</outline>",s,o,n);this.redIcon.active=!1,t.state==m.CanGet?(i=GetLanguage(200603),this.redIcon.active=!0):t.state==m.HadGet&&(i=GetLanguage(200314),d=h.formatStr("<outline color=#230e07 width=2><color=%s>%d/%d</color></outline>",s,o,n),a=!0),this.progress.progress=o/n,this.num_val.string=d,this.get_btn_label.string=i,this.get_btn_icon.grayscale=a;var r=t.cfg.reward[0],c=configGoods.getDataByKey(r[0]);this.txtNum.string=r[1];var l=configColor.getDataByKey(c.quality);this.view.loadIcon(this.imgFrame,"icon_equip",l.path),this.view.loadIcon(this.imgIcon,c.icon_group,c.icon)},n.onBtnClick=function(){var t=this.data.cfg.condition[2]-this.data.cfg.difference;if(Math.min(Math.max(0,this.data.count-this.data.cfg.difference),t)>=t&&this.data.state==m.CanGet)IS(v).send_24_15(43,this.data.task_id,this.data.group_id);else{IS(I).send_3_30(2,0);printLogErr(0),IS(y).weinxinShare(k[0].text,k[0].url,k[0].urlId,k[0].share_id,"43")}},n.onItemClick=function(){},i}(u);n._RF.pop()}}}));

