System.register("chunks:///_virtual/ParkingHorseExpAddView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./BagModel.ts","./MessageView.ts","./ParkingControl.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,u,d,h,m,r,l;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.Sprite,s=t.Label,a=t.EditBox},function(t){u=t.default},null,function(t){d=t.ConfigGlobal},function(t){h=t.BagModel},function(t){m=t.default},function(t){r=t.default},function(t){l=t.BaseView}],execute:function(){e._RF.push({},"99737YRndVLEpb/rBpTCl7l","ParkingHorseExpAddView",void 0);var c=d.park_exp_book_num[0],g=d.park_exp_book_num[1];t("default",function(t){function e(){var i;return(i=t.call(this)||this).editBox=void 0,i.imgFrame=void 0,i.imgIcon=void 0,i.txtName=void 0,i.txtTime=void 0,i.useNum=1,i.itemId=void 0,i.maxNum=void 0,i.mount_id=void 0,i.name="ParkingHorseExpAddView",i.url="ui/module/parking/ParkingHorseExpAddView",i}i(e,t);var d=e.prototype;return d.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("view/btnUse");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.UseClick()}));var u=this.findChild("view/btnAdd");this.addComponentCallbackListener(u,n.EventType.CLICK,(function(){t.changeNum(1)}));var d=this.findChild("view/btnMinus");this.addComponentCallbackListener(d,n.EventType.CLICK,(function(){t.changeNum(-1)}));var h=this.findChild("view/btnAddTen");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){t.changeNum(10)}));var m=this.findChild("view/btnMinusTen");this.addComponentCallbackListener(m,n.EventType.CLICK,(function(){t.changeNum(-10)})),this.imgFrame=this.findChildComponent("view/item/imgFrame",o),this.imgIcon=this.findChildComponent("view/item/imgIcon",o),this.txtName=this.findChildComponent("view/item/txtName",s),this.editBox=this.findChildComponent("view/EditBox",a),this.addComponentCallbackListener(this.editBox.node,a.EventType.EDITING_DID_ENDED,(function(){var i=Number(t.editBox.string);(isNaN(i)||i<=1)&&(i=1),t.useNum=Math.floor(i),t.changeNum()})),this.txtTime=this.findChildComponent("view/txtTime",s)},d.registerUpdateHandler=function(){},d.onAfterOpen=function(){var t;this.itemId=this.openArgs[0],this.mount_id=this.openArgs[1],this.maxNum=null!=(t=this.openArgs[2])?t:IS(h).getGoodsCountByGoodsGtid(this.itemId),this.useNum=this.openArgs[3]||1;var i=configGoods.getDataByKey(this.itemId),e=i.quality,n=configColor.getDataByKey(e);this.txtName.string=i.name+u.formatStr(GetLanguage(205688),this.maxNum),this.loadIcon(this.imgIcon,i.icon_group,i.icon),this.loadIcon(this.imgFrame,"icon_equip",n.path),this.txtTime.node.active=this.itemId==c,this.changeNum()},d.trySetTime=function(){this.txtTime.string=u.formatStrWithMirrorDeal(GetLanguage(201417),this.useNum*g)},d.onBeforeClose=function(){},d.onDestroy=function(){},d.UseClick=function(){IS(h).getGoodsCountByGoodsGtid(this.itemId)<this.useNum?m.showFlyTip(GetLanguage(200069)):0!=this.useNum?(IS(r).reqCarLevelUp(this.mount_id,this.useNum),this.close()):m.showFlyTip(GetLanguage(200069))},d.changeNum=function(t){null!=t&&(this.useNum=this.useNum+t),this.useNum=Math.min(this.maxNum,Math.max(this.useNum,1)),this.editBox.string=String(this.useNum),this.trySetTime()},e}(l));e._RF.pop()}}}));

