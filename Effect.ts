System.register("chunks:///_virtual/Effect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetPool.ts","./BaseAsset.ts","./SpineSkeleton.ts"],(function(t){"use strict";var e,n,i,o,a,l,s,r,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,o=t.Vec2,a=t.isValid,l=t.Node},function(t){s=t.AssetPoolState},function(t){r=t.BaseAsset},function(t){c=t.SpineSkeleton}],execute:function(){i._RF.push({},"b73d5VyJvFPxJAnuqhia/zO","Effect",void 0);var f,u=new o,h={},p={};!function(t){t[t.Not=0]="Not",t[t.Ani=256]="Ani",t[t.All=16777215]="All"}(f||(f={}));t("Effect",function(t){function i(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).config=void 0,e._maxTime=void 0,e._ani=void 0,e._animator=void 0,e}e(i,t),i.alloc=function(t,e,n){var i=configEffect.getDataByKey(t);if(null!=i){var o=effectPool.alloc(i.path,i.max_num,i.max_time);if(o.config=i,o._maxTime=n||i.dead_time,null==e){var a=1==i.layer?h:p,s=a[i.path];null==s&&((s=new l(i.path)).parent=battleMain.flyNumRoot,a[i.path]=s,s.parent=1==i.layer?battleMain.effectBottomRoot:battleMain.effectTopRoot),o.parent=s}else o.parent=e;return o.dir=1,o.scale=i.scale,o.loadSync(),o}printLogErr("effect: [",t,"] 不存在！")},i.free=function(t){effectPool.free(t)};var r=i.prototype;return r.onLoadComplete=function(){var t,e=this._node.getComponent(c);null==e&&(e=this._node.getComponentInChildren(c)),this._animator=e,null==(t=e)||t.__preload()},r.lookAt=function(t,e){if(a(this._node)){if(u.set(t,e),0==u.lengthSqr())return;var n=u.signAngle(o.UNIT_X)/Math.PI*180;this.node.angle=-n}},r.onUpdate=function(e){t.prototype.onUpdate.call(this,e),this.poolState>s.Useing||-1!=this._maxTime&&(this._maxTime<=0?effectPool.free(this):this._maxTime-=e)},r.onApply=function(t){0!=(this._changeValue&f.Ani)&&this._animator&&this._ani&&this._animator.setAnimation(0,this._ani,this._animator.loop)},n(i,[{key:"aniName",set:function(t){this._ani!=t&&(this._ani=t,this._changeValue=this._changeValue|f.Ani)}}]),i}(r));i._RF.pop()}}}));

