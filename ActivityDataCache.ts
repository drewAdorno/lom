System.register("chunks:///_virtual/ActivityDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedPointMgr.ts","./TimeUtil.ts","./ConfigGlobal.ts","./ObjectUtil.ts","./BattlePassControl.ts","./BattlePassDefine.ts","./MessageView.ts","./MainViewModel.ts","./PayDataCache.ts","./PayDefine.ts","./RoleDataCache.ts","./RoleDefine.ts","./WeeklyCardDataCache.ts","./ActivityControl.ts","./ActivityDefine.ts","./ActivityAutumnDataCache.ts","./ActivityChildhoodDataCache.ts","./ActivityFPSDataCache.ts","./ActivityFrogDataCache.ts","./ActivityHalloweenDataCache.ts","./HorseCarnivalDataCache.ts","./ActivityLoopyDataCache.ts","./ActivityPoolPartyDataCache.ts","./ActivityMergeServersDataCache.ts","./RankingRushDataCache.ts","./ActivityReverseDataCache.ts","./RobCaseDataCache.ts","./ActivitySakuraDataCache.ts","./ActivitySchoolDataCache.ts","./ActivitySevenDataCache.ts","./SlumberPartyDataCache.ts","./ActivityStrategyDataCache.ts","./ActivityValentineDataCache.ts","./ActivityMaydayDataCache.ts"],(function(t){"use strict";var e,i,a,n,o,s,r,c,d,u,f,l,_,v,y,g,h,p,I,m,k,S,R,C,A,w,G,D,E,T,U,P,b,L,O,M,B,N,x,F,H,K,Q,V,j;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t.sys,n=t.HorizontalTextAlignment},function(t){o=t.RedPointMgr},function(t){s=t.default},function(t){r=t.ConfigGlobal},function(t){c=t.default},function(t){d=t.default},function(t){u=t.BattlePassDefine},function(t){f=t.default},function(t){l=t.MainViewModel},function(t){_=t.default},function(t){v=t.GiftType},function(t){y=t.RoleDataCache},function(t){g=t.RoleRedPointSystemEnum,h=t.RoleEventDefine},function(t){p=t.default},function(t){I=t.default},function(t){m=t.ActivityEventDefine,k=t.ActivityState,S=t.ActivityType,R=t.ActivityGroup,C=t.ActivityTaskState,A=t.ActivitySignType,w=t.SignActType},function(t){G=t.default},function(t){D=t.default},function(t){E=t.default},function(t){T=t.default},function(t){U=t.default},function(t){P=t.HorseCarnivalDataCache},function(t){b=t.default},function(t){L=t.default},function(t){O=t.default},function(t){M=t.RankingRushDataCache},function(t){B=t.default},function(t){N=t.default},function(t){x=t.default},function(t){F=t.default},function(t){H=t.default},function(t){K=t.SlumberPartyDataCache},function(t){Q=t.default},function(t){V=t.ActivityValentineDataCache},function(t){j=t.default}],execute:function(){i._RF.push({},"9365e8Q34NGsLXJnI45AdTf","ActivityDataCache",void 0);t("default",function(){var t=i.prototype;function i(){this.loginSignRed={},this.activityInfoDict={},this.showIconInfo={},this.showedIconList=[],this.signInfo={},this.giftInfo={},this.openGiftTimeCache=void 0,this.boxInfo={},this.isBoxAnim=!1,this.clickBoxTime=0,this.findInfo={},this.collectInfo={},this.collectShowInfo={},this.collectChatInfo={},this.collectActivityInfo=[],this.eggInfo={},this.lotteryInfo={},this.isLotteryAnim=!1,normalEvent.on(h.ROLE_RED_POINT_LIST_UPDATE,this.UpdateAllMainRed,this),normalEvent.on(h.ROLE_RED_DETAIL_UPDATE,this.UpdateRoleRedSys,this),normalEvent.on(u.BATTLE_PASS_INFO_UPDATE,this.UpdateBattlePass,this)}return t.clear=function(){},t.UpdateActivityInfoList=function(t){if(t){this.activityInfoDict={};for(var e=0;e<t.length;e++){var i=t[e];this.UpdateActivityInfo(i)}for(var a in this.showIconInfo={},this.activityInfoDict)if(this.activityInfoDict.hasOwnProperty(a)){var n=this.activityInfoDict[a];this.CheckMainIcon(n)}this.UpdateMainIcon(),this.UpdateAllMainRed(),normalEvent.emit(m.OnActivityListUpdate)}},t.InitActivityInfo=function(t,e,i,a){var n={id:t,type:e,round:i,state_time:{},task_list:{},group_task_list:{}};return n.activityCfg=configActivity_control.getDataByKey(t),n.roundCfg=this.GetRoundCfg(e,i),n},t.GetEndTime=function(t){var e;return null!=(e=t.end_time)?e:0},t.GetIconSortTime=function(t){if(t.state){if(t.state==k.Preview||t.state==k.Open)return t.state_time[k.Open].start_time;if(t.state_time[k.EndShow])return t.state_time[k.EndShow].start_time}return 0},t.UpdateActivityInfo=function(t){var e=t.id,i=t.type,a=t.round,n=this.activityInfoDict[i];if(null==n||n.id!=e||n.round!=a){if(!(n=this.InitActivityInfo(e,i,a,t.round_id)).activityCfg)return null;this.activityInfoDict[i]=n}if(n.state=t.state,n.start_time=t.start_time,n.end_time=t.end_time,null!=t.state_time&&t.state_time.length>0)for(var o=0;o<t.state_time.length;o++){var s=t.state_time[o].state,r=n.state_time[s];r||(r={},n.state_time[s]=r),r.start_time=t.state_time[o].start_time,r.end_time=t.state_time[o].end_time}if(null!=t.task_list&&t.task_list.length>0)for(var c=0;c<t.task_list.length;c++){var d=t.task_list[c];0==d.task_id?(n.group_task_list[d.group_id]={},n.group_task_list[d.group_id].task_id=d.task_id,n.group_task_list[d.group_id].group_id=d.group_id,n.group_task_list[d.group_id].cfg=configActivity_task_group.getDataByKey(d.group_id),n.group_task_list[d.group_id].count=d.count,n.group_task_list[d.group_id].state=d.state):(n.task_list[d.task_id]={},n.task_list[d.task_id].task_id=d.task_id,n.task_list[d.task_id].group_id=d.group_id,n.task_list[d.task_id].cfg=configActivity_task.getDataByKey(d.task_id),n.task_list[d.task_id].count=d.count,n.task_list[d.task_id].state=d.state)}return this.SendSign(i),n},t.UpdateActivityInfoTask=function(t){var e=this.activityInfoDict[t.type];if(e&&e.activityCfg){if(null!=t.task_list&&t.task_list.length>0)for(var i=0;i<t.task_list.length;i++){var a=t.task_list[i];0==a.task_id?(e.group_task_list[a.group_id]||(e.group_task_list[a.group_id]={},e.group_task_list[a.group_id].task_id=a.task_id,e.group_task_list[a.group_id].group_id=a.group_id,e.group_task_list[a.group_id].cfg=configActivity_task_group.getDataByKey(a.group_id)),e.group_task_list[a.group_id].count=a.count,e.group_task_list[a.group_id].state=a.state):(e.task_list[a.task_id]||(e.task_list[a.task_id]={},e.task_list[a.task_id].task_id=a.task_id,e.task_list[a.task_id].group_id=a.group_id,e.task_list[a.task_id].cfg=configActivity_task.getDataByKey(a.task_id)),e.task_list[a.task_id].count=a.count,e.task_list[a.task_id].state=a.state)}this.UpdateMainRedByGroup(e.activityCfg.activity_group),normalEvent.emit(m.OnActivityInfoTaskUpdate,t.type)}},t.UpdateActivityInfoTaskReward=function(t){normalEvent.emit(m.OnActivityTaskReward)},t.UpdateAllMainRed=function(){var t={};for(var e in this.showedIconList)if(this.showedIconList.hasOwnProperty(e)){var i=this.showedIconList[e];if(!i.activityCfg)continue;if(t[i.activityCfg.activity_group])continue;this.UpdateMainRedByGroup(i.activityCfg.activity_group,i.activityCfg.main_icon),t[i.activityCfg.activity_group]=!0}},t.UpdateRoleRedSys=function(t){t==g.Qixi_Record&&this.UpdateMainRedByActType(S.Qixi)},t.UpdateBattlePass=function(){this.UpdateMainRedByActType(S.Qixi),this.UpdateMainRedByActType(S.Childhood),this.UpdateMainRedByActType(S.Halloween),this.UpdateMainRedByActType(S.FrogPass)},t.UpdateMainRedByActType=function(t){var e=this.activityInfoDict[t];e&&e.activityCfg&&this.UpdateMainRedByGroup(e.activityCfg.activity_group)},t.UpdateMainRedByGroup=function(t,e){var i=0;for(var a in this.activityInfoDict)if(this.activityInfoDict.hasOwnProperty(a)){var n=this.activityInfoDict[a];if(!n.activityCfg)continue;n.activityCfg.activity_group==t&&(i=i+this.GetTaskRedNum(n.type)+this.GetExtRedNum(n.type))}if(i+=this.GetGroupRedNum(t),null!=e)IS(l).updateIconRedDot(e,i);else for(var o in this.showedIconList)if(this.showedIconList.hasOwnProperty(o)){var s=this.showedIconList[o];if(!s.activityCfg)continue;if(s.activityCfg.activity_group==t){IS(l).updateIconRedDot(s.activityCfg.main_icon,i);break}}},t.GetGroupRedNum=function(t){var e=0;switch(t){case R.Ranking:e+=IS(M).getGroupRed()}return e},t.GetExtRedNum=function(t){var i=0;switch(i+=this.GetSignRed(t),t){case S.HorseCarnival:case S.Artifact:case S.Artifact1:case S.Fate:i+=IS(P).getRedNum(t);break;case S.Qixi:var a=this.GetActivityInfo(S.Qixi);a&&a.state==k.Open&&(i+=IS(y).getRedNumByModule(g.Qixi_Record,1),i+=IS(y).getRedNumByModule(g.Qixi_Record,2),i+=IS(V).getPassRedNum(),i+=IS(V).addRed&&0==IS(V).getPartnerId()?1:0,i+=IS(V).GetOptionGiftRed(),i+=IS(V).GetTurnRed());break;case S.School:i=(i=i+d.checkRewardRP(5)>=0?1:0)+d.checkAddRewardRP(5)>0?1:0,i+=IS(F).GetStoreRed();break;case S.SchoolTurn:i+=IS(P).getRedNum(t);break;case S.Strategy:i+=IS(Q).getRedNum();break;case S.AutumnPass:i+=IS(G).getPassRedNum();break;case S.AutumnGift:i+=IS(G).GetGiftRed();break;case S.AutumnRiddles:i+=IS(G).getRiddlesRedNum();break;case S.AutumnFind:i+=IS(G).getFindRedNum();break;case S.AutumnCard:i+=IS(G).GetNewCardMsgRed();break;case S.AutumnGame:i+=IS(G).getGameRed();break;case S.Childhood:i+=IS(D).getPassRedNum(),i+=IS(D).GetStoreRed(),i+=IS(D).GetTurnRed();break;case S.Halloween:i+=IS(U).getPassRedNum(),i+=IS(U).GetStoreRed(),i+=IS(U).GetTurnRed(),i+=IS(U).GetGiftRed(),i+=IS(U).getPvpRed();break;case S.Seven2:i+=IS(H).canGetReward2()?1:0,i+=IS(H).getBossRed();break;case S.Seven:i+=IS(H).canGetReward()?1:0;break;case S.WeeklyCard:i+=IS(p).getRedNum();break;case S.OpenTask:for(var n,o=this.activityInfoDict[t],s=IS(_).GetAcivityGift(v.Activity,o.type,o.round),r=e(s);!(n=r()).done;){var c=n.value;if(0==c.price){var u=IS(_).GetPayGiftInfo(c.id);if(!u||2!=u.rewardState){i++;break}}}break;case S.Reverse:i+=IS(B).getRedNum();break;case S.OpenGaCha:i+=IS(K).getRedNum(t);break;case S.Frog:i+=IS(T).GetRedNum();break;case S.FrogFlappy:i+=IS(T).getFlappyFrogRed();break;case S.FrogLogin:i+=IS(T).GetLoginRedNum();break;case S.Sakura:i+=IS(x).getRedNum();break;case S.FPS:i+=IS(E).getRedNum();break;case S.RobCase:i+=IS(N).getPassRedNum(),i+=IS(N).getPvpRed(),i+=IS(N).GetStoreRed(),i+=IS(P).getRedNum(S.RobCaseTurn);break;case S.Monopoly:break;case S.Loopy:i+=IS(b).GetRedNum();break;case S.PoolParty:i+=IS(L).GetRedNum();break;case S.PoolPartyEnd:i+=IS(L).GetEndRedNum();break;case S.PoolPartyEndLogin:i+=IS(L).GetLoginRedNum();break;case S.MaydayDraw:i+=IS(j).GetDrawBallRedNum();break;case S.MergeServers:i+=IS(O).GetRedNum();break;case S.MergeCohesion:i+=IS(O).GetCohesionRed()}return i},t.GetTaskRedNum=function(t){var e=0,i=this.activityInfoDict[t];if(i&&i.state!=k.Null){var a=i.task_list;for(var n in a){if(t!=S.FrogGame||45002!=i.task_list[n].group_id)if(a.hasOwnProperty(n))a[n].state==C.CanGet&&(e+=1)}var o=i.group_task_list;for(var s in o){if(o.hasOwnProperty(s))o[s].state==C.CanGet&&(e+=1)}}return 43==t&&this.updateShareRed(e),e},t.updateShareRed=function(t){IS(o).changeValue("AutumnShare_redPoint",t)},t.CheckMainIcon=function(t){var e,i=this;if(t.activityCfg&&(t.state==k.Preview&&1==t.activityCfg.pre_display&&(e=!0),t.activityCfg.main_icon>0&&!e)){var a=s.serverTime;if(this.GetEndTime(t)-a>0){var n=t.activityCfg.activity_group,o=this.showIconInfo[n];null==o&&(o=[],this.showIconInfo[n]=o),o.push(t),o.sort((function(t,e){var a=i.GetIconSortTime(t),n=i.GetIconSortTime(e);return a!=n?a-n:t.id-e.id}))}}},t.UpdateMainIcon=function(){for(var t=0;t<this.showedIconList.length;t++){var e=this.showedIconList[t];IS(l).removeIcon(e.activityCfg.main_icon)}this.showedIconList=[];var i=s.serverTime,a=0;for(var n in this.showIconInfo)if(this.showIconInfo.hasOwnProperty(n)){var o=this.showIconInfo[n];if(null!=o&&o.length>0){var r=o[0];if(r.activityCfg.main_icon>0){var c=!0;(a=this.GetEndTime(r)-i)<=0&&(c=!1),c&&(IS(l).addIcon(r.activityCfg.main_icon,{leftTime:1==r.activityCfg.countdown?a:0,isPre:r.state==k.Preview}),this.showedIconList.push(r))}}}},t.DelMainIcon=function(t){if(t.activityCfg){var e=this.showedIconList.indexOf(t);e>=0&&this.showedIconList.splice(e,1),IS(l).removeIcon(t.activityCfg.main_icon);var i,a=this.showIconInfo[t.activityCfg.activity_group];if(null!=a)if((e=a.indexOf(t))>=0&&(a.splice(e,1),a.length<=0&&delete this.showIconInfo[t.activityCfg.activity_group]),null!=a&&a.length>0){i=!0;var n=a[0],o=this.GetEndTime(n)-s.serverTime;o<=0&&(i=!1),i&&(IS(l).addIcon(n.activityCfg.main_icon,{leftTime:1==n.activityCfg.countdown?o:0,isPre:t.state==k.Preview}),this.showedIconList.push(n))}}},t.GetActivityList=function(){return this.activityInfoDict},t.GetActivityInfo=function(t){return this.activityInfoDict[t]},t.GetRoundCfg=function(t,e){var i=configActivity_term.getDatas();for(var a in i)if(i.hasOwnProperty(a)){var n=i[a];if(t==n.type&&e>=n.round_range[0]&&e<=n.round_range[1])return n}return printLogErr("活动类型："+t+"  期数："+e+"  无活动期数表配置"),null},t.ShowSysTips=function(t){for(var e=r.LIMITED_RANK_SYSTEM_DETAILS,i="",o=0;o<e.length;o++)e[o][0]==t&&(i=GetLanguage(e[o][1]));""!=i&&f.showBoxTip({tip:i,btnCnt:1,horizontalAlign:a.uiMirror?n.RIGHT:n.LEFT})},t.SendSign=function(t){if(A[t]){var e=this.activityInfoDict[t];e&&e.state>k.Null&&IS(I).send_24_22(t)}},t.UpdateSignRed=function(t){var e=this.signInfo[t];this.loginSignRed[t]=0,e&&e.day>e.get_day.length&&w[t]&&(this.loginSignRed[t]=1),IS(o).changeValue("act_Sign_"+t,this.loginSignRed[t]),this.UpdateMainRedByActType(t)},t.GetSignRed=function(t){var e;return null!=(e=this.loginSignRed[t])?e:0},t.SetSignInfo=function(t){this.signInfo[t.act_type]={act_type:t.act_type,day:t.day,get_day:t.get_day},this.signInfo[t.act_type].get_day=t.get_day,this.UpdateSignRed(t.act_type),normalEvent.emit(m.OnLoginSignUpdate,t.act_type)},t.UpdateSignInfo=function(t){var e=this.signInfo[t.act_type];e&&(e.get_day=t.get_day,this.UpdateSignRed(t.act_type),normalEvent.emit(m.OnLoginSignUpdate,t.act_type))},t.GetSignInfo=function(t){return this.signInfo[t]},t.UpdateGiftList=function(t){var i,a=t.act_type,n=null!=(i=this.giftInfo[a])?i:{act_type:a};1==t.page&&(n={list:[],dict:{}}),n.page=t.page,n.cnt=t.cnt;for(var o,s=e(null!=(r=t.gift_list)?r:[]);!(o=s()).done;){var r,c=o.value;n.dict[c.id]=c,n.list.push(c)}t.gift_list.length<10&&(n.max_page=!0),this.giftInfo[a]=n,normalEvent.emit(m.OnActivityGiftUpdate)},t.UpdateGiftOpen=function(t){var e,i=t.act_type,a=null!=(e=this.giftInfo[i])?e:{act_type:i};a.cnt=t.cnt,a.dict&&a.dict[t.id]&&(a.dict[t.id].is_open=1),this.giftInfo[i]=a,normalEvent.emit(m.OnActivityGiftOpen,t)},t.GetGiftInfo=function(t){return this.giftInfo[t]},t.updateBoxInfo=function(t){var e,i=t.act_type,a=null!=(e=this.boxInfo[i])?e:{};a.id=t.id,a.act_type=i,a.getBigBox=a.type&&2!=a.type&&2==t.type,a.type=t.type,a.auto_next=t.auto_next,a.box_id=t.box_id,a.choose=t.choose,a.left_reward=t.left_reward,a.right_reward=t.right_reward,a.cnt=t.cnt,a.lucky_list=t.lucky_list,this.boxInfo[i]=a,normalEvent.emit(m.OnActivityBoxUpdate)},t.updateBoxAuto=function(t){var e=this.boxInfo[t.act_type];e&&(e.auto_next=t.auto_next,this.boxInfo[t.act_type]=e,normalEvent.emit(m.OnActivityBoxAutoUpdate))},t.getBoxInfo=function(t){return this.boxInfo[t]},t.updateFindList=function(t){var a,n=t.act_type,o=null!=(a=this.findInfo[n])?a:{};o.total_reward=t.total_reward_type,o.list={};for(var s,r=e(t.pig_info);!(s=r()).done;){var c=s.value;o.list[c.id]=c.state}this.findInfo[n]=o,normalEvent.emit(m.OnActivityFindUpdate),IS(i).UpdateMainRedByActType(n)},t.updateFind=function(t){var e=t.act_type,a=this.findInfo[t.act_type];a&&(0==t.pig_id?a.total_reward=1:a.list[t.pig_id]=2,normalEvent.emit(m.OnActivityFindUpdate,t),IS(i).UpdateMainRedByActType(e))},t.getCurFind=function(t){var e=this.findInfo[t];if(!e)return 0;var i=[];for(var a in e.list)if(e.list.hasOwnProperty(a)){var n=e.list[a];i.push({id:a,state:n})}i.sort((function(t,e){var i=configMoonfestival_search.getDataByKey(t.id),a=configMoonfestival_search.getDataByKey(e.id);return i.rank_num-a.rank_num}));for(var o=0,s=i;o<s.length;o++){var r=s[o];if(1==r.state)return r.id}return 0},t.isAllFind=function(t){var a=IS(i).GetActivityInfo(t);if(!a)return!1;var n=this.findInfo[t];if(!n)return!1;for(var o,s=configMoonfestival_search.getDatas(),r=e(s);!(o=r()).done;){var c,d=o.value;if(d.type==a.type&&d.group_id==a.roundCfg.group_id)if(2!=(null!=(c=n.list[d.id])?c:0))return!1}return!0},t.getFindInfo=function(t){return this.findInfo[t]},t.updateCollectInfo=function(t){var e,a,n,o=t.act_type,s=null!=(e=this.collectInfo[o])?e:{};s.act_type=o,s.send_times=t.send_times,s.ask_times=t.ask_times,s.recv_times=t.recv_times,s.recv_list=c.clone(null!=(a=t.recv_list)?a:[]),s.send_list=c.clone(null!=(n=t.send_list)?n:[]),this.collectInfo[o]=s,normalEvent.emit(m.OnActivityCollectInfo),IS(i).UpdateMainRedByActType(o)},t.updateCollectAsk=function(t){var e=t.act_type,i=this.collectInfo[e];i&&(i.ask_times=t.ask_times,normalEvent.emit(m.OnActivityCollectInfo))},t.updateCollectSend=function(t){var e=t.act_type,i=this.collectInfo[e];i&&(i.send_times=t.send_times,normalEvent.emit(m.OnActivityCollectInfo))},t.updateCollectRecv=function(t){var e=t.act_type,i=this.collectInfo[e];i&&(i.recv_times=t.recv_times,normalEvent.emit(m.OnActivityCollectInfo))},t.updateCollectMsg=function(t){var e=t.act_type,a=this.collectInfo[e];if(a){if(0==t.type){var n=a.recv_list.findIndex((function(e){return e.id==t.card_msg.id}));n>=0?a.recv_list[n]=t.card_msg:a.recv_list.push(t.card_msg)}else if(1==t.type){var o=a.send_list.findIndex((function(e){return e.id==t.card_msg.id}));o>=0?a.send_list[o]=t.card_msg:a.send_list.push(t.card_msg)}normalEvent.emit(m.OnActivityCollectInfo),IS(i).UpdateMainRedByActType(e)}},t.updateCollectChat=function(t,e){if(1==e){this.collectChatInfo={};for(var i=0;i<t.status_list.length;i++){var a=t.status_list[i];this.collectChatInfo[a.k]=a.v}}else this.collectChatInfo[t.chat_status.k]=t.chat_status.v;normalEvent.emit(m.OnActivityCollectChatInfo)},t.updateCollectShowInfo=function(t){var e,a,n,o=t.act_type,s=null!=(e=this.collectShowInfo[o])?e:{};s.act_type=t.act_type,s.luck=null!=(a=t.luck)?a:[],s.reward_list=null!=(n=t.reward_list)?n:[],this.collectShowInfo[o]=s,normalEvent.emit(m.OnActivityCollectInfo),IS(i).UpdateMainRedByActType(o)},t.getCollectInfo=function(t){return this.collectInfo[t]},t.getCollectShowInfo=function(t){return this.collectShowInfo[t]},t.getCollectChatInfo=function(){return this.collectChatInfo},t.updateEggInfo=function(t){var a,n,o=t.act_type,s=null!=(a=this.eggInfo[o])?a:{};s.act_type=t.act_type,s.ceng=t.ceng,s.pos_rewards=[];for(var r,c=e(null!=(d=t.pos_rewards)?d:[]);!(r=c()).done;){var d,u=r.value;s.pos_rewards[u.pos]=u}s.choose_list=null!=(n=t.choose_list)?n:[],s.choose_goods=t.choose_goods,s.total=t.total,s.sum_rewards=[];for(var f,l=e(null!=(_=t.sum_rewards)?_:[]);!(f=l()).done;){var _,v=f.value;s.sum_rewards[v]=!0}this.eggInfo[o]=s,normalEvent.emit(m.OnActivityEggUpdate),IS(i).UpdateMainRedByActType(o)},t.updateEggChoose=function(t){var e=t.act_type,i=this.eggInfo[e];i&&(i.choose_goods=t.reward,normalEvent.emit(m.OnActivityEggUpdate))},t.updateEggOpen=function(t){var i=t.act_type,a=this.eggInfo[i];if(a){a.total=t.total;for(var n,o=e(null!=(s=t.pos_rewards)?s:[]);!(n=o()).done;){var s,r=n.value;a.pos_rewards[r.pos]=r}normalEvent.emit(m.OnActivityEggOpen,t)}},t.updateEggNumReward=function(t){var a=t.act_type,n=this.eggInfo[a];if(n){for(var o,s=e(null!=(r=t.sum_rewards)?r:[]);!(o=s()).done;){var r,c=o.value;n.sum_rewards[c]=!0}normalEvent.emit(m.OnActivityEggReward),IS(i).UpdateMainRedByActType(a)}},t.getEggInfo=function(t){return this.eggInfo[t]},t.updateLotteryInfo=function(t){var a,n,o=t.act_type,s=null!=(a=this.lotteryInfo[o])?a:{};s.act_type=t.act_type,s.round=t.round,s.round_cfg_id=t.round_cfg_id,s.count=t.count,s.remain_to_mid=t.remain_to_mid,s.lucky_list=null!=(n=t.lucky_list)?n:[],s.count_reward_list=[];for(var r,c=e(null!=(d=t.count_reward_list)?d:[]);!(r=c()).done;){var d,u=r.value;s.count_reward_list[u]=!0}s.draw_count_list=[];for(var f,l=e(null!=(_=t.draw_count_list)?_:[]);!(f=l()).done;){var _,v=f.value;s.draw_count_list[v.k]=v.v}s.choose_list=[];for(var y,g=e(null!=(h=t.choose_list)?h:[]);!(y=g()).done;){var h,p=y.value;s.choose_list[p.k]=p.v}this.lotteryInfo[o]=s,normalEvent.emit(m.OnActivityLotteryUpdate),IS(i).UpdateMainRedByActType(o)},t.updateLotteryCallBack=function(t){this.isLotteryAnim=!0,normalEvent.emit(m.OnActivityLotteryCallBack,t)},t.updateLotteryReward=function(t){var e=t.act_type,a=this.lotteryInfo[e];a&&(a.count_reward_list[t.cfg_id]=!0,normalEvent.emit(m.OnActivityLotteryReawrdUpdate),IS(i).UpdateMainRedByActType(t.act_type))},t.updateLotteryChoose=function(t){var e=t.act_type,i=this.lotteryInfo[e];i&&(i.count_reward_list[t.cfg_id]=t.choose_id,normalEvent.emit(m.OnActivityLotteryChooseUpdate))},t.getLotteryCost=function(t){var e=this.GetActivityInfo(t);return e?configDouble_draw.getDatas().find((function(i){return i.act_type==t&&i.group_id==e.roundCfg.group_id})).draw_expand:0},t.getLotteryDrawReward=function(t){var e=this.GetActivityInfo(t);return e?configDouble_draw.getDatas().find((function(i){return i.act_type==t&&i.group_id==e.roundCfg.group_id})).draw_reward:0},t.getLotteryInfo=function(t){return this.lotteryInfo[t]},i}());i._RF.pop()}}}));

