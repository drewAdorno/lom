System.register("chunks:///_virtual/ActivityMergeServersMarryView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeUtil.ts","./index57.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./MainViewModel.ts","./UIDefine.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,r,s,a,o,c,l,f,u;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Button,r=e.Label},function(e){s=e.default},null,function(e){a=e.default},function(e){o=e.ActivityType,c=e.ActivityState},function(e){l=e.MainViewModel},function(e){f=e.PanelTabType},function(e){u=e.BaseView}],execute:function(){i._RF.push({},"20b8bg39bhK9oqfD0bwhWwE","ActivityMergeServersMarryView",void 0);e("default",function(e){function i(){var t;return(t=e.call(this)||this).txtLeftTime=void 0,t.deltaTime=0,t.leftTime=0,t.canUpdate=!1,t.name="ActivityMergeServersMarryView",t.url="ui/module/activityMergeServers/ActivityMergeServersMarryView",t}t(i,e);var u=i.prototype;return u.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,n.EventType.CLICK,(function(){e.close()}));var i=this.findChild("btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){e.close()})),this.txtLeftTime=this.findChildComponent("view/nodeTime/txtLeftTime",r);var s=this.findChild("view/btnGift");this.addComponentCallbackListener(s,n.EventType.CLICK,(function(){uiMgr.openView("ActivityMergeServersMarryGiftView",o.MergeServersMarry)}));var a=this.findChild("view/btn");this.addComponentCallbackListener(a,n.EventType.CLICK,(function(){IS(l).TryJumpToMainViewPanel(f.Main_Mystery)&&(uiMgr.close("ActivityMergeServersView"),e.close())}))},u.registerUpdateHandler=function(){},u.onAfterOpen=function(){var e,t=IS(a).GetActivityInfo(o.MergeServersMarry),i=null!=(e=t.state_time[t.state])?e:t.state_time[c.Open];this.leftTime=i.end_time-s.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=s.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026)},u.onBeforeClose=function(){this.canUpdate=!1},u.onDestroy=function(){},u.onUpdate=function(e){this.canUpdate&&(this.deltaTime=this.deltaTime+e,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=s.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},i}(u));i._RF.pop()}}}));

