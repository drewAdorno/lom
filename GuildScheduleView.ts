System.register("chunks:///_virtual/GuildScheduleView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./MessageView.ts","./GuildWarControl.ts","./GvGDataCache.ts","./GvGDefine.ts","./MainViewModel.ts","./RoleDataCache.ts","./GuildDataCache.ts","./GuildDefine.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,d,h,l,c,u,r,f,v,p,G,C,g,I,m,w;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.ScrollView,a=t.Label,d=t.Sprite,h=t.Layout},function(t){l=t.ListItem},function(t){c=t.default},null,function(t){u=t.default},function(t){r=t.default},function(t){f=t.GvGDataCache},function(t){v=t.GvGStep},function(t){p=t.MainViewModel},function(t){G=t.RoleDataCache},function(t){C=t.default},function(t){g=t.GuildEventDefine},function(t){I=t.PanelTabType,m=t.OpenFunction},function(t){w=t.BaseView}],execute:function(){n._RF.push({},"cb9b69WDl9Jhq6G4SDUEtZ/","GuildScheduleView",void 0);var x=1,y=(t("default",function(t){function n(){var i;return(i=t.call(this)||this).scroll=void 0,i.tabBtns=[],i.curIndex=void 0,i.name="GuildSchduleView",i.url="ui/module/guild/GuildSchduleView",i}i(n,t);var a=n.prototype;return a.onInit=function(){var t=this,i=this.findChild("content/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));for(var e=function(i){var e=c.findChild(t.node,"content/buttonList/item"+i),n={itemGo:e,normalGo:c.findChild(e,"normal"),selectedGo:c.findChild(e,"select"),index:i};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.SetIndex(n.index)})),t.tabBtns[i]=n},n=1;n<=2;n++)e(n);var a=this.findChildComponent("content/ScrollView",s);this.scroll=this.addUIList(a,y)},a.onAfterOpen=function(){this.SetIndex(x),this.refreshList()},a.registerUpdateHandler=function(){this.addEvent(g.GUILD_ACT_INFO_UPDATE,this.refreshList,this)},a.SetIndex=function(t){this.curIndex!=t&&(this.curIndex>0&&(this.tabBtns[this.curIndex].selectedGo.active=!1,this.tabBtns[this.curIndex].normalGo.active=!0),this.curIndex=t,this.tabBtns[this.curIndex].normalGo.active=!1,this.tabBtns[this.curIndex].selectedGo.active=!0,this.refreshList())},a.refreshList=function(){for(var t,i=[],n=e(configActivity_schedule.getDatas());!(t=n()).done;){var o=t.value;o.time_type==this.curIndex&&1==o.is_show&&IS(G).CheckFuncOpen(o.funcopen)&&i.push(o.id)}i.push(99),this.scroll.scrollTo(0),this.scroll.datas=i},a.onBeforeClose=function(){},a.onDestroy=function(){},n}(w)),function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtName=void 0,i.txtIng=void 0,i.txtTime=void 0,i.img=void 0,i.btnRule=void 0,i.btnGoto=void 0,i.imgGuild=void 0,i.node1=void 0,i.node2=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){var t=this;this.txtName=c.findChildComponent(this.node,"node1/txtName",a),this.txtIng=c.findChild(this.node,"node1/txtIng"),this.node1=c.findChild(this.node,"node1"),this.node2=c.findChild(this.node,"node2"),this.txtTime=c.findChildComponent(this.node,"node1/txtTime",a),this.img=c.findChildComponent(this.node,"node1/img",d),this.imgGuild=c.findChild(this.node,"node1/guild"),this.view.dealMirrorLayout(c.findChildComponent(this.node,"node1/guild",h)),this.btnRule=c.findChild(this.node,"node1/btnRule"),this.view.addComponentCallbackListener(this.btnRule,o.EventType.CLICK,(function(){u.showBoxTip({title:t.data.name,tip:t.data.desc,btnCnt:1})})),this.btnGoto=c.findChild(this.node,"node1/btnGoto"),this.view.addComponentCallbackListener(this.btnGoto,o.EventType.CLICK,(function(){t.onClickGoto()}))},n.onRender=function(t,i){if(99==t)return this.node1.active=!1,void(this.node2.active=!0);this.data=configActivity_schedule.getDataByKey(t),this.node1.active=!0,this.node2.active=!1,this.txtName.string=this.data.name,this.txtTime.string=this.data.time_desc,this.imgGuild.active=2==this.data.type,this.view.loadIcon(this.img,"jzrc",this.data.icon),this.btnGoto.active=1==this.data.schedule_button;var e=IS(C).act_list;e[this.data.id]&&1==e[this.data.id]?(this.btnGoto.getComponent(d).grayscale=!1,this.txtTime.node.active=!1,this.txtIng.active=!0):(this.btnGoto.getComponent(d).grayscale=!0,this.txtTime.node.active=!0,this.txtIng.active=!1),0==this.data.mainpage_button&&(this.btnGoto.getComponent(d).grayscale=!1,4==this.data.id&&IS(f).step==v.NoInfo&&[0,3,2].includes(IS(f).ifJoin)&&(this.btnGoto.getComponent(d).grayscale=!0),this.txtTime.node.active=!0,this.txtIng.active=!1)},n.onClickGoto=function(){var t=this.data.id;if(2!=this.data.type||IS(G).HasGuild()){var i=IS(C).act_list;i[this.data.id]&&1==i[this.data.id]?1==t?(IS(p).TryJumpToMainViewPanel(I.Main_Guild),this.view.close()):2==t?(uiMgr.openView("ChatView",2),this.view.close()):3==t&&IS(G).CheckFuncOpen(m.FUNC_LEAGUE_GVE_CHAPTER,!0)&&(IS(r).reqGuildBossInfo(),this.view.close()):4==t?this.onGvGClick():u.showFlyTip(GetLanguage(200357))}else u.showFlyTip(GetLanguage(200251))},n.onGvGClick=function(){var t=IS(f).step;if(t!=v.NoInfo){if(t==v.SignUp||t==v.Matching)return IS(p).TryJumpToMainViewPanel(I.Main_Guild),uiMgr.openView("GvGSignUpView"),void this.view.close();if(0==IS(f).ifJoin)return uiMgr.openView("GvGStoreView"),void u.showFlyTip(GetLanguage(200344));if(3==IS(f).ifJoin)return uiMgr.openView("GvGStoreView"),void u.showFlyTip(GetLanguage(200345));if(2==IS(f).ifJoin)return uiMgr.openView("GvGStoreView"),void u.showFlyTip(GetLanguage(200358));IS(p).TryJumpToMainViewPanel(I.Main_Guild),uiMgr.openView("GvGMapView"),this.view.close()}else u.showFlyTip(GetLanguage(200343))},e}(l));n._RF.pop()}}}));

