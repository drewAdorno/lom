System.register("chunks:///_virtual/MarryClosetView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ItemIcon.ts","./ObjectUtil.ts","./ArtifactDataCache.ts","./CommonModel.ts","./EquipDataCache.ts","./EquipModel.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./WingDataCache.ts","./MarryControl.ts","./MarryDataCache.ts","./MarryDefine.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,a,s,r,l,c,h,u,d,f,b,p,m,v,S,y,g,I,T,C,L,w,q,G,k,_,D,E,R;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Sprite,a=t.UITransform,s=t.ScrollView,r=t.Label,l=t.RichText,c=t.Vec3,h=t.sys,u=t.Color,d=t.Size,f=t.js},function(t){b=t.ListItem},function(t){p=t.default},function(t){m=t.default},function(t){v=t.default},null,function(t){S=t.IconAseetType},function(t){y=t.default},function(t){g=t.ArtifactDataCache},function(t){I=t.CommonModel},function(t){T=t.EquipDataCache},function(t){C=t.EquipModel},function(t){L=t.default},function(t){w=t.RoleDataCache},function(t){q=t.PlayerAttr},function(t){G=t.WingDataCache},function(t){k=t.default},function(t){_=t.default},function(t){D=t.MarryEventDefine},function(t){E=t.OpenFunction},function(t){R=t.BaseView}],execute:function(){i._RF.push({},"08a81kBNttBca9fn+hSWTMo","MarryClosetView",void 0);var B=0,M=2,W=0,A=1,N=2,F=0,K=1,z=(t("default",function(t){function i(){var e;return(e=t.call(this)||this).SubTabType={Job:{IconSize:new d(82,82),ListShowType:1,ShowType:B,WearState:F,GetList:function(){for(var t=IS(w).GetJob(),e=[];0!=t;){var i=configJobs.getDataByKey(t),n=i.job_icon.split("#"),o=IS(w).GetRoleAttr(q.ROLE_ATTR_GENDER),a="";a=1==n.length?i.job_icon:0==o||1==o?n[1]:n[2],e.push({id:i.id,icon:a,iconAtlas:"player",name:i.name}),t=i.front_job}return e.reverse(),e},GetState:function(t){return IS(w).GetRoleAttr(q.ROLE_ATTR_STYLE)==t?e.getEquipState(t,N):e.getEquipState(t,A)},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.job=t,i},WearSendProto:function(t){e.ChangeEquipState(t)},ReqInfoFromServ:function(){IS(L).send_3_16()}},HairColor:{IconSize:new d(77,77),IconType:o.Type.SLICED,ListShowType:1,ShowType:B,WearState:F,GetList:function(){for(var t=configSkin.getDataByList("type",1),e=[],i=0;i<t.length;i++)e.push({id:t[i].id,icon:t[i].icon,iconAtlas:"player",name:t[i].name});return e},GetState:function(t){var i=IS(w).GetUsedSkinList(),n=IS(w).GetSkinList(),o=W;return null==n[1][t]?IS(w).CanUnLockSkin(t)&&(o=W):(o=A,i[1]==t&&(o=N)),e.getEquipState(t,o)},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.color=t,i},WearSendProto:function(t){e.ChangeEquipState(t)},ReqInfoFromServ:function(){IS(L).send_3_16()}},Weapon:{NotSort:!0,ListShowType:1,ShowType:B,WearState:F,GetList:function(){return e.GetEquipList(1)},GetState:function(t){return e.getEquipState(t,e.GetEquipState(1,t))},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.weapon=e.getShowEquipByLocation(1,t),i.shenqi=0,i},WearSendProto:function(t){e.ChangeEquipState(t)}},Artifact:{ListShowType:1,ShowType:B,WearState:K,GetList:function(){for(var t=[],e=configArtifact.getDatas(),i=0;i<e.length;i++)if(IS(g).checkArtifactCanShow(e[i].id)){var n=configColor.getDataByKey(e[i].quality);t.push({id:e[i].id,icon:e[i].icon_small,iconAtlas:"icon_item",colorBg:n.path,name:e[i].name})}return t},GetState:function(t){var i=IS(g).getAllArtifactState(t),n={1:W,2:A,3:A,4:N,5:W};return e.getEquipState(t,n[i])},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.shenqi=t,i},WearSendProto:function(t){e.ChangeEquipState(t)},ReqInfoFromServ:function(){IS(L).send_3_16()}},HeadSkin:{NotSort:!0,ListShowType:1,ShowType:B,WearState:F,GetList:function(){return e.GetEquipList(2)},GetState:function(t){return e.getEquipState(t,e.GetEquipState(2,t))},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.ornaments=e.getShowEquipByLocation(2,t),i},WearSendProto:function(t){e.ChangeEquipState(t)}},FaceSkin:{NotSort:!0,ListShowType:1,ShowType:B,WearState:F,GetList:function(){return e.GetEquipList(3)},GetState:function(t){return e.getEquipState(t,e.GetEquipState(3,t))},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.face=e.getShowEquipByLocation(3,t),i},WearSendProto:function(t){e.ChangeEquipState(t)}},Wing:{ListShowType:1,IconSize:new d(74,74),ShowType:B,WearState:K,GetList:function(){for(var t=[],e=configBack_decoration.getDatas(),i=0;i<e.length;i++){var n=e[i],o=configColor.getDataByKey(n.quality);IS(G).checkWingCanShow(n.id)&&t.push({id:n.id,icon:n.icon_small,name:n.name,iconAtlas:"icon_item",colorBg:o.path})}return t},GetState:function(t){var i=IS(G).getWingState(t),n={1:W,2:A,3:A,4:N,5:W};return e.getEquipState(t,n[i])},GetSkinInfo:function(t){var i=e.GetDefaultRoleData();return i.wing=t,i},WearSendProto:function(t){e.ChangeEquipState(t)}}},e.tabItemDefine=[{id:0,name:GetLanguage(201421),subTabList:[{id:0,name:GetLanguage(201423),type:e.SubTabType.Job},{id:1,name:GetLanguage(201424),type:e.SubTabType.HairColor}]},{id:1,name:GetLanguage(201427),subTabList:[{id:0,name:GetLanguage(201428),type:e.SubTabType.HeadSkin},{id:1,name:GetLanguage(201429),type:e.SubTabType.FaceSkin}]},{id:2,name:GetLanguage(201434),subTabList:[{id:0,name:GetLanguage(201436),type:e.SubTabType.Wing,IsOpen:function(){return IS(w).CheckFuncOpen(E.FUNC_BACK)}}]}],e.tabItemList=[],e.tabSubItemList=[],e.subItemListTrans=void 0,e.mainType=null,e.subType=null,e.showType=void 0,e.selectInfo=void 0,e.scroll1=void 0,e.scroll2=void 0,e.nodeModelRoot=void 0,e.skinModel=void 0,e.roleIcon=void 0,e.bubbleIcon=void 0,e.bubbleIconTrans=void 0,e.bubbleLabel=void 0,e.playerName=void 0,e.time=void 0,e.timer=void 0,e.confirmBtn=void 0,e.lockDes=void 0,e.confirmBtnTxt=void 0,e.isNotChange=void 0,e.cacheRoleData=void 0,e.isWaitData=!1,e.name="MarryClosetView",e.url="ui/module/marry/MarryClosetView",e}e(i,t);var u=i.prototype;return u.onInit=function(){var t=this,e=this.findChild("btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.onCloseClick()})),this.loadIcon(this.findChildComponent("btnClose/Sprite",o),"common","common_ICON_tuichuanniu");for(var i=function(e){var i=t.tabItemDefine[e];t.findChildComponent("view/tabList/btnList/btn"+(e+1)+"/selected/name",r).string=i.name,t.findChildComponent("view/tabList/btnList/btn"+(e+1)+"/normal/name",r).string=i.name,t.addComponentCallbackListener(t.findChild("view/tabList/btnList/btn"+(e+1)),n.EventType.CLICK,(function(){t.SelectTab(e)}));var o={red:t.findChild("view/tabList/btnList/btn"+(e+1)+"/red"),selected:t.findChild("view/tabList/btnList/btn"+(e+1)+"/selected"),normal:t.findChild("view/tabList/btnList/btn"+(e+1)+"/normal")};t.tabItemList.push({info:i,item:o})},c=0;c<this.tabItemDefine.length;c++)i(c);this.subItemListTrans=this.findChildComponent("view/tabSubList",a);for(var h=function(e){var i={node:t.findChild("view/tabSubList/btnList/btn"+(e+1)),red:t.findChild("view/tabSubList/btnList/btn"+(e+1)+"/red"),selected:t.findChild("view/tabSubList/btnList/btn"+(e+1)+"/selected"),name:t.findChildComponent("view/tabSubList/btnList/btn"+(e+1)+"/name",r),selectedName:t.findChildComponent("view/tabSubList/btnList/btn"+(e+1)+"/selected/name",r)};t.addComponentCallbackListener(t.findChild("view/tabSubList/btnList/btn"+(e+1)),n.EventType.CLICK,(function(){t.SelectSubTab(e)})),t.tabSubItemList.push(i)},u=0;u<3;u++)h(u);var d=this.findChildComponent("view/scroll1",s);this.scroll1=this.addUIList(d,z);var f=this.findChildComponent("view/scroll2",s);this.scroll2=this.addUIList(f,U),this.nodeModelRoot=this.findChild("view/role"),this.roleIcon=this.findChildComponent("view/roleIcon",o),this.bubbleIcon=this.findChildComponent("view/bubble",o),this.bubbleIconTrans=this.findChildComponent("view/bubble",a),this.bubbleLabel=this.findChildComponent("view/bubble/txt",r),this.playerName=this.findChildComponent("view/name/txt",r),this.time=this.findChildComponent("view/time",l),this.lockDes=this.findChildComponent("view/lockDes",r),this.confirmBtn=this.findChild("view/confirmBtn"),this.addComponentCallbackListener(this.confirmBtn,n.EventType.CLICK,(function(){t.isNotChange||t.showType.WearSendProto(t.selectInfo.id)})),this.confirmBtnTxt=this.findChildComponent("view/confirmBtn/Label",r)},u.onCloseClick=function(){this.close()},u.registerUpdateHandler=function(){this.addEvent(D.MARRY_PARTY_FIGURE_CHANGE,this.RefreshInfo,this),this.addEvent(D.MARRY_PARTY_FIGURE_CHANGE,this.RefeshWaitData,this)},u.onAfterOpen=function(){IS(k).send_marry_party_figure_c2s(),this.isWaitData=!1,IS(_).GetPartyFigure()?(this.mainType=null,this.subType=null,this.SelectTab(0)):this.isWaitData=!0},u.RefeshWaitData=function(){this.isWaitData&&(this.isWaitData=!1,this.mainType=null,this.subType=null,this.SelectTab(0))},u.SelectTab=function(t){if(this.mainType!=t){this.mainType=t,this.subType=null;for(var e=0;e<this.tabItemList.length;e++){var i=this.tabItemList[e].item;i.selected.active=this.mainType==e,i.normal.active=this.mainType!=e}this.SelectSubTab(0)}},u.SelectSubTab=function(t){if(this.subType!=t){this.subType=t;for(var e=this.tabItemDefine[this.mainType].subTabList,i=0,n=0;n<this.tabSubItemList.length;n++){var o=this.tabSubItemList[n];if(e[n]){if(e[n].IsOpen&&!e[n].IsOpen()){o.node.active=!1;continue}i++,o.node.active=!0,o.selected.active=this.subType==n,o.name.string=e[n].name,o.selectedName.string=e[n].name}else o.node.active=!1}this.subItemListTrans.width=195*i;var a=this.tabItemDefine[this.mainType].subTabList[this.subType];this.showType=a.type,this.selectInfo=null;var s=this.showType,r=s.GetList();s.NotSort||r.sort((function(t,e){var i=s.GetState(t.id),n=s.GetState(e.id),o=i==A||i==N;return o!=(n==A||n==N)?o?-1:1:t.id<e.id?-1:1}));for(var l=0,h=0;h<r.length;h++){var u=r[h];if(s.GetState(u.id)==N){l=h;break}}1==s.ListShowType?(this.scroll1.scrollView.node.active=!0,this.scroll2.scrollView.node.active=!1,this.scroll1.scrollView.scrollToTop(),this.scroll1.datas=r):(this.scroll1.scrollView.node.active=!1,this.scroll2.scrollView.node.active=!0,this.scroll2.scrollView.scrollToTop(),this.scroll2.datas=r),s.ReqInfoFromServ&&s.ReqInfoFromServ(),s.ShowType==B?(this.nodeModelRoot.active=!0,this.roleIcon.node.active=!1,this.bubbleIcon.node.active=!1):(null!=this.skinModel&&(this.removeUnitModel(this.skinModel),this.skinModel=null),this.nodeModelRoot.active=!1,s.ShowType==M?(this.bubbleIcon.node.active=!0,this.roleIcon.node.active=!1):(this.roleIcon.node.active=!0,this.bubbleIcon.node.active=!1,s.IconScale?this.roleIcon.node.scale=new c(s.IconScale,s.IconScale,s.IconScale):this.roleIcon.node.scale=c.ONE)),this.cacheRoleData=null,this.SetSelectData(r[l])}},u.SetSelectData=function(t){if(!this.selectInfo||t.id!=this.selectInfo.id){this.selectInfo=t;var e=this.showType;e.CheckNewItem&&e.CheckNewItem(t.id),this.RefreshInfo()}},u.RefreshInfo=function(){var t=this;if(this.selectInfo&&IS(_).GetPartyFigure()){var e=this.showType;1==e.ListShowType?this.scroll1.updateAll():this.scroll2.updateAll(),this.timer&&(this.removeTimer(this.timer),this.timer=null),this.playerName.string=this.selectInfo.name,this.isNotChange=!1;var i=e.GetState(this.selectInfo.id);if(i!=W?(this.confirmBtn.active=!0,this.lockDes.node.active=!1,e.WearState==F?(this.confirmBtnTxt.string=i==N?GetLanguage(200549):GetLanguage(200550),this.isNotChange=i==N):this.confirmBtnTxt.string=i==N?GetLanguage(201449):GetLanguage(200550)):(this.lockDes.node.active=!0,e.GetWayDes?this.lockDes.string=e.GetWayDes(this.selectInfo.id):this.lockDes.string=GetLanguage(201439),this.confirmBtn.active=!1),e.ShowType==B){var n=e.GetSkinInfo(this.selectInfo.id);this.RefreshModel(n),this.time.node.active=!1}else{var o=this.roleIcon;if(e.ShowType==M&&(o=this.bubbleIcon,this.bubbleIconTrans.contentSize=this.selectInfo.showSize,this.bubbleLabel.color=this.selectInfo.fontColor),this.loadIcon(o,this.selectInfo.iconAtlas,this.selectInfo.icon),this.selectInfo.time&&this.selectInfo.time>0&&this.selectInfo.time>v.serverTime){this.time.node.active=!0;var a="",s=this.selectInfo.time-v.serverTime,r=function(){s=t.selectInfo.time-v.serverTime;var e=Math.floor(s/3600)%24,i=Math.floor(s/86400);a=i>0?m.formatStrWithMirrorDeal(GetLanguage(200006),i,e):v.formatTimeForSecond(s),a=f.formatStr("<color=#3ff125>%s</color>",a),t.time.string=f.formatStr("<b><outline width = 2 color=#181b1f>%s%s</outline></b>",GetLanguage(201440),a),s<=0&&t.timer&&(t.removeTimer(t.timer),t.timer=null)};r(),s>0&&(this.timer=this.addTimer(1,s,r))}else this.time.node.active=!1}}},u.RefreshModel=function(t){if(this.cacheRoleData){var e=!0;for(var i in this.cacheRoleData)if(t[i]!=this.cacheRoleData[i]){e=!1;break}if(e)return}null!=this.skinModel&&(this.removeUnitModel(this.skinModel),this.skinModel=null),this.cacheRoleData=t,this.skinModel=this.addUnitModel(t,null,1.3),h.uiMirror&&(this.getUnitModel(this.skinModel).dir=-1)},u.onBeforeClose=function(){this.timer&&(this.removeTimer(this.timer),this.timer=null)},u.onDestroy=function(){},u.GetEquipList=function(t){for(var e,i=IS(w).GetJob(),n=configJobs.getDataByKey(i).transmog_list||[],o={},a=0;a<n.length;a++)o[n[a]]=!0;var s=configEquipment.getDatas(),r=t,l=[],c={};for(var h in s){var u=s[h];1!=u.is_hide&&(u.part==r&&1==o[u.job]&&(c[u.icon]?u.id<c[u.icon]&&(c[u.icon]=u.id):c[u.icon]=u.id))}for(var d in IS(T).equipCidToGot){var f=configEquipment.getDataByKey(Number(d));c[f.icon]&&(c[f.icon]=Number(d))}for(var b in c){var p=c[b],m=configEquipment.getDataByKey(p),v=configColor.getDataByKey(m.quality),y=!0;if(1==m.preview)y=0!=m.id&&IS(C).checkEquipGot(m.id);y&&l.push({id:m.id,icon:m.icon,name:m.name,iconAtlas:m.atlas,colorBg:v.path,iconType:S.ICON_SPRITE})}l.sort((function(t,e){var i=IS(C).checkEquipGot(t.id);return i!=IS(C).checkEquipGot(e.id)?1==i?-1:1:t.id<e.id?-1:1}));var g=((e={})[1]="zjm_ui_wuqi",e[2]="zjm_ui_goushi",e[3]="zjm_ui_mianshi",e);return 1!=r&&l.unshift({id:-1,icon:g[t],iconAtlas:"equip",colorBgAtlas:"icon_equip",name:GetLanguage(200267),colorBg:"zjm_ui_pinzhikuangwu"}),l.unshift({id:0,name:GetLanguage(200266),icon:"zbhh_ui_guding",iconAtlas:"equip",colorBg:"zjm_ui_pinzhikuangbai"}),l},u.GetEquipState=function(t,e){var i=0!=e&&!IS(C).checkEquipGot(e)||!1;return-1==e&&(i=!1),i?W:e==IS(C).getEquipFigureByLocation(t)?N:A},u.GetDefaultRoleData=function(){for(var t=IS(_).GetPartyFigure(),e=0,i=t.skin_list||[],n=0;n<i.length;n++)2==i[n].k&&(e=i[n].v);return{job:t.job_figure,dressId:e,gender:t.gender,color:t.hair_figure,weapon:IS(I).GetKvListByK(t.equip_list,0),ornaments:IS(I).GetKvListByK(t.equip_list,1),face:IS(I).GetKvListByK(t.equip_list,2),mount:t.mount_figure,shenqi:t.artifact_figure,wing:IS(I).GetKvListByK(t.equip_list,4),parent:this.nodeModelRoot}},u.getShowEquipByLocation=function(t,e){return-1==e?0:0!=e?e:IS(C).getWearEquipCfgIdByLocation(t)},u.getEquipState=function(t,e){var i=IS(_).GetPartyFigure();if(i){var n=this.tabItemDefine[this.mainType];if(e==N&&(e=A),n){var o=n.subTabList[this.subType];if(o.type==this.SubTabType.Job){if(e==A)return i.job_figure==t?N:e}else if(o.type==this.SubTabType.Artifact){if(e==A)return i.artifact_figure==t?N:e}else if(o.type==this.SubTabType.HairColor){if(e==A)return i.hair_figure==t?N:e}else if((o.type==this.SubTabType.Weapon||o.type==this.SubTabType.HeadSkin||o.type==this.SubTabType.FaceSkin||o.type==this.SubTabType.Wing)&&e==A){var a=0;switch(o.type){case this.SubTabType.Weapon:a=0;break;case this.SubTabType.HeadSkin:a=1;break;case this.SubTabType.FaceSkin:a=2;break;case this.SubTabType.Wing:a=4}return(i.equip_list.length>0&&IS(I).GetKvListByK(i.equip_list,a)||0)==t?N:e}}return e}},u.ChangeEquipState=function(t){var e=y.clone(IS(_).GetPartyFigure()),i=this.tabItemDefine[this.mainType];if(i){var n=i.subTabList[this.subType];if(n.type==this.SubTabType.Job)e.job_figure=t;else if(n.type==this.SubTabType.Artifact)e.artifact_figure=e.artifact_figure==t?0:t;else if(n.type==this.SubTabType.HairColor)e.hair_figure=t;else if(n.type==this.SubTabType.Weapon||n.type==this.SubTabType.HeadSkin||n.type==this.SubTabType.FaceSkin||n.type==this.SubTabType.Wing){var o=0;switch(n.type){case this.SubTabType.Weapon:o=1;break;case this.SubTabType.HeadSkin:o=2;break;case this.SubTabType.FaceSkin:o=3;break;case this.SubTabType.Wing:o=5}var a=!1;if(e.equip_list)for(var s=0;s<e.equip_list.length;s++){var r=e.equip_list[s];if(r.k==o){r.v=r.v==t?0:t,a=!0;break}}a||(e.equip_list||(e.equip_list=[]),e.equip_list.push({k:o,v:t}))}}IS(k).send_marry_party_figure_c2s(e)},i}(R)),function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).qualityItem=void 0,e.normalItem=void 0,e.qualityBg=void 0,e.qualityIcon=void 0,e.qualityDress=void 0,e.qualityIconTrans=void 0,e.qualityNormalBg=void 0,e.bg=void 0,e.icon=void 0,e.iconTrans=void 0,e.dress=void 0,e.red=void 0,e.select=void 0,e.timesp=void 0,e.lock=void 0,e}e(i,t);var s=i.prototype;return s.onInit=function(){var t=this;this.view.addComponentCallbackListener(this.node,n.EventType.CLICK,(function(){t.onItemClick()})),this.qualityItem=p.findChild(this.node,"qualityItem"),this.normalItem=p.findChild(this.node,"normalItem"),this.red=p.findChild(this.node,"red"),this.qualityDress=p.findChild(this.node,"qualityItem/dress"),this.qualityBg=p.findChildComponent(this.node,"qualityItem/quality",o),this.qualityNormalBg=p.findChildComponent(this.node,"qualityItem/bg",o),this.qualityIcon=p.findChildComponent(this.node,"qualityItem/icon",o),this.qualityIconTrans=p.findChildComponent(this.node,"qualityItem/icon",a),this.bg=p.findChildComponent(this.node,"normalItem/bg",o),this.dress=p.findChild(this.node,"normalItem/dress"),this.icon=p.findChildComponent(this.node,"normalItem/icon",o),this.iconTrans=p.findChildComponent(this.node,"normalItem/icon",a),this.select=p.findChild(this.node,"selected"),this.view.loadIcon(p.findChildComponent(this.node,"qualityItem/dress/icon",o),"player","grxx_ui_gouxuan"),this.view.loadIcon(p.findChildComponent(this.node,"normalItem/dress/icon",o),"player","grxx_ui_gouxuan"),this.timesp=p.findChild(this.node,"timesp"),this.lock=p.findChild(this.node,"lock")},s.onRender=function(t,e){var i,n=this.view.showType,a=n.GetState(t.id),s=this.icon,r=this.dress,l=this.iconTrans,c=this.bg;t.colorBg?(c=this.qualityNormalBg,s=this.qualityIcon,r=this.qualityDress,l=this.qualityIconTrans,this.qualityBg.grayscale=a==W,this.qualityItem.active=!0,this.normalItem.active=!1,this.view.loadIcon(this.qualityBg,null!=(i=t.colorBgAtlas)?i:"icon_equip",t.colorBg)):(this.normalItem.active=!0,this.qualityItem.active=!1);r.active=a==N,this.lock.active=a==W,c.grayscale=a==W,s.grayscale=a==W,n.GetRed?this.red.active=n.GetRed(t.id):this.red.active=!1;var h=this.view.selectInfo;this.select.active=h.id==t.id,this.view.loadIcon(s,t.iconAtlas,t.icon,null,t.iconType),this.timesp.active=t.time&&t.time>0,n.IconType&&(s.type=n.IconType),n.IconSize?(s.sizeMode=o.SizeMode.CUSTOM,l.contentSize=n.IconSize):s.sizeMode=o.SizeMode.TRIMMED},s.onItemClick=function(){this.view.SetSelectData(this.data)},i}(b)),U=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).qualityBg=void 0,e.icon=void 0,e.dress=void 0,e.bg=void 0,e.select=void 0,e.timesp=void 0,e.lock=void 0,e.red=void 0,e.bubble=void 0,e.bubbleTrans=void 0,e.bubbleTxt=void 0,e}e(i,t);var s=i.prototype;return s.onInit=function(){var t=this;this.view.addComponentCallbackListener(this.node,n.EventType.CLICK,(function(){t.onItemClick()})),this.red=p.findChild(this.node,"red"),this.dress=p.findChild(this.node,"dress"),this.icon=p.findChildComponent(this.node,"icon",o),this.bg=p.findChildComponent(this.node,"bg",o),this.select=p.findChild(this.node,"selected"),this.timesp=p.findChild(this.node,"timesp"),this.lock=p.findChild(this.node,"lock"),this.bubble=p.findChildComponent(this.node,"bubble",o),this.bubbleTrans=p.findChildComponent(this.node,"bubble",a),this.bubbleTxt=p.findChildComponent(this.node,"bubble/txt",r)},s.onRender=function(t,e){var i=this.icon,n=this.dress,o=this.view.showType,a=o.GetState(t.id);n.active=a==N,this.lock.active=a==W,this.bg.grayscale=a==W,this.select.active=this.view.selectInfo.id==t.id,this.timesp.active=t.time&&t.time>0,o.GetRed?this.red.active=o.GetRed(t.id):this.red.active=!1,o.ShowType==M?(i=this.bubble,this.icon.node.active=!1,this.bubble.node.active=!0,this.bubble.grayscale=a==W,this.bubbleTxt.color=a==W?new u("#969696"):t.fontColor,this.bubbleTrans.contentSize=t.listSize):(this.icon.grayscale=a==W,this.bubble.node.active=!1,this.icon.node.active=!0),this.view.loadIcon(i,t.iconAtlas,t.icon)},s.onItemClick=function(){this.view.SetSelectData(this.data)},i}(b);i._RF.pop()}}}));

