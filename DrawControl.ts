System.register("chunks:///_virtual/DrawControl.ts",["cc","./PetModel.ts","./SkillModel.ts","./DrawDataCache.ts"],(function(t){"use strict";var n,e,o,a;return{setters:[function(t){n=t.cclegacy},function(t){e=t.PetModel},function(t){o=t.SkillModel},function(t){a=t.DrawDataCache}],execute:function(){n._RF.push({},"624a8KVweJKiKEtal02yOBv","DrawControl",void 0);t("default",function(){var t=n.prototype;function n(){netManager.addEventListener("draw.draw_info_s2c",this.on_draw_info_s2c,this),netManager.addEventListener("draw.draw_card_s2c",this.on_draw_card_s2c,this)}return t.clear=function(){console.log("清理DrawControl")},t.reqDrawInfo=function(){netManager.send("draw.draw_info_c2s",{})},t.on_draw_info_s2c=function(t){IS(a).initDrawInfo(t.pool_list)},t.reqDraw=function(t,n){netManager.send("draw.draw_card_c2s",{pool_id:t,num:n})},t.on_draw_card_s2c=function(t){IS(a).updateDrawInfo(t.pool_list);for(var n,r,i=t.reward_list,c={},l=0;l<i.length;l++){n=i[l].gtid;var d=configGoods.getDataByKey(n);r=d.effect[0],(3==d.type&&null==IS(o).getSystemSkillInfoBySkillId(r)||4==d.type&&null==IS(e).getPetInfoByPetId(r))&&(c[n]=!0)}uiMgr.openView("DrawResultView",i,t.pool_list.pool_id,c)},n}());n._RF.pop()}}}));

