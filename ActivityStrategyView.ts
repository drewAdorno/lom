System.register("chunks:///_virtual/ActivityStrategyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedPoint.ts","./RedPointMgr.ts","./TimeUtil.ts","./index57.ts","./BagDefine.ts","./ResItems.ts","./MessageView.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,s,o,a,r,d,h,c,u,y,l,v,f,g;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,s=t.Vec2,o=t.Label,a=t.js},function(t){r=t.RedPointType},function(t){d=t.RedPointMgr},function(t){h=t.default},null,function(t){c=t.BagEventDefine},function(t){u=t.ResItems},function(t){y=t.default},function(t){l=t.default},function(t){v=t.ActivityType,f=t.ActivityState},function(t){g=t.BaseView}],execute:function(){i._RF.push({},"62143kBKWNMsamLZakMyc15","ActivityStrategyView",void 0);var p=[1038];t("default",function(t){function i(){var e;return(e=t.call(this)||this).resItems=void 0,e.txtLeftTime=void 0,e.txtPassValue=void 0,e.deltaTime=0,e.leftTime=0,e.canUpdate=!1,e.btnEquip=void 0,e.btnExtreme=void 0,e.btnMilestone=void 0,e.gift=void 0,e.shop=void 0,e.timer=void 0,e.name="ActivityStrategyView",e.url="ui/module/ActivityStrategy/ActivityStrategyView",e.fullScreen=!0,e}e(i,t);var g=i.prototype;return g.onInit=function(){var t=this,e=this.findChild("view/btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()})),this.btnEquip=this.findChild("view/btnEquip"),this.addComponentCallbackListener(this.btnEquip,n.EventType.CLICK,(function(){IS(l).GetActivityInfo(v.Strategy).state==f.Open?uiMgr.openView("ActivityStrategyRoleInfoView"):y.showFlyTip(GetLanguage(200026))}));var i=this.findChild("view/btnEquip/Label");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){IS(l).GetActivityInfo(v.Strategy).state==f.Open?uiMgr.openView("ActivityStrategyRoleInfoView"):y.showFlyTip(GetLanguage(200026))})),this.addRedPoint("ActivityStrategy/changeJob",this.btnEquip,new s(112,126),r.Dot,1.5),IS(d).updateRed("ActivityStrategy/changeJob"),this.btnExtreme=this.findChild("view/btnExtreme"),this.addComponentCallbackListener(this.btnExtreme,n.EventType.CLICK,(function(){IS(l).GetActivityInfo(v.Strategy).state==f.Open?uiMgr.openView("ActivityStrategyDungeonView"):y.showFlyTip(GetLanguage(200026))}));var a=this.findChild("view/btnExtreme/Label");this.addComponentCallbackListener(a,n.EventType.CLICK,(function(){IS(l).GetActivityInfo(v.Strategy).state==f.Open?uiMgr.openView("ActivityStrategyDungeonView"):y.showFlyTip(GetLanguage(200026))})),this.addRedPoint("ActivityStrategy/dungeon",this.btnExtreme,new s(112,126),r.Dot,1.5),IS(d).updateRed("ActivityStrategy/dungeon"),this.btnMilestone=this.findChild("view/btnMilestone"),this.addComponentCallbackListener(this.btnMilestone,n.EventType.CLICK,(function(){uiMgr.openView("ActivityStrategyMilestoneView")}));var h=this.findChild("view/btnMilestone/Label");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){uiMgr.openView("ActivityStrategyMilestoneView")})),this.addRedPoint("ActivityStrategy/Milestone",this.btnMilestone,new s(112,126),r.Dot,1.5),IS(d).updateRed("ActivityStrategy/Milestone"),this.gift=this.findChild("view/gift"),this.addComponentCallbackListener(this.gift,n.EventType.CLICK,(function(){IS(l).GetActivityInfo(v.Strategy).state==f.Open?uiMgr.openView("ActivityStrategyTimeRewardView"):y.showFlyTip(GetLanguage(200026))})),this.addRedPoint("ActivityStrategy/timeReward",this.gift,new s(30,25),r.Dot),IS(d).updateRed("ActivityStrategy/timeReward"),this.shop=this.findChild("view/shop"),this.addComponentCallbackListener(this.shop,n.EventType.CLICK,(function(){IS(l).GetActivityInfo(v.Strategy).state==f.Open?uiMgr.openView("ActivityStrategyPayView"):y.showFlyTip(GetLanguage(200026))})),this.addRedPoint("ActivityStrategy/shop",this.shop,new s(30,25),r.Dot),IS(d).updateRed("ActivityStrategy/shop"),this.resItems=new u(this),this.resItems.init(p),this.txtLeftTime=this.findChildComponent("view/nodeTime/txtTime",o),this.txtPassValue=this.findChildComponent("myScore/Label",o)},g.registerUpdateHandler=function(){this.addEvent(c.GOODS_INFO_UPDATE,this.updateResShow,this)},g.onAfterOpen=function(){var t=this;IS(d).updateRed("ActivityStrategy/changeJob"),this.updateResShow();var e=IS(l).GetActivityInfo(v.Strategy);if(e){var i,n=null!=(i=e.state_time[e.state])?i:e.state_time[f.Open];this.leftTime=n.end_time-h.serverTime,this.timer&&(this.removeTimer(this.timer),this.timer=null),this.leftTime>0?(this.txtLeftTime.string=a.formatStr("%s",h.formatActivityTimeStringForSecond(this.leftTime)),this.timer=this.addTimer(1,this.leftTime,(function(){var e=n.end_time-h.serverTime;t.txtLeftTime.string=e>0?a.formatStr("%s",h.formatActivityTimeStringForSecond(e)):GetLanguage(200026)}))):this.txtLeftTime.string=GetLanguage(200026)}},g.updateResShow=function(){this.resItems.update()},g.onBeforeClose=function(){this.removeTimer(this.timer),this.timer=null},g.onUpdate=function(t){},g.onDestroy=function(){},i}(g));i._RF.pop()}}}));

