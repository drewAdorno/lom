System.register("chunks:///_virtual/GvGGroupView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GuildPinItem.ts","./NodeUtil.ts","./BaseView.ts","./GvGControl.ts","./GvGDefine.ts"],(function(t){"use strict";var n,i,e,o,s,d,a,l,r,u,c,h,f;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.Button,o=t.Sprite,s=t.Label,d=t.js,a=t.sys,l=t.Layout},function(t){r=t.GuildPinItem},function(t){u=t.default},function(t){c=t.BaseView},function(t){h=t.default},function(t){f=t.GvGEventDefine}],execute:function(){i._RF.push({},"9c570Zn8tNIsKcG8KojKeKM","GvGGroupView",void 0);t("default",function(t){function i(){var n;return(n=t.call(this)||this).imgType=void 0,n.imgJb=void 0,n.txtGroup=void 0,n.nodeNeedPointDesc=void 0,n.txtNeedPoint=void 0,n.curInfo=void 0,n.btnPool=void 0,n.btnReward=void 0,n.guildItems=void 0,n.name="GvGGroupView",n.url="ui/module/gvg/GvGGroupView",n}n(i,t);var c=i.prototype;return c.onInit=function(){var t=this,n=this.findChild("imgMask");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.onMaskClick()}));var i=this.findChild("content/btnClose");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()}));var c=this.findChild("content/title/btnTip");this.addComponentCallbackListener(c,e.EventType.CLICK,(function(){uiMgr.openView("GvGRuleTips",[GetLanguage(201645),GetLanguage(2616451)])})),this.imgType=this.findChildComponent("content/title/imgTitle",o),this.imgJb=this.findChildComponent("content/imgJb",o),this.txtGroup=this.findChildComponent("content/desc1/txtRanking",s),this.nodeNeedPointDesc=this.findChild("content/desc2/txNeedPointDesc"),this.txtNeedPoint=this.findChildComponent("content/desc2/txtNeedPoint",s),this.btnPool=this.findChild("content/btnPool"),this.btnPool.active=!1,this.addComponentCallbackListener(this.btnPool,e.EventType.CLICK,(function(){uiMgr.openView("GvGGroupPoolView")})),this.btnReward=this.findChild("content/btnReward"),this.addComponentCallbackListener(this.btnReward,e.EventType.CLICK,(function(){uiMgr.openView("GvGRankingRewardView")})),this.guildItems=[];for(var h=1;h<=4;h++){var f=this.findChild(d.formatStr("content/group/guild%s",h)),g=u.findChild(f,"GuildPinItem");this.guildItems.push({node:f,nodeEmpty:u.findChild(f,"emptyGuild"),nodeGuild:g,txtName:u.findChildComponent(f,"txtNameGuild",s),guildFlag:new r(this,g)})}a.uiMirror&&(this.dealMirrorLayout(this.findChildComponent("content/desc1",l)),this.dealMirrorLayout(this.findChildComponent("content/desc2",l)))},c.registerUpdateHandler=function(){this.addEvent(f.GVG_RANK_INFO_BACK,this.onGvGRankInfoBack,this)},c.onMaskClick=function(){this.close()},c.onAfterOpen=function(){IS(h).reqGvGRank()},c.updateInfo=function(){if(null!=this.curInfo){var t=this.curInfo.ranking,n=t<=0;this.loadIcon(this.imgType,n?"gvg_season":"gvg_rank",n?"gvg_ui_txt12_rss":"gvg_dw_img_fenzu");var i=n?null:configFamiliybrawl_rank.getDataByKey(t);this.loadIcon(this.imgJb,"icon_gvg",n?"gvg_icon_qingtong":i.rank_picture),this.txtGroup.string=n?GetLanguage(201570):i.rank_name;var e=configFamiliybrawl_rank.getDatas().length;if(this.nodeNeedPointDesc.active=!n&&t<e,this.txtNeedPoint.node.active=!n&&t<e,!n&&t<e){var o=configFamiliybrawl_rank.getDataByKey(t+1);this.txtNeedPoint.string=String(Math.max(0,o.point_require-this.curInfo.score))}this.btnReward.active=!n;for(var s=this.curInfo.match_list||[],d=0;d<=3;d++){var a=this.guildItems[d],l=s[d];a.nodeEmpty.active=null==l,a.nodeGuild.active=null!=l,a.txtName.node.active=null!=l,null!=l&&(a.txtName.string=l.guild_name,a.guildFlag.SetItem(l.guild_flag))}}},c.onBeforeClose=function(){this.curInfo=null},c.onDestroy=function(){},c.onGvGRankInfoBack=function(t){this.curInfo=t,this.updateInfo()},i}(c));i._RF.pop()}}}));

