System.register("chunks:///_virtual/FlyPetLookTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ItemIcon.ts","./PrivilegeDataCache.ts","./FlyPetDataCache.ts","./FlyPetDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,l,s,a,r,d,h,c,p,f,_,u,m,v,y;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.Sprite,l=t.Label,s=t.Node,a=t.UITransform,r=t.Size,d=t.ScrollView,h=t.js},function(t){c=t.ListItem},function(t){p=t.default},function(t){f=t.default},null,function(t){_=t.IconAseetType},function(t){u=t.PrivilegeDataCache},function(t){m=t.default},function(t){v=t.FlyPetQualityRes},function(t){y=t.BaseView}],execute:function(){e._RF.push({},"2f592Z+JLBFb7VHntYdhm3c","FlyPetLookTipsView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).pet_frame=void 0,i.pet_icon=void 0,i.pet_name=void 0,i.pet_lv=void 0,i.pet_age=void 0,i.pet_use_num=void 0,i.pet_grow_lab=void 0,i.pet_skill_frame=void 0,i.pet_skill_icon=void 0,i.pet_skill_name=void 0,i.pet_skill_desc=void 0,i.pet_skill_cd=void 0,i.beskill_list=void 0,i.quality_list={},i.pet_info=void 0,i.open_type=0,i.other_times=0,i.name="FlyPetLookTipsView",i.url="ui/module/flypet/FlyPetLookTipsView",i}i(e,t);var c=e.prototype;return c.onInit=function(){var t,i=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){i.onMaskClick()}));var h=this.findChild("root/btnClose");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){i.onMaskClick()})),this.pet_frame=this.findChildComponent("root/notice/head/frame",o),this.pet_icon=this.findChildComponent("root/notice/head/icon",o),this.pet_name=this.findChildComponent("root/notice/txtName",l),this.pet_lv=this.findChildComponent("root/notice/txtLv",l);var c=this.findChild("root/notice/ageIcon");this.addComponentCallbackListener(c,n.EventType.CLICK,(function(){var t=IS(m).GetUseTimeByAge(i.pet_info.generation),e=Math.floor(t/3600),n=Math.ceil((t-3600*e)/60);uiMgr.openView("JobSkillTipsView",f.formatStrWithMirrorDeal(GetLanguage(205242),i.pet_info.generation,e,n),c)})),this.pet_age=this.findChildComponent("root/notice/ageIcon/txtAge",l),this.pet_use_num=this.findChildComponent("root/notice/useNode/num",l);var _=this.findChild("root/notice/useNode/tips");this.addComponentCallbackListener(_,n.EventType.CLICK,(function(){var t=205154,e=1;1==i.open_type&&(t=205153,e=0);for(var n,o=i.other_times,l=IS(m).GetUseCDCfg(o,e),s=configFly.getDataByKey(i.pet_info.config_id),a=0;a<l.cd.length;a++)l.cd[a][0]==s.quality&&(n=l.cd[a]);var r=1;IS(u).checkPrivilegeCardHasBuy(6)&&(r=1-configPrivilege_card.getDataByKey(6006).value[2]/1e4);var d=Math.floor(n[1]*r/3600),h=Math.ceil((n[1]*r-3600*d)/60);uiMgr.openView("JobSkillTipsView",f.formatStrWithMirrorDeal(GetLanguage(t),o,d,h),_)}));for(var v=((t={})[1]=205054,t[2]=205055,t[3]=205056,t),y=1;y<=3;y++){var C=this.findChild("root/notice/quality/quality"+y),k=p.findChildComponent(C,"txtQuality",l);k.string=GetLanguage(v[y]),this.quality_list[y]={node:C,name:k}}this.pet_grow_lab=this.findChildComponent("root/notice/grow/txtAttrBase",l),this.pet_skill_frame=this.findChildComponent("root/nodeSkill/Frame",o),this.pet_skill_icon=this.findChildComponent("root/nodeSkill/Icon",o),this.pet_skill_name=this.findChildComponent("root/nodeSkill/txtName",l),this.pet_skill_desc=this.findChildComponent("root/nodeSkill/ScrollView/view/content/item",l),this.pet_skill_desc.node.on(s.EventType.SIZE_CHANGED,(function(){var t=i.findChildComponent("root/nodeSkill/ScrollView/view/content",a),e=i.findChildComponent("root/nodeSkill/ScrollView/view/content/item",a);t.contentSize=new r(t.contentSize.x,e.height+10)})),this.pet_skill_cd=this.findChildComponent("root/nodeSkill/cd/cd",l);var S=this.findChildComponent("root/nodeChange/ScrollView",d);this.beskill_list=this.addUIList(S,g)},c.onMaskClick=function(){this.close()},c.onAfterOpen=function(){var t,i;if(this.pet_info=this.openArgs[0],this.other_times=null!=(t=this.openArgs[1])?t:0,this.open_type=null!=(i=this.openArgs[2])?i:0,1==this.open_type){var e=IS(m).GetHaveUseItemById(this.pet_info.id);this.other_times=e?e.times:0}this.updateData()},c.registerUpdateHandler=function(){},c.onBeforeClose=function(){},c.updateEntry=function(t){var i,e=null!=t?t:[],n=((i={})[3]=1,i[2]=2,i[5]=3,i[1]=4,i[4]=5,i[6]=6,i);e.sort((function(t,i){var e=configFly_entry.getDataByKeys("id",t.k,"level",t.v),o=configFly_entry.getDataByKeys("id",i.k,"level",i.v);return e.quality==o.quality?t.id-i.id:n[e.quality]-n[o.quality]})),this.beskill_list.datas=e},c.updateSkill=function(t){var i=null!=t?t:[];if(!(i.length<=0)){var e=i[0][0],n=configSkill.getDataByKey(e),o=configSkill_level.getDataByKeys("id",e,"level",i[0][1]);this.loadIcon(this.pet_skill_frame,"icon_skill",h.formatStr("common_ICON_jinengkuang0%s",n.quality)),this.loadIcon(this.pet_skill_icon,"icon_skill",n.icon,null,_.ICON_SPRITE),this.pet_skill_name.string=n.name,this.pet_skill_desc.string=f.formatStr.apply(f,[o.desc].concat(o.desc_parm))}},c.updateData=function(){var t=configFly.getDataByKey(this.pet_info.config_id);this.pet_name.string=t.name,1==IS(m).GetIsBianYi(this.pet_info.entry_list)&&(this.pet_name.string=f.formatStrWithMirrorDeal(GetLanguage(205206),t.name)),""!=this.pet_info.name&&(this.pet_name.string=this.pet_info.name),this.pet_lv.string="Lv."+this.pet_info.level,this.loadIcon(this.pet_frame,"icon_equip",v[t.quality]),this.loadIcon(this.pet_icon,"icon_flypet",t.icon),this.pet_age.string=f.formatStrWithMirrorDeal(GetLanguage(205240),this.pet_info.generation);for(var i=1;i<=3;i++)i==t.quality?this.quality_list[i].node.active=!0:this.quality_list[i].node.active=!1;this.pet_grow_lab.string=this.pet_info.growth/1e4+"";var e=configFly_advance.getDataByKeys("id",this.pet_info.config_id,"advance_level",this.pet_info.step);this.updateSkill(e.fly_skill),this.updateEntry(this.pet_info.entry_list),this.pet_use_num.string=this.other_times+""},c.onDestroy=function(){},e}(y));var g=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).addIcon=void 0,i.downIcon=void 0,i.txtName=void 0,i.skill_cfg=void 0,i.quality_list={},i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.txtName=p.findChildComponent(this.node,"txtName",l),this.addIcon=p.findChild(this.node,"add"),this.downIcon=p.findChild(this.node,"down");for(var i=1;i<=6;i++){var e=p.findChild(this.node,"quality/quality"+i),o=p.findChildComponent(e,"txtQuality",l);this.quality_list[i]={node:e,name:o}}this.view.addComponentCallbackListener(this.node,n.EventType.CLICK,(function(){uiMgr.openView("JobSkillTipsView",f.formatStr.apply(f,[t.skill_cfg.desc].concat(t.skill_cfg.desc_parm)),t.txtName.node)}))},o.onRender=function(t,i){var e=configFly_entry.getDataByKeys("id",t.k,"level",t.v);this.skill_cfg=e,this.txtName.string=e.name;for(var n=1;n<=6;n++)n==e.quality?(this.quality_list[n].node.active=!0,this.quality_list[n].name.string=e.name):this.quality_list[n].node.active=!1},o.onItemClick=function(){},e}(c);e._RF.pop()}}}));

