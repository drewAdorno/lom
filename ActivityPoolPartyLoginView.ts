System.register("chunks:///_virtual/ActivityPoolPartyLoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./BagModel.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,a,o,r,d,c,s,l,f,u,h,g,m,v;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,a=t.Button,o=t.Label},function(t){r=t.ItemGrid},function(t){d=t.default},function(t){c=t.default},function(t){s=t.default},null,function(t){l=t.BagModel},function(t){f=t.default},function(t){u=t.default},function(t){h=t.ActivityEventDefine,g=t.ActivityType,m=t.ActivityState},function(t){v=t.BaseView}],execute:function(){n._RF.push({},"042a5JNBU9L85ha1pWX8WtZ","ActivityPoolPartyLoginView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).rewardList=[],e.txtLeftTime=void 0,e.deltaTime=0,e.leftTime=0,e.canUpdate=!1,e.name="ActivityPoolPartyLoginView",e.url="ui/module/activityPoolParty/ActivityPoolPartyLoginView",e}e(n,t);var v=n.prototype;return v.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,a.EventType.CLICK,(function(){t.close()}));for(var i=1;i<11;i++){var n=d.findChild(this.node,"content/reward/node"+i),r={baseNode:n,check:d.findChild(n,"check"),itemgrid:d.findChild(n,"itemGrid"),canGet:d.findChild(n,"canget"),label:d.findChildComponent(n,"label",o)};this.rewardList.push(r)}this.txtLeftTime=this.findChildComponent("content/txtLeftTime",o)},v.registerUpdateHandler=function(){this.addEvent(h.OnLoginSignUpdate,this.updateInfo,this)},v.onAfterOpen=function(){var t,e=IS(u).GetActivityInfo(g.PoolPartyEndLogin),i=null!=(t=e.state_time[e.state])?t:e.state_time[m.Open];this.leftTime=i.end_time-s.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=s.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026),this.updateInfo()},v.updateInfo=function(){for(var t,e=IS(u).GetActivityInfo(g.PoolPartyEndLogin),n=configAct_login.getDatas(),a=[],o=i(n);!(t=o()).done;){var r=t.value;r.act_type==e.type&&r.group_id==e.roundCfg.group_id&&a.push(r)}a.sort((function(t,e){return t.day-e.day})),this.refreshReward(a)},v.refreshReward=function(t){for(var e,n,a=this,o=IS(u).GetSignInfo(g.PoolPartyEndLogin),d=null!=(e=o.get_day)?e:[],s=function(){var t,e=n.value,i=e[0],s=e[1],h=a.rewardList[i];(h.check.active=d.includes(s.id),h.label.string=c.formatStrWithMirrorDeal(GetLanguage(200319),s.day),o.day>=s.day)?(null!=(t=o.get_day)?t:[]).includes(s.id)?(h.canGet.active=!1,h.check.active=!0,a.adjustMirrorNode(h.check)):(h.canGet.active=!0,h.check.active=!1):(h.canGet.active=!1,h.check.active=!1);new r(a,h.itemgrid,(function(){var t,e=IS(u).GetSignInfo(g.PoolPartyEndLogin);e.day>=s.day?(null!=(t=e.get_day)?t:[]).includes(s.id)?17!=s.id&&IS(l).OpenItemTips(s.reward[0][0],h.itemgrid):IS(f).send_24_23(g.PoolPartyEndLogin,s.id):17!=s.id&&IS(l).OpenItemTips(s.reward[0][0],h.itemgrid)})).SetItemId(s.reward[0][0],s.reward[0][1])},h=i(t.entries());!(n=h()).done;)s()},v.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=s.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},v.onBeforeClose=function(){},v.onDestroy=function(){},n}(v));n._RF.pop()}}}));

