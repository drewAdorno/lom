System.register("chunks:///_virtual/StateCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumDefine.ts","./index28.ts","./UnitIdleState.ts","./UnitMoveState.ts","./UnitHitState.ts","./UnitSkillState.ts","./UnitDizzState.ts","./UnitDeadState.ts","./UnitBornState.ts","./UnitOverState.ts","./UnitHitThrowState.ts"],(function(t){"use strict";var e,i,n,s,a,h,r,u,o,c,S,l;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){n=t.StateType},null,function(t){s=t.UnitIdleState},function(t){a=t.UnitMoveState},function(t){h=t.UnitHitState},function(t){r=t.UnitSkillState},function(t){u=t.UnitDizzState},function(t){o=t.UnitDeadState},function(t){c=t.UnitBornState},function(t){S=t.UnitOverState},function(t){l=t.UnitHitThrowState}],execute:function(){i._RF.push({},"b3133yBeH5FBKVHqsOhVgEP","StateCtr",void 0);t("StateCtr",function(){function t(){this._owner=null,this.currentState=void 0,this.needChangeState=void 0,this.lockCurrenState=void 0,this._stateList=void 0,this._exitCount=0,this.banSkill=0,this.banAct=0,this.dizz=0,this.static=0,this.invincible=0,this.bound=0,this.notControlled=0,this.beControlled=0,this.notGetDamage=0,this.needChangeState=!0;var t=new Array;t.push(new s(this,1)),t.push(new a(this,3)),t.push(new h(this,2)),t.push(new r(this,4)),t.push(new u(this,5)),t.push(new o(this,99)),t.push(new c(this,90)),t.push(new S(this,100)),t.push(new l(this,8)),this._stateList=t}var i=t.prototype;return i.init=function(t){this._owner!=t&&(this._owner=t,this._stateList.forEach((function(e){e._owner=t})))},i.reset=function(){this.banSkill=this.static=this.dizz=0,this.invincible=this.bound=this.notControlled=this.beControlled=this.notGetDamage=0,this.currentState=null,this.needChangeState=!0,this.lockCurrenState=!1},i.onUpdate=function(t){this.dizz>0&&this.currentState.type!=n.Dizz&&this.changeStateType(n.Dizz),null!=this.currentState&&this.currentState.onUpdate(t)},i.changeState=function(t){if(this.checkState(t)){this._exitCount++;var e=this._exitCount;null!=this.currentState&&this.currentState.onExit(),e==this._exitCount?(this._exitCount--,this.currentState=t,this.currentState.onEnter()):this._exitCount--}},i.changeStateType=function(t){var e=this.getState(t);return this.changeState(e),e},i.checkStateType=function(t){var e=this.getState(t);return this.checkState(e)},i.checkState=function(t){return!(this.currentState==t&&!this.currentState.isRepeat)&&(!!this.needChangeState&&!(this.lockCurrenState&&this.currentState.priority>t.priority))},i.getState=function(t){for(var e=0;e<this._stateList.length;++e){var i=this._stateList[e];if(i.type==t)return i}return null},e(t,[{key:"currentStateType",get:function(){return null==this.currentState?n.Dead:this.currentState.type}}]),t}());i._RF.pop()}}}));

