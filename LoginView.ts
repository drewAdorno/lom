System.register("chunks:///_virtual/LoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./BaseView.ts","./LoginControl.ts","./LoginDataCache.ts","./LoginDefine.ts","./PlatformUtil.ts","./GameLoadingView.ts"],(function(t){"use strict";var e,n,i,o,r,s,c,u,a,l,f,v;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Label,o=t.EditBox,r=t.Button},function(t){s=t.default},function(t){c=t.BaseView},function(t){u=t.default},function(t){a=t.LoginDataCache},function(t){l=t.LoginEventDefine},function(t){f=t.PlatformUtil},function(t){v=t.GameLoadingView}],execute:function(){n._RF.push({},"80cc9Z0QVpDcY9p5tLHT4EO","LoginView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).btnServerList=void 0,e.txtServerList=void 0,e.ebAccount=void 0,e.name="LoginView",e.url="ui/module/login/LoginView",e.poolTime=3e3,e}e(n,t);var c=n.prototype;return c.onInit=function(){var t=this;this.btnServerList=this.findChild("btnServerList"),this.txtServerList=this.findChildComponent("btnServerList/txtServerList",i),this.ebAccount=this.findChildComponent("ebAccount",o);var e=this.findChild("btnEnter"),n=this.findChild("btnRefresh");this.addComponentCallbackListener(n,r.EventType.CLICK,(function(){f.restartGame()})),this.addComponentCallbackListener(e,r.EventType.CLICK,(function(){var e=t.ebAccount.string;s.isEmpty(e)||(v.instance.show(),IS(u).loginCenterServer(e,(function(t,e,n){t?IS(u).RequestRoleList(IS(a).plat,IS(a).uid,(function(t,n){t?(IS(u).getRoleidFromRolelist(),IS(u).connectGameServer()):console.error("请求角色列表失败 "+e)})):(console.error("登录中心服失败 "+e),v.instance.showServerCloseTip(n.msg))})))})),this.addComponentCallbackListener(this.btnServerList,r.EventType.CLICK,(function(){uiMgr.openView("ServerListView")}))},c.registerUpdateHandler=function(){this.addEvent(l.LOGIN_SELECT_SERVER,this.onSelectServer,this)},c.onAfterOpen=function(){var t=this;v.instance.close(),IS(u).requestServerListUrl((function(e){if(e){var n=IS(a).loginServer;if(null==n)return;t.txtServerList.string=n.name,t.ebAccount.string=IS(a).uname}}),!0)},c.onBeforeClose=function(){},c.onDestroy=function(){},c.onSelectServer=function(t){IS(a).loginServer=t,this.txtServerList.string=t.name},n}(c));n._RF.pop()}}}));

