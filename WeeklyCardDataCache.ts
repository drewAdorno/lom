System.register("chunks:///_virtual/WeeklyCardDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeUtil.ts","./ActivityDataCache.ts","./ActivityDefine.ts"],(function(t){"use strict";var e,i,a,r,n,o,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){a=t.default},function(t){r=t.default},function(t){n=t.ActivityType,o=t.ActivityState,c=t.ActivityEventDefine}],execute:function(){i._RF.push({},"44428uSFxdNvbrMQbWocSvi","WeeklyCardDataCache",void 0);t("default",function(){var t=i.prototype;function i(){this.isCardBuyed=!1,this.rewardGainRecord=void 0,this.payMallInfo=void 0,this.weeklycardRedPoint=0,this.weeklycardDay=0,this.weeklycardInfo=void 0,this.round=void 0,this.curRewardInfo=void 0,this.totalRewardInfo=void 0,normalEvent.on(c.OnActivityListUpdate,this.updateActivityInfo,this)}return t.clear=function(){},t.updateActivityInfo=function(){if(this.weeklycardInfo=[],IS(r).GetActivityInfo(n.WeeklyCard)){this.round=IS(r).GetActivityInfo(n.WeeklyCard).round;for(var t,i=configWeekly_card.getDatas(),a=e(i);!(t=a()).done;){var o=t.value;1==o.act_group&&this.weeklycardInfo.push(o)}}},t.getRedNum=function(){var t;if(!this.isCardBuyed)return 0;if(!this.weeklycardInfo)return 0;var i=IS(r).GetActivityInfo(n.WeeklyCard),c=null!=(t=i.state_time[i.state])?t:i.state_time[o.Open],d=a.serverTime-c.start_time;this.weeklycardDay=Math.ceil(d/86400);for(var s,u=e(this.weeklycardInfo);!(s=u()).done;){var f=s.value,l=f.day<=this.weeklycardDay,y=this.rewardGainRecord[f.id];if(l&&2!=y)return 1}return 0},i}());i._RF.pop()}}}));

