System.register("chunks:///_virtual/HorseDataChche.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedPointMgr.ts","./TimeUtil.ts","./ObjectUtil.ts","./BagModel.ts"],(function(e){"use strict";var t,n,o,i,r,a;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){o=e.RedPointMgr},function(e){i=e.default},function(e){r=e.default},function(e){a=e.BagModel}],execute:function(){n._RF.push({},"c9b590bdQNDMIAj9lb0fDup","HorseDataChche",void 0);e("HorseDataCache",function(){function e(){this.horse_id=0,this.curLevel=0,this.curexp=void 0,this.skin_list=void 0,this.skill_use=void 0,this.talent_list=[],this.normalMount=void 0}var n=e.prototype;return n.clear=function(){},n.getSkinLevelByID=function(e){var n=0;if(null==this.skin_list)return n;for(var o,i=t(this.skin_list);!(o=i()).done;){var r=o.value,a=r.k,u=r.v;if(a==e){n=u;break}}return n},n.getAllHorseState=function(t){if(!this.normalMount){this.normalMount={};for(var n=configMount_level.getDatas(),o=0;o<n.length;o++)n[o].unlock>0&&!this.normalMount[n[o].unlock]&&(this.normalMount[n[o].unlock]=n[o].level)}return this.normalMount[t]?t==this.horse_id?4:this.curLevel>=this.normalMount[t]?2:1:t==IS(e).horse_id?4:this.getSkinLevelByID(t)>0?2:1},n.getHorseState=function(t){var n=configMount_skin.getDataByKeys("mount_id",t,"skin_level",this.getSkinLevelByID(t));return n||printLogErr("skinid="+t),null==n.expend||0==n.expend.length?t==IS(e).horse_id?4:3:IS(a).getGoodsCountByGoodsGtid(n.expend[0][0])>=n.expend[0][1]?5:t==IS(e).horse_id?4:0==n.attr.length?1:2},n.getTotalLevel=function(){for(var n,o=IS(e).talent_list,i=0,r=t(o);!(n=r()).done;){var a=n.value;a.k;i+=a.v}return i},n.checkUpgradeRP=function(){var t=IS(a).getGoodsCountByGoodsGtid(1008);if(null!=configMount_level.getDataByKey(IS(e).curLevel+1)){var n=configMount_level.getDataByKey(IS(e).curLevel+1).expend_exp;if(t>=(n-=IS(e).curexp))return IS(o).changeValue("horse_upgrade_active",1),1}return IS(o).changeValue("horse_upgrade_active",0),0},n.checkSkinRP=function(){for(var n,i=configMount_skin.getDataByList("skin_level",0),r=t(i);!(n=r()).done;){var a=n.value;if(IS(e).checkHorseCanShow(a.mount_id)&&5==IS(e).getHorseState(a.mount_id))return IS(o).changeValue("horse_skin_unlock_active",1),1}return IS(o).changeValue("horse_skin_unlock_active",0),0},n.checkEnableRP=function(){for(var n,i=IS(e).talent_list,r=0,u=t(i);!(n=u()).done;){var l=n.value;l.k;r+=l.v}var s=configMount_abilitycost.getDatas();if(r>=s[s.length-1].total_level)return 0;var c=configMount_abilitycost.getDataByKey(r);return IS(a).getGoodsCountByGoodsGtid(1025)>=c.cost[0][1]?(IS(o).changeValue("horse_enable_active",1),1):(IS(o).changeValue("horse_enable_active",0),0)},n.checkHorseCanShow=function(e){var t=configMount.getDataByKey(e);if(null==t)return!1;var n=t.open_time;return!!r.isEmpty(n)||i.checkOpenTime(n)},e}());n._RF.pop()}}}));

