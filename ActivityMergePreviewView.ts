System.register("chunks:///_virtual/ActivityMergePreviewView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,r,s,d,a,l,h,c,u;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,r=t.Label,s=t.ScrollView,d=t.Sprite},function(t){a=t.ItemGrid},function(t){l=t.ListItem},function(t){h=t.default},function(t){c=t.default},null,function(t){u=t.BaseView}],execute:function(){n._RF.push({},"f5a725EytVBV5lRd7Cs4PvE","ActivityMergePreviewView",void 0);var v=1,f=2,m=4,g=(t("default",function(t){function n(){var e;return(e=t.call(this)||this).curIndex=0,e.mergeList=void 0,e.rewardList=void 0,e.mergeScroll=void 0,e.rewardScroll=void 0,e.elementGroup=[],e.txtTitle=void 0,e.nodeSelected1=void 0,e.nodeSelected2=void 0,e.name="ActivityMergePreviewView",e.url="ui/module/activityMerge/ActivityMergePreviewView",e}e(n,t);var d=n.prototype;return d.onInit=function(){var t=this,e=this.findChild("view/btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("view/bottomBtn/item1");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.SetIndex(v,!1)}));var n=this.findChild("view/bottomBtn/item2");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.SetIndex(f,!1)})),this.txtTitle=this.findChildComponent("view/nodeTitle/txtTitle",r),this.mergeScroll=this.findChildComponent("view/mergeList",s),this.mergeList=this.addUIList(this.mergeScroll,g),this.rewardScroll=this.findChildComponent("view/rewardList",s),this.rewardList=this.addUIList(this.rewardScroll,w),this.nodeSelected1=this.findChild("view/bottomBtn/item1/selected"),this.nodeSelected2=this.findChild("view/bottomBtn/item2/selected")},d.registerUpdateHandler=function(){},d.onAfterOpen=function(){var t=configMerge_level.getDataByKey(this.openArgs[0]);this.txtTitle.string=c.formatStrWithMirrorDeal(GetLanguage(200797),this.openArgs[0]),m=t.highest_stage,this.elementGroup=t.element_type,this.SetIndex(v,!0)},d.onBeforeClose=function(){},d.onDestroy=function(){},d.onUpdate=function(t){},d.SetIndex=function(t,e){(t!=this.curIndex||e)&&(this.curIndex=t,this.nodeSelected1.active=t==v,this.nodeSelected2.active=t==f,this.mergeList.node.active=t==v,this.rewardList.node.active=t==f,t==v&&this.updateMergeInfo(),t==f&&this.updateRewardInfo())},d.updateMergeInfo=function(){for(var t,e=[],n=i(this.elementGroup);!(t=n()).done;){for(var o=t.value,r=configMerge_element.getDataByList("element_group",o),s=[],d=0;d<6;d++)d<m?s.push(r[d].image):s.push(null);var a={name:r[0].name_group,icons:s};e.push(a)}this.mergeList.datas=e},d.updateRewardInfo=function(){for(var t=[],e=1;e<=3;e++){var i={id:e};t.push(i)}this.rewardList.datas=t},n}(u)),function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtTitle=void 0,e.levelList=[],e}e(i,t);var n=i.prototype;return n.onInit=function(){this.txtTitle=h.findChildComponent(this.node,"imgTitle/txtTitle",r)},n.onRender=function(t,e){this.txtTitle.string=t.name;for(var i=0;i<6;i++){var n=h.findChild(this.node,"levelList/item"+(i+1));this.levelList.push(new p(n,this.view,t.icons[i]))}},i}(l)),p=function(t,e,i){this.node=void 0,this.view=void 0,this.imgIcon=void 0,this.node=t,this.view=e,this.imgIcon=h.findChildComponent(this.node,"imgBg/imgIcon",d),i?this.view.loadIcon(this.imgIcon,"act_merge_main",i):this.node.active=!1},w=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtTitle=void 0,e.txtDesc=void 0,e.rewardList=void 0,e.imgIcon=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.txtTitle=h.findChildComponent(this.node,"imgTitle/txtTitle",r),this.txtDesc=h.findChildComponent(this.node,"txtDesc",r),this.imgIcon=h.findChildComponent(this.node,"imgShadow/imgIcon",d);var t=h.findChildComponent(this.node,"scroll",s);this.rewardList=this.view.addUIList(t,C),this.rewardList.lackCenter=!0},n.onRender=function(t,e){var i=t.id,n=configMerge_box.getDataByKey(i),o=configMerge_level.getDataByKey(this.view.openArgs[0]).chest_spawn[i-1][1]/100;this.view.loadIcon(this.imgIcon,"act_merge_main",n.image),this.txtTitle.string=n.name,this.txtDesc.string=o+"%";var r=configOutput.getDataByList("groupid",n.reward);this.rewardList.datas=r},i}(l),C=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.itemGridNode=h.findChild(this.node,"itemGrid"),this.itemGrid=new a(this.view,this.itemGridNode)},n.onRender=function(t,e){this.itemGrid.SetItemId(t.item[0],t.item[1])},i}(l);n._RF.pop()}}}));

