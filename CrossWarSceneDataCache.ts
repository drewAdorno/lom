System.register("chunks:///_virtual/CrossWarSceneDataCache.ts",["cc","./TimeUtil.ts","./RoleDataCache.ts","./CrossWarDefine.ts"],(function(e){"use strict";var t,o,i,a,s,r,n;return{setters:[function(e){t=e.cclegacy,o=e.Vec2},function(e){i=e.default},function(e){a=e.RoleDataCache},function(e){s=e.SceneObjType,r=e.SceneObjState,n=e.RoleUpdateFlag}],execute:function(){t._RF.push({},"2d921RA+61HK6KzIf9VIqew","CrossWarSceneDataCache",void 0);e("CrossWarSceneDataCache",function(){function e(){this.roleMap={},this.roleUpdateFlag=n.Not,this.roleActions={},this.autoBattle=!1,this.atkType=1,this.currenSceneType=0,this.speedCdTime=0,this.transferCdTime=0,this.attackCd={1:0,2:0,3:0},this.battleAction=void 0,this.loadScene=0,this.roleActions[n.Add]=new Set,this.roleActions[n.Del]=new Set,this.roleActions[n.Move]=new Set,this.roleActions[n.Update]=new Set}var t=e.prototype;return t.getAutoBattleObj=function(e,t){var n=this.roleMap,c=this.attackCd,l=i.serverTime;for(var h in n){var u=n[h];if(u.obj_id!=IS(a).GetRoleId()&&((u.obj_type!=s.Player||u.role.serv_id!=IS(a).GetServerId())&&u.state==r.Normal&&!(2==this.atkType&&u.obj_type!=s.Player||3==this.atkType&&u.obj_type!=s.Monster||c[u.obj_type]>0&&c[u.obj_type]-l>0||!(o.distance(e,u.pos)<=t))))return u}},t.clearActions=function(){for(var e in this.roleActions)this.roleActions[e].clear()},t.clear=function(){},e}());t._RF.pop()}}}));

