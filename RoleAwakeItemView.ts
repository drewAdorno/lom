System.register("chunks:///_virtual/RoleAwakeItemView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./ItemGrid.ts","./ConfigGlobal.ts","./BagModel.ts","./MessageView.ts","./RoleControl.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,s,o,u,d,a,h,m;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,s=t.EditBox},null,function(t){o=t.ItemGrid},function(t){u=t.ConfigGlobal},function(t){d=t.BagModel},function(t){a=t.default},function(t){h=t.default},function(t){m=t.BaseView}],execute:function(){i._RF.push({},"ee7f8FEXaxPQqRCYE3IQx/n","RoleAwakeItemView",void 0);var l=1023,r=u.jobs_wakeup_props_convert[0][0],c=u.jobs_wakeup_props_convert[0][1];t("default",function(t){function i(){var e;return(e=t.call(this)||this).editBox=void 0,e.itemGrid_1=void 0,e.itemGrid_2=void 0,e.useNum=1,e.maxNum=void 0,e.name="RoleAwakeItemView",e.url="ui/module/role/RoleAwakeItemView",e}e(i,t);var u=i.prototype;return u.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("view/btnUse");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.UseClick()}));var u=this.findChild("view/btnAdd");this.addComponentCallbackListener(u,n.EventType.CLICK,(function(){t.changeNum(1)}));var d=this.findChild("view/btnMinus");this.addComponentCallbackListener(d,n.EventType.CLICK,(function(){t.changeNum(-1)}));var a=this.findChild("view/btnAddTen");this.addComponentCallbackListener(a,n.EventType.CLICK,(function(){t.changeNum(10)}));var h=this.findChild("view/btnMinusTen");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){t.changeNum(-10)})),this.editBox=this.findChildComponent("view/EditBox",s),this.addComponentCallbackListener(this.editBox.node,s.EventType.EDITING_DID_ENDED,(function(){var e=Number(t.editBox.string);(isNaN(e)||e<=1)&&(e=1),t.useNum=Math.floor(e),t.changeNum()})),this.itemGrid_1=new o(this,this.findChild("view/item1")),this.itemGrid_2=new o(this,this.findChild("view/item2"))},u.registerUpdateHandler=function(){},u.onAfterOpen=function(){this.maxNum=IS(d).getGoodsCountByGoodsGtid(l),this.useNum=0==this.maxNum?0:1,this.itemGrid_1.SetItemId(l),this.itemGrid_2.SetItemId(r),this.changeNum()},u.onBeforeClose=function(){},u.onDestroy=function(){},u.UseClick=function(){var t=IS(d).getGoodsCountByGoodsGtid(l);0==t||t<this.useNum?a.showFlyTip(GetLanguage(200069)):(IS(h).send_37_5(this.useNum),this.close())},u.changeNum=function(t){null!=t&&(this.useNum=this.useNum+t),this.useNum=Math.min(this.maxNum,Math.max(this.useNum,1)),this.editBox.string=String(this.useNum),this.itemGrid_1.SetItemNum(this.useNum,!0),this.itemGrid_2.SetItemNum(this.useNum*c,!0)},i}(m));i._RF.pop()}}}));

