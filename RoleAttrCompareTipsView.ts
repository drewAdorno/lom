System.register("chunks:///_virtual/RoleAttrCompareTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./BaseView.ts"],(function(t){"use strict";var e,i,o,r,n,a,s,l,h,d,u;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,r=t.Button,n=t.ScrollView,a=t.Label,s=t.js},function(t){l=t.ListItem},function(t){h=t.default},function(t){d=t.default},null,function(t){u=t.BaseView}],execute:function(){o._RF.push({},"1458185yChAm6F/AApdx6AZ","RoleAttrCompareTipsView",void 0);t("default",function(t){function o(){var e;return(e=t.call(this)||this).attrList=void 0,e.attrIdToValue={},e.otherIdToValue={},e.other_attr=void 0,e.titleName=void 0,e.myPower=void 0,e.otherPower=void 0,e.myUp=void 0,e.myDown=void 0,e.scroll_content=void 0,e.target_id=void 0,e.show_attr=void 0,e.data=void 0,e.show_list=void 0,e.name="RoleAttrCompareTipsView",e.url="ui/module/role/RoleAttrCompareTipsView",e}e(o,t);var l=o.prototype;return l.onInit=function(){var t=this,e=this.findChild("node/btnClose");this.addComponentCallbackListener(e,r.EventType.CLICK,(function(){t.onCloseClick()}));var i=this.findChild("imgMask");this.addComponentCallbackListener(i,r.EventType.CLICK,(function(){t.onCloseClick()}));var o=this.findChildComponent("node/attrList",n);this.attrList=this.addUIList(o,v),this.scroll_content=this.findChild("node/attrList/view/content"),this.titleName=this.findChildComponent("node/bg/titleBg/title",a),this.myPower=this.findChildComponent("node/bg1/txtAttrValue",a),this.otherPower=this.findChildComponent("node/bg1/txtAttrValue2",a),this.myUp=this.findChild("node/bg1/up"),this.myDown=this.findChild("node/bg1/down")},l.onCloseClick=function(){this.close()},l.registerUpdateHandler=function(){},l.onAfterOpen=function(){this.target_id=this.openArgs[0],this.show_attr=this.openArgs[1],this.attrIdToValue={},this.otherIdToValue={},this.scroll_content.setPosition(0,0),this.updateInfo(this.openArgs[2])},l.onBeforeClose=function(){},l.onDestroy=function(){},l.getAttrValueById=function(t,e){e=e||0;var i=d.GetNumString(e)+"",o=configAttribute.getDataByKey(t);return 2==o.show_type?i=s.formatStr("%s%",d.GetNumString(e/100)):3==o.show_type&&(i=d.GetNumString(Math.floor(e/100)/100)+""),i},l.updateInfo=function(t){var e,o,r,n,a;if(null!=this.show_attr){var s=configAttribute.getDataByKey(this.show_attr.id),l=configAttribute.getDatas(),h={},d=this.show_attr.id;1==d?d=1001:2==d?d=1002:3==d?d=1003:24==d&&(d=1024),h[d]=d;var u=((a={})[3001]=((e={})[2001]=1,e[2002]=1,e),a[3002]=((o={})[2003]=1,o[2004]=1,o),a[3003]=((r={})[2007]=1,r[2021]=1,r),a[3024]=((n={})[2005]=1,n[2006]=1,n),a);u[d]&&(h[d]=null);for(var v=0;v<l.length;v++)d==l[v].group&&3!=l[v].type&&(h[l[v].id]=l[v].id),u[d]&&null!=u[d][l[v].id]&&(h[l[v].id]=l[v].id);this.show_list=h;for(var f,_={},c=t.my_attr||{},p=t.target_attr||{},g=i(c);!(f=g()).done;){var y=f.value;if(this.show_attr.id==y.k&&(this.show_attr.me_val=y.v),this.show_list[y.k]){var m={attr_key:y.k,my_all:y.v,other_all:0,source_list:{}};_[y.k]=m}}for(var w,C=i(p);!(w=C()).done;){var A=w.value;if(this.show_attr.id==A.k&&(this.show_attr.other_val=A.v),this.show_list[A.k])if(_[A.k])_[A.k].other_all=A.v;else{var I={attr_key:A.k,my_all:0,other_all:A.v,source_list:{}};_[A.k]=I}}this.titleName.string=s.name,this.myPower.string=this.getAttrValueById(this.show_attr.id,this.show_attr.me_val),this.otherPower.string=this.getAttrValueById(this.show_attr.id,this.show_attr.other_val),this.myUp.active=this.show_attr.me_val>this.show_attr.other_val,this.myDown.active=this.show_attr.me_val<this.show_attr.other_val;for(var k,V=t.my_system_sp||{},B=i(V);!(k=B()).done;)for(var b,L=k.value,x=L.type,N=L.attr_list||{},S=i(N);!(b=S()).done;){var T=b.value;if(_[T.k]){var D={type:x,attr_key:T.k,me_val:T.v,other_val:0};_[T.k].source_list[x]=D}}for(var R,G=t.target_system_sp||{},K=i(G);!(R=K()).done;)for(var U,P=R.value,M=P.type,E=P.attr_list||{},F=i(E);!(U=F()).done;){var j=U.value;if(_[j.k])if(_[j.k].source_list[M])_[j.k].source_list[M].other_val=j.v;else{var H={type:M,attr_key:j.k,me_val:0,other_val:j.v};_[j.k].source_list[M]=H}}var O=[];O.push(_),this.attrList.datas=O}},l.getRoleAttrById=function(t){var e=this.attrIdToValue[t];return null==e?0:e},l.getAttrValue=function(t){var e=configAttribute.getDataByKey(t),i=this.getRoleAttrById(t);if(0==i&&3==e.type&&null!=e.group){var o=this.getRoleAttrById(e.group-1e3),r=this.getRoleAttrById(e.group),n=1;2==e.show_type&&(n=1e4),i=(o-r)/r*n}return 2==e.show_type?s.formatStr("%s%",d.GetNumString(i/100)):3==e.show_type?d.GetNumString(Math.floor(i/100)/100):d.GetNumString(i)},o}(u));var v=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).txtTitle=void 0,e.scroll=void 0,e}e(i,t);var o=i.prototype;return o.onInit=function(){this.adaptiveSize=!0,this.txtTitle=h.findChildComponent(this.node,"title/Label",a);var t=h.findChildComponent(this.node,"scroll",n);this.scroll=this.view.addUIList(t,f,!1),this.scroll.touchEvent=!1},o.onRender=function(t,e){var i=[],o=Object.keys(t).length,r=this.view.show_attr.id;for(var n in 1==r?r=1001:2==r?r=1002:3==r?r=1003:24==r&&(r=1024),t){var a=void 0;o>1&&(a={type:1,info:{attr_id:t[n].attr_key,me_val:t[n].my_all,other_val:t[n].other_all,sort:0}},i.push(a));var s=[],l=0,h=0;for(var d in t[n].source_list){var u,v,f,_,c=t[n].source_list[d],p=configAttr_source.getDataByKey(c.type);l+=null!=(u=c.me_val)?u:0,h+=null!=(v=c.other_val)?v:0,s.push({type:2,info:{attr_id:t[n].attr_key,source_id:c.type,me_val:null!=(f=c.me_val)?f:0,other_val:null!=(_=c.other_val)?_:0,sort:p.order}})}s.length>0&&(a&&a.info.attr_id==r&&(a.info.me_val=l,a.info.other_val=h),s.sort((function(t,e){return e.sort-t.sort})),i=i.concat(s))}var g=40*Math.ceil(i.length)+15+15+.01;this.scroll.height=g,this.scroll.datas=i,this.ut.height=42+g},i}(l),f=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).txtName=void 0,e.txtValue=void 0,e.txtValue2=void 0,e.upIcon=void 0,e.dowenIcon=void 0,e.bg=void 0,e}e(i,t);var o=i.prototype;return o.onInit=function(){this.txtName=h.findChildComponent(this.node,"txtAttrName",a),this.txtValue=h.findChildComponent(this.node,"txtAttrValue",a),this.txtValue2=h.findChildComponent(this.node,"txtAttrValue2",a),this.upIcon=h.findChild(this.node,"up"),this.dowenIcon=h.findChild(this.node,"down"),this.bg=h.findChild(this.node,"bg")},o.getAttrValueById=function(t,e){e=e||0;var i=d.GetNumString(e)+"",o=configAttribute.getDataByKey(t);return printLogErr(t,o),2==o.show_type?i=s.formatStr("%s%",d.GetNumString(e/100)):3==o.show_type&&(i=d.GetNumString(Math.floor(e/100)/100)+""),i},o.onRender=function(t,e){if(this.bg.active=1==t.type,1==t.type){var i=configAttribute.getDataByKey(t.info.attr_id);this.txtName.string=i.name+"  "+GetLanguage(301176)}else{var o=configAttr_source.getDataByKey(t.info.source_id);this.txtName.string=o&&o.name}printLogErr(t.info),this.txtValue.string=this.getAttrValueById(t.info.attr_id,t.info.me_val),this.txtValue2.string=this.getAttrValueById(t.info.attr_id,t.info.other_val),this.upIcon.active=t.info.me_val>t.info.other_val,this.dowenIcon.active=t.info.me_val<t.info.other_val},i}(l);o._RF.pop()}}}));

