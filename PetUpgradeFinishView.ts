System.register("chunks:///_virtual/PetUpgradeFinishView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,r,h,a,d,l,c,p;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.ScrollView,s=t.UITransform,r=t.Sprite,h=t.Label,a=t.sys},function(t){d=t.SelectedType,l=t.ListItem},function(t){c=t.default},function(t){p=t.BaseView}],execute:function(){i._RF.push({},"876fdSdBl1MJ7r/ZyORA2Rw","PetUpgradeFinishView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).petInfoList=void 0,e.scrollPetList=void 0,e.nodeScroll=void 0,e.nodepetParent=void 0,e.nodepetItem=void 0,e.nodeRawParent=void 0,e.petItems=void 0,e.name="PetUpgradeFinishView",e.url="ui/module/pet/PetUpgradeFinishView",e}e(i,t);var r=i.prototype;return r.onInit=function(){var t=this;this.petItems=new Array;var e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.onMaskClick()}));var i=this.findChild("btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.onCloseClick()}));var s=this.findChildComponent("scrollPetList",o);this.scrollPetList=this.addUIList(s,v),this.scrollPetList.selectedMode=d.SINGLE,this.nodeScroll=s.node,this.nodeRawParent=this.findChild("rawParent"),this.nodepetParent=this.findChild("rawParent/petParent"),this.nodepetItem=this.findChild("rawParent/petParent/petItem"),this.nodepetItem.active=!1},r.registerUpdateHandler=function(){},r.onAfterOpen=function(){this.petInfoList=this.openArgs[0];var t=this.petInfoList.length;t<=5?this.showPetInfos():this.showPetList();var e=this.findChildComponent("imgBG",s),i=Math.min(Math.max(40+150*Math.ceil(t/5),590),800);e.height=i},r.showPetInfos=function(){this.nodeScroll.active=!1,this.nodeRawParent.active=!0;for(var t=0;t<this.petItems.length;t++)this.petItems[t].hide();for(var e=0;e<this.petInfoList.length;e++){var i=this.petItems[e];if(null==i){var n=nodeInstantiate.instantiate(this.nodepetItem);n.parent=this.nodepetParent,(i=new f).onInit(n,this)}var o=this.petInfoList[e];i.show(o),this.petItems[e]=i}},r.showPetList=function(){this.nodeRawParent.active=!1,this.nodeScroll.active=!0;var t=1,e=0,i=new Array;i[0]=new Array;for(var n=0;n<this.petInfoList.length;n++)t>5&&(t=1,i[e+=1]=new Array),i[e].push(this.petInfoList[n]),t+=1;this.scrollPetList.datas=i},r.onBeforeClose=function(){for(var t=0;t<this.petItems;t++)this.petItems[t].hide()},r.onDestroy=function(){for(var t=0;t<this.petItems;t++)this.petItems[t].destroy();this.petItems={}},r.onMaskClick=function(){this.close()},r.onCloseClick=function(){this.close()},i}(p));var v=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).nodeParent=void 0,e.nodeItem=void 0,e.petItems=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.nodeParent=c.findChild(this.node,"petParent"),this.nodeItem=c.findChild(this.node,"petParent/petItem"),this.nodeItem.active=!1},n.onRender=function(t,e){null==this.petItems&&(this.petItems=[]);for(var i=0;i<this.petItems.length;i++)this.petItems[i].hide();for(var n=0;n<t.length;n++){var o=this.petItems[n];if(null==o){var s=nodeInstantiate.instantiate(this.nodeItem);s.parent=this.nodeParent,(o=new f).onInit(s,this.view)}o.show(t[n]),this.petItems[n]=o}},n.destroy=function(){if(null!=this.petItems){for(var e=0;e<this.petItems.length;e++)this.petItems[e].destroy();this.petItems=null}t.prototype.destroy.call(this)},i}(l),f=function(){function t(){this.node=void 0,this.imgFrame=void 0,this.imgIcon=void 0,this.txtOriLevel=void 0,this.txtNowLevel=void 0,this.view=void 0}var e=t.prototype;return e.onInit=function(t,e){this.node=t,this.view=e,this.imgFrame=c.findChildComponent(this.node,"imgFrame",r),this.imgIcon=c.findChildComponent(this.node,"imgIcon",r);var i=c.findChild(this.node,"levelNode");if(this.txtOriLevel=c.findChildComponent(this.node,"levelNode/txtOriLevel",h),this.txtNowLevel=c.findChildComponent(this.node,"levelNode/txtNowLevel",h),a.uiMirror){i.setScale(-1,1,1);var n=this.txtOriLevel.node;n.setScale(1,1,1),n.getComponent(s).anchorX=1;var o=this.txtNowLevel.node;o.setScale(1,1,1),o.getComponent(s).anchorX=0}},e.show=function(t){this.node.active=!0;var e=configPet.getDataByKey(t.petId);null!=e&&(this.view.loadIcon(this.imgFrame,"icon_pet",configColor.getDataByKey(e.quality).path),this.view.loadIcon(this.imgIcon,"icon_pet",e.icon),this.txtOriLevel.string=t.oriLevel,this.txtNowLevel.string=t.nowLevel)},e.hide=function(){this.node.active=!1},e.destroy=function(){this.view=null,this.node.destroy()},t}();i._RF.pop()}}}));

