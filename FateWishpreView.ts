System.register("chunks:///_virtual/FateWishpreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./ItemIcon.ts","./ConfigGlobal.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,l,r,h,d,c,f,u;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.ScrollView,s=t.Label,a=t.UITransform,l=t.Sprite},function(t){r=t.SelectedType,h=t.ListItem},function(t){d=t.default},null,function(t){c=t.IconAseetType},function(t){f=t.ConfigGlobal},function(t){u=t.BaseView}],execute:function(){e._RF.push({},"d21c6BsrBhHArs3zn/BGGFT","FateWishpreView",void 0);var v=f.fate_draw_weight,p=(t("default",function(t){function e(){var i;return(i=t.call(this)||this).scroll=void 0,i.curType=0,i.name="FateWishpreView",i.url="ui/module/fate/FateWishpreView",i}i(e,t);var s=e.prototype;return s.onInit=function(){var t=this,i=this.findChild("btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.onCloseClick()}));var e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.onCloseClick()}));var s=this.findChildComponent("scroll",o);this.scroll=this.addUIList(s,p,!0,0)},s.onCloseClick=function(){this.close()},s.registerUpdateHandler=function(){},s.onAfterOpen=function(){this.UpdateOpen()},s.onBeforeClose=function(){},s.onDestroy=function(){},s.setType=function(t,i){void 0===i&&(i=!1),(this.curType!=t||i)&&(this.curType=t,this.scroll.updateAll())},s.SetIndex=function(){this.scroll.updateAll()},s.UpdateOpen=function(){this.curType=1,this.hideList={};var t=v;this.scroll.datas=t},s.Refresh=function(){this.scroll.updateAll()},e}(u)),function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtTitle=void 0,i.txtRate=void 0,i.arrUp=void 0,i.arrDown=void 0,i.imgBG1=void 0,i.imgBG2=void 0,i.scroll=void 0,i.scrollNode=void 0,i.scrollUT=void 0,i}i(e,t);var l=e.prototype;return l.onInit=function(){var t=this;this.adaptiveSize=!0,this.txtTitle=d.findChildComponent(this.node,"title/Label",s),this.txtRate=d.findChildComponent(this.node,"title/Rate",s),this.arrUp=d.findChild(this.node,"title/arrUp"),this.arrDown=d.findChild(this.node,"title/arrDown"),this.imgBG1=d.findChild(this.node,"title/imgBG1"),this.imgBG2=d.findChild(this.node,"title/imgBG2");var i=d.findChild(this.node,"title");this.view.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.arrUp.active?(t.view.hideList[t.data[0]]=!0,t.UpdateSelect()):(t.view.hideList[t.data[0]]=!1,t.view.setType(t.data[0],!0))}));var e=d.findChildComponent(this.node,"scroll",o);this.scroll=this.view.addUIList(e,C,!1,0),this.scroll.selectedMode=r.SINGLE,this.scroll.touchEvent=!1,this.scrollNode=d.findChild(this.node,"scroll"),this.scrollUT=d.findChildComponent(this.node,"scroll",a)},l.onRender=function(t,i){this.txtTitle.string=GetLanguage(t[1]);var e=t[0],n=this.view.curType==e&&!this.view.hideList[e];this.scrollNode.active=n,this.arrUp.active=n,this.arrDown.active=!n;var o=.01;if(0!=e){var s=configFate_draw.getDataByList("weights",t[2]);if(n){var l=Math.ceil(s.length/4);o=88*l+15*(l-1)+15+15,this.scrollUT.height=o,this.imgBG1.getComponent(a).height=o+52,this.imgBG1.active=!0,this.imgBG2.active=!1}else this.imgBG1.active=!1,this.imgBG2.active=!0;this.scroll.datas=s,this.txtRate.string=(t[2]*s.length*100/1e4).toString()+"%"}this.ut.height=42+o},l.UpdateSelect=function(){var t=this.view.curType==this.data[0]&&!this.view.hideList[this.data[0]];this.scrollNode.active=t,this.arrUp.active=t,this.arrDown.active=!t;var i=.01;if(t){var e=this.scroll.datas,n=Math.ceil(e.length/4);i=88*n+15*(n-1)+15+15,this.scrollUT.height=i}this.ut.height=42+i},e}(h)),C=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).icon=void 0,i.fate_id=void 0,i.good_id=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.icon=d.findChildComponent(this.node,"icon",l);var i=d.findChild(this.node,"icon");this.view.addComponentCallbackListener(i,n.EventType.CLICK,(function(){uiMgr.openView("FateInfoView",t.fate_id,1)}))},o.onRender=function(t,i){this.good_id=t.reward[0];var e=configGoods.getDataByKey(this.good_id);this.fate_id=e.effect[0];var n=configFate.getDataByKey(this.fate_id);this.view.loadIcon(this.icon,"icon_fate",n.icon,null,c.ICON_SPRITE)},e}(h);e._RF.pop()}}}));

