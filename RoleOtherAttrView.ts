System.register("chunks:///_virtual/RoleOtherAttrView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./BaseSubView.ts","./ConfigGlobal.ts","./RoleDefine.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,h,l,f,u,d;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,n=t.Label,r=t.js,a=t.RichText,s=t.Button},function(t){h=t.default},function(t){l=t.default},function(t){f=t.BaseSubView},function(t){u=t.ConfigGlobal},function(t){d=t.RoleEventDefine}],execute:function(){o._RF.push({},"068fdcQVbhERb5riXVBfDCr","RoleOtherAttrView",void 0);t("default",function(t){function o(){var e;return(e=t.call(this)||this).txtFightPower=void 0,e.attrItems=void 0,e.attr_info=void 0,e.data=void 0,e.sp_list=void 0,e.open_type=void 0,e.AttrMap={1001:1,1002:2,1003:3,1024:24},e.name="RoleOtherAttrView",e}e(o,t);var f=o.prototype;return f.setActive=function(t){this.isActive!=t&&(this.isActive=t,t?this.open():this.close())},f.update=function(){this.open_type=this.parentView.openArgs[0];var t,e=this.parentView.openArgs[1];1==this.open_type?(this.data=e.other_role_info[0],t=this.data.sp_list):2==this.open_type&&(this.data=e.arena_role,t=this.data.attr_list),this.sp_list=t,this.setData(t)},f.onInit=function(){var t=this;this.txtFightPower=this.findChildComponent("fightPowerRoot/txtFightPower",n),this.attrItems=[];for(var e,i,o=u.main_attr,l=0;l<o.length;l++){e=r.formatStr("attrParent/attrItem%s",l+1);var f=this.findChild(e);i=o[l];var d=configAttribute.getDataByKey(i),p={txtName:h.findChildComponent(f,"txtAttrName",n),txtValue:h.findChildComponent(f,"txtAttrValue",a),attrId:i,config:d};p.txtName.string=d.name,this.attrItems.push(p)}var c=this.findChild("btnAttrDetail");this.addComponentCallbackListener(c,s.EventType.CLICK,(function(){uiMgr.openView("RoleAttrCompareView",t.parentView.openArgs[0],t.parentView.openArgs[1])}))},f.registerUpdateHandler=function(){this.addEvent(d.ROLE_INFO_UPDATE,this.onRoleInfoUpdate,this),this.addEvent(d.ROLE_ATTR_POWER,this.onRoleInfoUpdate,this),this.addEvent(d.ROLE_ATTR_UPDATE,this.onRoleAttrUpdate,this),this.addEvent(d.ROLE_ATTR_LIST_UPDATE,this.onRoleAttrListUpdate,this)},f.setData=function(t){this.attr_info={};for(var e,o=i(t);!(e=o()).done;){var n=e.value;this.attr_info[n.k]=n.v}this.updateAttrInfo(),this.updateFightPower()},f.onAfterOpen=function(){},f.updateAttrInfo=function(){for(var t=0;t<this.attrItems.length;t++)this.attrItems[t].txtValue.string=r.formatStr("<color=#544231><bold>%s</bold></color>",this.getAttrValueById(this.attrItems[t].attrId))},f.getAttrValueById=function(t){t in this.AttrMap&&(t=this.AttrMap[t]);var e=0;null!=this.attr_info[t]&&(e=this.attr_info[t]);var i=l.GetNumString(e)+"",o=configAttribute.getDataByKey(t);return 2==o.show_type?i=r.formatStr("%s%",l.GetNumString(e/100)):3==o.show_type&&(i=l.GetNumString(Math.floor(e/100)/100)+""),i},f.updateFightPower=function(){var t=0,e=this.data.attr_list||this.data.info_list;if(null!=e.kv)for(var o,n=i(e.kv);!(o=n()).done;){var r=o.value;1020==r.k&&(t=r.v)}2==this.open_type&&(t=this.data.power||0),this.txtFightPower.string=l.GetNumString(t)},f.onRoleAttrUpdate=function(t){for(var e=0;e<this.attrItems.length;e++){var i=this.attrItems[e];i.attrId==t&&(i.txtValue.string=r.formatStr("<color=#544231><bold>%s</bold></color>",this.getAttrValueById(t)))}},f.onRoleAttrListUpdate=function(){this.updateAttrInfo()},f.onBeforeClose=function(){},f.onDestroy=function(){},f.onRoleInfoUpdate=function(){this.updateFightPower()},f.onAttrDetailClick=function(){uiMgr.openView("RoleAttrDetailView")},o}(f));o._RF.pop()}}}));

