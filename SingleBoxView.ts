System.register("chunks:///_virtual/SingleBoxView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./MulLanguageUtil.ts","./MessageView.ts","./GuildDataCache.ts","./GuildWarControl.ts","./GuildWarDataCache.ts","./GuildWarDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,a,h,s,d,r,c,l,u,f,g,v,C,S;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.ScrollView,h=t.Label,s=t.RichText},function(t){d=t.ListItem},function(t){r=t.default},function(t){c=t.default},null,function(t){l=t.default},function(t){u=t.default},function(t){f=t.default},function(t){g=t.default},function(t){v=t.GuildWarDataCache},function(t){C=t.GuildBossEventDefine},function(t){S=t.BaseView}],execute:function(){n._RF.push({},"8d242rGMLNLLqPukOBM0G6C","SingleBoxView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).data=void 0,e.curLevel=void 0,e.myRankInfo=void 0,e.nextGetTime=0,e.infoScroll=void 0,e.baseRewardNode=void 0,e.highRewardNode=void 0,e.baseState1=void 0,e.baseState2=void 0,e.highState1=void 0,e.highState2=void 0,e.highCount=void 0,e.highNum=void 0,e.highLabel=void 0,e.baseCount=void 0,e.baseNum=void 0,e.btnGet1=void 0,e.btnGet2=void 0,e.name="SingleBoxView",e.url="ui/module/guildwar/SingleBoxView",e.poolTime=3e3,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this,e=this.findChild("root/imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("root/content/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var n=this.findChildComponent("root/content/ScrollView",a);this.infoScroll=this.addUIList(n,b);var s=this.findChild("root/content/title/btnRule");this.addComponentCallbackListener(s,o.EventType.CLICK,(function(){var t=l.GetconfigLanguage_Text(104172).text;u.showBoxTip({title:GetLanguage(200143),tip:t,btnCnt:1,horizontalAlign:0})})),this.highRewardNode=this.findChild("root/content/node1"),this.baseRewardNode=this.findChild("root/content/node2"),this.baseState1=r.findChild(this.baseRewardNode,"state1"),this.baseState2=r.findChild(this.baseRewardNode,"state2"),this.baseCount=r.findChildComponent(this.baseState1,"count",h),this.baseNum=r.findChildComponent(this.baseState1,"num",h),this.btnGet1=r.findChild(this.baseState1,"btnGet"),this.addComponentCallbackListener(this.btnGet1,o.EventType.CLICK,(function(){IS(g).reqGetSoloBoxReward(1)})),this.highState1=r.findChild(this.highRewardNode,"state1"),this.highState2=r.findChild(this.highRewardNode,"state2"),this.highCount=r.findChildComponent(this.highState1,"count",h),this.highNum=r.findChildComponent(this.highState1,"num",h),this.highLabel=r.findChildComponent(this.highState1,"Label",h),this.btnGet2=r.findChild(this.highState1,"btnGet"),this.addComponentCallbackListener(this.btnGet2,o.EventType.CLICK,(function(){IS(g).reqGetSoloBoxReward(2)}))},n.registerUpdateHandler=function(){this.addEvent(C.TYPE_SOLO_BOX_INFO_UPDATE,this.refreshBoxShow,this)},n.onAfterOpen=function(){this.refreshBoxShow()},n.refreshBoxShow=function(){this.refreshRecoedInfo(),this.refreshHighNode(),this.refreshBaseNode(),IS(v).getBoxRedPoint()},n.refreshHighNode=function(){var t=IS(v).boxInfo;if(this.highState1.active=!1,this.highState2.active=!0,r.findChild(this.btnGet2,"imgRP").active=!1,t&&t[2]&&t[2].count>0&&t[2].count>t[2].got_count){this.highState1.active=!0,this.highState2.active=!1;var e=configLeague_solo_chapter_chest.getDataByKey(IS(f).GetGuildInfo().level||1);this.highCount.string="X"+(t[2].count-t[2].got_count),this.highNum.string=t[2].got_count+"/"+e.rare_chest_limit,this.highLabel.string=GetLanguage(200383)+t[2].rare_offer_name,t[2].count>t[2].got_count&&t[2].got_count<e.rare_chest_limit&&1==IS(v).canget&&(r.findChild(this.btnGet2,"imgRP").active=!0)}},n.refreshBaseNode=function(){var t=IS(v).boxInfo;if(this.baseState1.active=!1,this.baseState2.active=!0,r.findChild(this.btnGet1,"imgRP").active=!1,t&&t[1]&&t[1].count>0&&t[1].count>t[1].got_count){this.baseState1.active=!0,this.baseState2.active=!1;var e=configLeague_solo_chapter_chest.getDataByKey(IS(f).GetGuildInfo().level||1);this.baseCount.string="X"+(t[1].count-t[1].got_count),this.baseNum.string=t[1].got_count+"/"+e.normal_chest_limit,t[1].count>t[1].got_count&&t[1].got_count<e.normal_chest_limit&&1==IS(v).canget&&(r.findChild(this.btnGet1,"imgRP").active=!0)}},n.refreshRecoedInfo=function(){this.infoScroll.datas=IS(v).recordList},n.onBeforeClose=function(){},n.onDestroy=function(){},i}(S));var b=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtDesc=void 0,e}e(n,t);var o=n.prototype;return o.onInit=function(){this.txtDesc=r.findChildComponent(this.node,"txtDesc",s),this.adaptiveSize=!0},o.onRender=function(t,e){for(var n,o=0,a=0,h=i(t.box_info);!(n=h()).done;){var s=n.value;1==s.k?o=s.v:2==s.k&&(a=s.v)}this.txtDesc.string=c.formatStr(GetLanguage(999100091),t.name,c.GetNumString(t.hurt),o,a)},n}(d);n._RF.pop()}}}));

