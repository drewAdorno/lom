System.register("chunks:///_virtual/ItemTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./BasePopupView.ts"],(function(t){"use strict";var e,i,n,o,s,r,h;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.UITransform,o=t.Sprite,s=t.Label,r=t.Node},null,function(t){h=t.BasePopupView}],execute:function(){i._RF.push({},"46d196H4JRK8pLwwX5JdAX1","ItemTipsView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).icon=void 0,e.txtName=void 0,e.txtDesc=void 0,e.bgNode=void 0,e.bgUT=void 0,e.arrUT=void 0,e.viewContainerNode=void 0,e.arrNode=void 0,e.targetNode=void 0,e.name="ItemTipsView",e.url="ui/module/common/ItemTipsView",e}e(i,t);var h=i.prototype;return h.onInit=function(){var t=this;this.viewContainerNode=this.findChild("view"),this.bgNode=this.findChild("view/imgBg"),this.bgUT=this.bgNode.getComponent(n),this.arrNode=this.findChild("view/imgBg/imgArr"),this.arrUT=this.arrNode.getComponent(n),this.icon=this.findChildComponent("view/imgBg/icon",o),this.txtName=this.findChildComponent("view/imgBg/txtName",s),this.txtDesc=this.findChildComponent("view/imgBg/txtDesc",s),this.addComponentCallbackListener(this.txtDesc.node,r.EventType.SIZE_CHANGED,(function(){t.txtDesc.scheduleOnce((function(){var e=t.txtDesc.node.getComponent(n).height+110;t.bgUT.height=e,t.arrUT.height=e,t.UpdateAlign()}))}))},h.registerUpdateHandler=function(){},h.onAfterOpen=function(){t.prototype.onAfterOpen.call(this);var e=this.openArgs[0];this.targetNode=this.openArgs[1];var i=configGoods.getDataByKey(e);this.txtName.string=i.name,this.txtDesc.string=i.desc,this.loadIcon(this.icon,i.icon_group,i.icon);var o=this.txtDesc.node.getComponent(n).height+110;this.bgUT.height=o,this.arrUT.height=o,this.UpdateAlign()},h.onDestroy=function(){},h.UpdateAlign=function(){var t=this.GetAlignCenter(),e=t.posX,i=t.posY,n=t.angleX,o=t.angleY;this.viewContainerNode.setPosition(e,i),this.arrUT.anchorY=(this.arrUT.height/2+20)/this.arrUT.height,this.arrNode.setRotationFromEuler(n,o,0)},h.GetAlignCenter=function(){var t=this.targetNode.worldPosition,e=this.targetNode.getComponent(n),i=this.node.getComponent(n).convertToNodeSpaceAR(t),o=i.x-this.bgUT.width/2,s=i.x+this.bgUT.width/2,r=0,h=0,a=0,g=0,d=0;if((r=i.x)>=0){var c=s-360;c>0&&(d=c,g=0)}else{var p=o- -360;p<0&&(g=180,d=p)}return r-=d,i.y<0?(h=i.y+e.height/2+this.bgUT.height/2-12,a=0):(h=i.y-e.height/2-this.bgUT.height/2-24,a=180),{posX:r,posY:h,angleX:a,angleY:g}},i}(h));i._RF.pop()}}}));

