System.register("chunks:///_virtual/SceneRole.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./NodeUtil.ts","./UIEffectAsset.ts","./RoleDataCache.ts","./SceneUnit8.ts"],(function(e){"use strict";var t,o,n,i,s,c,l,r;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){n=e.cclegacy},function(e){i=e.V2},function(e){s=e.default},function(e){c=e.UIEffectAsset},function(e){l=e.RoleDataCache},function(e){r=e.SceneUnit}],execute:function(){n._RF.push({},"2b5b6zoRVxDgoaTBVSvVTTL","SceneRole",void 0);e("SceneRole",function(e){function n(t,o){var n;(n=e.call(this)||this).map=void 0,n.model=void 0,n.nodeTeam=void 0,n.info=o,n.uid=o.obj_id,n.map=t;var s=new i(o.pos.x/8,o.pos.y/8);return n.loadModel(),n.model.position=s,n.rect.width=100,n.rect.height=100,n.rect.center=s,n.id="obj:"+o.obj_id,n}t(n,e);var r=n.prototype;return r.loadModel=function(){var e=this;this.model=c.alloc("ui/module/crosswar/select-scene/Role",this.map.nodeUnit,-1,(function(t){var o=e.info.role.serv_id==IS(l).GetServerId()?2:1;e.nodeTeam=s.findChild(t.node,"team"+o),e.nodeTeam.active=!0}));for(var t=IS(l).GetPowerInfoByID(0),o=Math.floor(this.info.role.power/t*1e4),n=configCross_war_head_scale.getDatas(),i=n.length-1;i>=0;i--)if(o>=n[i].power_radio){this.model.scale=n[i].small_scale/1e4;break}},r.onUpdate=function(e){},r.onDestroy=function(){this.model&&this.model.free(),this.nodeTeam&&(this.nodeTeam.active=!1),this.nodeTeam=null,this.model=null},o(n,[{key:"position",get:function(){return this.model.position},set:function(e){this.model.position=e,this.rect.center=e}},{key:"depth",get:function(){return this.model.depth},set:function(e){this.model.depth=e}}]),n}(r));n._RF.pop()}}}));

