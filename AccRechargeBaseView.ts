System.register("chunks:///_virtual/AccRechargeBaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UILabel.ts","./UIList.ts","./NodeUtil.ts","./TimeUtil.ts","./index57.ts","./MessageView.ts","./MainViewModel.ts","./ActivityControl.ts","./ActivityDefine.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,s,o,a,d,c,h,r,l,f,u,v,p,C,m,g,L,T,b,y;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,s=t.HorizontalTextAlignment,o=t.Label,a=t.ScrollView,d=t.Layout,c=t.ProgressBar,h=t.js},function(t){r=t.ItemGrid},function(t){l=t.UILabel},function(t){f=t.ListItem},function(t){u=t.default},function(t){v=t.default},null,function(t){p=t.default},function(t){C=t.MainViewModel},function(t){m=t.default},function(t){g=t.ActivityType,L=t.ActivityEventDefine,T=t.ActivityTaskState},function(t){b=t.PanelTabType},function(t){y=t.BaseView}],execute:function(){e._RF.push({},"ad3aeFb38ZA1bgbVDK14e/0","AccRechargeBaseView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).taskList=void 0,i.actInfo=void 0,i.curIndex=void 0,i.txtTitle=void 0,i.txtLeftTime=void 0,i.deltaTime=0,i.leftTime=0,i.canUpdate=!1,i.titleList=[],i.name="AccRechargeBaseView",i.url="ui/module/activity/AccRechargeView",i}i(e,t);var c=e.prototype;return c.onInit=function(){var t=this,i=this.findChild("btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.onCloseClick()}));var e=this.findChild("bg/btnRule");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){p.showBoxTip({title:GetLanguage(201066),tip:GetLanguage(201067),btnCnt:1,horizontalAlign:s.LEFT})})),this.findChildComponent("view/tip/txtTips",o).string=GetLanguage(201087);var c=this.findChildComponent("view/taskList",a);this.taskList=this.addUIList(c,w,!0);var h=this.findChildComponent("view/timeCount",d);this.dealMirrorLayout(h),this.txtLeftTime=this.findChildComponent("view/timeCount/txtTime",o),this.txtTitle=this.findChildComponent("title/txtTitle",l),this.curIndex=null,this.titleList=[],this.titleList[g.AccRechargeTotal]=this.findChild("title/0"),this.titleList[g.AccRechargeDay]=this.findChild("title/1"),this.titleList[g.AccRechargeDay2]=this.findChild("title/2"),this.titleList[g.AccRechargeTotal2]=this.findChild("title/3")},c.onCloseClick=function(){this.close()},c.registerUpdateHandler=function(){this.addEvent(L.OnActivityInfoTaskUpdate,this.OnTaskUpdate,this),this.addEvent(L.OnActivityInfoUpdate,this.OnTaskUpdate,this),this.addEvent(L.OnActivityTaskReward,this.OnTaskUpdate,this)},c.onAfterOpen=function(){for(var t in this.titleList)this.titleList.hasOwnProperty(t)&&(this.titleList[t].active=!1);this.onAfterOpenSub()},c.onAfterOpenSub=function(){},c.onBeforeClose=function(){},c.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=v.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},c.onDestroy=function(){},c.OnTaskUpdate=function(){this.taskList.updateAll()},c.RefreshScroll=function(){var t=[];for(var i in this.taskList.datas=t,this.actInfo.task_list)this.actInfo.task_list.hasOwnProperty(i)&&t.push(this.actInfo.task_list[i]);t.sort((function(t,i){return 1==t.state&&1!=i.state?-1:1!=t.state&&1==i.state?1:t.state!=i.state?t.state-i.state:t.id-i.id})),this.taskList.datas=t,this.taskList.scrollTo(0)},e}(y));var w=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).txtDesc=void 0,i.btnGet=void 0,i.received=void 0,i.btnGotoRecharge=void 0,i.pb=void 0,i.schedule=void 0,i.rewardScroll=void 0,i}i(e,t);var s=e.prototype;return s.onInit=function(){var t=this,i=this.view;this.txtDesc=u.findChildComponent(this.node,"txtDesc",o),this.pb=u.findChildComponent(this.node,"ProgressBar",c),this.schedule=u.findChildComponent(this.node,"ProgressBar/schedule",o),this.received=u.findChild(this.node,"received"),this.btnGotoRecharge=u.findChild(this.node,"btnGotoRecharge"),this.view.addComponentCallbackListener(this.btnGotoRecharge,n.EventType.CLICK,(function(){IS(C).TryJumpToMainViewPanel(b.Main_Shop,b.Shop_Limit,[0])&&i.close()})),this.btnGet=u.findChild(this.node,"btnGet"),this.view.addComponentCallbackListener(this.btnGet,n.EventType.CLICK,(function(){IS(m).send_24_15(i.actInfo.activityCfg.type,t.data.task_id,t.data.group_id)}));var e=u.findChildComponent(this.node,"ScrollView",a);this.rewardScroll=i.addUIList(e,G),this.rewardScroll.virtual=!1},s.onRender=function(t,i){this.txtDesc.string=t.cfg.desc,this.rewardScroll.datas=t.cfg.reward,this.schedule.string=h.formatStr("%s/%s",t.count,t.cfg.condition[2]),this.pb.progress=t.count/t.cfg.condition[2],t.state==T.CanGet?(this.received.active=!1,this.btnGotoRecharge.active=!1,this.btnGet.active=!0):t.state==T.HadGet?(this.received.active=!0,this.btnGotoRecharge.active=!1,this.btnGet.active=!1):(this.received.active=!1,this.btnGotoRecharge.active=!0,this.btnGet.active=!1)},e}(f),G=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,i.itemGrid=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.itemGridNode=u.findChild(this.node,"itemGrid"),this.itemGrid=new r(this.view,this.itemGridNode)},n.onRender=function(t,i){this.itemGrid.SetItemId(t[0],t[1])},e}(f);e._RF.pop()}}}));

