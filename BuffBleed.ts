System.register("chunks:///_virtual/BuffBleed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./FixMath.ts","./Buff.ts","./MetaAttrib.ts","./EnumDefine.ts","./HurtUtil.ts"],(function(t){"use strict";var e,n,i,o,r,a,u,l,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.ObjectPool},function(t){o=t.FixMath},function(t){r=t.Buff},function(t){a=t.AttribDefine},function(t){u=t.BattleFlag,l=t.UnityType,s=t.HealthType},function(t){c=t.calHurt}],execute:function(){n._RF.push({},"893a0c7WuxEnpsoz+QiVeql","BuffBleed",void 0);var f=t("BuffBleed",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.onBegin=function(){var t=this.owner,e=this.runner.cast;if(!(t.battleMain.battleFlag&u.NOT_HURT)){var n=e.data.getAttrib(a.att),i=t.data.getAttrib(a.def),r=t.data.getAttrib(a.def_coe),f=e.data.getAttrib(a.att_dam),d=Math.max(o.roundInt(n-i*(1+r)),1);d=o.round(d*f),d=o.round(d*e.data.getSkillFactAttrValue(this.skillPar,this.runner.useSkill.config.id,1043));var h=e.data.getAttrib(a.boss_dam);this.owner.config.type==l.Boss&&h>0&&(d=o.roundInt(d*o.round(1+h)));var g=c(d,t,e);this.runner.healthTarget(t,g,s.Hurt_Bleed)}},i.onDestroy=function(){n._pool.free(this)},n.alloc=function(t){var e=n._pool.alloc();return e.config=t,e},n}(r));f._pool=new i(f,20),n._RF.pop()}}}));

