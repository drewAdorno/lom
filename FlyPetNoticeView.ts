System.register("chunks:///_virtual/FlyPetNoticeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./RedPointMgr.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ItemIcon.ts","./ConfigGlobal.ts","./BagDefine.ts","./BagModel.ts","./ChatDefine.ts","./MessageView.ts","./PrivilegeDataCache.ts","./RoleDataCache.ts","./RoleDefine.ts","./TaskDataCache.ts","./FlyPetControl.ts","./FlyPetDataCache.ts","./FlyPetDefine.ts","./UIDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var e,i,n,o,s,l,a,d,r,h,c,_,p,f,u,v,g,C,m,y,w,S,I,b,k,L,x,B,P,N,E,T,D,G,M,K,F;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Vec2,s=t.Label,l=t.Sprite,a=t.Node,d=t.UITransform,r=t.Size,h=t.ProgressBar,c=t.RichText,_=t.ScrollView,p=t.HorizontalTextAlignment,f=t.Vec3,u=t.js,v=t.sys},function(t){g=t.ListItem},function(t){C=t.RedPointMgr},function(t){m=t.default},function(t){y=t.default},function(t){w=t.default},null,function(t){S=t.IconAseetType},function(t){I=t.ConfigGlobal},function(t){b=t.BagEventDefine},function(t){k=t.BagModel},function(t){L=t.ChatDefine},function(t){x=t.default},function(t){B=t.PrivilegeDataCache},function(t){P=t.RoleDataCache},function(t){N=t.RoleEventDefine},function(t){E=t.TaskDataCache},function(t){T=t.default},function(t){D=t.default},function(t){G=t.FlyPetEventDefine,M=t.FlyPetQualityRes},function(t){K=t.PanelTabType},function(t){F=t.BaseSubView}],execute:function(){i._RF.push({},"f2bd83IGq5OTa1M2IH6QwEW","FlyPetNoticeView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).petModel=void 0,e.petNode=void 0,e.txtAge=void 0,e.txtName=void 0,e.starBtn=void 0,e.starBtnSelect=void 0,e.pet_skill_frame=void 0,e.pet_skill_icon=void 0,e.skillName=void 0,e.skillDesc=void 0,e.skillCD=void 0,e.pet_use_num=void 0,e.quality_list={},e.beskill_list=void 0,e.cd_state=void 0,e.cd_time=void 0,e.cd_slider=void 0,e.attr_list=[],e.attr_rate=void 0,e.txtExp=void 0,e.txtLev=void 0,e.expSlider=void 0,e.btnUpgrade=void 0,e.btnUse=void 0,e.btnmax=void 0,e.btnPetCancel=void 0,e.btnPetUse=void 0,e.btnSpecial=void 0,e.upgrade=void 0,e.upgrade_cost=void 0,e.upgrade_trans=void 0,e.pet_list=void 0,e.select_pet=0,e.select_pet_info=void 0,e.showNode=void 0,e.emptyNode=void 0,e.showBg=void 0,e.all_pet_list=void 0,e.is_show_arrow=!1,e.arrowIcon=void 0,e.lineNode=void 0,e.pet_trans=void 0,e.nodeResParent=void 0,e.nodeResItem=void 0,e.resItems=void 0,e.add_time=0,e.is_show_time=0,e.is_show_end_time=0,e.select_opt=0,e.name="FlyPetNoticeView",e.url="ui/module/flypet/FlyPetNoticeView",e}e(i,t);var g=i.prototype;return g.onInit=function(){var t,e,i=this;this.initResShow();var f=this.findChild("root/title/tips");this.addComponentCallbackListener(f,n.EventType.CLICK,(function(){uiMgr.openView("ParkingRuleTips",[205215])})),this.petNode=this.findChild("root/node/nodeShow/icon"),this.showNode=this.findChild("root/node"),this.emptyNode=this.findChild("root/empty");var u=this.findChild("root/empty/btnGo");this.addComponentCallbackListener(u,n.EventType.CLICK,(function(){i.parentView.setIndex(K.FlyPet_Egg)}));var v=this.findChild("root/title/showBtn");IS(C).addRedPoint("TaskFlyPetRed",v,new o(30,30)),this.addComponentCallbackListener(v,n.EventType.CLICK,(function(){uiMgr.openView("FlyPetAchievementView")})),this.adjustMirrorNode(v),this.showBg=this.findChild("bg/bg/bg"),this.txtName=this.findChildComponent("root/node/nodeShow/txtName",s);var g=this.findChild("root/node/nodeShow/ageIcon");this.addComponentCallbackListener(g,n.EventType.CLICK,(function(){var t=IS(D).GetUseTimeByAge(i.select_pet_info.generation),e=Math.floor(t/3600),n=Math.ceil((t-3600*e)/60);uiMgr.openView("JobSkillTipsView",y.formatStrWithMirrorDeal(GetLanguage(205242),i.select_pet_info.generation,e,n),g)})),this.starBtn=this.findChildComponent("root/node/nodeShow/star",l),this.starBtnSelect=this.findChild("root/node/nodeShow/star/select"),this.addComponentCallbackListener(this.starBtn.node,n.EventType.CLICK,(function(){var t=IS(P).GetRoleId(),e=0,n=104503;0==i.select_opt&&(e=1,n=104502),i.select_opt=e,x.showFlyTip(GetLanguage(n)),IS(T).send_66_33(t,i.select_pet,e)})),this.txtAge=this.findChildComponent("root/node/nodeShow/ageIcon/txtAge",s),this.pet_use_num=this.findChildComponent("root/node/nodeShow/useNode/num",s);var w=this.findChild("root/node/nodeShow/useNode/tips");this.addComponentCallbackListener(w,n.EventType.CLICK,(function(){var t=IS(D).GetHaveUseItemById(i.select_pet),e=0;t&&(e=t.times);for(var n,o=IS(D).GetUseCDCfg(e,0),s=configFly.getDataByKey(i.select_pet_info.config_id),l=0;l<o.cd.length;l++)o.cd[l][0]==s.quality&&(n=o.cd[l]);var a=1;IS(B).checkPrivilegeCardHasBuy(6)&&(a=1-configPrivilege_card.getDataByKey(6005).value[2]/1e4);var d=Math.floor(n[1]*a/3600),r=Math.ceil((n[1]*a-3600*d)/60);uiMgr.openView("JobSkillTipsView",y.formatStrWithMirrorDeal(GetLanguage(205153),e,d,r),w)})),this.pet_skill_frame=this.findChildComponent("root/node/nodeSkill/Frame",l),this.pet_skill_icon=this.findChildComponent("root/node/nodeSkill/Icon",l),this.skillName=this.findChildComponent("root/node/nodeSkill/txtName",s),this.skillDesc=this.findChildComponent("root/node/nodeSkill/ScrollView/view/content/item",s),this.skillDesc.node.on(a.EventType.SIZE_CHANGED,(function(){var t=i.findChildComponent("root/node/nodeSkill/ScrollView/view/content",d),e=i.findChildComponent("root/node/nodeSkill/ScrollView/view/content/item",d);t.contentSize=new r(t.contentSize.x,e.height+10)})),this.skillCD=this.findChildComponent("root/node/nodeSkill/cd/cd",s),this.txtExp=this.findChildComponent("root/node/nodeProgress/ProgressBar/txtDesc",s),this.txtLev=this.findChildComponent("root/node/nodeProgress/ProgressBar/Node",s),this.expSlider=this.findChildComponent("root/node/nodeProgress/ProgressBar",h),this.upgrade=this.findChild("root/node/nodeProgress/ProgressBar/upgrade"),this.upgrade_trans=this.findChildComponent("root/node/nodeProgress/ProgressBar/upgrade",d),this.upgrade_cost=this.findChildComponent("root/node/nodeProgress/ProgressBar/upgrade/cost",c),this.upgrade_cost.node.on(a.EventType.SIZE_CHANGED,(function(){var t=i.findChildComponent("root/node/nodeProgress/ProgressBar/upgrade/cost",d);i.upgrade_trans.contentSize=new r(t.contentSize.x+25,100)})),this.adjustMirrorNode(this.findChild("root/node/nodeProgress/ProgressBar/upgrade/img"));var S=this.findChildComponent("root/node/nodeChange/ScrollView",_);this.beskill_list=this.addUIList(S,R);var b=((t={})[1]=205054,t[2]=205055,t[3]=205056,t),k=((e={})[1]=1002,e[2]=1024,e[3]=1001,e);this.cd_state=this.findChild("root/node/nodeShow/cd_state"),this.cd_time=this.findChildComponent("root/node/nodeShow/cd_state/normal/time",s),this.cd_slider=this.findChildComponent("root/node/nodeShow/cd_state/normal/hp",h);for(var N=1;N<=3;N++){var E=this.findChild("root/node/nodeShow/quality/quality"+N),G=m.findChildComponent(E,"txtQuality",s);G.string=GetLanguage(b[N]),this.quality_list[N]={node:E,name:G};var M=this.findChild("root/node/attr/view/content/item"+N),F=m.findChildComponent(M,"txtAttrName",s),U=m.findChildComponent(M,"txtAttrBase",s),A=m.findChildComponent(M,"txtAttrNext",s),q={node:M,attr_id:k[N],txtAttrName:F,txtAttrBase:U,txtAttrNext:A};this.attr_list[N]=q}for(var H=1;H<=4;H++)this.adjustMirrorNode(this.findChild("root/node/attr/view/content/item"+H+"/icon"));this.attr_rate=this.findChildComponent("root/node/attr/view/content/item4/txtAttrBase",s),this.lineNode=this.findChildComponent("root/node/line",d),this.pet_trans=this.findChildComponent("root/node/ScrollView",d);var O=this.findChildComponent("root/node/ScrollView",_);this.pet_list=this.addUIList(O,V);var j=this.findChild("root/node/nodeShow/btnShare");this.addComponentCallbackListener(j,n.EventType.CLICK,(function(){var t;uiMgr.openView("ChatView",null,null,{contentType:L.ChatContentType.Share,linkType:L.ChatLinkType.FlyPetPetShow,cacheData:{pet_id:i.select_pet,pet_cfg_id:i.select_pet_info.config_id,pet_name:null!=(t=i.select_pet_info.name)?t:"",level:i.select_pet_info.level,role_name:IS(P).GetRoleName(),age:i.select_pet_info.generation,is_bian:IS(D).GetIsBianYi(i.select_pet_info.entry_list)},showString:GetLanguage(205185)})})),this.adjustMirrorNode(j);var z=this.findChild("root/node/nodeShow/btnRight");this.addComponentCallbackListener(z,n.EventType.CLICK,(function(){i.SelectPet(i.GetRightItem())}));var W=this.findChild("root/node/nodeShow/btnLeft");this.addComponentCallbackListener(W,n.EventType.CLICK,(function(){i.SelectPet(i.GetLeftItem())}));var Y=this.findChild("root/node/nodeShow/btnKill");this.addComponentCallbackListener(Y,n.EventType.CLICK,(function(){if(i.select_pet_info){var t=IS(P).checkAnyPlanHasFlyPet(i.select_pet_info.id);if(1==t[0])return void(t[1]?x.showFlyTip(GetLanguage(104504)):x.showFlyTip(GetLanguage(205281)))}if(1==IS(D).GetExtByKey(i.select_pet_info,1)){var e=GetLanguage(104493);x.showBoxTip({tip:e,title:GetLanguage(200048),func:function(t){"type_yes"==t&&(IS(T).send_66_33(IS(P).GetRoleId(),i.select_pet,0),uiMgr.openView("FlyMessageView",GetLanguage(205176),(function(){IS(T).send_66_8(i.select_pet)})))}})}else uiMgr.openView("FlyMessageView",GetLanguage(205176),(function(){IS(T).send_66_8(i.select_pet)}))})),this.btnSpecial=this.findChild("root/node/nodeShow/btnSpecial"),this.addComponentCallbackListener(this.btnSpecial,n.EventType.CLICK,(function(){x.showBoxTip({tip:GetLanguage(205674),btnCnt:1,horizontalAlign:p.LEFT})}));var J=this.findChild("root/node/nodeShow/btnReset");this.addComponentCallbackListener(J,n.EventType.CLICK,(function(){var t=I.fly_reset_cost,e=configGoods.getDataByKey(t[0]);t[1],e.name;uiMgr.openView("FlyMessageView",GetLanguage(205175),(function(){IS(T).send_66_7(i.select_pet)}),t[0],t[1])}));var Q=this.findChild("root/node/nodeShow/btn");this.addComponentCallbackListener(Q,n.EventType.CLICK,(function(){uiMgr.openView("FlyPetRenameView",i.select_pet,"testName")})),this.adjustMirrorNode(Q),this.btnPetUse=this.findChild("root/node/nodeShow/btnUse"),this.addComponentCallbackListener(this.btnPetUse,n.EventType.CLICK,(function(){IS(T).send_66_6(i.select_pet)})),this.btnPetCancel=this.findChild("root/node/nodeShow/btnCancel"),this.addComponentCallbackListener(this.btnPetCancel,n.EventType.CLICK,(function(){IS(T).send_66_6(0)})),this.btnUse=this.findChild("root/node/nodeProgress/btnUse"),this.addComponentCallbackListener(this.btnUse,n.EventType.CLICK,(function(){var t=IS(D).GetBianYiAttr(i.select_pet_info.entry_list,4),e=IS(D).GetExpByLev(i.select_pet_info.config_id,i.select_pet_info.level,i.select_pet_info.exp,(t+1e4)/1e4);uiMgr.openView("FlyPetUseView",i.select_pet,e)})),this.btnUpgrade=this.findChild("root/node/nodeProgress/btnUpgrade"),this.addComponentCallbackListener(this.btnUpgrade,n.EventType.CLICK,(function(){IS(T).send_66_5(i.select_pet)})),this.btnmax=this.findChild("root/node/nodeProgress/btnmax"),this.addComponentCallbackListener(this.btnmax,n.EventType.CLICK,(function(){uiMgr.openView("JobSkillTipsView",GetLanguage(205039),i.btnmax)}));var Z=this.findChild("root/node/btnarrow");this.arrowIcon=this.findChild("root/node/btnarrow/arrow"),this.addComponentCallbackListener(Z,n.EventType.CLICK,(function(){i.is_show_arrow=!i.is_show_arrow,i.updateArrow()}))},g.initResShow=function(){var t=this;this.nodeResParent=this.findChild("root/resRoot"),this.nodeResItem=this.findChild("root/resRoot/resItem"),this.nodeResItem.active=!1;var e=[1164,1165];if(null==this.resItems){this.resItems=new Array;for(var i=function(i){var o=nodeInstantiate.instantiate(t.nodeResItem),a=e[i];t.addComponentCallbackListener(o,n.EventType.CLICK,(function(){IS(k).OpenItemTips(a,m.findChild(o,"txtNum"))})),o.parent=t.nodeResParent,o.active=!0;var d=m.findChildComponent(o,"imgIcon",l),r=configGoods.getDataByKey(a);t.loadIcon(d,"icon_item",r.icon),t.resItems.push({node:o,txtNum:m.findChildComponent(o,"txtNum",s),goodsGtid:a})},o=0;o<e.length;o++)i(o)}},g.updateResShow=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].txtNum.string=y.GetNumString(IS(k).getGoodsCountByGoodsGtid(this.resItems[t].goodsGtid))},g.updateArrow=function(){var t=86,e=105,i=-1;this.is_show_arrow&&(t=200,e=229,i=1),this.lineNode.contentSize=new r(675,e),this.pet_trans.contentSize=new r(632,t),this.arrowIcon.scale=new f(1,i,1)},g.GetRightItem=function(){if(!(null==this.all_pet_list||this.all_pet_list.length<=0)){if(null==this.select_pet||0==this.select_pet)return this.all_pet_list[0];for(var t=0,e=0;e<this.all_pet_list.length;e++)if(this.all_pet_list[e].id==this.select_pet){t=e;break}return++t>=this.all_pet_list.length&&(t=0),this.all_pet_list[t]}},g.GetLeftItem=function(){if(!(null==this.all_pet_list||this.all_pet_list.length<=0)){if(null==this.select_pet||0==this.select_pet)return this.all_pet_list[0];for(var t=0,e=0;e<this.all_pet_list.length;e++)if(this.all_pet_list[e].id==this.select_pet){t=e;break}return--t<0&&(t=this.all_pet_list.length-1),this.all_pet_list[t]}},g.SelectPet=function(t){this.select_pet=t.id,this.select_pet_info=t,this.select_opt=IS(D).GetExtByKey(t,1),this.pet_list.updateAll(),this.updateInfo(),this.updateEmptyStatus(),IS(D).DelNewItem(t.id),this.starBtnSelect.active=1==this.select_opt},g.updateEmptyStatus=function(){this.showBg.active=0!=this.select_pet,this.showNode.active=0!=this.select_pet,this.emptyNode.active=0==this.select_pet},g.onMaskClick=function(){this.close()},g.onAfterOpen=function(){IS(E).updateFlyPetRed(),this.select_pet=0,this.select_pet_info=null,this.updateData(),this.updateResShow()},g.testData=function(){},g.onBeforeClose=function(){null!=this.petModel&&(this.removeUIEffect(this.petModel),this.petModel=null)},g.registerUpdateHandler=function(){this.addEvent(G.OnInfoUpdate,this.updateData),this.addEvent(b.GOODS_INFO_UPDATE,this.updateResShow,this),this.addEvent(N.ROLE_RES_UPDATE,this.updateResShow,this)},g.updateEntry=function(t){var e,i=null!=t?t:[],n=((e={})[3]=1,e[2]=2,e[5]=3,e[1]=4,e[4]=5,e[6]=6,e);i.sort((function(t,e){var i=configFly_entry.getDataByKeys("id",t.k,"level",t.v),o=configFly_entry.getDataByKeys("id",e.k,"level",e.v);return i.quality==o.quality?t.id-e.id:n[i.quality]-n[o.quality]})),this.beskill_list.datas=i},g.updateSkill=function(t){var e=null!=t?t:[];if(!(e.length<=0)){var i=e[0][0],n=configSkill.getDataByKey(i),o=configSkill_level.getDataByKeys("id",i,"level",e[0][1]);this.loadIcon(this.pet_skill_frame,"icon_skill",u.formatStr("common_ICON_jinengkuang0%s",n.quality)),this.loadIcon(this.pet_skill_icon,"icon_skill",n.icon,null,S.ICON_SPRITE),this.skillName.string=n.name,this.skillDesc.string=y.formatStr.apply(y,[o.desc].concat(o.desc_parm))}},g.updateAttr=function(t,e){for(var i=null!=t?t:[],n=null!=e?e:[],o={},s=0;s<i.length;s++)o[i[s].k]={now_v:i[s].v,next_v:0};for(var l=0;l<n.length;l++)o[i[l].k].next_v=n[l].v;for(var a=1;a<=3;a++){var d=0;null!=o[this.attr_list[a].attr_id]&&(d=o[this.attr_list[a].attr_id].now_v,o[this.attr_list[a].attr_id].next_v),this.attr_list[a].txtAttrBase.string=y.GetNumString(d);this.attr_list[a].txtAttrNext.string=""}},g.UpdateEmpty=function(){},g.onUpdate=function(t){if(this.add_time+=t,this.add_time>=1&&(this.add_time--,this.is_show_time>0)){this.cd_time.string=w.formatTimeForSecond(this.is_show_end_time-w.serverTime);var e=(this.is_show_end_time-w.serverTime)/(this.is_show_end_time-this.is_show_time);this.cd_slider.progress=Math.min(1,e)}},g.updateInfo=function(){var t;if(this.select_pet_info){var e=IS(D).GetPetInfoById(this.select_pet_info.id);if(this.select_pet_info=e,this.select_pet_info){var i=configFly.getDataByKey(this.select_pet_info.config_id),n=configFly_advance.getDataByKeys("id",this.select_pet_info.config_id,"advance_level",this.select_pet_info.step);this.btnSpecial.active=9001==i.id||9002==i.id||9003==i.id;var s,l=configFly_level.getDataByKeys("id",this.select_pet_info.config_id,"level",this.select_pet_info.level),a=configFly_level.getDataListByKey(this.select_pet_info.config_id).length;this.txtName.string=i.name,1==IS(D).GetIsBianYi(e.entry_list)&&(this.txtName.string=y.formatStrWithMirrorDeal(GetLanguage(205206),i.name)),""!=this.select_pet_info.name&&(this.txtName.string=this.select_pet_info.name),this.txtAge.string=y.formatStrWithMirrorDeal(GetLanguage(205240),this.select_pet_info.generation),this.btnPetUse.active=0==e.fight,this.btnPetCancel.active=1==e.fight;for(var d=1;d<=3;d++)d==i.quality?this.quality_list[d].node.active=!0:this.quality_list[d].node.active=!1;var r=configFly_level.getDataByKeys("id",this.select_pet_info.config_id,"level",this.select_pet_info.level+1);if(r&&(s=r.attr),l.if_advance>0&&this.select_pet_info.step!=l.if_advance){var h=configFly_advance.getDataByKeys("id",this.select_pet_info.config_id,"advance_level",l.if_advance);h&&(s=h.attr)}var c=!1;this.is_show_time=0,this.is_show_end_time=0;var _=IS(D).GetHaveUseItemById(this.select_pet),p=0;if(_&&(p=_.times,2==_.state)){c=!0,this.add_time=0,this.is_show_time=_.start_time,this.is_show_end_time=_.end_time,this.cd_time.string=w.formatTimeForSecond(this.is_show_end_time-w.serverTime);var f=(this.is_show_end_time-w.serverTime)/(this.is_show_end_time-this.is_show_time);this.cd_slider.progress=Math.min(1,f)}this.cd_state.active=c,this.pet_use_num.string=p+"",this.attr_rate.string=e.growth/1e4+"",this.updateAttr(e.attr_list,s),this.updateSkill(n.fly_skill),this.updateEntry(e.entry_list),this.txtLev.string="Lv."+this.select_pet_info.level;var g=null!=(t=this.select_pet_info.exp)?t:0,C=l&&l.expend||1,m=IS(D).GetBianYiAttr(e.entry_list,4);C=Math.ceil(C*(m+1e4)/1e4),this.txtExp.string=g+"/"+C,this.expSlider.progress=g/C,this.upgrade.active=l.if_advance>0&&this.select_pet_info.step!=l.if_advance,this.upgrade.active&&(this.txtExp.string="",this.expSlider.progress=1),this.btnUpgrade.active=l.if_advance>0&&this.select_pet_info.step!=l.if_advance;var S=this.btnUpgrade.active,I=this.select_pet_info.level>=IS(P).GetLevel();if(this.btnmax.active=this.select_pet_info.level==a&&this.select_pet_info.step==l.if_advance||I&&!S,this.btnUse.active=!S&&!I,l.if_advance>0&&this.select_pet_info.step<l.if_advance){var b=configFly_advance.getDataByKeys("id",this.select_pet_info.config_id,"advance_level",this.select_pet_info.step);if(b){var L=IS(D).GetBianYiAttr(e.entry_list),x=b.expend[0][1];x=Math.ceil(x*(L+1e4)/1e4);var B=IS(k).getGoodsCountByGoodsGtid(b.expend[0][0]);this.upgrade_cost.string=x>B?u.formatStr("<b><outline color=#3c2a1c width=2><color=#ff6767>%d</color></outline></b>",x):u.formatStr("<b><outline color=#4f401f width=2><color=#59ff5f>%d</color></outline></b>",x)}}null!=this.petModel&&(this.removeUIEffect(this.petModel),this.petModel=null);var N=configUnitModel.getDataByKey(i.unitid);this.petModel=this.addUIEffect(N.path,this.petNode,-1,new o(0,-60),N.scale/100*1.5,(function(t){v.uiMirror&&(t.dir=-1)}))}else this.updateEmptyStatus()}else this.updateEmptyStatus()},g.updateData=function(){var t,e=null!=(t=IS(D).GetPetList())?t:[],i=[],n=!1;for(var o in e)e[o]&&(i.push(e[o]),this.select_pet==e[o].id&&(n=!0));n||(this.select_pet=0),printLogErr(i),i.sort((function(t,e){var i=configFly.getDataByKey(t.config_id),n=configFly.getDataByKey(e.config_id),o=IS(D).GetExtByKey(t,1),s=IS(D).GetExtByKey(e,1);return t.fight!=e.fight?e.fight-t.fight:o!=s?s-o:t.level!=e.level?e.level-t.level:t.step!=e.step?e.step-t.step:i.quality!=n.quality?n.quality-i.quality:t.config_id-e.config_id})),this.all_pet_list=i,this.pet_list.datas=i,i.length>0&&0==this.select_pet?this.SelectPet(i[0]):this.updateInfo(),this.starBtnSelect.active=1==this.select_opt},g.onDestroy=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].node.destroy();this.resItems=null},i}(F));var R=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).addIcon=void 0,e.downIcon=void 0,e.txtName=void 0,e.skill_cfg=void 0,e.quality_list={},e}e(i,t);var o=i.prototype;return o.onInit=function(){var t=this;this.txtName=m.findChildComponent(this.node,"txtName",s),this.addIcon=m.findChild(this.node,"add"),this.downIcon=m.findChild(this.node,"down");for(var e=1;e<=6;e++){var i=m.findChild(this.node,"quality/quality"+e),o=m.findChildComponent(i,"txtQuality",s);this.quality_list[e]={node:i,name:o}}this.view.addComponentCallbackListener(this.node,n.EventType.CLICK,(function(){uiMgr.openView("JobSkillTipsView",y.formatStr.apply(y,[t.skill_cfg.desc].concat(t.skill_cfg.desc_parm)),t.txtName.node)}))},o.onRender=function(t,e){var i=configFly_entry.getDataByKeys("id",t.k,"level",t.v);this.skill_cfg=i,this.txtName.string=i.name;for(var n=1;n<=6;n++)n==i.quality?(this.quality_list[n].node.active=!0,this.quality_list[n].name.string=i.name):this.quality_list[n].node.active=!1},o.onItemClick=function(){},i}(g),V=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).frame=void 0,e.icon=void 0,e.sel=void 0,e.lock=void 0,e.rp=void 0,e.up=void 0,e.isNew=void 0,e.star=void 0,e.p_view=void 0,e}e(i,t);var o=i.prototype;return o.onInit=function(){var t=this;this.frame=m.findChildComponent(this.node,"frame",l),this.icon=m.findChildComponent(this.node,"icon",l),this.up=m.findChild(this.node,"up"),this.star=m.findChild(this.node,"star"),this.sel=m.findChild(this.node,"sel"),this.lock=m.findChild(this.node,"lock"),this.rp=m.findChild(this.node,"rp"),this.isNew=m.findChild(this.node,"new"),this.p_view=this.view,this.view.addComponentCallbackListener(this.node,n.EventType.CLICK,(function(){t.p_view.SelectPet(t.data)}))},o.onRender=function(t,e){var i=configFly.getDataByKey(t.config_id);this.view.loadIcon(this.frame,"icon_equip",M[i.quality]),this.view.loadIcon(this.icon,"icon_flypet",i.icon),this.sel.active=this.p_view.select_pet==t.id,this.isNew.active=IS(D).IsNewPet(t.id),this.view.adjustMirrorNode(this.isNew),this.up.active=1==t.fight,this.star.active=1==IS(D).GetExtByKey(t,1)},o.onItemClick=function(){},i}(g);i._RF.pop()}}}));

