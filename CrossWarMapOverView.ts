System.register("chunks:///_virtual/CrossWarMapOverView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./MessageView.ts","./RoleDataCache.ts","./CrossWarDatacache.ts","./CrossWarDefine.ts","./CrossWarSceneControl.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,r,s,a,c,d,u,l,v,f,h,p,C;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.Label,r=e.Button,s=e.ProgressBar},function(e){a=e.default},function(e){c=e.default},function(e){d=e.default},null,function(e){u=e.default,l=e.TYPE_YES},function(e){v=e.RoleDataCache},function(e){f=e.CrossWarDataCache},function(e){h=e.CrossWarEventDefine},function(e){p=e.default},function(e){C=e.BaseView}],execute:function(){n._RF.push({},"addceS947VASpyYCwRao3ut","CrossWarMapOverView",void 0);e("default",function(e){function n(){var t;return(t=e.call(this)||this).nodeTime=void 0,t.nodeScore=void 0,t.txtScore=void 0,t.txtTime=void 0,t.txtServer=void 0,t.pbTime=void 0,t.opentype=0,t.name="CrossWarMapOverView",t.url="ui/module/crosswar/CrossWarMapOverView",t.poolTime=3e3,t}t(n,e);var C=n.prototype;return C.onInit=function(){var e=this;this.txtScore=this.findChildComponent("view/score/txtNum",o);var t=this.findChild("view/btnClose");this.addComponentCallbackListener(t,r.EventType.CLICK,(function(){if(1!=e.opentype)return IS(f).serv_id==IS(v).GetServerId()?(IS(p).reqLeave(),void e.close()):void u.showBoxTip({tip:GetLanguage(200767),title:GetLanguage(200048),func:function(t){t==l&&(IS(p).reqLeave(),e.close())}});e.close()})),this.pbTime=this.findChildComponent("view/time/pbTime",s),this.txtTime=this.findChildComponent("view/time/txtTime",o),this.txtServer=this.findChildComponent("view/Label",o),this.nodeTime=this.findChild("view/time"),this.nodeScore=this.findChild("view/score");for(var n,c=[].concat(configScene.getDatas()).filter((function(e){return 1==e.type||2==e.type})),d=function(){var t=n.value;C=e.findChild("content/node"+t.id),e.addComponentCallbackListener(C,r.EventType.CLICK,(function(){uiMgr.openView("CrossWarEnterMapView",t.id)})),a.findChildComponent(C,"txtLevel",o).string="lv."+t.level[0]+"~"+t.level[1]},h=i(c);!(n=h()).done;){var C;d()}},C.onAfterOpen=function(){var e=this;uiMgr.close("ChatView"),this.opentype=this.openArgs[0],this.updateScore(),IS(f).serv_id==IS(v).GetServerId()?(this.nodeTime.active=!1,this.nodeScore.active=!1):(this.nodeTime.active=!0,this.nodeScore.active=!0),this.updateTime(),this.addTimer(1,-1,(function(){e.updateTime()}))},C.registerUpdateHandler=function(){this.addEvent(h.CROSS_WAR_SCENE_INFO_UPDATE,this.updateScore,this)},C.updateScore=function(){this.txtScore.string=c.GetNumString(IS(f).score),this.txtServer.string="[s"+IS(f).serv_id+"]"},C.updateTime=function(){var e=IS(f).end_time-d.serverTime;this.txtTime.string=d.getTimeLeft(e);var t=configCross_war_kv.getDataByKey(3).value[0];this.pbTime.progress=e/t,this.findChild("content/node5/lock").active=!1},C.onBeforeClose=function(){this.opentype=0},C.onDestroy=function(){},n}(C));n._RF.pop()}}}));

