System.register("chunks:///_virtual/BattleChapterMountPanel.ts",["cc","./AudioMgr.ts","./NodeUtil.ts","./TimeUtil.ts","./DungeonControl.ts","./IBattleChapterPanel.ts"],(function(t){"use strict";var e,i,a,n,o,h,s,r,p;return{setters:[function(t){e=t.cclegacy,i=t.ProgressBar,a=t.Label,n=t.Sprite},function(t){o=t.audioMgr},function(t){h=t.default},function(t){s=t.default},function(t){r=t.default},function(t){p=t.BattleInfoType}],execute:function(){e._RF.push({},"125cahuOQ1Ok5p5JMA/sL+9","BattleChapterMountPanel",void 0);var d=[0,.18,.35,.5,.68,.85,1],c=(t("BattleChapterMountPanel",function(){function t(t,e){this.view=void 0,this.node=void 0,this.infoType=p.Mount,this.pbPart=void 0,this.points=[],this.nodeTime=void 0,this.pbTime=void 0,this.txtTime=void 0,this.txtChapter=void 0,this.chapterTime=0,this.node=e,this.view=t,this.onInit()}var e=t.prototype;return e.reset=function(){var t=configMount_chapter.getDataByKey(battleMain.data.chapterId);this.txtChapter.string=GetLanguage_UI(999000347)+" "+t.level,this.updatePart()},e.onInit=function(){this.pbPart=h.findChildComponent(this.node,"pbPart",i);for(var t=1;t<=6;++t)this.points[t-1]=new c(h.findChild(this.pbPart.node,"point"+t),t);this.pbPart.progress=0,this.nodeTime=h.findChild(this.node,"time"),this.pbTime=h.findChildComponent(this.nodeTime,"pbTime",i),this.txtTime=h.findChildComponent(this.nodeTime,"txtTime",a);var e=h.findChildComponent(this.nodeTime,"Sprite",n);this.view.loadIcon(e,"battle","zxgq_ui_shijian"),this.txtChapter=h.findChildComponent(this.node,"txtChapter",a)},e.exitBattle=function(){o.playMusic("battle"),IS(r).reqDungeonMountResult(battleMain.data.chapterId,1,[])},e.updateChapter=function(t){for(var e=configMount_chapter.getDataByKey(t),i=1;i<=6;++i){var a=-1;i<e.part&&(a=1),i==e.part&&(a=2),this.points[i-1].setState(a)}this.pbPart.progress=d[e.part-1]},e.updateTime=function(){this.chapterTime!=Math.floor(battleMain.chapter.chapterTime)&&(this.chapterTime=Math.floor(battleMain.chapter.chapterTime),this.txtTime.string=s.formatTimeForSecond(this.chapterTime)),this.pbTime.progress=battleMain.chapter.chapterTime/battleMain.chapter.maxChapterTime},e.updateChapterType=function(){this.pbPart.node.active=!0,this.updateChapter(battleMain.data.chapterId)},e.updatePart=function(){this.updateChapterType(),battleMain.chapter.timeModel?(this.nodeTime.active=!0,this.updateTime()):this.nodeTime.active=!1},e.onUpdate=function(t){battleMain.chapter.timeModel&&this.updateTime()},t}()),function(){function t(t,e){this.node=void 0,this.index=void 0,this.states=[],this.node=t,this.index=e;for(var i=1;i<=2;i++)this.states.push(h.findChild(t,"state"+i))}return t.prototype.setState=function(t){if(-1!=t){this.node.active=!0;for(var e=0;e<this.states.length;e++)this.states[e].active=t==e+1}else this.node.active=!1},t}());e._RF.pop()}}}));

