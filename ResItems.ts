System.register("chunks:///_virtual/ResItems.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./BagModel.ts","./MainViewModel.ts","./UIDefine.ts"],(function(t){"use strict";var e,n,o,i,s,d,u,l,a,r,h,c;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,o=t.assert,i=t.Layout,s=t.Sprite,d=t.Label,u=t.Button},function(t){l=t.default},function(t){a=t.default},null,function(t){r=t.BagModel},function(t){h=t.MainViewModel},function(t){c=t.PanelTabType}],execute:function(){n._RF.push({},"5e227cOW8FCeruZbzOMRnAn","ResItems",void 0);t("ResItems",function(){function t(t,e){var n;void 0===e&&(e="resRoot"),this.nodeResRoot=void 0,this.nodeResTemplate=void 0,this.config=[],this.view=void 0,this.txtNums=[],o(null!=t,"parentView != null"),this.view=t,this.nodeResRoot=t.findChild(e),o(null!=this.nodeResRoot,"找不到resRootPath: [%s]",e),o(null!=this.nodeResRoot.getComponent(i),"nodeResRoot需要Layout组件"),this.nodeResTemplate=null==(n=this.nodeResRoot.children)?void 0:n[0],o(null!=this.nodeResTemplate,"nodeResTemplate至少要有1个子节点"),o(null!=l.findChildComponent(this.nodeResTemplate,"imgIcon",s),"nodeResTemplate要有imgIcon"),o(null!=l.findChildComponent(this.nodeResTemplate,"txtNum",d),"nodeResTemplate要有txtNums"),this.nodeResTemplate.active=!1,this.nodeResTemplate.setParent(t.node),this.nodeResRoot.removeAllChildren()}var n=t.prototype;return n.init=function(t){for(var e=this,n=this.config.length;n<t.length;++n){var o=nodeInstantiate.instantiate(this.nodeResTemplate);o.parent=this.nodeResRoot,o.active=!0}this.txtNums=[],this.config=t;for(var i=[1,2],a=function(n){var o=t[n],a="number"==typeof o,p=e.nodeResRoot.children[n];m=!1,a&&i.includes(o)?m=!0:!a&&o.jump&&"function"==typeof o.jump&&(m=!0,f=o.jump),m&&!f&&(f=function(){var t=o;1==o?t=4:2==o&&(t=0),IS(h).TryJumpToMainViewPanel(c.Main_Shop,c.Shop_Gem,[t])}),f&&"string"!=typeof f?e.view.addComponentCallbackListener(p,u.EventType.CLICK,f):e.view.addComponentCallbackListener(p,u.EventType.CLICK,(function(){var t=l.findChild(p,"txtNum"),e=a?o:o.id;configGoods.getDataByKey(e).price.length>0?uiMgr.openView("ItemBuyView",e):IS(r).OpenItemTips(e,t)}));var g=a?o:o.id,R=configGoods.getDataByKey(g),v=l.findChildComponent(p,"imgIcon",s);e.view.loadIcon(v,"icon_item",R.icon),e.txtNums.push(l.findChildComponent(p,"txtNum",d));var C=l.findChild(p,"imgAdd");C&&(C.active=a?m||R.price.length>0:Boolean(o.showAdd))},p=0;p<t.length;++p){var m,f;a(p)}this.update()},n.update=function(){for(var t=0;t<this.config.length;++t){var e=this.gtid(t);this.txtNums[t].string=a.GetNumString(IS(r).getGoodsCountByGoodsGtid(e))}},n.updateIdx=function(t){o(t>=0&&t<this.config.length);var e=this.gtid(t);this.txtNums[t].string=a.GetNumString(IS(r).getGoodsCountByGoodsGtid(e))},n.updateGtid=function(t,e){for(var n=0;n<this.config.length;++n){var o=this.gtid(n);o==t&&(this.txtNums[n].string=null!=e?e:a.GetNumString(IS(r).getGoodsCountByGoodsGtid(o)))}},n.gtid=function(t){var e=this.config[t];return"number"==typeof e?e:e.id},e(t,[{key:"node",get:function(){return this.nodeResRoot}}]),t}());n._RF.pop()}}}));

