System.register("chunks:///_virtual/PoolInfoView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./BaseView.ts"],(function(t){"use strict";var e,o,i,n,l,s,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t.Button,n=t.Label,l=t.js},function(t){s=t.default},function(t){r=t.BaseView}],execute:function(){o._RF.push({},"379acQz1wFItJikLLWGxAxv","PoolInfoView",void 0);t("default",function(t){function o(){var e;return(e=t.call(this)||this).txtLevel=void 0,e.probabilityItems=void 0,e.poolId=void 0,e.curLevel=void 0,e.maxLevel=void 0,e.poolLvToCfg=void 0,e.name="PoolInfoView",e.url="ui/module/draw/PoolInfoView",e}e(o,t);var r=o.prototype;return r.onInit=function(){var t=this,e=this.findChild("root/imgMask");this.addComponentCallbackListener(e,i.EventType.CLICK,(function(){t.onMaskClick()}));var o=this.findChild("root/content/btnClose");this.addComponentCallbackListener(o,i.EventType.CLICK,(function(){t.onCloseClick()})),this.txtLevel=this.findChildComponent("root/content/level/txtLevel",n);var r=this.findChild("root/content/level/btnReduce");this.addComponentCallbackListener(r,i.EventType.CLICK,(function(){t.onReduceClick()}));var c=this.findChild("root/content/level/btnAdd");this.addComponentCallbackListener(c,i.EventType.CLICK,(function(){t.onAddClick()})),this.probabilityItems={};for(var a=1;a<=9;a++){var h=this.findChild(l.formatStr("root/content/group/detail/probabilityParent/probabilityItem%s",a));this.probabilityItems[a]=s.findChildComponent(h,"txtValue",n)}},r.registerUpdateHandler=function(){},r.onAfterOpen=function(){this.poolId=this.openArgs[0],this.curLevel=this.openArgs[1];var t,e=configCard_pool.getDataByList("type",this.poolId);this.poolLvToCfg={};for(var o=0,i=0;i<e.length;i++)t=e[i].level,this.poolLvToCfg[t]=e[i],t>o&&(o=t);this.maxLevel=o,this.refreshShow()},r.refreshShow=function(){this.txtLevel.string=GetLanguage(200089)+""+this.curLevel;for(var t,e=this.poolLvToCfg[this.curLevel].group,o=0,i={},n=0;n<e.length;n++)t=e[n][1],i[n+1]=t,o+=t;for(var s in this.probabilityItems)t=null!=i[s]?i[s]:0,this.probabilityItems[s].string=l.formatStr("%s%",100*t/o)},r.onBeforeClose=function(){},r.onDestroy=function(){},r.onMaskClick=function(){this.close()},r.onCloseClick=function(){this.close()},r.onReduceClick=function(){this.curLevel<=1||(this.curLevel=this.curLevel-1,this.refreshShow())},r.onAddClick=function(){this.curLevel>=this.maxLevel||(this.curLevel=this.curLevel+1,this.refreshShow())},o}(r));o._RF.pop()}}}));

