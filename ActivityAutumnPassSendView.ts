System.register("chunks:///_virtual/ActivityAutumnPassSendView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./ItemGrid.ts","./BagModel.ts","./MessageView.ts","./BagControl.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,s,o,u,d,a,h,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,s=t.Label,o=t.EditBox},null,function(t){u=t.ItemGrid},function(t){d=t.BagModel},function(t){a=t.default},function(t){h=t.default},function(t){c=t.BaseView}],execute:function(){e._RF.push({},"47a72zZ7jNFQoST9cYSjpU+","ActivityAutumnPassSendView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).editBox=void 0,i.itemGrid=void 0,i.txtDesc=void 0,i.useNum=1,i.itemId=void 0,i.maxNum=void 0,i.name="ActivityAutumnPassSendView",i.url="ui/module/autumn/ActivityAutumnPassSendView",i}i(e,t);var c=e.prototype;return c.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("view/btnUse");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.UseClick()}));var d=this.findChild("view/btnAdd");this.addComponentCallbackListener(d,n.EventType.CLICK,(function(){t.changeNum(1)}));var a=this.findChild("view/btnMinus");this.addComponentCallbackListener(a,n.EventType.CLICK,(function(){t.changeNum(-1)}));var h=this.findChild("view/btnAddTen");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){t.changeNum(10)}));var c=this.findChild("view/btnMinusTen");this.addComponentCallbackListener(c,n.EventType.CLICK,(function(){t.changeNum(-10)})),this.txtDesc=this.findChildComponent("view/txtDesc",s),this.itemGrid=new u(this,this.findChild("view/itemGrid")),this.editBox=this.findChildComponent("view/EditBox",o),this.addComponentCallbackListener(this.editBox.node,o.EventType.EDITING_DID_ENDED,(function(){var i=Number(t.editBox.string);(isNaN(i)||i<=1)&&(i=1),t.useNum=Math.floor(i),t.changeNum()}))},c.registerUpdateHandler=function(){},c.onAfterOpen=function(){this.itemId=1042,this.maxNum=IS(d).getGoodsCountByGoodsGtid(this.itemId),this.useNum=1,this.itemGrid.SetItemId(this.itemId),this.changeNum()},c.onBeforeClose=function(){},c.onDestroy=function(){},c.UseClick=function(){IS(d).getGoodsCountByGoodsGtid(this.itemId)<this.useNum?a.showFlyTip(GetLanguage(200069)):(IS(h).reqUseGoods(this.itemId,this.useNum),this.close())},c.changeNum=function(t){null!=t&&(this.useNum=this.useNum+t),this.useNum=Math.min(this.maxNum,Math.max(this.useNum,1)),this.editBox.string=String(this.useNum),this.txtDesc.string=GetLanguage(104366)+"ï¼š"+this.useNum},e}(c));e._RF.pop()}}}));

