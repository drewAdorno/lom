System.register("chunks:///_virtual/DoubleChapterGoodsGetView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./NodeUtil.ts","./index57.ts","./ItemIcon.ts","./ConfigGlobal.ts","./ArtifactDataCache.ts","./ArtifactDefine.ts","./BagDefine.ts","./BagModel.ts","./BasePopupView.ts"],(function(t){"use strict";var e,n,o,i,a,s,r,l,c,u,d,f,g,p,h,y;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,i=t.Button,a=t.Sprite,s=t.Label,r=t.Vec3},function(t){l=t.audioMgr},function(t){c=t.default},null,function(t){u=t.IconAseetType},function(t){d=t.ConfigGlobal},function(t){f=t.ArtifactDataCache},function(t){g=t.posToRotation},function(t){p=t.GoodsType},function(t){h=t.BagModel},function(t){y=t.BasePopupView}],execute:function(){o._RF.push({},"aa99aqjXyBJGZuDDmhZbW4L","DoubleChapterGoodsGetView",void 0);t("default",function(t){function o(){var e;return(e=t.call(this)||this).data=void 0,e.baseNode=void 0,e.name="DoubleChapterGoodsGetView",e.url="ui/module/dungeon/DoubleChapterGoodsGetView",e}e(o,t);var y=o.prototype;return y.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,i.EventType.CLICK,(function(){t.onMaskClick()})),this.baseNode=this.findChild("root/content/content")},y.registerUpdateHandler=function(){},y.onMaskClick=function(){this.close()},y.onAfterOpen=function(){t.prototype.onAfterOpen.call(this),l.playSound("common_reward");for(var e,o=this.openArgs[0],i=[],a=[],s=n(o);!(e=s()).done;){var r=e.value;2!=r.gtid?i.push(r):a.push(r)}if(i.length>1&&i.sort((function(t,e){var n=configGoods.getDataByKey(t.gtid),o=configGoods.getDataByKey(e.gtid);if(n)var i=n.quality;else i=IS(f).getStoneInfoByID(t.gtid).quality;if(n)var a=o.quality;else a=IS(f).getStoneInfoByID(e.gtid).quality;return i>=a?-1:1})),a.length>0)for(var c,u=n(a);!(c=u()).done;){var d=c.value;i.unshift(d)}this.data=i,this.baseNode=this.findChild("root/content/content"),this.onUpdateSmallGrid(this.data)},y.onUpdateSmallGrid=function(t){var e=this.findChild("root/content/content/item");this.baseNode.removeAllChildren();for(var n=0;n<t.length;n++){this.onCopy(e,t[n]).setParent(this.baseNode)}},y.onCopy=function(t,e){var n=nodeInstantiate.instantiate(t);n.active=!0;var o=c.findChildComponent(n,"imgFrame",a),l=c.findChildComponent(n,"imgIcon",a);c.findChildComponent(n,"num",s).string=e.num+"";var y=configGoods.getDataByKey(e.gtid);if(l.node.eulerAngles=new r(0,0,0),o.node.eulerAngles=new r(0,0,0),y||e.type!=p.Artifact){if(y&&y.type==p.Fate){var C=configFate.getDataByKey(y.effect[0]);this.loadIcon(o,"fate",d.fate_quality_pos[C.quality-1][1]),this.loadIcon(l,"icon_fate",C.icon,null,u.ICON_SPRITE)}else if(y){var v=configColor.getDataByKey(y.quality);this.loadIcon(o,"icon_equip",v.path),this.loadIcon(l,y.icon_group,y.icon)}}else{var I=IS(f).getStoneInfoByID(e.gtid),m=configArtifact_gemquality.getDataByKey(I.quality).frame;this.loadIcon(o,"icon_gem",m);var D=configArtifact_gemsets.getDataByKey(I.suit);this.loadIcon(l,"icon_gem",D.icon),l.node.eulerAngles=new r(0,0,g[I.pos]),o.node.eulerAngles=new r(0,0,g[I.pos])}return this.addComponentCallbackListener(n,i.EventType.CLICK,(function(){y||e.type!=p.Artifact?IS(h).OpenItemTips(null==y?void 0:y.id,n):uiMgr.openView("ArtifactInfoTipsView",e.gtid,n)})),n},y.onDestroy=function(){},o}(y));o._RF.pop()}}}));

