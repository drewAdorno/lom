System.register("chunks:///_virtual/GuildMemberView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./MessageView.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildDefine.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,c,h,d,u,l,f;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.Button,a=e.Label,o=e.Sprite},function(e){s=e.default},function(e){c=e.default},null,function(e){h=e.default},function(e){d=e.default},function(e){u=e.default},function(e){l=e.PermissionType},function(e){f=e.BaseView}],execute:function(){n._RF.push({},"82fceEjvSNF5YwLkFkuUn8N","GuildMemberView",void 0);e("default",function(e){function n(){var t;return(t=e.call(this)||this).txtName=void 0,t.txtCareer=void 0,t.txtDonateWeek=void 0,t.txtDonateSum=void 0,t.imgFrame=void 0,t.imgIcon=void 0,t.btnKick=void 0,t.btnList=[],t.careerNum={},t.data=void 0,t.name="GuildMemberView",t.url="ui/module/guild/GuildMemberView",t}t(n,e);var s=n.prototype;return s.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,r.EventType.CLICK,(function(){e.close()}));var n=this.findChild("view/btnClose");this.addComponentCallbackListener(n,r.EventType.CLICK,(function(){e.close()})),this.txtName=this.findChildComponent("view/name/desc",a),this.txtCareer=this.findChildComponent("view/career/desc",a),this.txtDonateWeek=this.findChildComponent("view/donate_week/desc",a),this.txtDonateSum=this.findChildComponent("view/donate_sum/desc",a),this.imgFrame=this.findChildComponent("view/head",o),this.imgIcon=this.findChildComponent("view/head/image",o),this.btnKick=this.findChild("view/btns/btnKick"),this.addComponentCallbackListener(this.btnKick,r.EventType.CLICK,(function(){var t=c.formatStrWithMirrorDeal(GetLanguage(200347),e.data.role_name);h.showBoxTip({tip:t,title:GetLanguage(200048),func:function(t){"type_yes"==t&&IS(d).send_29_9(e.data.role_id)}})}));for(var s,u=this.findChild("view/btns").children,l=i(u);!(s=l()).done;){var f=s.value,m=Number(f.name);if(!isNaN(m)){var C=new v;C.init(f,this,m),this.btnList.push(C)}}},s.registerUpdateHandler=function(){},s.onAfterOpen=function(){var e=this.openArgs[0];this.data=e,this.loadRemoteIcon(e.role_head.url,this.imgIcon),this.txtName.string=e.role_name,this.txtDonateWeek.string=e.donate_week,this.txtDonateSum.string=e.donate_sum,this.txtCareer.string=configGuild_career.getDataByKey(e.career).name,IS(u).CheckPermissioByType(l.Expel)&&IS(u).CheckCanExpelCareer(e.career)?this.btnKick.active=!0:this.btnKick.active=!1,this.careerNum={};var t=IS(u).GetMemberList();for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];this.careerNum[r.career]||(this.careerNum[r.career]=0),this.careerNum[r.career]=this.careerNum[r.career]+1}for(var a,o=i(this.btnList);!(a=o()).done;){a.value.show()}},s.onBeforeClose=function(){},s.onDestroy=function(){},n}(f));var v=function(){function e(){this.view=void 0,this.node=void 0,this.career=void 0,this.txt=void 0}var t=e.prototype;return t.init=function(e,t,i){this.view=t,this.node=e,this.career=i,this.onInit()},t.onInit=function(){var e=this;this.txt=s.findChildComponent(this.node,"Label",a),this.view.addComponentCallbackListener(this.node,r.EventType.CLICK,(function(){var t=configGuild_career.getDataByKey(e.career);if(1==e.career){var i=c.formatStrWithMirrorDeal(GetLanguage(200348),e.view.data.role_name);h.showBoxTip({tip:i,title:GetLanguage(200048),func:function(t){"type_yes"==t&&IS(d).send_29_13(e.view.data.role_id,e.career)}})}else{var n;t.number>0&&(null!=(n=e.view.careerNum[e.career])?n:0)>=t.number?h.showFlyTip(GetLanguage(200349)):IS(d).send_29_13(e.view.data.role_id,e.career)}}))},t.show=function(){if(IS(u).CheckPermissioByType(l.Official)&&IS(u).CheckCanChangeCareer(this.career))if(this.view.data.career==this.career||4==this.view.data.career&&5==this.career)this.node.active=!1;else if(this.node.active=!0,1==this.career)this.txt.string=GetLanguage(200350);else{var e,t=configGuild_career.getDataByKey(this.career);if(0==t.number)this.txt.string=c.formatStrWithMirrorDeal(GetLanguage(200351),t.name);else this.txt.string=c.formatStrWithMirrorDeal(GetLanguage(200352),t.name,null!=(e=this.view.careerNum[this.career])?e:0,t.number)}else this.node.active=!1},e}();n._RF.pop()}}}));

