System.register("chunks:///_virtual/PreviewView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./BaseView.ts","./BagModel.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts"],(function(i){"use strict";var e,t,o,n,s,d,l,c,r,f,h,a,u,v,p,I,m;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,o=i.Button,n=i.ScrollView,s=i.Label,d=i.Sprite,l=i.Vec3,c=i.sys},function(i){r=i.ItemGrid},function(i){f=i.ListItem},function(i){h=i.default},function(i){a=i.BaseView},function(i){u=i.BagModel},function(i){v=i.default},function(i){p=i.RoleDataCache},function(i){I=i.RoleEventDefine,m=i.RolePreviewState}],execute:function(){t._RF.push({},"a726dadA4FAyoCF8QSe8PRn","PreviewView",void 0);i("default",function(i){function t(){var e;return(e=i.call(this)||this).closeBtn=void 0,e.scrollView=void 0,e.name="PreviewView",e.url="ui/module/role/PreviewView",e}e(t,i);var s=t.prototype;return s.registerUpdateHandler=function(){this.addEvent(I.ROLE_PREVIEW_UPDATE,this.refreshScroll,this)},s.onInit=function(){var i=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){i.close()})),this.closeBtn=this.findChild("closeBtn"),this.addComponentCallbackListener(this.closeBtn,o.EventType.CLICK,(function(){i.close()}));var t=this.findChildComponent("container/ScrollView",n);this.scrollView=this.addUIList(t,w)},s.onAfterOpen=function(){this.refreshScroll()},s.refreshScroll=function(){this.scrollView.datas=IS(p).GetRolePreviewList()},s.onBeforeClose=function(){},s.onDestroy=function(){},t}(a));var w=function(i){function t(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return(e=i.call.apply(i,[this].concat(o))||this).itemGridNode=void 0,e.effectNode=void 0,e.finish=void 0,e.mask=void 0,e.itemGrid=void 0,e.name=void 0,e.des=void 0,e.icon=void 0,e.poolInfo=void 0,e.effect=void 0,e}e(t,i);var n=t.prototype;return n.onInit=function(){var i=this;this.itemGridNode=h.findChild(this.node,"itemGrid"),this.view.addComponentCallbackListener(this.itemGridNode,o.EventType.CLICK,(function(){})),this.finish=h.findChild(this.node,"finish"),this.mask=h.findChild(this.node,"mask"),this.itemGrid=new r(this.view,this.itemGridNode,(function(){if(IS(p).GetRolePreviewState(i.poolInfo.id)==m.Reward)IS(v).send_3_28(i.poolInfo.id);else{var e=i.poolInfo.reward[0][0];IS(u).OpenItemTips(e,i.itemGridNode)}})),this.name=h.findChildComponent(this.node,"name",s),this.des=h.findChildComponent(this.node,"des",s),this.icon=h.findChildComponent(this.node,"icon",d),this.effectNode=h.findChild(this.node,"effectNode")},n.onRender=function(i,e){this.poolInfo=i,this.view.loadIcon(this.icon,this.poolInfo.icon_atlas,this.poolInfo.icon),this.icon.node.scale=new l(c.uiMirror?-this.poolInfo.icon_scale:this.poolInfo.icon_scale,this.poolInfo.icon_scale,this.poolInfo.icon_scale),this.name.string=this.poolInfo.desc,this.des.string=this.poolInfo.condition_desc;var t=this.poolInfo.reward[0][0],o=this.poolInfo.reward[0][1];this.itemGrid.SetItemId(t,o),this.effect&&(this.view.removeUIEffect(this.effect),this.effect=null);var n=IS(p).GetRolePreviewState(this.poolInfo.id);n==m.Reward?(this.finish.active=!1,this.mask.active=!1,this.effect=this.view.addUIEffect("prefab/ui-effect/MX_tx_tongyong_daojulingqu",this.effectNode,-1)):n==m.Finish?(this.finish.active=!0,this.mask.active=!0):(this.finish.active=!1,this.mask.active=!1)},t}(f);t._RF.pop()}}}));

