System.register("chunks:///_virtual/ChatShareMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumDefine.ts","./ItemGrid.ts","./RedPointMgr.ts","./LabelUtil.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ItemIcon.ts","./ConfigGlobal.ts","./SLGMapData.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivityAutumnDataCache.ts","./ActivityAutumnDefine.ts","./ActivityPoolPartyDefine.ts","./RobCaseDataCache.ts","./ArtifactDataCache.ts","./ArtifactDefine.ts","./BagModel.ts","./DungeonControl.ts","./MessageView.ts","./FlyPetControl.ts","./FlyPetDefine.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildWarControl.ts","./MarryControl.ts","./ParkingControl.ts","./ParkingDataCache.ts","./PlantControl.ts","./PlantDefine.ts","./PlantModel.ts","./PvpControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./SeasonSceneControl.ts","./SlaveControl.ts","./TeamControl.ts","./ChatControl.ts","./ChatDataCache.ts","./ChatDefine.ts","./UIDefine.ts"],(function(t){"use strict";var i,e,n,o,s,r,a,h,l,d,g,f,p,c,m,u,v,I,C,y,_,w,S,L,b,k,T,A,G,R,x,W,D,F,B,M,E,N,O,V,P,K,H,q,X,j,z,U,J,Q,Y,Z,$,tt,it,et,nt,ot,st,rt,at,ht,lt,dt,gt,ft;return{setters:[function(t){i=t.createClass,e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t.isValid,r=t.Prefab,a=t.Vec3,h=t.Widget,l=t.Sprite,d=t.Label,g=t.Button,f=t.js,p=t.Vec2,c=t.UITransform,m=t.sys,u=t.Layout,v=t.HorizontalTextAlignment,I=t.Size,C=t.RichText,y=t.LabelOutline,_=t.Color},function(t){w=t.RecordSource},function(t){S=t.ItemGrid},function(t){L=t.RedPointMgr},function(t){b=t.LabelUtil},function(t){k=t.default},function(t){T=t.default},function(t){A=t.default},null,function(t){G=t.IconAseetType},function(t){R=t.ConfigGlobal},function(t){x=t.SLGMapData},function(t){W=t.default},function(t){D=t.default},function(t){F=t.ActivityType},function(t){B=t.default},function(t){M=t.CardItemIcon},function(t){E=t.CardPoolPartyItemIcon},function(t){N=t.default},function(t){O=t.ArtifactDataCache},function(t){V=t.posToRotation,P=t.numToRoman},function(t){K=t.BagModel},function(t){H=t.default},function(t){q=t.default},function(t){X=t.default},function(t){j=t.FlyPetQualityRes},function(t){z=t.default},function(t){U=t.default},function(t){J=t.default},function(t){Q=t.default},function(t){Y=t.default},function(t){Z=t.ParkingDataCache},function(t){$=t.default},function(t){tt=t.CropState},function(t){it=t.PlantModel},function(t){et=t.default},function(t){nt=t.RoleDataCache},function(t){ot=t.PlayerAttr},function(t){st=t.default},function(t){rt=t.default},function(t){at=t.default},function(t){ht=t.default},function(t){lt=t.EPvpShareType,dt=t.ChatDataCache},function(t){gt=t.RedBagState},function(t){ft=t.OpenFunction}],execute:function(){o._RF.push({},"dbe3fvi6VRNu7lYYC5QSVD4","ChatShareMessage",void 0);var pt=60*R.capture_slave_help_time*60,ct=t("ChatShareMessageView",function(){function t(t,i,e,n){void 0===n&&(n=!1),this.m_height=0,this.parent=void 0,this.view=void 0,this.item=void 0,this.childNode=void 0,this.shareInfo=void 0,this.url=void 0,this.cacheIdx=0,this.isLoading=!1,this.isInit=!1,this.isTempItem=!1,this.onLoadViewSuccess=void 0,this.parent=t,this.item=i,this.url="ui/module/Chat/"+e.goName,this.m_height=k.findChildComponent(this.item,"",c).height,this.shareInfo=e,this.isTempItem=n}var e=t.prototype;return e.Refresh=function(){var t=this;if(this.view=this.parent.view,this.onLoadViewSuccess&&(resourceMgr.cancelLoadRes(this.url,this.onLoadViewSuccess),this.onLoadViewSuccess=null,this.isLoading=!1),this.isInit){if(!(this.childNode||this.shareInfo.notRecycle||this.isTempItem&&this.shareInfo.isPreCalc)){var i=this.view.GetShareItemPool(this.cacheIdx);i&&s(i)&&(i.setParent(this.item),i.position=a.ZERO,this.childNode=i)}}else if(this.item.children[0]&&s(this.childNode))this.InitNode(this.item.children[0]);else if(this.isTempItem&&this.shareInfo.isPreCalc){var e=this.view.GetPreShareCalcItem(this.shareInfo.goName);e?this.InitNode(e):printLogErr("找不到预计算高度的item，需要将item挂在preShareCalcHeightItem节点下")}else this.isLoading||(this.onLoadViewSuccess=function(i){if(t.item.children[0]&&s(t.item.children[0])&&t.item.children[0].destroy(),t.onLoadViewSuccess=null,t.isLoading=!1,!i.error&&null!=i.item&&null!=i.item.asset){t.view.cacheShareNum+=1,t.cacheIdx=t.view.cacheShareNum;var e=i.item.asset,n=nodeInstantiate.instantiate(e);n.setParent(t.item),t.InitNode(n)}},resourceMgr.loadRes(this.url,r,this.onLoadViewSuccess),this.isLoading=!0)},e.InitNode=function(t){this.childNode=t,this.onInit(t),this.isInit=!0,this.Refresh()},e.SetActive=function(t){t?(this.item.active=!0,this.Refresh()):(this.onLoadViewSuccess||this.childNode&&this.item.active)&&(this.onLoadViewSuccess?(resourceMgr.cancelLoadRes(this.url,this.onLoadViewSuccess),this.onLoadViewSuccess=null,this.isLoading=!1):!this.shareInfo.notRecycle&&this.cacheIdx>0&&(this.view.InsertShareItemPool(this.cacheIdx,this.childNode),this.childNode=null),this.item.active=!1)},e.destroy=function(){this.onLoadViewSuccess&&(resourceMgr.cancelLoadRes(this.url,this.onLoadViewSuccess),this.onLoadViewSuccess=null,this.isLoading=!1),this.isInit&&(this.SetActive(!1),resourceMgr.releaseResRef(this.url))},e.reset=function(){this.onLoadViewSuccess?(resourceMgr.cancelLoadRes(this.url,this.onLoadViewSuccess),this.onLoadViewSuccess=null,this.isLoading=!1):this.SetActive(!1)},i(t,[{key:"height",get:function(){return this.m_height}}]),t}()),mt=(t("PvPShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.leftIcon=void 0,i.rightIcon=void 0,i.leftSuccess=void 0,i.rightSuccess=void 0,i.leftSpecSuccess=void 0,i.rightSpecSuccess=void 0,i.leftName=void 0,i.rightName=void 0,i.leftBattle=void 0,i.rightBattle=void 0,i.leftMask=void 0,i.rightMask=void 0,i.leftBattleNode=void 0,i.rightBattleNode=void 0,i.poolInfo=void 0,i.vid=void 0,i.battleSoucre=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.leftIcon=k.findChildComponent(t,"left/iconMask/icon",l),this.rightIcon=k.findChildComponent(t,"right/iconMask/icon",l),this.leftSuccess=k.findChild(t,"left/success"),this.rightSuccess=k.findChild(t,"right/success"),this.leftSpecSuccess=k.findChild(t,"left/specSuccess"),this.rightSpecSuccess=k.findChild(t,"right/specSuccess"),this.leftName=k.findChildComponent(t,"left/name",d),this.rightName=k.findChildComponent(t,"right/name",d),this.leftBattle=k.findChildComponent(t,"left/battle/Text",d),this.rightBattle=k.findChildComponent(t,"right/battle/Text",d),this.leftBattleNode=k.findChild(t,"left/battle"),this.rightBattleNode=k.findChild(t,"right/battle"),this.leftMask=k.findChild(t,"left/mask"),this.rightMask=k.findChild(t,"right/mask");var e=this.parent.view;e.addComponentCallbackListener(t,g.EventType.CLICK,(function(){e.is_Block?q.showFlyTip(configErrorInfo.getDataByKey(172).info):i.battleSoucre==lt.default?IS(et).reqRecordInfo(i.vid,w.chatShare):i.battleSoucre==lt.farmBattle?IS($).reqBattleRecordInfo(i.vid):i.battleSoucre==lt.roleSolo?IS(et).reqSoloVideo(i.vid,w.chatShare):i.battleSoucre==lt.crossPvp?IS(et).reqCrossPvpReplay(i.vid,w.chatShare):i.battleSoucre==lt.parkingBattle?IS(Y).reqParkVideoPlay(i.vid,w.chatShare):i.battleSoucre==lt.slaveBattle&&IS(rt).reqCaptureSlaveVideoPlay(i.vid,w.chatShare)}));var n=k.findChildComponent(t,"vs",l);this.view.loadIcon(n,"jjc","jjc_ui_vs"),this.view.loadIcon(this.leftSuccess.getComponent(l),"common","gvg_img_shengli"),this.view.loadIcon(this.rightSuccess.getComponent(l),"common","gvg_img_shengli")},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit)if(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,91.4):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,91.4),this.poolInfo.links[0]){var i=this.poolInfo.links[0].args_list,e=this.poolInfo.links[0].string_list;this.vid=i[0];var n=i[1],o=i[2],s=i[3],r=i[4],a=i[5],h=e[0],l=e[1];this.battleSoucre=i[6];var d=i[7],g=i[8],p=configJobs.getDataByKey(r);p.change_times>=5&&2==d?this.parent.view.loadIcon(this.leftIcon,"icon_job",f.formatStr("job_%s_2",r),null,G.ICON_SPRITE,!0):this.parent.view.loadIcon(this.leftIcon,"icon_job","job_"+r,null,G.ICON_SPRITE,!0),(p=configJobs.getDataByKey(a)).change_times>=5&&2==g?this.parent.view.loadIcon(this.rightIcon,"icon_job",f.formatStr("job_%s_2",a),null,G.ICON_SPRITE,!0):this.parent.view.loadIcon(this.rightIcon,"icon_job","job_"+a,null,G.ICON_SPRITE,!0),this.leftSuccess.active=1==n&&o>=s,this.leftSpecSuccess.active=1==n&&o<s,this.rightSuccess.active=1!=n&&s>=o,this.rightSpecSuccess.active=1!=n&&s<o,this.leftName.string=h,this.rightName.string=l,this.leftBattle.string=o,this.rightBattle.string=s,this.leftMask.active=1!=n,this.rightMask.active=1==n,this.leftBattleNode.active=this.battleSoucre!=lt.crossPvp,this.rightBattleNode.active=this.battleSoucre!=lt.crossPvp}else printLogErr("Pvp分享链接为空")},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("FarmHelpShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h);var e=this.parent.view;e.addComponentCallbackListener(t,g.EventType.CLICK,(function(){if(e.is_Block)q.showFlyTip(configErrorInfo.getDataByKey(172).info);else if(i.poolInfo.links[0]){var t=uiMgr.getOpenView("ChatView"),n=i.poolInfo.links[0].args_list[2],o=IS(nt).GetRoleId();if(n!=o){var s=i.poolInfo.links[0].args_list[0],r=i.poolInfo.links[0].args_list[1],a=i.poolInfo.links[0].args_list[4];if(s==o){var h=IS(it).getLandInfoById(r),l=h.crop;return null==l||(l.state==tt.STEALING||l.end_time!=a)?void q.showFlyTip(GetLanguage(200182)):void uiMgr.openView("PlantThiefView",s,h,!1)}t.waitingFarmInfoRoleId=s,t.waitingFarmInfoLandId=r,t.lastEndTime=a,IS($).reqFarmInfo(t.waitingFarmInfoRoleId)}else q.showFlyTip(GetLanguage(200181))}else printLogErr("Pvp分享链接为空")}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,91.4):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,91.4))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("MakeTeamShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtLevel=void 0,i.goWidge=void 0,i.poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.txtLevel=k.findChildComponent(t,"txtLevel",d),this.goWidge=k.findChildComponent(this.item,"",h);var e=this.parent.view;e.addComponentCallbackListener(t,g.EventType.CLICK,(function(){if(e.is_Block)q.showFlyTip(configErrorInfo.getDataByKey(172).info);else if(i.poolInfo.links[0]){uiMgr.getOpenView("ChatView");var t=i.poolInfo.links[0].args_list[1];IS(at).reqTeamJoin(t),IS(L).changeValue("team_"+t,0)}else printLogErr("Pvp分享链接为空")}))},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit)if(this.poolInfo.links[0]){var i=this.poolInfo.links[0].args_list[1];IS(L).addRedPoint("team_"+i,this.childNode,new p(200,40)),this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,91.4):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,91.4);var e=this.poolInfo.links[0].args_list[0];this.txtLevel.string=T.formatStrWithMirrorDeal(GetLanguage(300182),e)}else printLogErr("分享链接为空")},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("MessageShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).label=void 0,i.poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.label=k.findChildComponent(t,"Label",d)},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.label.string=this.poolInfo.content;var i=b.measureSize(this.label);this.m_height=Math.max(i.height,37.8)+10}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("GuildBossNoticeShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this.parent.view;i.addComponentCallbackListener(t,g.EventType.CLICK,(function(){i.is_Block?q.showFlyTip(configErrorInfo.getDataByKey(172).info):IS(J).reqGuildBossInfo()}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("GuildQuestionTip",function(t){function i(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i}return e(i,t),i.prototype.onInit=function(t){this.parent.view.addComponentCallbackListener(t,g.EventType.CLICK,(function(){uiMgr.openView("CommonTipView",GetLanguage(103509),GetLanguage(200183))}))},i}(ct)),t("answerEndShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.str=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.str=k.findChildComponent(t,"Label",d)},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.str.string=this.poolInfo.content;var i=b.measureSize(this.str);this.m_height=Math.max(i.height,35)+10}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("guildQuestionRank",function(t){function i(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.playerList=[],i.rank=void 0,i.score=void 0,i.scoreName=void 0,i}e(i,t);var n=i.prototype;return n.onInit=function(t){for(var i=0;i<3;i++){var e={node:k.findChild(t,"playerInfo"+(i+1)),headImg:k.findChildComponent(t,"playerInfo"+(i+1)+"/head/image",l),name:k.findChildComponent(t,"playerInfo"+(i+1)+"/name",d),score:k.findChildComponent(t,"playerInfo"+(i+1)+"/score",d)};this.playerList.push(e)}this.rank=k.findChildComponent(t,"rank/num",d),this.score=k.findChildComponent(t,"score/num",d),this.scoreName=k.findChildComponent(t,"score",d)},n.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){var i=this.poolInfo.answerRankInfo;if(!i)try{var e=this.poolInfo.links[0].string_list[0];i=JSON.parse(e)}catch(t){}if(i){this.poolInfo.answerRankInfo=i;for(var n=i.rank_list,o=0;o<3;o++){var s=n[o];s?(this.playerList[o].node.active=!0,this.playerList[o].name.string=s.name,this.playerList[o].score.string=GetLanguage_UI(999000450)+f.formatStr("%s",s.score),this.view.loadRemoteIcon(s.url,this.playerList[o].headImg)):this.playerList[o].node.active=!1}if(this.rank.string=f.formatStr("%s",i.guild_rank),10==i.guild_score){this.scoreName.string=GetLanguage(200185);var r=A.getTimeData(i.guild_time),a=r[0],h=r[1];r[2],r[3];this.score.string=T.formatStrWithMirrorDeal(GetLanguage(200004),h.toString().padStart(2,"0"),a.toString().padStart(2,"0"))}else this.scoreName.string=GetLanguage(200186),this.score.string=f.formatStr("%s",i.guild_score)}}},i}(ct)),t("GuildHelpShare",function(t){function i(){for(var i,e,n,o,s,r=arguments.length,a=new Array(r),h=0;h<r;h++)a[h]=arguments[h];return(s=t.call.apply(t,[this].concat(a))||this).imgRes=((i={})[1]="lt_BG_banner02",i[2]="lt_BG_banner01",i[3]="lt_BG_banner03",i),s.txtLabel1=((e={})[1]=999000245,e[2]=999000242,e[3]=999000245,e),s.txtLabel2=((n={})[1]=999000246,n[2]=999000243,n[3]=999000247,n),s.txtLabel3=((o={})[1]=999000244,o[2]=999000244,o[3]=999000244,o),s.poolInfo=void 0,s.txt1=void 0,s.txt2=void 0,s.txt3=void 0,s.img=void 0,s.btnHelp=void 0,s.isHelp=void 0,s.isOut=void 0,s.goWidge=void 0,s}e(i,t);var n=i.prototype;return n.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.img=k.findChildComponent(t,"img",l),this.txt1=k.findChildComponent(t,"txt1",d),this.txt2=k.findChildComponent(t,"txt2",d),this.txt3=k.findChildComponent(t,"txt3",d),this.btnHelp=k.findChild(t,"btnHelp"),this.parent.view.addComponentCallbackListener(this.btnHelp,g.EventType.CLICK,(function(){if(i.poolInfo.role_id!=IS(nt).GetRoleId())if(i.poolInfo.links[0]){var t=i.poolInfo.links[0].args_list[0];IS(U).isHelp(t)?q.showFlyTip(GetLanguage(200188)):IS(z).send_29_30(i.poolInfo.links[0].args_list[0])}else printLogErr("Pvp分享链接为空");else q.showFlyTip(GetLanguage(200187))})),this.isHelp=k.findChild(t,"isHelp"),this.parent.view.addComponentCallbackListener(this.isHelp,g.EventType.CLICK,(function(){q.showFlyTip(GetLanguage(200188))})),this.isOut=k.findChild(t,"isOut"),this.parent.view.addComponentCallbackListener(this.isOut,g.EventType.CLICK,(function(){q.showFlyTip(GetLanguage(200189))}))},n.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit)if(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,89):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,89),this.poolInfo.links[0]){var i=this.poolInfo.links[0].args_list[1];this.parent.view.loadIcon(this.img,"guild_help",this.imgRes[i]),this.txt1.string=GetLanguage_UI(this.txtLabel1[i]),this.txt2.string=GetLanguage_UI(this.txtLabel2[i]),this.txt3.string=GetLanguage_UI(this.txtLabel3[i]);var e=this.poolInfo.links[0].args_list[0],n=IS(U).isHelp(e);this.btnHelp.active=0==n,this.isHelp.active=1==n,this.isOut.active=null==n}else printLogErr("Pvp分享链接为空")},i}(ct)),t("NewsShareItem",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.headImg=void 0,i.content=void 0,i.bgTrans=void 0,i.bg=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.headImg=k.findChildComponent(t,"playerInfo/head/image",l),this.content=k.findChildComponent(t,"content",d),this.bgTrans=k.findChildComponent(t,"bg",c),this.bg=k.findChildComponent(t,"bg",l),m.uiMirror&&this.view.dealMirrorLayout(k.findChildComponent(t,"playerInfo/nameBg",u))},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.content.string=this.poolInfo.content,this.content.horizontalAlign=m.uiMirror?v.RIGHT:v.LEFT;var i=b.measureSize(this.content),e=Math.max(98,i.height+29.8+11.415),n=Math.max(184,i.width+34+12);this.bgTrans.setContentSize(new I(n,e)),this.m_height=e+20}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("RedBagShare",function(t){function i(){for(var i,e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).imgRes=((i={})[1]="redpacket_ui_hb1_3",i[2]="redpacket_ui_hb1_2",i[3]="redpacket_ui_hb1_1",i),e.poolInfo=void 0,e.img=void 0,e.btnReward=void 0,e.mask=void 0,e.noReward=void 0,e.hasClaimed=void 0,e.goWidge=void 0,e.tinyDesc=void 0,e.desc=void 0,e.id=void 0,e.cfg_id=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.img=k.findChildComponent(t,"img",l),this.tinyDesc=k.findChildComponent(t,"tinyDesc",d),this.desc=k.findChildComponent(t,"desc",d),this.noReward=k.findChild(t,"noReward"),this.hasClaimed=k.findChild(t,"hasClaimed"),this.btnReward=k.findChild(t,"rewardBtn"),this.mask=k.findChild(t,"maskImg"),this.parent.view.addComponentCallbackListener(k.findChild(t,""),g.EventType.CLICK,(function(){var t=configRed_packet.getDataByKey(i.cfg_id);IS(ht).send_red_grab_c2s(i.id,t.type)}))},n.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,89):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,89);var i=this.poolInfo.links[0].args_list;this.id=i[0],this.cfg_id=i[1];var e=configRed_packet.getDataByKey(this.cfg_id);if(null!=e){this.tinyDesc.string=e.tiny_title,this.desc.string=e.title,this.parent.view.loadIcon(this.img,"red_bag",this.imgRes[e.quality],null,null,!0);var n=IS(dt).GetRedBagById(this.id);n?n.state==gt.UnClaimed?(this.mask.active=!1,this.noReward.active=!1,this.hasClaimed.active=!1):n.state==gt.Received?(this.mask.active=!1,this.noReward.active=!1,this.hasClaimed.active=!0):(this.mask.active=!0,this.noReward.active=!0,this.hasClaimed.active=!1):(this.mask.active=!0,this.noReward.active=!0,this.hasClaimed.active=!1)}else printLogErr("红包配置不存在，id = "+this.cfg_id)}},i}(ct)),t("RedBagTipMessageShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.content=void 0,i.answerGou=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.content=k.findChildComponent(t,"Label",d),this.answerGou=k.findChild(t,"Label/answerGou")},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.content.string=this.poolInfo.content;var i=b.measureSize(this.content);this.answerGou.setPosition(i.width/2,this.answerGou.position.y,0),this.m_height=Math.max(i.height,36.8)+10}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("SkillTabShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.skillItems=[],i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.parent.view.addComponentCallbackListener(t,g.EventType.CLICK,(function(){uiMgr.openView("SkillTabShareDetailView",i.poolInfo.name,i.poolInfo.links[0].string_list)}));for(var e=2;e<=6;e++){var n=k.findChild(t,f.formatStr("wearParent/item%s",e));this.skillItems.push({pos:e,node:n,nodeLock:k.findChild(n,"imgLock"),nodeEmpty:k.findChild(n,"btnWear"),nodeWear:k.findChild(n,"nodeWear"),imgFrame:k.findChildComponent(n,"imgFrame",l),imgIcon:k.findChildComponent(n,"nodeWear/imgIcon",l),txtLevel:k.findChildComponent(n,"nodeWear/txtLevel",d)})}},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95);for(var i=this.poolInfo.links[0].string_list[1],e=JSON.parse(i),n={},o=0;o<e.length;o++)n[e[o].pos]=e[o];for(var s=0;s<this.skillItems.length;s++){var r=this.skillItems[s],a=n[r.pos];if(r.nodeLock.active=!1,r.nodeEmpty.active=!1,r.nodeWear.active=!1,-1!=a.skill_id)if(r.imgFrame.grayscale=!1,0!=a.skill_id){var h=configSkill.getDataByKey(a.skill_id);this.parent.view.loadIcon(r.imgFrame,"icon_skill",f.formatStr("common_ICON_jinengkuang0%s",h.quality)),this.parent.view.loadIcon(r.imgIcon,"icon_skill",h.icon),r.nodeWear.active=!0,r.txtLevel.string=f.formatStr("Lv.%s",a.skill_lv)}else this.parent.view.loadIcon(r.imgFrame,"icon_skill","common_ICON_jinengkuang01"),r.nodeEmpty.active=!0;else r.nodeLock.active=!0,this.parent.view.loadIcon(r.imgFrame,"icon_skill","common_ICON_jinengkuang01"),r.imgFrame.grayscale=!0}}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("PetTabShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.petItems=[],i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.parent.view.addComponentCallbackListener(t,g.EventType.CLICK,(function(){uiMgr.openView("PetTabShareDetailView",i.poolInfo.name,i.poolInfo.links[0].string_list)}));for(var e=1;e<=5;e++){var n=k.findChild(t,f.formatStr("wearParent/item%s",e));this.petItems.push({pos:e,node:n,nodeLock:k.findChild(n,"imgLock"),nodeEmpty:k.findChild(n,"btnWear"),nodeWear:k.findChild(n,"nodeWear"),imgFrame:k.findChildComponent(n,"imgFrame",l),imgIcon:k.findChildComponent(n,"nodeWear/imgIcon",l),txtLevel:k.findChildComponent(n,"nodeWear/txtLevel",d)})}},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95);for(var i=this.poolInfo.links[0].string_list[1],e=JSON.parse(i),n={},o=0;o<e.length;o++)n[e[o].pos]=e[o];for(var s=0;s<this.petItems.length;s++){var r=this.petItems[s],a=n[r.pos];if(r.nodeLock.active=!1,r.nodeEmpty.active=!1,r.nodeWear.active=!1,-1!=a.pet_id)if(r.imgFrame.grayscale=!1,0!=a.pet_id){var h=configPet.getDataByKey(a.pet_id);this.parent.view.loadIcon(r.imgFrame,"icon_pet",configColor.getDataByKey(h.quality).path),this.parent.view.loadIcon(r.imgIcon,"icon_pet",h.icon),r.nodeWear.active=!0,r.txtLevel.string=f.formatStr("Lv.%s",a.level)}else this.parent.view.loadIcon(r.imgFrame,"icon_pet","zjm_ui_pinzhikuangbai"),r.nodeEmpty.active=!0;else r.nodeLock.active=!0,this.parent.view.loadIcon(r.imgFrame,"icon_pet","zjm_ui_pinzhikuangbai"),r.imgFrame.grayscale=!0}}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("CrossWarReportView",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.goWidge=void 0,i.num1=void 0,i.num2=void 0,i.num3=void 0,i.num4=void 0,i.model=void 0,i.img=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.goWidge=k.findChildComponent(this.item,"",h),this.num1=k.findChildComponent(t,"num1",d),this.num2=k.findChildComponent(t,"num2",d),this.num3=k.findChildComponent(t,"num3",d),this.num4=k.findChildComponent(t,"num4",d),this.img=k.findChild(t,"img"),this.model=k.findChild(t,"model"),this.parent.view.addComponentCallbackListener(t,g.EventType.CLICK,(function(){}))},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit)if(this.poolInfo.links[0]){this.poolInfo.is_my?(this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,91.4),this.img.scale=new a(1,1,1)):(this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,91.4),this.img.scale=new a(-1,1,1));var i=this.poolInfo.links[0].args_list[0],e=this.poolInfo.links[0].args_list[1],n=(this.poolInfo.links[0].args_list[2],this.poolInfo.links[0].args_list[3]),o=this.poolInfo.links[0].args_list[4],s=this.poolInfo.links[0].args_list[5],r=this.poolInfo.links[0].args_list[6],h=this.poolInfo.links[0].args_list[7],l=this.poolInfo.links[0].args_list[8],d=this.poolInfo.links[0].args_list[9],g=this.poolInfo.links[0].args_list[10],f=this.poolInfo.links[0].args_list[11],p=this.poolInfo.links[0].args_list[12],c=this.poolInfo.links[0].args_list[13];this.num1.string=i,this.num2.string=0==e?"-":e,this.num3.string=null!=c?c:0,this.num4.string=n,this.model.removeAllChildren(),null==o&&""!=o||this.parent.view.addUnitModel({job:o,dressId:s,gender:r,weapon:h,ornaments:l,face:d,color:g,parent:this.model,mount:f,shenqi:p})}else printLogErr("跨服战分享链接为空")},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("ActivityAutumCardShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.goWidge=void 0,i.name=void 0,i.time=void 0,i.itemIcon=void 0,i.btn=void 0,i.btnTxt=void 0,i.timeOutDes=void 0,i.type=void 0,i.uid=void 0,i.cfgId=void 0,i.end_time=void 0,i.timer=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.itemIcon=k.findChildComponent(t,"item",l),this.name=k.findChildComponent(t,"name",d),this.time=k.findChildComponent(t,"time",d),this.btn=k.findChildComponent(t,"btn",l),this.btnTxt=k.findChildComponent(t,"btn/Label",d),this.timeOutDes=k.findChildComponent(t,"timeOutDes",d),this.parent.view.addComponentCallbackListener(this.btn.node,g.EventType.CLICK,(function(){var t=IS(B).GetCardRewardChatState(i.uid);if(0==t||!t)if(1==i.type){if(i.parent.poolInfo.role_id==IS(nt).GetRoleAttr(ot.ROLE_ATTR_ID))return void q.showFlyTip(GetLanguage(200822));IS(W).send_24_61(i.uid)}else{if(i.parent.poolInfo.role_id==IS(nt).GetRoleAttr(ot.ROLE_ATTR_ID))return void q.showFlyTip(GetLanguage(200823));1==i.type?R.autumn_card_dailygift:R.autumn_card_dailyask;if((1==i.type?IS(B).send_times:IS(B).ask_times)<=0)return void q.showFlyTip(GetLanguage(200749));if(IS(K).getGoodsCountByGoodsGtid(i.cfgId)<=1)return void q.showFlyTip(GetLanguage(200748));uiMgr.openView("ActivityAutumnCardGiveTipView",i.cfgId,i.poolInfo.role_id,i.uid,i.poolInfo.name)}}))},o.Refresh=function(){var i=this;if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&this.poolInfo.links[0]){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,79):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,72),this.uid=this.poolInfo.links[0].args_list[0],this.cfgId=this.poolInfo.links[0].args_list[1],this.type=this.poolInfo.links[0].args_list[2],this.end_time=this.poolInfo.links[0].args_list[3];var e=configGoods.getDataByKey(this.cfgId);this.view.loadIcon(this.itemIcon,"autumn2",M[this.cfgId]);var n=IS(B).GetCardRewardChatState(this.uid);this.timer&&(this.time.string="",this.view.removeTimer(this.timer),this.timer=null),1==this.type?(this.btn.grayscale=!1,this.timeOutDes.string="",this.btn.node.active=!0,this.btnTxt.string=GetLanguage(200798),this.name.string=T.formatStrWithMirrorDeal(GetLanguage(200772),e.name),this.end_time-A.serverTime>0&&(0==n||!n)?(this.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(this.end_time-A.serverTime)),this.timer=this.view.addTimer(1,this.end_time-A.serverTime,(function(){i.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(i.end_time-A.serverTime)),i.end_time-A.serverTime<=0&&i.timer&&(i.btn.node.active=!1,i.timeOutDes.string=GetLanguage(200754),i.time.string="",i.view.removeTimer(i.timer),i.timer=null)}))):(this.time.string="",1==n?(this.btn.node.active=!0,this.btn.grayscale=!0,this.timeOutDes.string="",this.btnTxt.string=GetLanguage(200753)):(this.btn.node.active=!1,this.timeOutDes.string=GetLanguage(200754)))):(this.name.string=T.formatStrWithMirrorDeal(GetLanguage(200774),e.name),this.end_time-A.serverTime>0&&(0==n||!n)?(this.btn.grayscale=!1,this.timeOutDes.string="",this.btn.node.active=!0,this.btnTxt.string=GetLanguage(200799),this.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(this.end_time-A.serverTime)),this.timer=this.view.addTimer(1,this.end_time-A.serverTime,(function(){i.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(i.end_time-A.serverTime)),i.end_time-A.serverTime<=0&&i.timer&&(i.btn.node.active=!1,i.timeOutDes.string=GetLanguage(200754),i.time.string="",i.view.removeTimer(i.timer),i.timer=null)}))):(this.time.string="",this.btn.node.active=!1,this.timeOutDes.string=1==n?GetLanguage(200755):GetLanguage(200754)))}},o.reset=function(){this.timer&&(this.view.removeTimer(this.timer),this.timer=null),t.prototype.reset.call(this)},o.destroy=function(){this.timer&&(this.view.removeTimer(this.timer),this.timer=null),t.prototype.destroy.call(this)},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("ParkingCallShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.pos=void 0,i.type=void 0,i.master_id=void 0,i.role_id=void 0,i.ceng=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h);var e=this.parent.view;if(e.adjustMirrorNode(k.findChild(t,"img"),0,!0),m.uiMirror){var n=k.findChild(t,"img/txtDesc1");e.adjustMirrorNode(n,360,!1),n.scale=new a(1,1,1)}e.addComponentCallbackListener(t,g.EventType.CLICK,(function(){var t;e.is_Block?q.showFlyTip(configErrorInfo.getDataByKey(172).info):(IS(Z).robCache={pos:i.pos,type:i.type,master_id:i.master_id,role_id:i.role_id,ceng:i.ceng},1==i.type&&(i.ceng=Math.ceil(i.pos/R.park_public_each_num)),IS(Y).reqParkingInfo(i.type,i.master_id,null!=(t=i.ceng)?t:0))}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,this.pos=this.poolInfo.links[0].args_list[0],this.type=this.poolInfo.links[0].args_list[1],this.master_id=this.poolInfo.links[0].args_list[2],this.role_id=this.poolInfo.links[0].args_list[3],this.ceng=this.poolInfo.links[0].args_list[4],t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,91.4):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,91.4))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("ActivityHallowmasShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.txt=void 0,i.txtNum=void 0,i.scrollView=void 0,i.itemList=[],i.goWidge=void 0,i.uid=void 0,i.cfgId=void 0,i.itemIcon=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this,e=this.parent.view;if(this.goWidge=k.findChildComponent(this.item,"",h),this.txt=k.findChildComponent(t,"txt",d),this.txtNum=k.findChildComponent(t,"txtNum",d),this.itemIcon=k.findChildComponent(t,"txt/itemIcon",l),m.uiMirror){var n=this.itemIcon.node.getComponent(h);n.alignFlags=32,n.right=-28.2}this.scrollView=k.findChildComponent(t,"ScrollView/view/content",c);for(var o=0;o<5;o++){var s=new mt;s.onInit(this.view,k.findChild(t,"ScrollView/view/content/item"+(o+1))),this.itemList[o]=s}e.addComponentCallbackListener(t,g.EventType.CLICK,(function(){0!=IS(N).GetGroupChatInfo(i.uid)?IS(W).send_24_80(i.uid,1,F.RobCaseBuy):q.showFlyTip(GetLanguage(201208))}))},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,88):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,88),this.uid=this.poolInfo.links[0].args_list[0],this.cfgId=this.poolInfo.links[0].args_list[1];var i=configHalloween_group_buy.getDataByKey(this.cfgId);if(i){for(var e=0;e<this.itemList.length;e++){this.itemList[e].onRender(i.reward[e])}this.scrollView.width=75.5*i.reward.length;var n=configGoods.getDataByKey(i.expend[0]);this.view.loadIcon(this.itemIcon,n.icon_group,n.icon);var o=IS(N).GetGroupChatInfo(this.uid);o||0==o||IS(W).send_24_80(this.uid,0,F.RobCaseBuy);var s=o&&o>0?T.formatStrWithMirrorDeal(GetLanguage(201207),null!=o?o:0):GetLanguage(201208),r=999==i.expend[0]?i.expend[1]/100:i.expend[1];this.txt.string=r.toString(),this.txtNum.string=f.formatStr("(%s)",s)}}},o.reset=function(){this.scrollView&&(this.scrollView._updateDone||(this.scrollView._updateDone=!0)),t.prototype.reset.call(this)},o.destroy=function(){this.scrollView&&(this.scrollView._updateDone||(this.scrollView._updateDone=!0)),t.prototype.destroy.call(this)},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),function(){function t(){this.itemGrid=void 0,this.itemGridNode=void 0,this.node=void 0,this.view=void 0}var i=t.prototype;return i.onInit=function(t,i){this.view=t,this.node=i,this.itemGridNode=k.findChild(i,"itemGrid"),this.itemGrid=new S(this.view,this.itemGridNode)},i.onRender=function(t,i){t?(this.node.active=!0,this.itemGrid.SetItemId(t[0],t[1])):this.node.active=!1},t}());t("ArtifactGemInfoShare",function(t){function o(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.txtName=void 0,i.txtLevel=void 0,i.frame=void 0,i.icon=void 0,i.bg=void 0,i}e(o,t);var s=o.prototype;return s.onInit=function(t){this.goWidge=k.findChildComponent(this.item,"",h),this.txtName=k.findChildComponent(this.childNode,"nodeName/name",d),this.bg=k.findChild(this.childNode,"bg"),this.txtLevel=k.findChildComponent(t,"nodeName/level",d),this.frame=k.findChildComponent(t,"nodeName/imgFrame",l),this.icon=k.findChildComponent(t,"nodeName/imgFrame/imgIcon",l)},s.Refresh=function(){this.poolInfo=this.parent.poolInfo;var i=this.poolInfo.links[0].string_list[0],e=JSON.parse(i),o=[];o.push({info:e.base_attr[0],type:1});for(var s,r=n(e.rand_attr);!(s=r()).done;){var h=s.value;o.push({info:h,type:2})}if(this.m_height=270-29*(5-o.length),t.prototype.Refresh.call(this),this.isInit){var l=configArtifact_gemquality.getDataByKey(e.quality).frame;this.parent.view.loadIcon(this.frame,"icon_gem",l);var g=configArtifact_gemsets.getDataByKey(e.suit);this.parent.view.loadIcon(this.icon,"icon_gem",g.icon),this.frame.node.eulerAngles=new a(0,0,V[e.pos]);var p=configArtifact_gemsets.getDataByKey(e.suit);this.txtName.string=p.name+"·"+P[e.pos],this.txtLevel.string="Lv."+e.lv;for(var m=1;m<6;m++){var u=k.findChild(this.childNode,"item"+m),v=k.findChildComponent(u,"txtBaseName",d),I=k.findChildComponent(u,"txtBaseAttr",d),C=o[m-1];if(C){if(m>1){var y=IS(O).getGemAttrColor(C.info.k,C.info.v);v.color=y,I.color=y}var _=configAttribute.getDataByKey(C.info.k);v.string=_.name;var w=_.show_type;I.string=2==w?"+"+f.formatStr("%s%",T.GetNumString(C.info.v/100)):3==w?"+"+T.GetNumString(Math.floor(C.info.v/100)/100):"+"+T.GetNumString(C.info.v)}else v.string="",I.string=""}this.bg.getComponent(c).height=this.m_height,this.childNode.getComponent(c).height=this.m_height,this.parent.node.getComponent(c).height=this.m_height,this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,102):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,102)}},i(o,[{key:"height",get:function(){return this.m_height}}]),o}(ct)),t("SlaveShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.parent.view.addComponentCallbackListener(t,g.EventType.CLICK,(function(){if(i.poolInfo.links[0].args_list[1]!=IS(nt).GetRoleId())if(i.poolInfo.links[0].args_list[0]!=IS(nt).GetRoleId()){if(IS(nt).CheckFuncOpen(ft.FUNC_CAPTURE_SLAVE,!0)){var t=i.poolInfo.links[0].args_list[2];if(A.serverTime-t>pt)q.showFlyTip(GetLanguage(201788));else uiMgr.getOpenView("ChatView").trySlaveHelpInfo={targetId:i.poolInfo.links[0].args_list[0],slaveId:i.poolInfo.links[0].args_list[1],endTime:i.poolInfo.links[0].args_list[3]},IS(rt).reqCaptureSlaveInfo(i.poolInfo.links[0].args_list[1])}}else q.showFlyTip(GetLanguage(104323))}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("ActivityTangMoleShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtLevel=void 0,i.txtNum=void 0,i.node=void 0,i.goWidge=void 0,i.poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.node=t,this.goWidge=k.findChildComponent(this.item,"",h),this.txtLevel=k.findChildComponent(this.node,"nodeText/txtLevel",d),this.txtNum=k.findChildComponent(this.node,"nodeText/nodeScore/txtNum",d)},o.Refresh=function(){var i;(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit)&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95),this.txtNum.string=this.poolInfo.links[0].args_list[0],i=this.poolInfo.links[0].args_list[1]>5?GetLanguage(201715):T.formatStrWithMirrorDeal(GetLanguage(200797),this.poolInfo.links[0].args_list[1]),this.txtLevel.string=T.formatStrWithMirrorDeal(GetLanguage(201776),i))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("WeddingInvite",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.Label=void 0,i.txtContent=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.Label=k.findChildComponent(t,"Label",d),this.parent.view.addComponentCallbackListener(k.findChild(t,"receiveBtn"),g.EventType.CLICK,(function(){i.poolInfo.role_id!=IS(nt).GetRoleId()&&uiMgr.openView("MarryWeddingAcceptView",i.poolInfo.role_id,i.txtContent)}))},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95);var i=this.poolInfo.links[0].string_list[0],e=this.poolInfo.links[0].args_list[0],n=this.poolInfo.links[0].args_list[1],o=this.poolInfo.links[0].args_list[2];this.txtContent=1==e?T.formatStr(GetLanguage(204044),i,n,o):T.formatStr(GetLanguage(204045),i,n,o),this.Label.string=this.txtContent}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("DateApply",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.txtContent=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.txtContent=k.findChildComponent(t,"txtContent",d),this.parent.view.addComponentCallbackListener(k.findChild(t,"receiveBtn"),g.EventType.CLICK,(function(){i.poolInfo.role_id!=IS(nt).GetRoleId()&&uiMgr.openView("MarryAcceptView",i.poolInfo.links[0].args_list[0],i.poolInfo.links[0].string_list[0])}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95),this.txtContent.string=this.poolInfo.links[0].string_list[0])},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("MarryApply",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.Label=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.Label=k.findChildComponent(t,"Label",d),this.parent.view.addComponentCallbackListener(k.findChild(t,"receiveBtn"),g.EventType.CLICK,(function(){i.poolInfo.role_id!=IS(nt).GetRoleId()&&uiMgr.openView("MarryAcceptView",i.poolInfo.links[0].args_list[0],i.poolInfo.links[0].string_list[0])}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95),this.Label.string=this.poolInfo.links[0].string_list[0])},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("DivoreApply",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.Label=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){this.goWidge=k.findChildComponent(this.item,"",h),this.Label=k.findChildComponent(t,"Label",d),this.parent.view.addComponentCallbackListener(k.findChild(t,"receiveBtn"),g.EventType.CLICK,(function(){var t=GetLanguage(204169);q.showBoxTip({tip:t,func:function(t){"type_yes"==t?IS(Q).send_marry_divorce_resp_c2s(1):"type_cancel"==t&&IS(Q).send_marry_divorce_resp_c2s(0)}})}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95),this.Label.string=GetLanguage(204169))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("ActivityLoopyCardShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.goWidge=void 0,i.name=void 0,i.time=void 0,i.itemIcon=void 0,i.btn=void 0,i.btnTxt=void 0,i.timeOutDes=void 0,i.type=void 0,i.uid=void 0,i.cfgId=void 0,i.end_time=void 0,i.timer=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.itemIcon=k.findChildComponent(t,"item",l),this.name=k.findChildComponent(t,"name",d),this.time=k.findChildComponent(t,"time",d),this.btn=k.findChild(t,"btn"),this.btnTxt=k.findChildComponent(t,"btn/Label",d),this.timeOutDes=k.findChildComponent(t,"timeOutDes",d),this.parent.view.addComponentCallbackListener(this.btn,g.EventType.CLICK,(function(){var t;if(0==(null!=(t=IS(D).getCollectChatInfo()[i.uid])?t:0))if(1==i.type){if(i.parent.poolInfo.role_id==IS(nt).GetRoleAttr(ot.ROLE_ATTR_ID))return void q.showFlyTip(GetLanguage(200822));IS(W).send_collect_recv(F.LoopyCard,i.uid)}else{if(i.parent.poolInfo.role_id==IS(nt).GetRoleAttr(ot.ROLE_ATTR_ID))return void q.showFlyTip(GetLanguage(200823));IS(D).getCollectInfo(F.LoopyCard).send_times;if(IS(K).getGoodsCountByGoodsGtid(i.cfgId)<=1)return void q.showFlyTip(GetLanguage(200748));uiMgr.openView("ActivityLoopyCardTipsView",i.cfgId,i.poolInfo.role_id,i.uid,i.poolInfo.name)}}))},o.Refresh=function(){var i,e=this;if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&this.poolInfo.links[0]){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,90):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,100),this.uid=this.poolInfo.links[0].args_list[0],this.cfgId=this.poolInfo.links[0].args_list[1],this.type=this.poolInfo.links[0].args_list[2],this.end_time=this.poolInfo.links[0].args_list[3];var n=configGoods.getDataByKey(this.cfgId);this.view.loadIcon(this.itemIcon,"act_loopy_card",{1925:"lb_rssgz_banner01",1926:"lb_rssgz_banner03",1927:"lb_rssgz_banner04",1928:"lb_rssgz_banner02"}[this.cfgId]);var o=null!=(i=IS(D).getCollectChatInfo()[this.uid])?i:0;this.timer&&(this.time.string="",this.view.removeTimer(this.timer),this.timer=null),1==this.type?(this.timeOutDes.string="",this.btn.active=!0,this.btnTxt.string=GetLanguage(200798),this.name.string=T.formatStrWithMirrorDeal(GetLanguage(200772),n.name),this.end_time-A.serverTime>0&&(0==o||!o)?(this.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(this.end_time-A.serverTime)),this.timer=this.view.addTimer(1,this.end_time-A.serverTime,(function(){e.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(e.end_time-A.serverTime)),e.end_time-A.serverTime<=0&&e.timer&&(e.btn.active=!1,e.timeOutDes.string=GetLanguage(200754),e.time.string="",e.view.removeTimer(e.timer),e.timer=null)}))):(this.time.string="",this.btn.active=!1,this.timeOutDes.string=1==o?GetLanguage(200753):GetLanguage(200754))):(this.name.string=T.formatStrWithMirrorDeal(GetLanguage(200774),n.name),this.end_time-A.serverTime>0&&(0==o||!o)?(this.timeOutDes.string="",this.btn.active=!0,this.btnTxt.string=GetLanguage(200799),this.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(this.end_time-A.serverTime)),this.timer=this.view.addTimer(1,this.end_time-A.serverTime,(function(){e.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(e.end_time-A.serverTime)),e.end_time-A.serverTime<=0&&e.timer&&(e.btn.active=!1,e.timeOutDes.string=GetLanguage(200754),e.time.string="",e.view.removeTimer(e.timer),e.timer=null)}))):(this.time.string="",this.btn.active=!1,this.timeOutDes.string=1==o?GetLanguage(200755):GetLanguage(200754)))}},o.reset=function(){this.timer&&(this.view.removeTimer(this.timer),this.timer=null),t.prototype.reset.call(this)},o.destroy=function(){this.timer&&(this.view.removeTimer(this.timer),this.timer=null),t.prototype.destroy.call(this)},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("SeasonMapShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.txtInfo=void 0,i.txtMsg=void 0,i.btnGoto=void 0,i.poolInfo=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.txtMsg=k.findChildComponent(t,"Node/txtMsg",d),this.txtInfo=k.findChildComponent(t,"Node/txtInfo",C);var e=k.findChild(t,"btnGoto");this.parent.view.addComponentCallbackListener(e,g.EventType.CLICK,(function(){i.poolInfo.links[0].args_list[0];var t=i.poolInfo.links[0].args_list[2];IS(st).reqLocate(t)})),this.btnGoto=e,m.uiMirror&&this.view.loadIcon(k.findChildComponent(t,"btnGoto/bg",l),"season_map","dhh_icon_fenxiang")},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,65):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,65),this.txtMsg.string=this.poolInfo.content,this.txtMsg.node.active=Boolean(this.poolInfo.content);var i=this.poolInfo.links[0].args_list[0],e=this.poolInfo.links[0].args_list[1],n=this.poolInfo.links[0].args_list[2],o=this.poolInfo.links[0].args_list[3];this.btnGoto.active=!0;var s=configSeason_building_plot.getDataByKey(e),r=x.getIndexToCR(n);switch(i){case 4:this.txtInfo.string=T.formatStr(GetLanguage(204549),s.name,r.x,r.y);break;case 3:this.txtInfo.string=T.formatStr(GetLanguage(204548),s.name,r.x,r.y),this.btnGoto.active=o>0&&A.serverTime<o;break;case 5:this.txtInfo.string=T.formatStr(GetLanguage(204550),s.name,r.x,r.y)}}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("FlyPetUseShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.gameType=void 0,i.roomId=void 0,i.txtName=void 0,i.pet_share_type=0,i.pet_id=0,i.pet_cfg_id=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.txtName=k.findChildComponent(t,"img/use/desc",C),this.parent.view.addComponentCallbackListener(k.findChild(t,"img"),g.EventType.CLICK,(function(){if(!i.poolInfo.is_my){var t=configFly.getDataByKey(i.pet_cfg_id),e="";t&&(e=t.name);var n=T.formatStrWithMirrorDeal(GetLanguage(302945),e);q.showBoxTip({tip:n,title:GetLanguage(200048),func:function(t){"type_yes"==t?IS(X).send_66_25(i.poolInfo.role_id,1,i.pet_share_type,i.pet_id):"type_cancel"==t&&IS(X).send_66_25(i.poolInfo.role_id,0,i.pet_share_type,i.pet_id)}})}}))},o.Refresh=function(){if(this.poolInfo=this.parent.poolInfo,this.pet_share_type=this.poolInfo.links[0].args_list[0],this.pet_id=this.poolInfo.links[0].args_list[1],this.pet_cfg_id=this.poolInfo.links[0].args_list[2],t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95);var i=configFly.getDataByKey(this.pet_cfg_id),e="";i&&(e=i.name),this.txtName.string=T.formatStrWithMirrorDeal(GetLanguage(302944),e)}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("FlyPetRoleShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.gameType=void 0,i.roomId=void 0,i.pet_share_type=0,i.pet_id=0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.parent.view.addComponentCallbackListener(k.findChild(t,"img"),g.EventType.CLICK,(function(){if(!i.poolInfo.is_my){var t=GetLanguage(302946);q.showBoxTip({tip:t,title:GetLanguage(200048),func:function(t){"type_yes"==t?IS(X).send_66_25(i.poolInfo.role_id,1,i.pet_share_type,i.pet_id):"type_cancel"==t&&IS(X).send_66_25(i.poolInfo.role_id,0,i.pet_share_type,i.pet_id)}})}}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,this.pet_share_type=this.poolInfo.links[0].args_list[0],this.pet_id=this.poolInfo.links[0].args_list[1],t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("FlyPetShowShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.txtDesc=void 0,i.txtLevel=void 0,i.txtAge=void 0,i.quality_list={},i.img_icon=void 0,i.img_frame=void 0,i.pet_id=0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i,e=this;this.goWidge=k.findChildComponent(this.item,"",h),this.img_frame=k.findChildComponent(t,"panel/head/frame",l),this.img_icon=k.findChildComponent(t,"panel/head/icon",l),this.txtDesc=k.findChildComponent(t,"panel/desc",C),this.txtLevel=k.findChildComponent(t,"panel/level",d),this.txtAge=k.findChildComponent(t,"panel/txtAge",d);for(var n=((i={})[1]=205054,i[2]=205055,i[3]=205056,i),o=1;o<=3;o++){var s=k.findChild(t,"panel/quality/quality"+o),r=k.findChildComponent(s,"txtQuality",d);r.string=GetLanguage(n[o]),this.quality_list[o]={node:s,name:r}}this.parent.view.addComponentCallbackListener(t,g.EventType.CLICK,(function(){IS(X).send_66_31(e.pet_id)}))},o.Refresh=function(){var i,e,n,o,s,r;this.poolInfo=this.parent.poolInfo,this.pet_id=this.poolInfo.links[0].args_list[0],printLogErr(this.poolInfo.links[0].args_list);var a=parseInt(null!=(i=this.poolInfo.links[0].args_list[1])?i:0),h=null!=(e=this.poolInfo.links[0].string_list[0])?e:"",l=null!=(n=this.poolInfo.links[0].args_list[2])?n:1,d=null!=(o=this.poolInfo.links[0].string_list[1])?o:"",g=null!=(s=this.poolInfo.links[0].args_list[3])?s:0,p=null!=(r=this.poolInfo.links[0].args_list[4])?r:0;if(t.prototype.Refresh.call(this),this.isInit){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95);var c=configFly.getDataByKey(a);if(c){""==h&&(h=c.name),1==p&&(h=T.formatStrWithMirrorDeal(GetLanguage(205206),c.name)),this.txtLevel.string="Lv."+l;var m=this.parent.view;m.loadIcon(this.img_frame,"icon_equip",j[c.quality]),m.loadIcon(this.img_icon,"icon_flypet",c.icon),this.txtAge.string=T.formatStrWithMirrorDeal(GetLanguage(205240),g);for(var u=1;u<=3;u++)u==c.quality?this.quality_list[u].node.active=!0:this.quality_list[u].node.active=!1;var v=f.formatStr("<bold>%s</bold>",GetLanguage(205241));this.txtDesc.string=f.formatStr(v,d,h)}}},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("DoubleChapterInvateShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).goWidge=void 0,i.poolInfo=void 0,i.gameType=void 0,i.roomId=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.parent.view.addComponentCallbackListener(k.findChild(t,"bg"),g.EventType.CLICK,(function(){i.poolInfo.is_my||(uiMgr.getOpenView("ChatView").waitCheckDoubleChapterInvateResultId=i.poolInfo.role_id,IS(H).reqDoubleChapterIsInInvateList(i.poolInfo.role_id))}))},o.Refresh=function(){this.poolInfo=this.parent.poolInfo,this.gameType=this.poolInfo.links[0].args_list[0],this.roomId=this.poolInfo.links[0].args_list[1],t.prototype.Refresh.call(this),this.isInit&&(this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,95):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,95))},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct)),t("ActivityPoolPartyCardShare",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).poolInfo=void 0,i.goWidge=void 0,i.name=void 0,i.time=void 0,i.itemIcon=void 0,i.btn=void 0,i.btnTxt=void 0,i.btnLine=void 0,i.btnTxtOut=void 0,i.btnLineOut=void 0,i.timeOutDes=void 0,i.type=void 0,i.uid=void 0,i.cfgId=void 0,i.end_time=void 0,i.timer=void 0,i}e(n,t);var o=n.prototype;return o.onInit=function(t){var i=this;this.goWidge=k.findChildComponent(this.item,"",h),this.itemIcon=k.findChildComponent(t,"item",l),this.name=k.findChildComponent(t,"name",d),this.time=k.findChildComponent(t,"time",d),this.btn=k.findChild(t,"btn"),this.btnTxt=k.findChildComponent(t,"btn/Label",d),this.btnLine=k.findChildComponent(t,"btn/line",d),this.btnTxtOut=k.findChildComponent(t,"btn/Label",y),this.btnLineOut=k.findChildComponent(t,"btn/line",y),this.timeOutDes=k.findChildComponent(t,"timeOutDes",d),this.parent.view.addComponentCallbackListener(this.btn,g.EventType.CLICK,(function(){var t,e=null!=(t=IS(D).getCollectChatInfo()[i.uid])?t:0;if(0==e||!e)if(1==i.type){if(i.parent.poolInfo.role_id==IS(nt).GetRoleAttr(ot.ROLE_ATTR_ID))return void q.showFlyTip(GetLanguage(201741));IS(W).send_collect_recv(F.PoolPartyPuzzle,i.uid)}else{if(i.parent.poolInfo.role_id==IS(nt).GetRoleAttr(ot.ROLE_ATTR_ID))return void q.showFlyTip(GetLanguage(200823));if(IS(K).getGoodsCountByGoodsGtid(i.cfgId)<=1)return void q.showFlyTip(GetLanguage(201740));uiMgr.openView("ActivityPoolPartyCardGiveTipView",i.cfgId,i.poolInfo.role_id,i.uid,i.poolInfo.name)}}))},o.Refresh=function(){var i,e=this;if(this.poolInfo=this.parent.poolInfo,t.prototype.Refresh.call(this),this.isInit&&this.poolInfo.links[0]){this.poolInfo.is_my?this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.right,79):this.parent.SetAlign(this.goWidge,this.parent.widgeAlign.left,90),this.uid=this.poolInfo.links[0].args_list[0],this.cfgId=this.poolInfo.links[0].args_list[1],this.type=this.poolInfo.links[0].args_list[2],this.end_time=this.poolInfo.links[0].args_list[3];var n=configGoods.getDataByKey(this.cfgId);this.view.loadIcon(this.itemIcon,"act_poolparty_puzzle",E[this.cfgId]);var o=null!=(i=IS(D).getCollectChatInfo()[this.uid])?i:0;this.timer&&(this.time.string="",this.view.removeTimer(this.timer),this.timer=null),1==this.type?(this.timeOutDes.string="",this.btn.active=!0,this.btnTxt.string=GetLanguage(200798),this.btnTxt.color=(new _).fromHEX("#4DFF7B"),this.btnLine.color=(new _).fromHEX("#4DFF7B"),this.btnLineOut.color=(new _).fromHEX("#2C5023"),this.btnLineOut.color=(new _).fromHEX("#2C5023"),this.name.string=T.formatStrWithMirrorDeal(GetLanguage(200772),n.name),this.end_time-A.serverTime>0&&(0==o||!o)?(this.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(this.end_time-A.serverTime)),this.timer=this.view.addTimer(1,this.end_time-A.serverTime,(function(){e.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(e.end_time-A.serverTime)),e.end_time-A.serverTime<=0&&e.timer&&(e.btn.active=!0,e.btnTxt.string=GetLanguage(200754),e.btnTxt.color=(new _).fromHEX("#FFFFFF"),e.btnLine.color=(new _).fromHEX("#FFFFFF"),e.btnTxtOut.color=(new _).fromHEX("#2B2B2B"),e.btnLineOut.color=(new _).fromHEX("#2B2B2B"),e.timeOutDes.string="",e.time.string="",e.view.removeTimer(e.timer),e.timer=null)}))):(this.time.string="",1==o?(this.btn.active=!0,this.timeOutDes.string="",this.btnTxt.string=GetLanguage(200753),this.btnTxt.color=(new _).fromHEX("#FFFFFF"),this.btnLine.color=(new _).fromHEX("#FFFFFF"),this.btnTxtOut.color=(new _).fromHEX("#2B2B2B"),this.btnLineOut.color=(new _).fromHEX("#2B2B2B")):(this.btn.active=!0,this.btnTxt.string=GetLanguage(200754),this.btnTxt.color=(new _).fromHEX("#FFFFFF"),this.btnLine.color=(new _).fromHEX("#FFFFFF"),this.btnTxtOut.color=(new _).fromHEX("#2B2B2B"),this.btnLineOut.color=(new _).fromHEX("#2B2B2B"),this.timeOutDes.string=""))):(this.name.string=T.formatStrWithMirrorDeal(GetLanguage(200774),n.name),this.end_time-A.serverTime>0&&(0==o||!o)?(this.timeOutDes.string="",this.btn.active=!0,this.btnTxt.string=GetLanguage(200799),this.btnTxt.color=(new _).fromHEX("#FFDD5B"),this.btnLine.color=(new _).fromHEX("#FFDD5B"),this.btnTxtOut.color=(new _).fromHEX("#5B0404"),this.btnLineOut.color=(new _).fromHEX("#5B0404"),this.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(this.end_time-A.serverTime)),this.timer=this.view.addTimer(1,this.end_time-A.serverTime,(function(){e.time.string=T.formatStrWithMirrorDeal(GetLanguage(200773),A.formatTimeStringForSecond(e.end_time-A.serverTime)),e.end_time-A.serverTime<=0&&e.timer&&(e.btn.active=!0,e.btnTxt.string=GetLanguage(200754),e.btnTxt.color=(new _).fromHEX("#FFDA4C"),e.btnLine.color=(new _).fromHEX("#FFDA4C"),e.btnTxtOut.color=(new _).fromHEX("#2B2B2B"),e.btnLineOut.color=(new _).fromHEX("#2B2B2B"),e.timeOutDes.string="",e.time.string="",e.view.removeTimer(e.timer),e.timer=null)}))):(this.time.string="",1==o?(this.btn.active=!1,this.timeOutDes.string=GetLanguage(200755)):(this.btn.active=!0,this.btnTxt.string=GetLanguage(200754),this.btnTxt.color=(new _).fromHEX("#FFFFFF"),this.btnLine.color=(new _).fromHEX("#FFFFFF"),this.btnTxtOut.color=(new _).fromHEX("#2B2B2B"),this.btnLineOut.color=(new _).fromHEX("#2B2B2B"),this.timeOutDes.string="")))}},o.reset=function(){this.timer&&(this.view.removeTimer(this.timer),this.timer=null),t.prototype.reset.call(this)},o.destroy=function(){this.timer&&(this.view.removeTimer(this.timer),this.timer=null),t.prototype.destroy.call(this)},i(n,[{key:"height",get:function(){return this.m_height}}]),n}(ct));o._RF.pop()}}}));

