System.register("chunks:///_virtual/GameCenterVideoView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlatformUtil.ts","./index57.ts","./ItemIcon.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,c,r,d,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.VideoPlayer,s=t.Sprite,c=t.js},null,null,function(t){r=t.IconAseetType},function(t){d=t.ViewType},function(t){a=t.BaseView}],execute:function(){i._RF.push({},"9523eqBjltIkoUAvdQU8xXT","GameCenterVideoView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).video=void 0,e.img=void 0,e.btnClick=void 0,e.curStep=0,e.cfg=void 0,e.name="GameCenterVideoView",e.url="ui/module/gameCenter/GameCenterVideoView",e.viewType=d.TopView,e}e(i,t);var a=i.prototype;return a.onInit=function(){var t=this;this.btnClick=this.findChild("img/btnClick"),this.btnClick.active=!1,this.addComponentCallbackListener(this.btnClick,n.EventType.CLICK,(function(){t.toNextVideo()})),this.video=this.findChildComponent("video",o),this.img=this.findChildComponent("img",s);var e=this.findChild("btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()})),this.video.node.active=!0,this.video.resourceType=o.ResourceType.REMOTE,this.addComponentCallbackListener(this.video.node,o.EventType.COMPLETED,(function(){t.onVideoFinish()}))},a.registerUpdateHandler=function(){},a.onAfterOpen=function(){this.cfg=configGamecentre.getDataByKey(this.openArgs[0]),this.cfg?(this.curStep=0,this.toNextVideo()):this.close()},a.onBeforeClose=function(){this.video.stop(),this.curStep=0,this.cfg=null},a.onDestroy=function(){},a.toNextVideo=function(){if(this.curStep++,!(this.curStep>this.cfg.viewName)){this.btnClick.active=!1;var t=c.formatStr("game_center_%s_%s",this.cfg.id,this.curStep);this.video.node.active=!0,this.img.node.active=!1,0==GlobalDefine.SERVER_LIST_TYPE?this.video.remoteURL=c.formatStr("http://172.16.10.228/%s.mp4",t):this.video.remoteURL=c.formatStr("https://xxjzz-cdnres.me4399.com/stable/android_cn/weixin/%s.mp4",t),this.video.play()}},a.onVideoFinish=function(){var t=this;if(this.curStep>=this.cfg.viewName)return this.video.node.active=!1,this.img.node.active=!1,void this.addUIEffect("prefab/ui-effect/MX_victory",this.node,3);this.video.node.active=!1,this.img.node.active=!1;var e=c.formatStr("game_center_%s_%s",this.cfg.id,this.curStep);this.loadIcon(this.img,"icon_game_center",e,(function(e){t.img.node.active=!0}),r.ICON_SPRITE);var i=this.cfg.location[this.curStep-1];this.btnClick.setPosition(i[0],i[1]),this.btnClick.active=!0},i}(a));i._RF.pop()}}}));

