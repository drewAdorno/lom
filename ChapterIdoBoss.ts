System.register("chunks:///_virtual/ChapterIdoBoss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FixMath.ts","./BattleData.ts","./index83.ts","./EnumDefine.ts","./V2.ts","./BaseChapter.ts","./UnitGroupCtr.ts"],(function(t){"use strict";var i,a,e,s,n,r,o,h,u;return{setters:[function(t){i=t.inheritsLoose,a=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){s=t.FixMath},function(t){n=t.ChapterType},null,function(t){r=t.UnityType},function(t){o=t.V2},function(t){h=t.BaseChapter},function(t){u=t.UnitGroupCtr}],execute:function(){e._RF.push({},"673d9mUZrVPmawizj2ONwcZ","ChapterIdoBoss",void 0);var l=new o;t("ChapterIdoBoss",function(t){function e(){for(var i,a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this).bossList=[],i.bossUnit=void 0,i}i(e,t);var o=e.prototype;return o.init=function(){this.battleMain.hitThrowDis=!1},o.destroy=function(){},o.getConfig=function(t){return null},o.loadData=function(t){var i,a=this.battleMain;for(var e in a.data.playerList)this.addPlayer(a.data.playerList[e],t);a.mainCtr=null!=(i=a.mainCtr)?i:a.playerCtrs[0],a.showMainCtr=a.mainCtr,a.mainCtr.player.shamUnit=!1,this.addBuff(a.mainCtr.player,1)},o.addPlayer=function(t,i){var a=configChapter_type.getDataByKey(n.IdoBoss).player_points,e=new u,s=t.pos-1;e.offsetY=a[s][1],e.offsetX=-a[s][0],e.playerData=t;for(var o=t.units,h=0;h<o.length;h++){var l=void 0;o[h].config.type==r.Player&&(l=this.battleMain.unitMgr.addWorldBossPlayer(o[h],0,!0),e.player=l),e.units.push(l)}return e.positionSelected(i,!0),this.battleMain.playerCtrs.push(e),e},o.setChapter=function(i){t.prototype.setChapter.call(this,i);for(var a=this.config.bossID,e=0;e<100;e++)this.bossList.push(configUnit.getDataByKey(a+e))},o.start=function(){var t=this.battleMain;t.hitThrowDis=!1;var i=t.unitMgr.addWorldBoss(this.bossList[0].id,1);i.units=this.bossList;for(var e,s=a(this.mapConfig.points);!(e=s()).done;){var n=e.value;if(1===n[0]){i.position=l.set(n[1],n[2]).add2f(t.mapCamera.offsetX,0);break}}i.direction=-1,this.bossUnit=i,this.addBuff(i,2)},o.addBuff=function(t,i){var a=this.battleMain.data.buffs;null!=a&&a.length},o.toResult=function(t,i){this.battleMain},o.onUpdate=function(t){if(!this.over){if(this.battleMain.mainCtr.player.isDead)return this.over=!0,this.toResult(0),!0;if(this.timeModel){if(this.chapterTime<=0)return this.over=!0,void this.toResult(0,!0);this.chapterTime=s.round(this.chapterTime-t),this.chapterTime=Math.max(this.chapterTime,0)}}},e}(h));e._RF.pop()}}}));

