System.register("chunks:///_virtual/RelicBookView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./BaseView.ts","./ItemIcon.ts","./ObjectUtil.ts","./RelicModel.ts"],(function(i){"use strict";var t,e,n,o,s,l,c,d,h,r,a,f,u,m,p,v;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,n=i.Button,o=i.ScrollView,s=i.Vec3,l=i.UITransform,c=i.Label,d=i.Sprite,h=i.Color},function(i){r=i.ListItem},function(i){a=i.default},function(i){f=i.default},function(i){u=i.BaseView},function(i){m=i.IconAseetType},function(i){p=i.default},function(i){v=i.RelicModel}],execute:function(){e._RF.push({},"c539dbEzk5DlZ/NHHbieLWq","RelicBookView",void 0);i("default",function(i){function e(){var t;return(t=i.call(this)||this).scroll=void 0,t.scrollList=void 0,t.nodeContent=void 0,t.name="RelicBookView",t.url="ui/module/relic/RelicBookView",t}t(e,i);var l=e.prototype;return l.onInit=function(){var i=this,t=this.findChild("root/imgMask");this.addComponentCallbackListener(t,n.EventType.CLICK,(function(){i.onMaskClick()}));var e=this.findChild("root/content/btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){i.onCloseClick()})),this.scroll=this.findChildComponent("root/content/scroll",o),this.scrollList=this.addUIList(this.scroll,C),this.nodeContent=this.findChild("root/content/scroll/view/content")},l.registerUpdateHandler=function(){},l.onAfterOpen=function(){this.nodeContent.setPosition(new s(0,0,0)),this.scrollList.datas=configRelic_pos.getDatas()},l.onBeforeClose=function(){},l.onDestroy=function(){},l.onMaskClick=function(){this.close()},l.onCloseClick=function(){this.close()},e}(u));var C=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=i.call.apply(i,[this].concat(n))||this).txtType=void 0,t.imgType=void 0,t.btnUnfold=void 0,t.btnFold=void 0,t.nodeRelicParent=void 0,t.nodeRelicItem=void 0,t.cfgIds=void 0,t.relicItems=void 0,t.utNode=void 0,t.isFold=void 0,t}t(e,i);var o=e.prototype;return o.onInit=function(){var i=this;this.adaptiveSize=!0,this.utNode=this.node.getComponent(l),this.txtType=a.findChildComponent(this.node,"title/txtType",c),this.imgType=a.findChildComponent(this.node,"title/imgType",d),this.btnUnfold=a.findChild(this.node,"title/btnUnfold"),this.view.addComponentCallbackListener(this.btnUnfold,n.EventType.CLICK,(function(){i.onUnfoldClick()})),this.btnFold=a.findChild(this.node,"title/btnFold"),this.view.addComponentCallbackListener(this.btnFold,n.EventType.CLICK,(function(){i.onFoldClick()})),this.nodeRelicParent=a.findChild(this.node,"content"),this.nodeRelicItem=a.findChild(this.node,"content/item"),this.nodeRelicItem.active=!1,this.isFold=!1},o.onRender=function(i,t){this.txtType.string=i.name,this.view.loadIcon(this.imgType,"icon_relic",i.icon,null,m.ICON_SPRITE),this.cfgIds=IS(v).getCfgIdsBytype(i.id)||[],this.updateRelicItemShow()},o.updateRelicItemShow=function(){this.btnFold.active=!this.isFold,this.btnUnfold.active=this.isFold,null==this.relicItems&&(this.relicItems=new Array);for(var i=0;i<this.relicItems.length;i++)this.relicItems[i].node.active=!1;if(this.isFold)this.utNode.height=58;else{for(var t=0;t<this.cfgIds.length;t++){var e=this.relicItems[t];if(null==e){var n=nodeInstantiate.instantiate(this.nodeRelicItem);n.parent=this.nodeRelicParent,(e=new I).onInit(n,this.view)}e.node.active=!0,e.show(this.cfgIds[t]),this.relicItems[t]=e}this.utNode.height=58+162*this.cfgIds.length}},o.onUnfoldClick=function(){this.isFold=!1,this.updateRelicItemShow()},o.onFoldClick=function(){this.isFold=!0,this.updateRelicItemShow()},o.destroy=function(){if(this.relicItems){for(var t=0;t<this.relicItems.length;t++)this.relicItems[t].destroy();this.relicItems=null}i.prototype.destroy.call(this)},e}(r),I=i("RelicItem",function(){function i(){this.node=void 0,this.imgBg=void 0,this.imgFrame=void 0,this.imgIcon=void 0,this.nodeEquip=void 0,this.txtName=void 0,this.txtEquipDesc=void 0,this.view=void 0}var t=i.prototype;return t.onInit=function(i,t){this.node=i,this.imgBg=a.findChildComponent(i,"imgBg",d),this.imgFrame=a.findChildComponent(i,"imgFrame",d),this.imgIcon=a.findChildComponent(i,"imgIcon",d),this.nodeEquip=a.findChild(i,"imgEquip"),this.txtName=a.findChildComponent(i,"txtName",c),this.txtEquipDesc=a.findChildComponent(i,"txtEquipDesc",c),this.view=t;var e=this.nodeEquip.getComponent(d);this.view.loadIcon(e,"relic","yw_ui_shiyongzhong")},t.show=function(i){var t=configRelic.getDataByKeys("id",i,"level",1);this.view.loadIcon(this.imgIcon,"icon_relic",t.icon,null,m.ICON_SPRITE),this.txtName.string=t.name;var e=t.equip,n=configSkill_level.getDataByKeys("id",e[0],"level",e[1]);this.txtEquipDesc.string=f.formatStr.apply(f,[n.desc].concat(n.desc_parm));var o=IS(v).getRelicInfoByCfgId(i),s=p.isEmpty(o);this.imgFrame.color=s?new h(122,122,122):new h(255,255,255),this.imgIcon.color=s?new h(122,122,122):new h(255,255,255);var l=IS(v).getRelicInfoByLocation(t.type),c=l&&l.cfg_id==i;this.nodeEquip.active=c,this.view.loadIcon(this.imgBg,"icon_relic",c?"yw_ui_xinxidi06":"yw_ui_xinxidi07",null,m.ICON_SPRITE)},t.destroy=function(){this.view=null,this.node.destroy()},i}());e._RF.pop()}}}));

