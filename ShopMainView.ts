System.register("chunks:///_virtual/ShopMainView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./NodeUtil.ts","./BaseTabView.ts","./UIDefine.ts","./CommonDefine.ts","./PayDataCache.ts","./RoleDataCache.ts","./NativeToJs.ts"],(function(t){"use strict";var e,i,n,o,a,s,h,p,r,c,u,l,S;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Vec3,o=t.Sprite},function(t){a=t.audioMgr},function(t){s=t.default},function(t){h=t.BaseTabView,p=t.ItemTabBtn},function(t){r=t.UIViewState,c=t.PanelTabType},function(t){u=t.CommonEventDefine},function(t){l=t.default},function(t){S=t.RoleDataCache},null],execute:function(){i._RF.push({},"a9a61xkualHc62YqV4PRoxH","ShopMainView",void 0);t("default",function(t){e(o,t);var i=o.prototype;function o(){var e;return(e=t.call(this)||this).isActive=!1,e.parentView=void 0,e.name="ShopMainView",e.url="ui/module/shop/ShopMainView",e.tabTypes=[c.Shop_Limit,c.Shop_Gem,c.Shop_Gift,c.Shop_Cash,c.Shop_Draw],e.fullScreen=!0,e}return i._setViewState=function(t){if((!this.state||this.state!=t)&&(this.state=t,t==r.Init)){var e=s.findChild(this.parentView.node,"container/"+this.name);e||(e=this.parentView.node),this.node.parent=e,this._openViewInit()}},i.setActive=function(t){this.isActive!=t&&(this.isActive=t,t?(a.playSound("common_jiemian"),this.trySetOpenType()||this.trySetDefaultOpenTab(),this.open(this.openArgs)):this.close())},i.onInit=function(){this.defaultMaker=m,t.prototype.onInit.call(this)},i.checkFunctionOpen=function(t){return IS(S).CheckFuncOpen(t,!0)},i.trySetDefaultOpenTab=function(){if(uiMgr.isOpenGuide)this.openType=c.Shop_Draw;else if(IS(l).GetRedByTabType(1)>0)this.openType=c.Shop_Gift;else{var t=IS(l).GetRedByTabType(2)+IS(l).GetRedByTabType(3);this.openType=t>0?c.Shop_Limit:c.Shop_Draw}},i.registerUpdateHandler=function(){this.addEvent(u.UPDATE_MAIN_SHOP_RED_POINT,this.UpdateTabRed,this),this.addEvent(u.JUMP_TO_SUB_VIEW_SUB_TYPE,this.onJumpToSubViewSubType,this)},i.onAfterOpenTab=function(){this.setRedPoint(c.Shop_Gift,IS(l).GetRedByTabType(1)),this.setRedPoint(c.Shop_Limit,IS(l).GetRedByTabType(2)+IS(l).GetRedByTabType(3)),this.setRedPoint(c.Shop_Cash,IS(l).GetRedByTabType(4)),this.AfterRefreshBtn()},i.canShowType=function(t){return t!=c.Shop_Gem&&t!=c.Shop_Gift&&t!=c.Shop_Limit||IS(l).IsShowView()},i.UpdateTabRed=function(){this.setRedPoint(c.Shop_Gift,IS(l).GetRedByTabType(1)),this.setRedPoint(c.Shop_Limit,IS(l).GetRedByTabType(2)+IS(l).GetRedByTabType(3))},i.onJumpToSubViewSubType=function(t,e){t==c.Main_Shop&&null!=e&&e!=this.curType&&this.setIndex(e)},i.AfterRefreshBtn=function(){var t=this.btnList[c.Shop_Limit],e=this.btnList[c.Shop_Draw];null==t||t.refreshIcon(1,"common","common_ICON_yeqianweixuanzhong02",new n(-1,1,1)),null==e||e.refreshIcon(1,"common","common_ICON_yeqianweixuanzhong02",new n(1,1,1))},o}(h));var m=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).imgNormal=void 0,e.imgSelect=void 0,e}e(i,t);var n=i.prototype;return n.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this.imgNormal=s.findChildComponent(this.nodeItem,"normal/imgIcon",o),this.imgSelect=s.findChildComponent(this.nodeItem,"selected/imgIcon",o)},n.setText=function(t){this.view.loadIcon(this.imgNormal,"main",t.imgNormal),this.view.loadIcon(this.imgSelect,"main",t.imgNormal),this.txtName&&(this.txtName.string=GetLanguage_UI(t.name)),this.txtSelectName&&(this.txtSelectName.string=GetLanguage_UI(t.name))},i}(p);i._RF.pop()}}}));

