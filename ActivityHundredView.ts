System.register("chunks:///_virtual/ActivityHundredView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./index57.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivityControl.ts","./TimeUtil.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,s,a,r,d,o,c,f,l,u,h,v,m,p;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,s=t.Label,a=t.ScrollView},function(t){r=t.ItemGrid},function(t){d=t.ListItem},function(t){o=t.default},null,function(t){c=t.default},function(t){f=t.ActivityType,l=t.ActivityEventDefine,u=t.ActivityState,h=t.ActivityTaskState},function(t){v=t.default},function(t){m=t.default},function(t){p=t.BaseView}],execute:function(){e._RF.push({},"f58bemelelAgbV6JuzBxosb","ActivityHundredView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).txtLeftTime=void 0,i.deltaTime=0,i.leftTime=0,i.canUpdate=!1,i.rewardList=void 0,i.name="ActivityHundredView",i.url="ui/module/activity/ActivityHundredView",i}i(e,t);var r=e.prototype;return r.onInit=function(){var t=this,i=this.findChild("view/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("view/btn");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){var t=IS(c).GetActivityInfo(f.Hundred),i=[];for(var e in t.task_list)t.task_list.hasOwnProperty(e)&&i.push(t.task_list[e]);var n=i[0];n&&IS(v).send_24_15(f.Hundred,n.task_id,n.group_id)})),this.txtLeftTime=this.findChildComponent("view/nodeTime/txtLeftTime",s),this.rewardList=this.addUIList(this.findChildComponent("view/rewardScroll",a),T),this.rewardList.lackCenter=!0},r.registerUpdateHandler=function(){this.addEvent(l.OnActivityInfoTaskUpdate,this.OnTaskUpdate,this),this.addEvent(l.OnActivityInfoUpdate,this.OnTaskUpdate,this)},r.onAfterOpen=function(){var t=IS(c).GetActivityInfo(f.Hundred);if(t){var i,e=null!=(i=t.state_time[t.state])?i:t.state_time[u.Open];this.leftTime=e.end_time-m.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=m.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026)}else this.txtLeftTime.string=GetLanguage(200026);this.OnTaskUpdate()},r.onBeforeClose=function(){},r.onDestroy=function(){},r.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=m.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},r.OnTaskUpdate=function(){var t=IS(c).GetActivityInfo(f.Hundred),i=[];for(var e in t.task_list)t.task_list.hasOwnProperty(e)&&i.push(t.task_list[e]);var n=i[0];n&&n.state!=h.HadGet?this.rewardList.datas=n.cfg.reward:this.close()},e}(p));var T=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).itemGrid=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.itemGrid=new r(this.view,o.findChild(this.node,"itemGrid"))},n.onRender=function(t,i){this.itemGrid.SetItemId(t[0])},e}(d);e._RF.pop()}}}));

