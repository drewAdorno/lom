System.register("chunks:///_virtual/StatueDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedPointMgr.ts","./StorageUtil.ts","./StringUtil.ts","./index57.ts","./BagModel.ts","./RoleDataCache.ts","./RoleDefine.ts","./StatueControl.ts","./StatueDefine.ts","./UIDefine.ts"],(function(t){"use strict";var e,n,a,o,i,u,s,f,r,l,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){a=t.RedPointMgr},function(t){o=t.default},function(t){i=t.default},null,function(t){u=t.BagModel},function(t){s=t.RoleDataCache},function(t){f=t.RoleEventDefine},function(t){r=t.default},function(t){l=t.StatueEventDefine},function(t){c=t.OpenFunction}],execute:function(){n._RF.push({},"065179NxD9DnbZoLEE3EHta","StatueDataCache",void 0);var h="RedPoint:FarmStatue";t("StatueDataCache",function(){var t=n.prototype;function n(){this.statueInfo=void 0,this.statuePlanName=[],this.statuePlanLocked=[],this.redPath=void 0,normalEvent.on(l.HOME_FARM_STATUE_INFO_BACK,this.onStatueInfoBack,this),normalEvent.on(f.ROLE_OPEN_FUNCTION_UPDATE,this.onRoleOpenFunctionUpdate,this)}return t.clear=function(){normalEvent.off(l.HOME_FARM_STATUE_INFO_BACK,this.onStatueInfoBack,this),normalEvent.off(f.ROLE_OPEN_FUNCTION_UPDATE,this.onRoleOpenFunctionUpdate,this)},t.setRedPoint=function(t){this.redPath=t,this.statueInfo?this.onStatueInfoBack(this.statueInfo):IS(r).reqStatueInfo()},t.offRedPoint=function(){o.set(h,(new Date).toDateString())},t.onRoleOpenFunctionUpdate=function(t){t==c.FUNC_STATUE&&this.statueInfo&&this.onStatueInfoBack(this.statueInfo)},t.onStatueInfoBack=function(t){this.statueInfo=t;var n=0;if(IS(s).CheckFuncOpen(c.FUNC_STATUE)){var i=o.get(h);if((null==i||i!=(new Date).toDateString())&&null!=t){for(var f,r=0,l=0;l<this.statueInfo.tab_list.length;l++)for(var d,I=e(this.statueInfo.tab_list[l].attr_list);!(d=I()).done;){var v=d.value;v&&1==v.is_lock&&++r}var g=(null==(f=configStatue_spend.getDataByKey(r))?void 0:f.spend)||[9,-1];-1!=g[1]&&IS(u).getGoodsCountByGoodsGtid(g[0])>=g[1]&&(n=1)}IS(a).changeValue(this.redPath,n)}else IS(a).changeValue(this.redPath,0)},t.setTabName=function(t){for(var e=0;e<this.statueInfo.tab_list.length;e++)if(this.statueInfo.tab_list[e].tab==t.tab){this.statueInfo.tab_list[e].name=t.name;break}},t.getMaxQualityByLev=function(t){for(var n,a,o=0,i=(null==(n=configStatue_level.getDataByKey(t))?void 0:n.pro_quality)||[],u=e(i);!(a=u()).done;){var s=a.value,f=s[0];s[1];f>o&&(o=f)}return o},t.getTabInfo=function(t){if(null!=this.statueInfo){var e=this.statueInfo.tab_list;if(null!=e)for(var n=0;n<e.length;n++)if(e[n].tab==t)return e[n]}},t.getTabName=function(t){var e=this.getTabInfo(t),n=e&&e.name;return n&&""!=n||(n=i.formatStrWithMirrorDeal(GetLanguage(200488),GetLanguage(200662+t))),n},n}());n._RF.pop()}}}));

