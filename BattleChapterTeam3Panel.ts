System.register("chunks:///_virtual/BattleChapterTeam3Panel.ts",["cc","./BattleData.ts","./EventDefine.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./ChapterDefine.ts","./TeamControl.ts"],(function(t){"use strict";var e,i,a,n,h,o,r,s,d,c,p,f,m;return{setters:[function(t){e=t.cclegacy,i=t.ProgressBar,a=t.Label,n=t.Sprite,h=t.isValid,o=t.Color},function(t){r=t.ChapterType},function(t){s=t.EventDefine},function(t){d=t.default},function(t){c=t.default},function(t){p=t.default},function(t){f=t.ChapterEventDefine},function(t){m=t.default}],execute:function(){e._RF.push({},"9cba0kSbZhAf4fj7g3BxTGh","BattleChapterTeam3Panel",void 0);t("BattleChapterTeam3Panel",function(){function t(t,e){this.view=void 0,this.node=void 0,this.bottomY=100,this.nodeTime=void 0,this.pbTime=void 0,this.txtTime=void 0,this.txtChapter=void 0,this.txtWave=void 0,this.txtDef=void 0,this.chapterTime=0,this.node=e,this.view=t,this.onInit()}var e=t.prototype;return e.reset=function(){var t=configLegacy_team_chapter.getDataByKey(battleMain.data.chapterId);this.txtChapter.string=GetLanguage_UI(999000351)+" "+t.level,this.updatePart()},e.onInit=function(){this.nodeTime=d.findChild(this.node,"time"),this.pbTime=d.findChildComponent(this.nodeTime,"pbTime",i),this.txtTime=d.findChildComponent(this.nodeTime,"txtTime",a);var t=d.findChildComponent(this.nodeTime,"Sprite",n);this.view.loadIcon(t,"battle","zxgq_ui_shijian"),this.txtChapter=d.findChildComponent(this.node,"txtChapter",a),this.txtWave=d.findChildComponent(this.node,"txtWave",a),this.txtDef=d.findChildComponent(this.node,"txtDef",a)},e.initBattleEvent=function(){battleEvent.on(s.TFDefChange,this.onDefChange,this),this.onDefChange(10)},e.onDefChange=function(t){if(h(this.txtDef)){this.txtDef.string=c.formatStr(GetLanguage_UI(999000499),t,10);var e=new o(255,255,255);e=10==t?new o(90,222,71):t>4?new o(243,207,67):new o(253,70,70),this.txtDef.color=e}},e.updateTime=function(){this.chapterTime!=Math.floor(battleMain.chapter.chapterTime)&&(this.chapterTime=Math.floor(battleMain.chapter.chapterTime),this.txtTime.string=p.formatTimeForSecond(this.chapterTime)),this.pbTime.progress=battleMain.chapter.chapterTime/battleMain.chapter.maxChapterTime},e.updatePart=function(){battleMain.chapter.timeModel?(this.nodeTime.active=!0,this.updateTime()):this.nodeTime.active=!1;var t=configLegacy_team_chapter.getDataByKey(battleMain.data.chapterId);this.txtWave.string=c.formatStr(GetLanguage_UI(999000498),t.part,5)},e.exitBattle=function(){battleMain.enterChapter(),IS(m).reqTeamExit(),battleMain.toResult(battleMain.data.chapterId,r.Team3,1,!1),normalEvent.emit(f.BATTLE_STATE,r.Team3,!1)},e.onUpdate=function(t){battleMain.chapter.timeModel&&this.updateTime()},t}());e._RF.pop()}}}));

