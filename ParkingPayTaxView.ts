System.register("chunks:///_virtual/ParkingPayTaxView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./BaseView.ts","./RoleDefine.ts","./ParkingControl.ts","./ParkingDataCache.ts"],(function(t){"use strict";var i,n,e,o,a,r,s,d,h,l,u,c;return{setters:[function(t){i=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,o=t.Button,a=t.Sprite,r=t.Label},function(t){s=t.default},function(t){d=t.default},function(t){h=t.BaseView},function(t){l=t.PlayerAttr},function(t){u=t.default},function(t){c=t.ParkingDataCache}],execute:function(){e._RF.push({},"6afacgtBbhG4ZOWhy1qzJq3","ParkingPayTaxView",void 0);t("default",function(t){function e(){var i,n;return(n=t.call(this)||this).imgHeadIcon=void 0,n.imgHeadFrame=void 0,n.txtName=void 0,n.txtPower=void 0,n.txtLevel=void 0,n.txtnum=void 0,n.nodeGuard=void 0,n.btnPay=void 0,n.btnNoPay=void 0,n.btnGuard=void 0,n.btnNoGuard=void 0,n.is_Pay=0,n.is_Guard=0,n.pos=void 0,n.cur_mount=void 0,n.roleInfo=((i={})[l.ROLE_ATTR_LVL]=0,i[l.ROLE_ATTR_EXP]=0,i[l.ROLE_ATTR_ID]=0,i[l.ROLE_ATTR_NAME]="",i[l.ROLE_ATTR_VIP]=0,i[l.ROLE_ATTR_SERVER]=0,i[l.ROLE_ATTR_CUR_POWER]=0,i[l.ROLE_ATTR_GUILD_NAME]="",i[l.ROLE_ATTR_POWER_SHOW]=0,i[l.ROLE_ATTR_CUR_JOB]=0,i[l.ROLE_ATTR_JOB_TIMES]=0,i[l.ROLE_ATTR_STYLE]=0,i[l.ROLE_ATTR_RENAME]=0,i[l.ROLE_ATTR_GENDER]=0,i[l.ROLE_ATTR_SKIN]=0,i[l.ROLE_ATTR_HEAD_ID]=0,i[l.ROLE_ATTR_HEAD_FRAME_ID]=0,i[l.ROLE_ATTR_HEAD_URL]="",i),n.name="ParkingPayTaxView",n.url="ui/module/parking/ParkingPayTaxView",n.poolTime=3e3,n}i(e,t);var h=e.prototype;return h.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.onMaskClick()}));var n=this.findChild("content/btnStart");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){var i=IS(c);IS(u).reqStartPark(null==i?void 0:i.type,null==i?void 0:i.master_id,t.cur_mount,t.pos,t.is_Pay?IS(c).protect.protect_ratio:0,t.is_Pay?t.is_Guard:0)})),this.imgHeadIcon=this.findChildComponent("content/role_panel/frame/icon",a),this.imgHeadFrame=this.findChildComponent("content/role_panel/frame/imgHeadFrame",a),this.txtName=this.findChildComponent("content/role_panel/name",r),this.txtPower=this.findChildComponent("content/role_panel/power",r),this.txtLevel=this.findChildComponent("content/role_panel/lev",r),this.txtnum=this.findChildComponent("content/node3/num",r),this.nodeGuard=this.findChild("content/Item-001"),this.adjustMirrorNode(this.findChild("content/Item/item/gou"),0,!0),this.adjustMirrorNode(this.findChild("content/Item/item-001/gou"),0,!0),this.adjustMirrorNode(this.findChild("content/Item-001/item/gou"),0,!0),this.adjustMirrorNode(this.findChild("content/Item-001/item-001/gou"),0,!0);var e=this.findChild("content/Item/item-001");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.is_Pay=1,t.updateShow()}));var s=this.findChild("content/Item/item");this.addComponentCallbackListener(s,o.EventType.CLICK,(function(){t.is_Pay=0,t.updateShow()}));var d=this.findChild("content/Item-001/item-001");this.addComponentCallbackListener(d,o.EventType.CLICK,(function(){t.is_Guard=1,t.updateShow()}));var h=this.findChild("content/Item-001/item");this.addComponentCallbackListener(h,o.EventType.CLICK,(function(){t.is_Guard=0,t.updateShow()})),this.btnPay=e,this.btnNoPay=s,this.btnGuard=d,this.btnNoGuard=h},h.registerUpdateHandler=function(){},h.onMaskClick=function(){this.close()},h.onAfterOpen=function(){var t,i;this.cur_mount=null!=(t=this.openArgs[0])?t:0,this.pos=null!=(i=this.openArgs[1])?i:0,this.UpdateChangeInfo(),this.updateData()},h.onBeforeClose=function(){},h.onDestroy=function(){},h.updateShow=function(){s.findChild(this.btnPay,"gou").active=1==this.is_Pay,s.findChild(this.btnNoPay,"gou").active=0==this.is_Pay,this.nodeGuard.active=1==this.is_Pay,s.findChild(this.btnGuard,"gou").active=1==this.is_Guard,s.findChild(this.btnNoGuard,"gou").active=0==this.is_Guard},h.updatePlayerInfo=function(){this.txtnum.string=1==IS(c).protect.is_open?IS(c).protect.protect_ratio+"%":"0%",this.txtName.string=this.roleInfo[l.ROLE_ATTR_NAME],this.txtPower.string=d.GetNumString(this.roleInfo[l.ROLE_ATTR_POWER_SHOW]),this.txtLevel.string=this.roleInfo[l.ROLE_ATTR_LVL]+"";var t=this.roleInfo[l.ROLE_ATTR_HEAD_URL];this.loadRemoteIcon(t,this.imgHeadIcon);var i=this.roleInfo[l.ROLE_ATTR_HEAD_FRAME_ID];if(i>0){var n=configAvatar_frame.getDataByKey(i);this.loadIcon(this.imgHeadFrame,"icon_frame",n.icon),this.imgHeadFrame.node.active=!0}else this.imgHeadFrame.node.active=!1},h.updateData=function(){this.updateShow(),this.updatePlayerInfo()},h.UpdateChangeInfo=function(){var t=IS(c).info_list,i=t.kv,e=t.ks;if(null!=i)for(var o,a=n(i);!(o=a()).done;){var r=o.value;this.updateRoleAttr(r.k,r.v)}if(null!=e)for(var s,d=n(e);!(s=d()).done;){var h=s.value;this.updateRoleAttr(h.k,h.s)}},h.updateRoleAttr=function(t,i){var n=this.roleInfo[t];if(null!=n)return n=i,this.roleInfo[t]=n,n},e}(h));e._RF.pop()}}}));

