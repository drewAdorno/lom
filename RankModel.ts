System.register("chunks:///_virtual/RankModel.ts",["cc","./PlatformUtil.ts","./ChapterDataCache.ts","./LoginDataCache.ts","./LoginDefine.ts"],(function(t){"use strict";var n,r,i,a,e;return{setters:[function(t){n=t.cclegacy},function(t){r=t.PlatformUtil},function(t){i=t.ChapterDataCache},function(t){a=t.LoginDataCache},function(t){e=t.LoginEventDefine}],execute:function(){n._RF.push({},"e5679udOX9DK7p4viQrwCsz","RankModel",void 0);t("RankModel",function(){var t=n.prototype;function n(){this.checkTimer=void 0,this.time_count=0,this.rankCrossStatus=void 0,this.rank_list=new Array,normalEvent.on(e.LOGIN_SUCCESS,this.onLoginCallback,this)}return t.clear=function(){},t.onLoginCallback=function(){var t=IS(i);t.curChapterId&&t.curChapterId},t.addTimer=function(){var t=this;null==this.checkTimer&&(this.checkTimer=normalTimer.start(1,-1,(function(){t.checkShow()})))},t.checkShow=function(){if(this.time_count++,this.time_count>3e3){this.time_count=0;var t=IS(i),n=0;t.curChapterId&&(n=t.curChapterId),r.setUserCloudStorage(IS(a).roleId,n,1)}},t.SetRankInfo=function(t){for(var n=t.rank_data_list||{},r=0;r<n.length;r++)if(1==n[r].page){for(var i=new Array,a=n[r].rank_info||{},e=0;e<a.length;e++)i.push(a[e]);i.sort((function(t,n){return t.rank-n.rank}));for(var s={type:n[r].type,rank_list:i,my_info:n[r].my_rank_info,page:n[r].page,max_page:n[r].max_page,total_num:n[r].total_num},o=!1,u=0;u<this.rank_list.length;u++)if(this.rank_list[u].type==n[r].type){this.rank_list[u]=s,o=!0;break}o||this.rank_list.push(s)}else{for(var h=void 0,c=0;c<this.rank_list.length;c++)this.rank_list[c].type==n[r].type&&(h=this.rank_list[c].rank_list)&&(this.rank_list[c].page=n[r].page);if(h){for(var l=n[r].rank_info||{},f=0;f<l.length;f++)h.push(l[f]);h.sort((function(t,n){return t.rank-n.rank}))}}},t.GetRankInfoByType=function(t){if(null!=this.rank_list){for(var n=0;n<this.rank_list.length;n++)if(this.rank_list[n].type==t)return this.rank_list[n];return null}},t.SetRankCrossStatus=function(t){this.rankCrossStatus=t.status},t.GetRankCrossStatus=function(){return 1==this.rankCrossStatus},n}());n._RF.pop()}}}));

