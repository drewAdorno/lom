System.register("chunks:///_virtual/ActivityFrogFindView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ConfigGlobal.ts","./BagModel.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,d,r,c,h,l,v,f,u,g,m,p,F,C;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.ScrollView,a=t.Label},function(t){d=t.ItemGrid},function(t){r=t.ListItem},function(t){c=t.default},function(t){h=t.default},function(t){l=t.default},null,function(t){v=t.ConfigGlobal},function(t){f=t.BagModel},function(t){u=t.default},function(t){g=t.default},function(t){m=t.ActivityType,p=t.ActivityEventDefine,F=t.ActivityState},function(t){C=t.BaseView}],execute:function(){n._RF.push({},"89261AslZZDXYI6KogAZMek","ActivityFrogFindView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).rewardScroll=void 0,i.taskList=void 0,i.name="ActivityFrogFindView",i.url="ui/module/activityFrog/ActivityFrogFindView",i}i(n,t);var a=n.prototype;return a.onInit=function(){var t=this,i=this.findChild("btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChild("bg/btn");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){IS(g).ShowSysTips(m.FrogFind)})),this.rewardScroll=this.addUIList(this.findChildComponent("view/reward/reward/rewardScroll",s),w),this.taskList=this.addUIList(this.findChildComponent("view/taskList",s),I)},a.registerUpdateHandler=function(){this.addEvent(p.OnActivityFindUpdate,this.updateInfo,this)},a.onAfterOpen=function(){IS(u).send_24_52(m.FrogFind),this.rewardScroll.datas=v.act_search_complete_reward.find((function(t){return t[0]==m.FrogFind}))[1]},a.onBeforeClose=function(){},a.onDestroy=function(){},a.updateInfo=function(){for(var t,i=IS(g).GetActivityInfo(m.FrogFind),n=[],o=configMoonfestival_search.getDatas(),s=e(o);!(t=s()).done;){var a=t.value;a.type==i.type&&a.group_id==i.roundCfg.group_id&&n.push(a)}var d=IS(g).getFindInfo(m.FrogFind);n.sort((function(t,i){var e,n,o=null!=(e=d.list[t.id])?e:0,s=null!=(n=d.list[i.id])?n:0;return o==s?t.rank_num-i.rank_num:2==o?1:2==s||1==o?-1:1==s?1:void 0})),this.taskList.datas=n,this.rewardScroll.updateAll()},n}(C));var w=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,i.itemGrid=void 0,i.received=void 0,i.mask=void 0,i.canGet=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){var t=this;this.received=c.findChild(this.node,"received"),this.mask=c.findChild(this.node,"mask"),this.canGet=c.findChild(this.node,"canGet"),this.itemGridNode=c.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode,(function(){t.canGet.active?IS(u).send_24_53(0,m.FrogFind):IS(f).OpenItemTips(t.data[0],t.node)}))},n.onRender=function(t,i){this.itemGrid.SetItemId(t[0],t[1]);var e=IS(g).getFindInfo(m.FrogFind);this.received.active=1==e.total_reward,this.mask.active=1==e.total_reward,this.canGet.active=0==e.total_reward&&IS(g).isAllFind(m.FrogFind)},e}(r),I=function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).title=void 0,i.txtState=void 0,i.txtDesc=void 0,i.received=void 0,i.state1=void 0,i.state2=void 0,i.state3=void 0,i.mask=void 0,i.nothing=void 0,i.rewardScroll=void 0,i}i(n,t);var o=n.prototype;return o.onInit=function(){this.title=c.findChildComponent(this.node,"txtTitle",a),this.txtDesc=c.findChildComponent(this.node,"txtDesc",a),this.txtState=c.findChildComponent(this.node,"state3/Label",a),this.state1=c.findChild(this.node,"state1"),this.state2=c.findChild(this.node,"state2"),this.state3=c.findChild(this.node,"state3"),this.mask=c.findChild(this.node,"mask"),this.nothing=c.findChild(this.node,"nothing"),this.rewardScroll=this.view.addUIList(c.findChildComponent(this.node,"rewardScroll",s),S)},o.onRender=function(t,i){var n;this.title.string=h.formatStrWithMirrorDeal(GetLanguage(999300208),t.rank_num),this.txtDesc.string=t.clue;for(var o,s=[],a=e(t.clue_reward);!(o=a()).done;){var d=o.value;s.push({id:t.id,reward:d})}this.rewardScroll.datas=s;var r=null!=(n=IS(g).getFindInfo(m.FrogFind).list[t.id])?n:0;if(this.mask.active=2==r,2==r)this.state1.active=!1,this.state2.active=!0,this.state3.active=!1,this.nothing.active=!1,this.rewardScroll.node.active=!0,this.txtDesc.node.active=!0;else if(0==r){this.state1.active=!1,this.state2.active=!1,this.state3.active=!0,this.nothing.active=!0,this.rewardScroll.node.active=!1,this.txtDesc.node.active=!1;var c=IS(g).GetActivityInfo(m.FrogFind).state_time[F.Open].start_time+24*(this.data.open_time-1)*3600,v=l.formatDate(l.ServerDate(1e3*c),"MM.dd");this.txtState.string=h.formatStrWithMirrorDeal(GetLanguage(201369),v)}else{this.state1.active=!1,this.state2.active=!1,this.state3.active=!0,IS(g).getCurFind(m.FrogFind)==t.id?(this.state1.active=!0,this.state2.active=!1,this.state3.active=!1,this.nothing.active=!1,this.rewardScroll.node.active=!0,this.txtDesc.node.active=!0):(this.state1.active=!1,this.state2.active=!1,this.state3.active=!0,this.nothing.active=!0,this.rewardScroll.node.active=!1,this.txtDesc.node.active=!1,this.txtState.string=GetLanguage(201370))}},n}(r),S=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,i.itemGrid=void 0,i.received=void 0,i.mask=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.received=c.findChild(this.node,"received"),this.mask=c.findChild(this.node,"mask"),this.itemGridNode=c.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode)},n.onRender=function(t,i){var e;this.itemGrid.SetItemId(t.reward[0],t.reward[1]);var n=null!=(e=IS(g).getFindInfo(m.FrogFind).list[t.id])?e:0;this.received.active=2==n,this.mask.active=2==n},e}(r);n._RF.pop()}}}));

