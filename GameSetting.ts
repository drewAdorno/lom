System.register("chunks:///_virtual/GameSetting.ts",["cc","./AudioMgr.ts","./StorageUtil.ts","./RoleDefine.ts"],(function(t){"use strict";var e,i,a,_;return{setters:[function(t){e=t.cclegacy},function(t){i=t.audioMgr},function(t){a=t.default},function(t){_=t.RoleEventDefine}],execute:function(){var n,s;t("GameSettingKey",void 0),e._RF.push({},"5b8e8OEo4VIrJWypk8PCbjZ","GameSetting",void 0),function(t){t[t.MUSIC_ON=1]="MUSIC_ON",t[t.SOUND_ON=2]="SOUND_ON",t[t.LOW_ENERGY=3]="LOW_ENERGY",t[t.BATTLE_TASK=4]="BATTLE_TASK",t[t.BATTLE_SHAKE=5]="BATTLE_SHAKE",t[t.AUTO_VOICE_TIME=6]="AUTO_VOICE_TIME",t[t.AUTO_WORLD_VOICE=11]="AUTO_WORLD_VOICE",t[t.AUTO_PRIVATE_VOICE=12]="AUTO_PRIVATE_VOICE",t[t.AUTO_GUILD_VOICE=13]="AUTO_GUILD_VOICE",t[t.QiXiLoginTime=21]="QiXiLoginTime",t[t.IS_SETTING_CARD=22]="IS_SETTING_CARD",t[t.GAMECLUMB_RED_1=23]="GAMECLUMB_RED_1",t[t.GAMECLUMB_RED_2=24]="GAMECLUMB_RED_2",t[t.GAMECLUMB_RED_3=25]="GAMECLUMB_RED_3",t[t.GAMECLUMB_RED_4=26]="GAMECLUMB_RED_4",t[t.GAMECLUMB_RED_5=27]="GAMECLUMB_RED_5",t[t.GAMECLUMB_RED_6=28]="GAMECLUMB_RED_6",t[t.MOUNT_AUTO_GET=29]="MOUNT_AUTO_GET",t[t.VIP_GET=30]="VIP_GET",t[t.FACEBOOK_SHARE=31]="FACEBOOK_SHARE",t[t.LANGUAGE_SELECT=32]="LANGUAGE_SELECT",t[t.BOX_UP=10001]="BOX_UP",t[t.PICK_LIMIT=10002]="PICK_LIMIT",t[t.INVITED_LIMIT=10003]="INVITED_LIMIT",t[t.IS_GET_DOUYIN_GUIDE_AWARD=10004]="IS_GET_DOUYIN_GUIDE_AWARD",t[t.FIRST_PURCHASE=10005]="FIRST_PURCHASE",t[t.FINISH_GUIDE=10006]="FINISH_GUIDE",t[t.AUTO_SKILL=1001]="AUTO_SKILL",t[t.IS_SET_DOUYIN_GUIDE=1002]="IS_SET_DOUYIN_GUIDE"}(s||(s=t("GameSettingKey",{})));var o=((n={})[s.MUSIC_ON]={storage:"int",usage:"bool",default:!0},n[s.SOUND_ON]={storage:"int",usage:"bool",default:!0},n[s.AUTO_VOICE_TIME]={storage:"int",usage:"int",default:!1},n[s.AUTO_WORLD_VOICE]={storage:"int",usage:"bool",default:!1},n[s.AUTO_PRIVATE_VOICE]={storage:"int",usage:"bool",default:!1},n[s.AUTO_GUILD_VOICE]={storage:"int",usage:"bool",default:!1},n[s.LOW_ENERGY]={storage:"int",usage:"bool",default:!0},n[s.BATTLE_TASK]={storage:"int",usage:"bool",default:!0},n[s.BATTLE_SHAKE]={storage:"int",usage:"bool",default:!0},n[s.BOX_UP]={storage:"int",usage:"bool",default:!0},n[s.PICK_LIMIT]={storage:"int",usage:"bool",default:!0},n[s.AUTO_SKILL]={storage:"int",usage:"bool",default:!0},n[s.INVITED_LIMIT]={storage:"int",usage:"bool",default:!0},n[s.IS_SET_DOUYIN_GUIDE]={storage:"int",usage:"bool",default:!0},n[s.IS_GET_DOUYIN_GUIDE_AWARD]={storage:"int",usage:"int",default:0},n[s.FIRST_PURCHASE]={storage:"int",usage:"int",default:0},n[s.FINISH_GUIDE]={storage:"int",usage:"int",default:0},n[s.QiXiLoginTime]={storage:"int",usage:"int",default:!0},n[s.IS_SETTING_CARD]={storage:"int",usage:"int",default:0},n[s.GAMECLUMB_RED_1]={storage:"int",usage:"int",default:0},n[s.GAMECLUMB_RED_2]={storage:"int",usage:"int",default:0},n[s.GAMECLUMB_RED_3]={storage:"int",usage:"int",default:0},n[s.GAMECLUMB_RED_4]={storage:"int",usage:"int",default:0},n[s.GAMECLUMB_RED_5]={storage:"int",usage:"int",default:0},n[s.GAMECLUMB_RED_6]={storage:"int",usage:"int",default:0},n[s.MOUNT_AUTO_GET]={storage:"int",usage:"int",default:1},n[s.VIP_GET]={storage:"int",usage:"int",default:0},n[s.FACEBOOK_SHARE]={storage:"int",usage:"int",default:0},n[s.LANGUAGE_SELECT]={storage:"int",usage:"int",default:0},n),u="__SET_";t("default",function(){function t(){this.settingList={},this.storageCache={},this.lowModel=!1,this.isInit=!1}var e=t.prototype;return e.clear=function(){},e.UpdateSettingList=function(t){if(this.isInit=!0,null!=t)for(var e=0;e<t.length;e++){var i=t[e].k,a=t[e].v;this.settingList[i]=a}},e.UpdateSettingValue=function(t,e){this.settingList[t]=e,normalEvent.emit(_.ROLE_SETTING_VALUE,t)},e.checkKey=function(t){return null!=t&&null!=o[t]},e.Get=function(t){if(this.checkKey(t)){var e,i=o[t];if(this.isServerSetting(t)){if(null==this.settingList[t])return i.default;e=this.settingList[t]}else{if(null!=this.storageCache[t])return this.storageCache[t];var _=u+t;null!=(e=a.get(_,!1))&&""!=e||("int"==i.usage?e=i.default:"bool"==i.usage&&(e=i.default?1:0))}var n=e;return"int"==i.usage?n=Number(e):"bool"==i.usage&&(n=0!=Number(e)),this.storageCache[t]=n,n}},e.set=function(t,e){if(this.checkKey(t)){var i=o[t];if(this.isServerSetting(t)){var n=this.ConvertToServerValue(t,e);null!=n&&roleControl.send_3_14(t,n)}else{var s=u+t;"int"==i.storage?"int"==i.usage?(a.set(s,String(e)),this.storageCache[t]=e):"bool"==i.usage&&(e=e?1:0,a.set(s,String(e)),this.storageCache[t]=1==e):"string"==i.storage&&(a.set(s,e),this.storageCache[t]=e),normalEvent.emit(_.ROLE_SETTING_VALUE,t)}}},e.isServerSetting=function(t){return t>1e4},e.ConvertToServerValue=function(t,e){var i=o[t];return"int"==i.storage?"bool"==i.usage?e?1:0:"int"==i.usage?e:null:null},e.InitSetting=function(){var t=s.MUSIC_ON,e=s.SOUND_ON,a=this.Get(t),_=this.Get(e);console.error("musicValue: "+a+"  soundValue: "+_),i.setMusicVolume(a?1:0),i.setSoundVolume(_?1:0)},e.setLowMode=function(t){if(t)i.setSoundVolume(0);else{var e=this.Get(s.SOUND_ON);i.setSoundVolume(e?1:0)}},t}());e._RF.pop()}}}));

