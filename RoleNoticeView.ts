System.register("chunks:///_virtual/RoleNoticeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FlagItem.ts","./GuildPinItem.ts","./RankTitle.ts","./UIRichText.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./BaseView.ts","./ItemIcon.ts","./ConfigGlobal.ts","./ObjectUtil.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ChatDefine.ts","./CommonDefine.ts","./CommonModel.ts","./MessageView.ts","./FlyPetControl.ts","./FlyPetDefine.ts","./PlantControl.ts","./PlantDefine.ts","./PvpControl.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./NativeToJs.ts","./SeasonSceneDataCache.ts","./FriendControl.ts","./FriendDefine.ts","./UIDefine.ts"],(function(t){"use strict";var e,i,n,o,l,a,r,s,d,c,h,_,f,u,p,m,v,C,g,I,E,R,T,y,L,q,b,A,D,O,F,S,B,k,M,w,N,K,P,G;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,l=t.Label,a=t.Sprite,r=t.js,s=t.sys,d=t.Vec2},function(t){c=t.FlagItem},function(t){h=t.GuildPinItem},function(t){_=t.RankTitle,f=t.TitleType},function(t){u=t.UIRichText},function(t){p=t.default},function(t){m=t.default},null,function(t){v=t.BaseView},function(t){C=t.IconAseetType},function(t){g=t.ConfigGlobal},function(t){I=t.default},function(t){E=t.default},function(t){R=t.ActivityType,T=t.ActivityState},function(t){y=t.ChatDefine},function(t){L=t.CommonEventDefine},function(t){q=t.CommonModel},function(t){b=t.default},function(t){A=t.default},function(t){D=t.FlyPetQualityRes},function(t){O=t.default},function(t){F=t.PlantEventDefine},function(t){S=t.default},function(t){B=t.default},function(t){k=t.RoleDataCache},function(t){M=t.PlayerAttr},function(t){w=t.NativeToJs},function(t){N=t.SeasonSceneDataCache},function(t){K=t.default},function(t){P=t.FriendDealType},function(t){G=t.OpenFunction}],execute:function(){n._RF.push({},"99b46tnV0ZJCJEaEeKnJakR","RoleNoticeView",void 0);var V=[{equipType:1,spriteName:"zjm_ui_wuqi"},{equipType:2,spriteName:"zjm_ui_goushi"},{equipType:3,spriteName:"zjm_ui_mianshi"},{equipType:4,spriteName:"zjm_ui_hujian"},{equipType:5,spriteName:"zjm_ui_kaijia"},{equipType:6,spriteName:"zjm_ui_bijia"},{equipType:7,spriteName:"zjm_ui_shoutao"},{equipType:8,spriteName:"zjm_ui_yaodai"},{equipType:9,spriteName:"zjm_ui_hutui"},{equipType:10,spriteName:"zjm_ui_xiezi"}];t("default",function(t){e(v,t);var n=v.prototype;function v(){var e,i,n;return(n=t.call(this)||this).isActive=!1,n.parentView=void 0,n.role_name=void 0,n.role_sex_nan=void 0,n.role_sex_nv=void 0,n.role_uid=void 0,n.role_mbti=void 0,n.role_serv=void 0,n.role_lev=void 0,n.role_job=void 0,n.role_lover=void 0,n.role_lover_btn=void 0,n.role_icon=void 0,n.role_fly_pet=void 0,n.role_fly_pet_model=void 0,n.flagItem=void 0,n.imgHeadFrame=void 0,n.role_title=void 0,n.role_flag=void 0,n.role_guild=void 0,n.role_guild_lev=void 0,n.role_guild_num=void 0,n.black_btn=void 0,n.black_label=void 0,n.del_btn=void 0,n.friend_btn=void 0,n.friend_btn_label=void 0,n.inform_btn=void 0,n.imgBtnPlant=void 0,n.nodeBtnPlant=void 0,n.nodeCircleFriends=void 0,n.nodeBtnSolo=void 0,n.nodeBtnFlower=void 0,n.chat_btn=void 0,n.attr_view=void 0,n.role_figure_node=void 0,n.role_figure_node2=void 0,n.role_figure_model=void 0,n.role_figure_model2=void 0,n.nodeEquipItem=void 0,n.nodeEquipParent=void 0,n.equipItems=void 0,n.data=void 0,n.open_type=void 0,n.role_info=void 0,n.role_id=void 0,n.roleInfo=((e={})[M.ROLE_ATTR_GOLD]=0,e[M.ROLE_ATTR_DIAMOND]=0,e[M.ROLE_RELIC_FRAG]=0,e[M.ROLE_FAKE_RECHARE]=0,e[M.ROLE_ATTR_LVL]=0,e[M.ROLE_ATTR_EXP]=0,e[M.ROLE_ATTR_ID]=0,e[M.ROLE_ATTR_NAME]="",e[M.ROLE_ATTR_VIP]=0,e[M.ROLE_ATTR_SERVER]=0,e[M.ROLE_ATTR_CUR_POWER]=0,e[M.ROLE_ATTR_GUILD_NAME]="",e[M.ROLE_ATTR_POWER_SHOW]=0,e[M.ROLE_ATTR_CUR_JOB]=0,e[M.ROLE_ATTR_JOB_TIMES]=0,e[M.ROLE_ATTR_STYLE]=0,e[M.ROLE_ATTR_RENAME]=0,e[M.ROLE_ATTR_GENDER]=0,e[M.ROLE_ATTR_SKIN]=0,e[M.ROLE_ATTR_HEAD_ID]=0,e[M.ROLE_ATTR_HEAD_FRAME_ID]=0,e[M.ROLE_ATTR_HEAD_URL]="",e[M.ROLE_ATTR_MBTI]=0,e[M.ROLE_ATTR_FLAG]=0,e[M.ROLE_ATTR_LOVER_NAME]="",e[M.ROLE_ATTR_GUILD_LV]=0,e[M.ROLE_ATTR_GUILD_NUM]=0,e[M.ROLE_ATTR_LOVER_ID]=0,e),n.tipDeal=((i={})[P.DelFriend]=GetLanguage(204606),i[P.AddBlack]=GetLanguage(204607),i),n.name="RoleNoticeView",n.url="ui/module/friend/RoleNoticeInfoView",n}return n.setActive=function(t){this.isActive!=t&&(this.isActive=t,t?this.open(null):this.close())},n.onInit=function(){var t=this,e=this.findChild("root/imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.onMaskClick()}));var i,n=this.findChild("root/content/btnClose");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.onMaskClick()})),this.role_name=this.findChildComponent("root/content/role_panel/name/desc",l),this.role_guild=this.findChildComponent("root/content/role_panel/guild/name/desc",l),this.role_guild_lev=this.findChildComponent("root/content/role_panel/guild/lev/desc",l),this.role_guild_num=this.findChildComponent("root/content/role_panel/guild/num/desc",u),this.role_flag=new h(this,this.findChild("root/content/role_panel/guild/GuildPinItem")),this.role_uid=this.findChildComponent("root/content/role_panel/txtUID",l),this.role_serv=this.findChildComponent("root/content/role_panel/txtServer",l),this.role_mbti=this.findChildComponent("root/content/role_panel/mbti/desc",l),this.role_lev=this.findChildComponent("root/content/role_panel/lev/desc",l),this.role_job=this.findChildComponent("root/content/role_panel/job/desc",l),this.role_lover=this.findChildComponent("root/content/role_panel/lover/desc",l),this.role_sex_nan=this.findChild("root/content/role_panel/name/sex_nan"),this.role_sex_nv=this.findChild("root/content/role_panel/name/sex_nv"),this.flagItem=new c(this,this.findChild("root/content/role_panel/flag")),this.role_icon=this.findChildComponent("root/content/role_panel/frame/icon",a),this.imgHeadFrame=this.findChildComponent("root/content/role_panel/frame/imgHeadFrame",a),this.role_lover_btn=this.findChild("root/content/role_panel/lover/btn"),this.addComponentCallbackListener(this.role_lover_btn,o.EventType.CLICK,(function(){0!=t.roleInfo[M.ROLE_ATTR_LOVER_ID]&&IS(K).reqOtherRoleNotice(t.roleInfo[M.ROLE_ATTR_LOVER_ID])})),this.role_title=this.findChild("root/content/role_panel/model/icon/titleIcon"),this.role_fly_pet=this.findChild("root/content/role_panel/model/petIcon"),this.role_figure_node=this.findChild("root/content/role_panel/model/icon"),this.role_figure_node2=this.findChild("root/content/role_panel/model/icon2"),this.nodeEquipParent=this.findChild("root/content/equipParent"),this.nodeEquipItem=this.findChild("root/content/equipParent/equipItem"),this.nodeEquipItem.active=!1,this.equipItems=[];for(var r=0;r<V.length;r++){var s=V[r].equipType;i=V[r].spriteName;var d=nodeInstantiate.instantiate(this.nodeEquipItem);d.parent=this.nodeEquipParent;var _={node:d,imgType:p.findChildComponent(d,"imgEquipType",a),nodeEquip:p.findChild(d,"equipInfo"),imgFrame:p.findChildComponent(d,"equipInfo/imgFrame",a),imgIcon:p.findChildComponent(d,"equipInfo/imgIcon",a),imgFigure:p.findChildComponent(d,"equipInfo/imgFigure",a),txtLevel:p.findChildComponent(d,"equipInfo/txtLevel",l),equipType:s};this.loadIcon(_.imgType,"equip",i),d.active=!0,this.equipItems.push(_)}this.attr_view=this.addSubView("RoleOtherAttrView",this.findChild("root/content/attrRoot")),this.black_label=this.findChildComponent("root/content/btnContent/black_btn/Label",l),this.black_btn=this.findChild("root/content/btnContent/black_btn"),this.addComponentCallbackListener(this.black_btn,o.EventType.CLICK,(function(){var e=P.AddBlack;5==t.data.friend_type&&(e=P.DelBlack),t.tipDeal[e]?b.showBoxTip({tip:t.tipDeal[e],title:GetLanguage(200048),func:function(i){"type_yes"==i&&(IS(K).reqDealFriend(e,t.role_id),t.close())}}):(IS(K).reqDealFriend(e,t.role_id),t.close())})),this.inform_btn=this.findChild("root/content/btnContent/informBtn"),this.addComponentCallbackListener(this.inform_btn,o.EventType.CLICK,(function(){t.role_id<1e5||IS(B).send_role_complaint_check_c2s(t.role_id)})),this.del_btn=this.findChild("root/content/btnContent/del_btn"),this.addComponentCallbackListener(this.del_btn,o.EventType.CLICK,(function(){t.role_id<1e5||(t.tipDeal[P.DelFriend]?b.showBoxTip({tip:t.tipDeal[P.DelFriend],title:GetLanguage(200048),func:function(e){"type_yes"==e&&(IS(K).reqDealFriend(P.DelFriend,t.role_id),t.close())}}):(IS(K).reqDealFriend(P.DelFriend,t.role_id),t.close()))})),this.friend_btn=this.findChild("root/content/btnContent/friend_btn"),this.addComponentCallbackListener(this.friend_btn,o.EventType.CLICK,(function(){t.role_id<1e5||(IS(K).reqDealFriend(P.AddFriend,t.role_id),t.close())})),this.friend_btn_label=this.findChildComponent("root/content/btnContent/friend_btn/Label",l),this.chat_btn=this.findChild("root/content/btnContent/chat_btn"),this.addComponentCallbackListener(this.chat_btn,o.EventType.CLICK,(function(){t.role_id<1e5||(uiMgr.openView("ChatView",y.ViewType.Private,t.role_id),t.close())})),this.nodeBtnPlant=this.findChild("root/content/btnPlant"),this.addComponentCallbackListener(this.nodeBtnPlant,o.EventType.CLICK,(function(){IS(k).CheckFuncOpen(G.FUNC_FARM,!0)&&(t.checkRoleFunctionOpen(G.FUNC_FARM)?IS(O).reqFarmInfo(t.role_id):b.showFlyTip(GetLanguage(200309)))})),this.nodeCircleFriends=this.findChild("root/content/btnCircleOfFriends"),this.addComponentCallbackListener(this.nodeCircleFriends,o.EventType.CLICK,(function(){uiMgr.openView("CircleOfFriendsView",t.role_id)})),this.nodeBtnSolo=this.findChild("root/content/btnSolo"),this.addComponentCallbackListener(this.nodeBtnSolo,o.EventType.CLICK,(function(){IS(S).reqSoloStart(t.role_id,[["RoleNoticeView",t.openArgs]]),battleMain.enterChapter(0),t.close()})),this.nodeBtnFlower=this.findChild("root/content/btnFlower"),this.addComponentCallbackListener(this.nodeBtnFlower,o.EventType.CLICK,(function(){var e=IS(E).GetActivityInfo(R.Qixi);e&&e.state==T.Open&&uiMgr.openView("ActivityValentineSendTipsView",t.role_id)})),this.imgBtnPlant=this.nodeBtnPlant.getComponent(a)},n.checkRoleFunctionOpen=function(t){var e=this.data.function_list;if(null==e)return!1;for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},n.updateRolePanel=function(t){this.UpdateChangeInfo(t);var e=this.roleInfo[M.ROLE_ATTR_MBTI];if(e>0){var n=configMbti.getDataByKey(e);this.role_mbti.string=n.type}else this.role_mbti.string=GetLanguage(200310);this.role_serv.string=m.formatStrWithMirrorDeal(GetLanguage(302046),this.roleInfo[M.ROLE_ATTR_SERVER]),this.role_uid.string="UID："+IS(k).GetShowId(this.role_id),this.role_lev.string="Lv."+this.roleInfo[M.ROLE_ATTR_LVL];var o=configJobs.getDataByKey(this.roleInfo[M.ROLE_ATTR_CUR_JOB]);if(o&&(this.role_job.string=o.name),this.role_lover.string=""!=this.roleInfo[M.ROLE_ATTR_LOVER_NAME]?this.roleInfo[M.ROLE_ATTR_LOVER_NAME]:GetLanguage(200543),this.role_lover_btn.active=0!=this.roleInfo[M.ROLE_ATTR_LOVER_ID],this.role_name.string=this.roleInfo[M.ROLE_ATTR_NAME]+"",this.role_sex_nan.active=1==this.roleInfo[M.ROLE_ATTR_GENDER],this.role_sex_nv.active=2==this.roleInfo[M.ROLE_ATTR_GENDER],this.loadRemoteIcon(this.roleInfo[M.ROLE_ATTR_HEAD_URL],this.role_icon),""!=this.roleInfo[M.ROLE_ATTR_GUILD_NAME]){this.findChild("root/content/role_panel/guild").active=!0,this.findChild("root/content/role_panel/noGuild").active=!1;var l=configGuild_level.getDataByKey(this.roleInfo[M.ROLE_ATTR_GUILD_LV]);this.role_guild.string=this.roleInfo[M.ROLE_ATTR_GUILD_NAME],this.role_guild_lev.string=this.roleInfo[M.ROLE_ATTR_GUILD_LV];var a=this.roleInfo[M.ROLE_ATTR_GUILD_NUM],d=r.formatStr("<b><color=#534230><color=%s>%s/</color>%s</color></b>");this.role_guild_num.string=r.formatStr(d,a<l.max_num?"#534230":"#bf4343",a,l.max_num),this.role_flag.SetItem(this.data.guild_flag)}else this.findChild("root/content/role_panel/guild").active=!1,this.findChild("root/content/role_panel/noGuild").active=!0;this.flagItem.SetFlag(this.roleInfo[M.ROLE_ATTR_FLAG]),this.imgBtnPlant.grayscale=!IS(k).CheckFuncOpen(G.FUNC_FARM)||!this.checkRoleFunctionOpen(G.FUNC_FARM);var c=this.data.figure;null!=this.role_figure_model&&this.removeUnitModel(this.role_figure_model),null!=this.role_figure_model2&&this.removeUnitModel(this.role_figure_model2),this.role_figure_model=IS(q).AddRoleModel(this,c,p.findChild(this.role_figure_node,"Node"),null,.75),s.uiMirror&&(this.getUnitModel(this.role_figure_model).dir=-1),this.data.lover_figure?(this.role_figure_node2.active=!0,this.role_figure_node.setPosition(-80,-120),this.role_figure_model2=IS(q).AddRoleModel(this,this.data.lover_figure,this.role_figure_node2,null,.75),s.uiMirror&&(this.getUnitModel(this.role_figure_model2).dir=-1)):(this.role_figure_node2.active=!1,this.role_figure_node.setPosition(0,-120)),this.updateSpeEquip(c),this.updateFlyPet(this.data.fly_pet);var h=c.current_title;if(h>0){var u=this.getUnitModel(this.role_figure_model).modelHeight;this.role_title.setPosition(0,u+100),this.role_title.active=!0,new _(this,this.role_title).SetRankTitle(h,f.NORMAL)}else this.role_title.active=!1;var v=0;if(this.roleInfo[M.ROLE_ATTR_HEAD_FRAME_ID]>0&&(v=this.roleInfo[M.ROLE_ATTR_HEAD_FRAME_ID]),null!=this.data.head&&(v=this.data.head.frame_id),v>0){var C=configAvatar_frame.getDataByKey(v);this.loadIcon(this.imgHeadFrame,"icon_frame",C.icon),this.imgHeadFrame.node.active=!0}else this.imgHeadFrame.node.active=!1;var g=GetLanguage(200311),I=!0,E=!1,R=GetLanguage(200312);4==this.data.friend_type&&(I=!1,E=!0),this.black_btn.active=this.role_id>1e5,this.inform_btn.active=this.role_id>1e5,5==this.data.friend_type&&(g=GetLanguage(200313),I=!1,E=!1),this.black_label.string=g,this.friend_btn.active=I,this.friend_btn_label.string=R,this.del_btn.active=E,this.chat_btn.active=!0,this.nodeBtnPlant.active=!0,this.nodeBtnSolo.active=!0,this.role_id==Number(IS(k).GetRoleId())&&(this.del_btn.active=!1,this.friend_btn.active=!1,this.black_btn.active=!1,this.chat_btn.active=!1,this.nodeBtnPlant.active=!1,this.nodeBtnSolo.active=!1,this.inform_btn.active=!1);for(var T,y=0,L=i(this.data.ext);!(T=L()).done;){var b=T.value;6==b.k&&(y=b.v)}0!=y&&(this.role_serv.string=m.formatStrWithMirrorDeal(GetLanguage(302046),y)),(0!=y&&y!=Number(IS(k).GetServerId())||this.role_id<1e5)&&(this.nodeBtnFlower.active=!1,this.nodeBtnPlant.active=!1,this.nodeBtnSolo.active=!1,this.del_btn.active=!1,this.friend_btn.active=!1,this.black_btn.active=!1,this.chat_btn.active=!1,this.inform_btn.active=!1),1==IS(N).currenSceneType&&(this.nodeBtnSolo.active=!1,this.nodeBtnPlant.active=!1)},n.updateEquipShow=function(t){for(var e=0;e<this.equipItems.length;e++){for(var i=0;i<t.length&&t[i].location-1!=e;i++);this.updateSingleEquip(this.equipItems[e],t[i])}},n.updateFlyPet=function(t){var e,i=this.findChild("root/content/BEquipItem");t=null!=(e=t)?e:[];var n=0,l=0;for(var r in t)1==t[r].k&&(n=t[r].v),2==t[r].k&&(l=t[r].v);var c=configFly.getDataByKey(l);if(c){var h=configUnitModel.getDataByKey(c.unitid);this.role_fly_pet_model=this.addUIEffect(h.path,this.role_fly_pet,-1,new d(0,-60),h.scale/100*1,(function(t){s.uiMirror&&(t.dir=-1)}))}var _=this.findChild("root/content/BEquipItem/item");if(this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){n>0&&l>0&&IS(A).send_66_31(n)})),n>0&&l>0){_.active=!0;var f=this.findChildComponent("root/content/BEquipItem/item/frame",a),u=this.findChildComponent("root/content/BEquipItem/item/icon",a),p=configFly.getDataByKey(l);this.loadIcon(f,"icon_equip",D[p.quality]),this.loadIcon(u,"icon_flypet",p.icon)}else _.active=!1},n.updateSpeEquip=function(t){var e=this.findChild("root/content/mountEquipItem/equipInfo/imgFrame"),i=this.findChild("root/content/mountEquipItem/equipInfo/imgIcon");if(t.mount_figure>0){e.active=!0,i.active=!0;var n=this.findChildComponent("root/content/mountEquipItem/equipInfo/imgIcon",a),o=this.findChildComponent("root/content/mountEquipItem/equipInfo/imgFrame",a),l=configMount.getDataByKey(t.mount_figure).icon_small,r=configMount.getDataByKey(t.mount_figure).quality;this.loadIcon(n,"icon_item",l),this.loadIcon(o,"icon_equip",configColor.getDataByKey(r).path)}else e.active=!1,i.active=!1;var s=this.findChild("root/content/artifactEquipItem/equipInfo/imgFrame"),d=this.findChild("root/content/artifactEquipItem/equipInfo/imgIcon");if(t.artifact_figure>0){s.active=!0,d.active=!0;var c=this.findChildComponent("root/content/artifactEquipItem/equipInfo/imgIcon",a),h=this.findChildComponent("root/content/artifactEquipItem/equipInfo/imgFrame",a);l=configArtifact.getDataByKey(t.artifact_figure).icon_small,r=configArtifact.getDataByKey(t.artifact_figure).quality;this.loadIcon(c,"icon_item",l),this.loadIcon(h,"icon_equip",configColor.getDataByKey(r).path)}else s.active=!1,d.active=!1;var _=this.findChild("root/content/relicEquipItem/equipInfo/imgFrame"),f=this.findChild("root/content/relicEquipItem/equipInfo/imgIcon"),u=this.findChild("root/content/relicEquipItem/imgEquipType"),p=t.equip_list.length>0&&IS(q).GetKvListByK(t.equip_list,5)||0;if(p>0){_.active=!0,f.active=!0,u.active=!1;var m=this.findChildComponent("root/content/relicEquipItem/equipInfo/imgIcon",a),v=this.findChildComponent("root/content/relicEquipItem/equipInfo/imgFrame",a),I=configRelic.getDataByKeys("id",p,"level",1);this.loadIcon(v,"icon_equip",configColor.getDataByKey(I.type+1).path),this.loadIcon(m,"icon_relic",I.icon,null,C.ICON_SPRITE)}else _.active=!1,f.active=!1,u.active=!0;var E=t.equip_list.length>0&&IS(q).GetKvListByK(t.equip_list,3)||0,R=this.findChild("root/content/fateEquipItem/equipInfo"),T=this.findChild("root/content/fateEquipItem/imgEquipType");if(E>0){R.active=!0,T.active=!1;var y=this.findChildComponent("root/content/fateEquipItem/equipInfo/imgFrame",a),L=this.findChildComponent("root/content/fateEquipItem/equipInfo/imgIcon",a),b=configFate.getDataByKey(E),A=g.fate_quality_pos[b.quality-1][1]+"";this.loadIcon(y,"fate",A),this.loadIcon(L,"icon_fate",b.icon,null,C.ICON_SPRITE)}else R.active=!1,T.active=!0;var D=t.equip_list.length>0&&IS(q).GetKvListByK(t.equip_list,4)||0,O=this.findChild("root/content/wingItem/equipInfo"),F=this.findChild("root/content/wingItem/imgEquipType");if(D>0){O.active=!0,F.active=!1;var S=this.findChildComponent("root/content/wingItem/equipInfo/imgFrame",a),B=this.findChildComponent("root/content/wingItem/equipInfo/imgIcon",a),k=configBack_decoration.getDataByKey(D);this.loadIcon(S,"icon_equip",configColor.getDataByKey(k.quality).path),this.loadIcon(B,"icon_item",k.icon_small)}else O.active=!1,F.active=!0;var w=t.equip_list.length>0&&IS(q).GetKvListByK(t.equip_list,6)||0,N=this.findChild("root/content/ringItem/equipInfo"),K=this.findChild("root/content/ringItem/imgEquipType");if(w>0){N.active=!0,K.active=!1;var P=this.findChildComponent("root/content/ringItem/equipInfo/imgFrame",a),G=this.findChildComponent("root/content/ringItem/equipInfo/imgIcon",a),V=configRing.getDataByKey(w);l="";l=2==this.roleInfo[M.ROLE_ATTR_GENDER]?V.icon2:V.icon1,this.loadIcon(G,"icon_ring",l,null,C.ICON_SPRITE),this.loadIcon(P,"icon_equip",configColor.getDataByKey(V.quality).path)}else N.active=!1,K.active=!0},n.UpdateChangeInfo=function(t){var e=t.kv,n=t.ks;if(null!=e)for(var o,l=i(e);!(o=l()).done;){var a=o.value;this.updateRoleAttr(a.k,a.v)}if(null!=n)for(var r,s=i(n);!(r=s()).done;){var d=r.value;this.updateRoleAttr(d.k,d.s)}console.log(this.roleInfo[1021])},n.updateRoleAttr=function(t,e){var i=this.roleInfo[t];if(null!=i)return i=e,this.roleInfo[t]=i,i},n.updateSingleEquip=function(t,e){var i=this;t.effect&&(this.removeUIEffect(t.effect),t.effect=null);t.equipType;if(I.isEmpty(e))t.nodeEquip.active=!1;else{var n=configEquipment.getDataByKey(e.config_id);t.nodeEquip.active=!0,this.loadIcon(t.imgIcon,n.atlas,n.icon,null,C.ICON_SPRITE),this.loadIcon(t.imgFrame,"icon_equip",configColor.getDataByKey(n.quality).path);var l=configColor.getDataByKey(n.quality).effect_path;null!=l&&""!=l&&(t.effect=this.addUIEffect(r.formatStr("prefab/ui-effect/%s",l),t.imgIcon.node,-1,new d(0,0))),t.txtLevel.string=r.formatStr("Lv.%s",e.equip_lv),this.addComponentCallbackListener(t.nodeEquip,o.EventType.CLICK,(function(){i.onEquipClick(e)}))}},n.registerUpdateHandler=function(){var t=this;this.addEvent(F.ROLE_HOME_FARM_INFO_BACK,(function(t){uiMgr.openView("PlantMainView",t)})),this.addEvent(L.COMPLAINT_CHECK,(function(e){e==t.role_id&&uiMgr.openView("InformView",{id:t.role_id,name:t.roleInfo[M.ROLE_ATTR_NAME]})}))},n.onMaskClick=function(){this.close()},n.onAfterOpen=function(){this.open_type=this.openArgs[0];var t,e,i,n=this.openArgs[1];1==this.open_type?(this.data=n.other_role_info[0],t=this.data.info_list,e=this.data.other_equip_list,i=this.data.role_id):2==this.open_type&&(this.data=n.arena_role,t=this.data.info_list,e=this.data.equip_list,i=this.data.id),e.sort((function(t,e){return t.location<e.location?-1:1})),this.updateEquipShow(e),this.role_id=i,this.updateRolePanel(t),this.attr_view.setActive(!0),this.attr_view.update(),this.checkFriendShow();var o=IS(E).GetActivityInfo(R.Qixi);this.nodeBtnFlower.active=o&&o.state==T.Open},n.onEquipClick=function(t){I.isEmpty(t)||uiMgr.openView("EquipDetailView",null==t?void 0:t.equip_id,!1,t)},n.checkFriendShow=function(){var t=IS(k).CheckFuncOpen(G.FUNC_CIRCLE)&&!w.IsPreviewServer()&&this.role_id>1e5;this.nodeCircleFriends.active=t},n.onBeforeClose=function(){},n.updateData=function(){},n.onDestroy=function(){},v}(v));n._RF.pop()}}}));

