System.register("chunks:///_virtual/GuildMemberListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./TimeUtil.ts","./index57.ts","./FriendControl.ts","./RoleDataCache.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildDefine.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,d,l,f,c,m,h,u,C,p;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Button,o=e.ScrollView,r=e.Vec3,a=e.Sprite,s=e.Label},function(e){d=e.ListItem},function(e){l=e.default},function(e){f=e.default},null,function(e){c=e.default},function(e){m=e.RoleDataCache},function(e){h=e.default},function(e){u=e.default},function(e){C=e.GuildEventDefine},function(e){p=e.BaseView}],execute:function(){i._RF.push({},"4abfbyXRqVKMZAsskIRsuxQ","GuildMemberListView",void 0);e("default",function(e){function i(){var t;return(t=e.call(this)||this).memberList=void 0,t.careerSort=void 0,t.donateSort=void 0,t.name="GuildMemberListView",t.url="ui/module/guild/GuildMemberListView",t}t(i,e);var a=i.prototype;return a.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,n.EventType.CLICK,(function(){e.close()}));var i=this.findChild("view/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){e.close()}));var r=this.findChildComponent("view/list",o);this.memberList=this.addUIList(r,v),this.donateSort=this.findChild("view/topTitle/txtDonate"),this.addComponentCallbackListener(this.donateSort,n.EventType.CLICK,(function(){var t=IS(u).GetMemberList(),i=[];for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];i.push(o)}i.sort((function(e,t){return e.donate_week!=t.donate_week?t.donate_week-e.donate_week:e.is_online==t.is_online?0==e.is_online&&e.offline_time!=t.offline_time?t.offline_time-e.offline_time:e.career!=t.career?IS(u).CompareCareer(e.career,t.career):e.role_id-t.role_id:0==e.is_online?1:-1})),e.memberList.datas=i})),this.careerSort=this.findChild("view/topTitle/txtCareer"),this.addComponentCallbackListener(this.careerSort,n.EventType.CLICK,(function(){var t=IS(u).GetMemberList(),i=[];for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];i.push(o)}i.sort((function(e,t){return e.career!=t.career?IS(u).CompareCareer(e.career,t.career):e.is_online==t.is_online?0==e.is_online&&e.offline_time!=t.offline_time?t.offline_time-e.offline_time:e.career!=t.career?IS(u).CompareCareer(e.career,t.career):e.role_id-t.role_id:0==e.is_online?1:-1})),e.memberList.datas=i}))},a.registerUpdateHandler=function(){this.addEvent(C.GUILD_INFO_UPDATE,this.updateInfo,this)},a.onAfterOpen=function(){IS(h).send_29_1(IS(m).GetGuildId())},a.onBeforeClose=function(){},a.onDestroy=function(){},a.updateInfo=function(){IS(u).GetGuildInfo();var e=IS(u).GetMemberList(),t=[];for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t.push(n)}t.sort((function(e,t){return e.is_online==t.is_online?0==e.is_online&&e.offline_time!=t.offline_time?t.offline_time-e.offline_time:e.career!=t.career?IS(u).CompareCareer(e.career,t.career):e.role_id-t.role_id:0==e.is_online?1:-1})),this.memberList.datas=t,IS(u).CheckLowerSelfCareer(4)?(this.careerSort.position=new r(129,0,0),this.donateSort.position=new r(6.7,0,0)):(this.careerSort.position=new r(235,0,0),this.donateSort.position=new r(95,0,0))},i}(p));var v=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).imgFrame=void 0,t.imgIcon=void 0,t.imgHeadFrame=void 0,t.txtName=void 0,t.txtDonate=void 0,t.txtCareer=void 0,t.txtTime=void 0,t.btn=void 0,t}t(i,e);var o=i.prototype;return o.onInit=function(){var e=this;this.imgFrame=l.findChildComponent(this.node,"imgFrame",a),this.imgIcon=l.findChildComponent(this.node,"imgFrame/imgIcon",a),this.imgHeadFrame=l.findChildComponent(this.node,"imgFrame/imgHeadFrame",a),this.txtName=l.findChildComponent(this.node,"name",s),this.txtDonate=l.findChildComponent(this.node,"donate",s),this.txtCareer=l.findChildComponent(this.node,"career",s),this.txtTime=l.findChildComponent(this.node,"time",s),this.btn=l.findChild(this.node,"btn"),this.view.addComponentCallbackListener(this.btn,n.EventType.CLICK,(function(){uiMgr.openView("GuildMemberView",e.data)})),this.view.addComponentCallbackListener(this.imgFrame.node,n.EventType.CLICK,(function(){IS(c).reqOtherRoleNotice(e.data.role_id)}))},o.onRender=function(e,t){this.view.loadRemoteIcon(e.role_head.url,this.imgIcon),this.txtName.string=e.role_name,this.txtDonate.string=e.donate_week,this.txtCareer.string=configGuild_career.getDataByKey(e.career).name,0==e.is_online?this.txtTime.string=f.getDateDiff(e.offline_time):this.txtTime.string=GetLanguage(200057),this.btn.active=IS(u).CheckLowerSelfCareer(e.career),IS(u).CheckLowerSelfCareer(4)?(this.txtCareer.node.position=new r(430,-31,0),this.txtTime.node.position=new r(430,-82,0),this.txtDonate.node.position=new r(315,-47,0)):(this.txtCareer.node.position=new r(538,-31,0),this.txtTime.node.position=new r(538,-82,0),this.txtDonate.node.position=new r(400,-47,0));var i=e.role_head.frame_id;if(i>0){this.imgHeadFrame.node.active=!0;var n=configAvatar_frame.getDataByKey(i);this.view.loadIcon(this.imgHeadFrame,"icon_frame",n.icon)}else this.imgHeadFrame.node.active=!1},i}(d);i._RF.pop()}}}));

