System.register("chunks:///_virtual/ObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolMgr.ts"],(function(e){"use strict";var t,o,i;return{setters:[function(e){t=e.createClass},function(e){o=e.cclegacy},function(e){i=e.poolMgr}],execute:function(){o._RF.push({},"8e0529lXXBFLYEcnXLt4ao0","ObjectPool",void 0);var r=0,s=1,a=2;e("ObjectPool",function(){function e(e,t,o){void 0===t&&(t=10),void 0===o&&(o=!0),this._clazz=void 0,this._maxNum=void 0,this._freepool=[],this._addMgr=!0,this.maxClearNum=10,this._clazz=e,this._maxNum=Math.max(t,1),this._addMgr=o,o&&i.add(this)}var o=e.prototype;return o.alloc=function(){var e;return(e=this._freepool.length<=0?new this._clazz:this._freepool.pop()).__poolState=r,e.cacheUse&&e.cacheUse(),e},o.free=function(e){var t=e;t.__poolState==r&&(t.__poolState=s,t.cacheReset&&t.cacheReset(),this._freepool.push(e))},o.getItem=function(e){},o.tryShrink=function(){if(GlobalDefine.CLIENT_TYPE){if(this._freepool.length>this._maxNum){for(var e=Math.min(this.maxClearNum,this._freepool.length-this._maxNum),t=Date.now(),o=0,i=0;i<e&&!(Date.now()-t>1);i++){o++;var r=this._freepool[i];r.__poolState=a,r.cacheDestroy&&r.cacheDestroy()}this._freepool.splice(0,o)}}else if(this._freepool.length>this._maxNum){for(var s=Math.min(this.maxClearNum,this._freepool.length-this._maxNum),h=0;h<s;h++){var l=this._freepool[h];l.__poolState=a,l.cacheDestroy&&l.cacheDestroy()}this._freepool.splice(0,s)}},o.destroy=function(e){(void 0===e&&(e=!1),e)&&this._freepool.forEach((function(e){var t=e;t.__poolState=a,t.cacheDestroy&&t.cacheDestroy()}));this._freepool.length=0,this._addMgr&&i.remove(this)},t(e,[{key:"length",get:function(){return this._freepool.length}}]),e}());o._RF.pop()}}}));

