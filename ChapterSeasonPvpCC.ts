System.register("chunks:///_virtual/ChapterSeasonPvpCC.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./ChapterSeasonPvp.ts","./EnumDefine.ts","./V2.ts","./ChapterControl.ts","./ChapterDataCache.ts","./ChapterDefine.ts","./MessageView.ts","./ShipModel.ts"],(function(t){"use strict";var e,n,i,a,r,o,s,h,p,l,u,c,f;return{setters:[function(t){e=t.inheritsLoose,n=t.regeneratorRuntime},function(t){i=t.cclegacy},function(t){a=t.ChapterType},function(t){r=t._IdleFormation,o=t.ChapterSeasonPvp},function(t){s=t.RunState},function(t){h=t.V2},function(t){p=t.default},function(t){l=t.ChapterDataCache},function(t){u=t.ChapterEventDefine},function(t){c=t.default},function(t){f=t.ShipModel}],execute:function(){i._RF.push({},"1cb9cV14vRA/qDSctcFbgYZ","ChapterSeasonPvpCC",void 0);t("ChapterSeasonPvpCC",function(t){function i(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).leftShip=void 0,e.rightShip=void 0,e}e(i,t);var o=i.prototype;return o.destroy=function(){var e,n;t.prototype.destroy.call(this),null==(e=this.leftShip)||e.free(),null==(n=this.rightShip)||n.free(),this.leftShip=null,this.rightShip=null},o.loadData=function(e){t.prototype.loadData.call(this,e),battleMain.printLogFlag=GlobalDefine.BATTLE_LOG;var n=battleMain.data.playerList[1];this.leftShip=f.alloc(n.ship);var i=n.ship.config.ship_plot[0],a=e+i[0],o=r[1]+i[1];this.leftShip.position=new h(a,o);var s=battleMain.data.playerList[2];this.rightShip=f.alloc(s.ship),this.rightShip.dir=-1,a=e+720-(i=s.ship.config.ship_plot[1])[0],o=r[2]+i[1],this.rightShip.position=new h(a,o)},o.endPvp=n().mark((function t(e,i,r,o,s,h){var c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=this.battleMain,t.next=3,coroutine.wait(1);case 3:3==c.data.battleCheckout?(IS(p).reqEnterChapter(0),c.enterChapter(),normalEvent.emit(u.BATTLE_STATE,i,!1),c.toResult(e,i,r,s,h),c.runningToPart=!1):(c.stopChapter(),c.toResult(e,i,r,s,h),c.runningToPart=!1,IS(l).chapterType=a.Main);case 4:case"end":return t.stop()}}),t,this)})),o.start=function(){t.prototype.start.call(this);var e=this.battleMain;e.runState=s.Wait,e.hub.showPvpTimer(),e.battleTimer.start(2,1,(function(){e.runState=s.Running}))},o.toResult=function(t,e){void 0===e&&(e=!1);var n=this.battleMain,i=this.config;0==t&&n.checkCheat()&&(t=1,c.showBoxTip({tip:GetLanguage(200998),btnCnt:1,func:function(t){},ensure:GetLanguage(200129)})),coroutine.start(this.endPvp(i.id,a.SeasonPvp,t,n.runMode,e,n.data.source),"battle")},i}(o));i._RF.pop()}}}));

