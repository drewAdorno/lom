System.register("chunks:///_virtual/ActivityHundredDataCache.ts",["cc","./TimeUtil.ts","./MainViewModel.ts","./ActivityDataCache.ts","./ActivityDefine.ts"],(function(t){"use strict";var e,i,n,a,c,o,s,r;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){n=t.MainViewModel},function(t){a=t.default},function(t){c=t.ActivityType,o=t.ActivityState,s=t.ActivityTaskState,r=t.ActivityEventDefine}],execute:function(){e._RF.push({},"b3cb3hQh6dL1YciepQtfyTM","ActivityHundredDataCache",void 0);t("default",function(){var t=e.prototype;function e(){normalEvent.on(r.OnActivityListUpdate,this.updateIcon,this),normalEvent.on(r.OnActivityInfoUpdate,this.updateIcon,this),normalEvent.on(r.OnActivityInfoTaskUpdate,this.updateIcon,this)}return t.clear=function(){},t.updateIcon=function(){var t=IS(a).GetActivityInfo(c.Hundred),e=313;if(t&&t.state==o.Open){var r=[];for(var u in t.task_list)t.task_list.hasOwnProperty(u)&&r.push(t.task_list[u]);var d=r[0];if(d&&d.state!=s.HadGet){var v=IS(a).GetEndTime(t)-i.serverTime;v>0&&(IS(n).addIcon(e,{leftTime:1==t.activityCfg.countdown?v:0,isPre:t.state==o.Preview}),IS(n).updateIconRedDot(e,IS(a).GetTaskRedNum(c.Hundred)))}else IS(n).removeIcon(e)}else IS(n).removeIcon(e)},e}());e._RF.pop()}}}));

