System.register("chunks:///_virtual/ActivityFateView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./AudioMgr.ts","./index3.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StorageUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ConfigGlobal.ts","./BagDefine.ts","./BagModel.ts","./MessageView.ts","./MallDefine.ts","./PayDataCache.ts","./PayDefine.ts","./RoleDefine.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./BaseView.ts","./EaseMethod.ts"],(function(t){"use strict";var i,e,o,n,a,s,r,d,c,l,h,f,p,u,g,v,m,w,y,C,T,I,_,k,L,S,G,b,V,R,x,D,E,A,M,B,j,K,F,U;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,n=t.Button,a=t.HorizontalTextAlignment,s=t.Sprite,r=t.Label,d=t.ScrollView,c=t.RichText,l=t.Toggle,h=t.sys,f=t.Layout,p=t.Vec3,u=t.js},function(t){g=t.V2},function(t){v=t.audioMgr},null,function(t){m=t.ItemGrid},function(t){w=t.ListItem},function(t){y=t.default},function(t){C=t.default},function(t){T=t.default},function(t){I=t.default},null,function(t){_=t.ConfigGlobal},function(t){k=t.BagEventDefine,L=t.GoodsType},function(t){S=t.BagModel},function(t){G=t.default},function(t){b=t.MallType},function(t){V=t.default},function(t){R=t.GiftType},function(t){x=t.RoleEventDefine},function(t){D=t.default},function(t){E=t.ActivityEventDefine,A=t.ActivityState,M=t.ActivityType},function(t){B=t.default},function(t){j=t.HorseCarnivalDataCache},function(t){K=t.ViewEvent,F=t.BaseView},function(t){U=t.EasingMethod}],execute:function(){o._RF.push({},"b5edf6R9SlIr7Ft+CpXBvdj","ActivityFateView",void 0);var N=["ArtifactGetView","HorseGetView","PlayerSkinGetView","FateNewView","GoodsGetView2","WingGetView"],O=(t("default",function(t){function o(){var i;return(i=t.call(this)||this).btnSelect=void 0,i.selectIcon=void 0,i.actType=void 0,i.nodeResParent=void 0,i.nodeResItem=void 0,i.nodeRolling=void 0,i.resItems=void 0,i.btnTask=void 0,i.btnGift=void 0,i.btnStore=void 0,i.taskRed=void 0,i.togSkip=void 0,i.skipAnim=void 0,i.iconTen=void 0,i.iconOne=void 0,i.txtOne=void 0,i.txtTen=void 0,i.txtNumReward=void 0,i.numScroll=void 0,i.tipsGo=void 0,i.tipsScroll=void 0,i.curTips=0,i.tipsTimer=0,i.txtLeftTime=void 0,i.deltaTime=0,i.leftTime=0,i.canUpdate=!1,i.curIndex=0,i.finalIndex=0,i.reward_list=[],i.waitRewardList=[],i.jackpot=0,i.jackpotType=0,i.actionTime=2,i.moveTween=void 0,i.rerwardList=[],i.rewardNum=15,i.spine1=void 0,i.spine2=void 0,i.name="ActivityFateView",i.url="ui/module/activity/ActivityFateView",i.poolTime=3e3,i.fullScreen=!0,i.actType=M.Fate,i}i(o,t);var m=o.prototype;return m.onInit=function(){var t=this;this.initResShow();var i=this.findChild("root/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("root/top/nodeTime/btnTips");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){for(var i=_.LIMITED_RANK_SYSTEM_DETAILS,e="",o=0;o<i.length;o++)i[o][0]==t.actType&&(e=GetLanguage(i[o][1]));""!=e&&G.showBoxTip({tip:e,btnCnt:1,horizontalAlign:a.LEFT})})),this.btnSelect=this.findChild("root/btnSelect"),this.selectIcon=this.findChildComponent("root/btnSelect/icon",s),this.addComponentCallbackListener(this.btnSelect,n.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalSelectView",t.actType)})),this.btnStore=this.findChild("root/bottomBtn/btnStore"),this.addComponentCallbackListener(this.btnStore,n.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalStoreView",t.actType)})),this.btnTask=this.findChild("root/bottomBtn/btnTask"),this.taskRed=this.findChild("root/bottomBtn/btnTask/red"),this.addComponentCallbackListener(this.btnTask,n.EventType.CLICK,(function(){uiMgr.openView("ActivityFateTaskView",t.actType)})),this.btnGift=this.findChild("root/bottomBtn/btnGift"),this.addComponentCallbackListener(this.btnGift,n.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalGiftView",t.actType)}));var o=this.findChild("root/turn/btnShow/btnShow");this.addComponentCallbackListener(o,n.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalTipsView",o,t.actType)}));var f=this.findChild("root/turn/img/nodeTips2/tips");this.addComponentCallbackListener(f,n.EventType.CLICK,(function(){uiMgr.openView("CommonPopTipsView",GetLanguage(400204),f)})),this.nodeRolling=this.findChild("root/turn/img/nodeRolling"),this.txtLeftTime=this.findChildComponent("root/top/nodeTime/txtTime",r),this.txtNumReward=this.findChildComponent("root/numReward/num",r);var p=this.findChildComponent("root/numReward/ScrollView",d);this.numScroll=this.addUIList(p,O),this.tipsGo=this.findChild("root/top/tips");var u=this.findChildComponent("root/top/tips/ScrollView",d);this.tipsScroll=this.addUIList(u,P),this.iconOne=this.findChildComponent("root/btnOne/icon",s),this.iconTen=this.findChildComponent("root/btnTen/icon",s),this.txtOne=this.findChildComponent("root/btnOne/num",c),this.txtTen=this.findChildComponent("root/btnTen/num",c);var g=this.findChild("root/btnOne");this.addComponentCallbackListener(g,n.EventType.CLICK,(function(){t.onLottery(1)}));var v=this.findChild("root/btnTen");this.addComponentCallbackListener(v,n.EventType.CLICK,(function(){t.onLottery(2)})),this.togSkip=this.findChildComponent("root/turn/toggleSkip",l),this.addComponentCallbackListener(this.togSkip.node,l.EventType.TOGGLE,(function(){t.togSkip.isChecked?C.set("SkipAFAnim",1):C.set("SkipAFAnim",0)}));var m=this.findChildComponent("root/turn/toggleSkip/Checkmark",s);this.loadIcon(m,"zqkh","zqkh_ui_gouxuan01"),this.skipAnim=this.findChild("skipAnim"),this.addComponentCallbackListener(this.skipAnim,n.EventType.CLICK,(function(){t.SkipAnim()}));for(var w=function(){var i=t.findChild("root/turn/itemRoll/itemGrid"+T),e={node:i,index:T,item_id:0,cfg_id:0,imgFram:y.findChildComponent(i,"imgFrame",s),imgIcon:y.findChildComponent(i,"imgIcon",s),num:y.findChildComponent(i,"num",r),select:y.findChild(i,"select"),light:y.findChild(i,"light"),limit:y.findChild(i,"nodeLimit")};t.addComponentCallbackListener(i,n.EventType.CLICK,(function(){0!=e.item_id&&IS(S).OpenItemTips(e.item_id,i)})),t.rerwardList.push(e)},T=0;T<this.rewardNum;T++)w();this.dealAllLimitLayout(),h.uiMirror&&this.findChild("root/turn/img/spine").setScale(-1,1,1)},m.dealAllLimitLayout=function(){if(h.uiMirror)for(var t=this.node.getComponentsInChildren(f),i=0;i<t.length;i++)1==t[i].type&&"nodeLimit"==t[i].node.name&&this.dealMirrorLayout(t[i])},m.initResShow=function(){this.nodeResParent=this.findChild("resRoot"),this.nodeResItem=this.findChild("resRoot/resItem"),this.nodeResItem.active=!1;var t=[IS(j).GetCost(this.actType)[0]];this.resItems=new Array;for(var i=0;i<t.length;i++){var e=nodeInstantiate.instantiate(this.nodeResItem),o=t[i];this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){})),e.parent=this.nodeResParent,e.active=!0;var a=y.findChildComponent(e,"imgIcon",s),d=configGoods.getDataByKey(o);this.loadIcon(a,"icon_item",d.icon),this.resItems.push({node:e,txtNum:y.findChildComponent(e,"txtNum",r),goodsGtid:o})}},m.registerUpdateHandler=function(){this.addEvent(E.OnHorseCarnivalUpdate,this.updateInfo,this),this.addEvent(E.OnHorseCarnivalReward,this.updateReward,this),this.addEvent(E.OnHorseCarnivalLottery,this.updateLotteryResult,this),this.addEvent(k.GOODS_INFO_UPDATE,this.updateResShow,this),this.addEvent(x.ROLE_RES_UPDATE,this.updateResShow,this),this.addEvent(E.OnActivityInfoTaskUpdate,this.OnTaskUpdate,this),this.addEvent(E.OnActivityInfoUpdate,this.OnTaskUpdate,this),this.addEvent(K.ViewClose,this.onViewClose,this)},m.onAfterOpen=function(){var t,i,e=this,o=IS(D).GetActivityInfo(this.actType);this.updateResShow(),IS(B).send_24_16(this.actType),this.togSkip.isChecked=1==C.get("SkipAFAnim"),this.skipAnim.active=!1,this.nodeRolling.active=!1,o.roundCfg&&o.roundCfg.task_list.length>0?(this.btnTask.active=!0,this.taskRed.active=IS(D).GetTaskRedNum(o.type)>0):this.btnTask.active=!1,IS(V).GetAcivityGift(R.Activity,o.type,o.round).length>0?this.btnGift.active=!0:this.btnGift.active=!1;var n=null!=(t=configMall.getDataByList("type",b.Activity))?t:[],a=[];for(var r in n)if(n.hasOwnProperty(r)){var d=n[r];d.condition.length>0&&"activity_group"==d.condition[0][0]&&d.condition[0][1]==o.type&&d.condition[0][2]==o.roundCfg.group_id&&a.push(d)}a.length>0?this.btnStore.active=!0:this.btnStore.active=!1;var c=null!=(i=o.state_time[o.state])?i:o.state_time[A.Open];this.leftTime=c.end_time-I.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=I.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026);var l=IS(j).GetCost(this.actType),h=configGoods.getDataByKey(l[0]);this.loadIcon(this.iconOne,h.icon_group,h.icon),this.loadIcon(this.iconTen,h.icon_group,h.icon);var f=configMount_draw_cumulative_times.getDatas(),u=[];for(var v in f)if(f.hasOwnProperty(v)){var m=f[v];m.type==o.type&&m.group_id==o.roundCfg.group_id&&u.push(m)}this.numScroll.datas=u;var w=configMount_draw.getDatas(),y=[];for(var T in w)w.hasOwnProperty(T)&&function(){var t=w[T];if(t.type==o.type&&t.group_id==o.roundCfg.group_id&&(y.push(t),1==t.is_jackpot)){var i=e.findChildComponent("root/turn/img/icon",s),n=e.findChild("root/turn/img/spine");e.btnSelect.active=t.reward_replace.length>0;var a=configGoods.getDataByKey(t.reward[0]);if(12==a.type||20==a.type){i.node.active=!0,n.active=!1;var r=t.scale;i.node.setPosition(t.pos[0][0],t.pos[0][1]),i.node.setScale(r,r),e.loadIcon(i,"icon_item",t.show_picture)}else{i.node.active=!1,n.active=!0;var d=new g(t.pos[0][0],t.pos[0][1]),c=t.scale;e.removeUIEffect(e.spine2),e.spine2=e.addUIEffect(t.show_picture,n,-1,d,c,(function(i){i.node.setRotationFromEuler(new p(0,0,t.rotate))}))}}}();y.sort((function(t,i){return t.id-i.id}));for(var _=function(t){var i=y[t],o=e.rerwardList[i.order-1];if(o.item_id=i.reward[0],o.num.string=i.reward[1],o.cfg_id=i.id,0!=o.index){var n=configGoods.getDataByKey(o.item_id);e.loadIcon(o.imgIcon,n.icon_group,n.icon);var a=configColor.getDataByKey(n.quality);e.loadIcon(o.imgFram,"icon_equip",a.path)}else{var s=configGoods.getDataByKey(o.item_id),r=configColor.getDataByKey(s.quality);if(e.loadIcon(o.imgFram,"icon_equip",r.big_path),e.loadIcon(e.selectIcon,s.icon_group,s.icon),1==i.is_jackpot){var d=configGoods.getDataByKey(i.reward[0]);if(12==d.type||20==d.type){o.imgIcon.node.active=!0,e.removeUIEffect(e.spine1);var c=.5*i.scale;o.imgIcon.node.setPosition(i.pos[1][0],i.pos[1][1]),o.imgIcon.node.setScale(c,c),e.loadIcon(o.imgIcon,"icon_item",i.show_picture)}else{o.imgIcon.node.active=!1;var l=new g(i.pos[1][0],i.pos[1][1]),h=.5*i.scale;e.removeUIEffect(e.spine1),e.spine1=e.addUIEffect(i.show_picture,o.imgFram.node,-1,l,h,(function(t){t.node.setRotationFromEuler(new p(0,0,i.rotate))}))}}}o.limit&&(o.limit.active=!1),o.select.active=!1,o.light.active=!1},k=0;k<y.length;k++)_(k)},m.onBeforeClose=function(){this.canUpdate=!1,this.curIndex=0,this.tipsTimer=0;for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.jackpot=0,this.jackpotType=0,this.waitRewardList=[]},m.onDestroy=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].node.destroy();this.resItems={}},m.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=I.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},m.updateResShow=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].txtNum.string=T.GetNumString(IS(S).getGoodsCountByGoodsGtid(this.resItems[t].goodsGtid));var i,e,o=IS(j).GetCost(this.actType),n=IS(S).getGoodsCountByGoodsGtid(o[0]);n>=o[1]?(e="#5aff42",i="#27720d"):(e="#ff1f1f",i="#891000"),this.txtOne.string=u.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",i,e,o[1]),n>=10*o[1]?(e="#5aff42",i="#27720d"):(e="#ff1f1f",i="#891000"),this.txtTen.string=u.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",i,e,10*o[1])},m.OnTaskUpdate=function(){this.taskRed.active=IS(D).GetTaskRedNum(this.actType)>0},m.updateInfo=function(){var t=this,i=IS(j).getInfo(this.actType);if(this.tipsGo.active=i.lucky_list.length>0,0!=this.tipsTimer&&this.removeTimer(this.tipsTimer),this.tipsGo.active){var e=i.lucky_list[0],o=i.lucky_list.concat(e);this.tipsScroll.datas=o,this.curTips=0,this.tipsTimer=this.addTimer(2,-1,(function(){t.curTips=t.curTips+1,t.curTips==o.length&&(t.curTips=0);var i=0==t.curTips?0:2;t.tipsScroll.scrollTo(t.curTips,i)}))}this.updateReward()},m.updateReward=function(){var t,i=this,o=IS(j).getInfo(this.actType);this.txtNumReward.string=o.count+"",this.numScroll.updateAll();var n=null!=(t=o.guaranteed_list[this.rerwardList[0].cfg_id])?t:0,a=this.findChildComponent("root/turn/img/nodeTips2/jackPotNum",c);if(n>0){a.node.active=!0;var d=u.formatStr("<b><outline color=#5C2E1A width=2><color=#FFF8C6>%s</color></outline></b>",GetLanguage(400202));a.string=T.formatStr(d,u.formatStr("<b><outline color=#943B30 width=2><color=#FFF71E>%s</color></outline></b>",n))}else a.node.active=!1;this.findChildComponent("root/turn/img/nodeTips/drawNum",r).string=T.formatStr(GetLanguage_UI(899000013),IS(j).getInfo(this.actType).remain_draw);for(var l,h=e(this.rerwardList);!(l=h()).done;){var f=l.value,v=configMount_draw.getDataByKey(f.cfg_id);if(f.limit){f.limit.active=!0;var m=IS(j).getInfo(this.actType),w=y.findChildComponent(f.limit,"Node",r);if(w.string=T.formatStrWithMirrorDeal(GetLanguage(400014),v.num),m.get_drop.length>0)for(var C,I=e(m.get_drop);!(C=I()).done;){var _=C.value,k=_.k,S=_.v;k==f.cfg_id&&(w.string=T.formatStrWithMirrorDeal(GetLanguage(400014),v.num-S))}if(1==v.is_jackpot&&v.reward_replace.length>0){var G,b,V=null!=(G=null==(b=m.choose_list[f.cfg_id])?void 0:b[1])?G:0;if(V>0)for(var R,x=e(v.reward_replace);!(R=x()).done;){var D=R.value;if(D[0]==V)if("break"===function(){if(f.item_id==D[1][0])return"break";f.num.string=D[1][1],f.item_id=D[1][0];var t=configGoods.getDataByKey(f.item_id),e=configColor.getDataByKey(t.quality);i.loadIcon(f.imgFram,"icon_equip",e.big_path),i.loadIcon(i.selectIcon,t.icon_group,t.icon);var o=i.findChildComponent("root/turn/img/icon",s),n=i.findChild("root/turn/img/spine"),a=v.ext[D[0]-1],r=new g(a[2][1][0],a[2][1][1]),d=.5*a[1],c=new g(a[2][0][0],a[2][0][1]),l=a[1];if(12==t.type||20==t.type)o.node.active=!0,n.active=!1,f.imgIcon.node.active=!0,i.removeUIEffect(i.spine1),o.node.setPosition(c.x,c.y),o.node.setScale(l,l),i.loadIcon(o,"icon_item",t.icon),f.imgIcon.node.setPosition(r.x,r.y),f.imgIcon.node.setScale(d,d),i.loadIcon(f.imgIcon,"icon_item",t.icon);else{o.node.active=!1,n.active=!0,f.imgIcon.node.active=!1;var h="";t.type==L.Wing&&(h=configBack_decoration.getDataByKey(t.effect[0]).path),i.removeUIEffect(i.spine1),i.spine1=i.addUIEffect(h,f.imgFram.node,-1,r,d,(function(t){t.node.setRotationFromEuler(new p(0,0,a[3]))})),i.removeUIEffect(i.spine2),i.spine2=i.addUIEffect(h,n,-1,c,l,(function(t){t.node.setRotationFromEuler(new p(0,0,a[3]))}))}}())break}}}}this.dealAllLimitLayoutLabels()},m.dealAllLimitLayoutLabels=function(){if(h.uiMirror)for(var t=this.node.getComponentsInChildren(f),i=0;i<t.length;i++)1==t[i].type&&"nodeLimit"==t[i].node.name&&this.refreshTxtMirrorByLayout(t[i])},m.onLottery=function(t){var i=IS(j).GetCost(this.actType),e=i[0],o=i[1];2==t&&(o*=10),IS(S).getGoodsCountByGoodsGtid(e)>=o?IS(B).send_24_17(this.actType,t):this.btnGift.active&&uiMgr.openView("HorseCarnivalGiftView",this.actType)},m.updateLotteryResult=function(t){var i=this;if(t.act_type==this.actType)if(this.nodeRolling.active=!1,this.checkJackpot(t.drop_id_list),this.togSkip.isChecked)0!=this.jackpot?(this.openTypeView(this.jackpot,this.jackpotType),this.waitRewardList=t.reward_list,this.jackpot=0,this.jackpotType=0):uiMgr.openView("GoodsGetView",t.reward_list);else{this.nodeRolling.active=!0;var e=t.drop_id_list[t.drop_id_list.length-1];this.finalIndex=configMount_draw.getDataByKey(e).order-1,this.reward_list=t.reward_list,this.skipAnim.active=!0,1==t.drop_id_list.length?this.doLotteryTween(this.finalIndex,(function(){for(var e=0;e<i.rerwardList.length;e++)i.rerwardList[e].select.active=!1,i.rerwardList[e].light.active=!1;i.rerwardList[i.finalIndex].select.active=!0,i.rerwardList[i.finalIndex].light.active=!0,i.curIndex=i.finalIndex,0!=i.jackpot?(i.openTypeView(i.jackpot,i.jackpotType),i.waitRewardList=t.reward_list,i.jackpot=0,i.jackpotType=0):uiMgr.openView("GoodsGetView",t.reward_list),i.skipAnim.active=!1,i.nodeRolling.active=!1})):this.lotteryNext(0,t)}},m.lotteryNext=function(t,i){var e,o=this,n=configMount_draw.getDataByKey(i.drop_id_list[t]).order-1;e=t<i.drop_id_list.length-1?function(){o.curIndex=n,o.lotteryNext(t+1,i)}:function(){for(var t=0;t<o.rerwardList.length;t++)o.rerwardList[t].select.active=!1,o.rerwardList[t].light.active=!1;o.rerwardList[n].select.active=!0,o.rerwardList[n].light.active=!0,o.curIndex=n,0!=o.jackpot?(o.waitRewardList=i.reward_list,o.openTypeView(o.jackpot,o.jackpotType),o.jackpot=0,o.jackpotType=0):uiMgr.openView("GoodsGetView",i.reward_list),o.skipAnim.active=!1,o.nodeRolling.active=!1},this.doLotteryTween(n,e)},m.doLotteryTween=function(t,i){var e=this;null!=this.moveTween&&this.moveTween.stop(),v.playSound("common_guguji");var o=4*this.rewardNum+t-this.curIndex;this.moveTween=this.addTween(0,1,this.actionTime,(function(t,i){for(var n=o*i,a=Math.floor((n+e.curIndex)%e.rewardNum),s=0;s<e.rerwardList.length;s++)e.rerwardList[s].select.active=!1,e.rerwardList[s].light.active=!1;e.rerwardList[a].select.active=!0})).easing(U.SINE_OUT).call((function(){i()}),.5).start()},m.SkipAnim=function(){null!=this.moveTween&&this.moveTween.stop();for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.rerwardList[this.finalIndex].select.active=!0,this.rerwardList[this.finalIndex].light.active=!0,this.curIndex=this.finalIndex,0!=this.jackpot?(this.openTypeView(this.jackpot,this.jackpotType),this.waitRewardList=this.reward_list,this.jackpot=0,this.jackpotType=0):uiMgr.openView("GoodsGetView",this.reward_list),this.skipAnim.active=!1,this.nodeRolling.active=!1},m.checkJackpot=function(t){this.jackpot=0,this.jackpotType=0;for(var i,o=e(t);!(i=o()).done;){var n=i.value,a=configMount_draw.getDataByKey(n);if(1==a.is_jackpot)if(a.reward_replace.length>0){var s,r,d=null!=(s=null==(r=IS(j).getInfo(this.actType).choose_list[a.id])?void 0:r[1])?s:0;if(d>0)for(var c,l=e(a.reward_replace);!(c=l()).done;){var h=c.value;if(h[0]==d&&a.goods_type)return this.jackpot=h[1][0],this.jackpotType=a.goods_type,!0}else if(a.goods_type)return this.jackpot=a.reward[0],this.jackpotType=a.goods_type,!0}else if(a.goods_type)return this.jackpot=a.reward[0],this.jackpotType=a.goods_type,!0}return!1},m.onViewClose=function(t){this.waitRewardList.length<=0||N.includes(t)&&(uiMgr.openView("GoodsGetView",this.waitRewardList),this.waitRewardList=[])},m.openTypeView=function(t,i){switch(i){case 1:return void uiMgr.openView("ArtifactGetView",configGoods.getDataByKey(t).effect[0],!0);case 2:return void uiMgr.openView("HorseGetView",configGoods.getDataByKey(t).effect[0],!0);case 3:return void uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0);case 4:return void uiMgr.openView("FateNewView",configGoods.getDataByKey(t).effect[0]);case 5:switch(configGoods.getDataByKey(t).type){case 28:uiMgr.openView("ArtifactGetView",configGoods.getDataByKey(t).effect[0],!0);break;case 27:uiMgr.openView("HorseGetView",configGoods.getDataByKey(t).effect[0],!0);break;case 11:uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0);break;case 12:uiMgr.openView("FateNewView",configGoods.getDataByKey(t).effect[0]);break;case 32:uiMgr.openView("WingGetView",configGoods.getDataByKey(t).effect[0],!0);break;default:uiMgr.openView("GoodsGetView2",t)}}},o}(F)),function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).txtDesc=void 0,i.itemGridNode=void 0,i.itemGrid=void 0,i.isReward=void 0,i.eff=void 0,i.effNode=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.txtDesc=y.findChildComponent(this.node,"desc",c),this.effNode=y.findChild(this.node,"eff"),this.itemGridNode=y.findChild(this.node,"itemGrid"),this.itemGrid=new m(this.view,this.itemGridNode,(function(){var i=IS(j).getInfo(t.view.actType);!t.isReward&&i.count>=t.data.cumulative_times?IS(B).send_24_18(t.view.actType,t.data.id):IS(S).OpenItemTips(t.data.reward[0],t.itemGridNode)}))},o.onRender=function(t,i){this.itemGrid.SetItemId(t.reward[0],t.reward[1]);var e=IS(j).getInfo(this.view.actType);this.isReward=e.gotReward[t.id],this.view.removeUIEffect(this.eff),this.isReward?this.txtDesc.string=T.formatStrWithMirrorDeal(GetLanguage(200033)):e.count>=t.cumulative_times?(this.txtDesc.string=T.formatStrWithMirrorDeal(GetLanguage(200034)),this.eff=this.view.addUIEffect("prefab/ui-effect/MX_tx_tongyong_daojulingqu",this.effNode,-1)):this.txtDesc.string=u.formatStr("<b><color=#ff1c1c>%s</color><color=#80342e>/%s</color></b>",e.count,t.cumulative_times)},e}(w)),P=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).txt=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){this.adaptiveSize=!0,this.txt=y.findChildComponent(this.node,"txt",c)},o.onRender=function(t,i){var e,o=null==(e=configGoods.getDataByKey(t.k))?void 0:e.name;this.txt.string=T.formatStrWithMirrorDeal(GetLanguage(200050),t.s,o)},e}(w);o._RF.pop()}}}));

