System.register("chunks:///_virtual/PayPopView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./NodeUtil.ts","./UIList.ts","./PayControl.ts","./PayDataCache.ts","./BagModel.ts","./PayDefine.ts","./ItemIcon.ts","./BaseView.ts"],(function(t){"use strict";var i,n,e,o,s,a,d,c,h,r,l,u,m,f,p;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,o=t.Label,s=t.Sprite,a=t.ScrollView,d=t.js},null,function(t){c=t.default},function(t){h=t.ListItem},function(t){r=t.default},function(t){l=t.default},function(t){u=t.BagModel},function(t){m=t.PayEventDefine},function(t){f=t.IconAseetType},function(t){p=t.BaseView}],execute:function(){n._RF.push({},"2c44cjcPexHzKK7VUconBwI","PayPopView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).icon=void 0,i.txtName=void 0,i.btnBuy=void 0,i.txtPrice=void 0,i.txtDiscount=void 0,i.discountNode=void 0,i.out=void 0,i.hot=void 0,i.new=void 0,i.rewardScroll=void 0,i.data=void 0,i.name="PayPopView",i.url="ui/module/shop/PayPopView",i.poolTime=3e3,i}i(n,t);var h=n.prototype;return h.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()})),this.txtName=c.findChildComponent(this.node,"item/title/Label",o),this.icon=c.findChildComponent(this.node,"item/icon",s),this.txtPrice=c.findChildComponent(this.node,"item/btnBuy/Label",o),this.discountNode=c.findChild(this.node,"item/discount"),this.txtDiscount=c.findChildComponent(this.node,"item/discount/Label",o),this.hot=c.findChild(this.node,"item/hot"),this.new=c.findChild(this.node,"item/new"),this.out=c.findChild(this.node,"item/out"),this.btnBuy=c.findChild(this.node,"item/btnBuy"),this.addComponentCallbackListener(this.btnBuy,e.EventType.CLICK,(function(){0==t.data.price?IS(r).send_19_2(t.data.id):IS(l).Pay(t.data.id)}));var n=c.findChildComponent(this.node,"item/rewardScroll",a);this.rewardScroll=this.addUIList(n,y)},h.registerUpdateHandler=function(){this.addEvent(m.PAY_REWARD_UPDATE,this.close,this),this.addEvent(m.PAY_RECHARGE_SUCCESS,this.close,this)},h.onAfterOpen=function(){var t=this.openArgs[0],i=configPay_mall.getDataByKey(t);this.data=i,0==i.price?this.txtPrice.string=GetLanguage(200045):this.txtPrice.string=IS(l).GetPriceString(i.cost_level),this.loadIcon(this.icon,"pay2",i.pic_back,null,f.ICON_SPRITE),0==i.ratio?this.discountNode.active=!1:(this.discountNode.active=!0,this.txtDiscount.string=100*i.ratio+"%"),this.hot.active=1==i.icon_name,this.new.active=2==i.icon_name,this.loadIcon(this.icon,"pay2",i.pic_back,null,f.ICON_SPRITE);var n=IS(l).GetPayGiftInfo(i.id);i.buy_times>0?null!=n?0==n.payCfg.price&&2==n.rewardState?this.txtName.string=d.formatStr("%s(%s/%s)",i.name,i.buy_times,i.buy_times):this.txtName.string=d.formatStr("%s(%s/%s)",i.name,n.bought_times,i.buy_times):this.txtName.string=d.formatStr("%s(%s/%s)",i.name,0,i.buy_times):this.txtName.string=i.name,this.rewardScroll.datas=i.reward},h.onBeforeClose=function(){},h.onDestroy=function(){},n}(p));var y=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).txtNum=void 0,i.imgFrame=void 0,i.imgIcon=void 0,i}i(n,t);var a=n.prototype;return a.onInit=function(){var t=this;this.txtNum=c.findChildComponent(this.node,"txtNum",o),this.imgFrame=c.findChildComponent(this.node,"imgFrame",s),this.imgIcon=c.findChildComponent(this.node,"imgIcon",s),this.view.addComponentCallbackListener(this.imgIcon.node,e.EventType.CLICK,(function(){IS(u).OpenItemTips(t.data[0],t.imgIcon.node)}))},a.onRender=function(t,i){var n,e=t[0],o=configGoods.getDataByKey(e),s=o.quality;1==o.type?this.txtNum.string="x"+t[1]:this.txtNum.string=o.name+" x"+t[1],3==o.type?(n="icon_skill",this.imgIcon.node.setScale(.5,.5,.5)):4==o.type?(n="icon_pet",this.imgIcon.node.setScale(.6,.6,.6)):(n="icon_item",this.imgIcon.node.setScale(.7,.7,.7));var a=configColor.getDataByKey(s);this.view.loadIcon(this.imgIcon,n,o.icon),this.view.loadIcon(this.imgFrame,"icon_equip",a.path)},n}(h);n._RF.pop()}}}));

