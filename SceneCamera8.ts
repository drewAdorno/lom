System.register("chunks:///_virtual/SceneCamera8.ts",["cc","./index3.ts","./EaseMethod.ts"],(function(e){"use strict";var i,t,o,n,s,a;return{setters:[function(e){i=e.cclegacy,t=e.Rect,o=e.Vec2,n=e.screen,s=e.Vec3},null,function(e){a=e.EasingMethod}],execute:function(){i._RF.push({},"b06136EzGJOZaoKQYsDiSsq","SceneCamera",void 0);var h=new t(-360,-20,720,40);e("SceneCamera",function(){function e(e){this.nodeCamera=void 0,this.camera=void 0,this.follow=void 0,this.oriPos=new s,this.animTempVec=new o,this.map=void 0,this.moveTween=void 0,this.camIsLock=!1,this.map=e;var i=800/n.windowSize.height*n.windowSize.width;i=1440-2*i,h.width=i,h.x=-i/2}var i=e.prototype;return i.onUpdate=function(){if(!this.camIsLock){var e=this.follow.model.position;this.oriPos.set(e.x,e.y,10);var i=this.oriPos;i.x<=h.xMin&&(this.oriPos.x=h.xMin),i.x>=h.xMax&&(this.oriPos.x=h.xMax),i.y<=h.yMin&&(this.oriPos.y=h.yMin),i.y>=h.yMax&&(this.oriPos.y=h.yMax),this.nodeCamera.position=this.oriPos}},i.PlayCamAnim=function(e,i,c){var m=this;this.camIsLock=!0;var r=o.ZERO,w=this.camera.orthoHeight,v=i-w,d=new o(e.x-r.x,e.y-r.y);this.moveTween&&this.moveTween.stop();new t(-360,-20,720,40);var u=800/n.windowSize.height*n.windowSize.width;u=1440-2*u,h.width=u,h.x=-u/2,this.nodeCamera.position=s.ZERO,this.moveTween=this.map.view.addTween(0,1,5,(function(e,i){o.multiplyScalar(m.animTempVec,d,i),o.add(m.animTempVec,r,m.animTempVec);var t=new s(m.animTempVec.x,m.animTempVec.y,10);m.nodeCamera.position=t;var n=w+v*i;m.camera.orthoHeight=n})).easing(a.LINEAR).call((function(){m.moveTween=null,c()})).start()},i.ResetCam=function(){this.moveTween&&(this.moveTween.stop(),this.moveTween=null),this.camera.orthoHeight=800},i.UnLockCam=function(){this.moveTween&&(this.moveTween.stop(),this.moveTween=null),this.camIsLock&&(this.camIsLock=!1,this.camera.orthoHeight=800,this.onUpdate())},i.getCamIsLock=function(){return this.camIsLock},e}());i._RF.pop()}}}));

