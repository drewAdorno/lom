System.register("chunks:///_virtual/SeasonSceneLookView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./RoleDataCache.ts","./SeasonDefine.ts","./SeasonSceneControl.ts","./BaseView.ts"],(function(t){"use strict";var e,n,i,o,s,r,d,a,f,h,c,l,p,u,v,g,m,C;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Button,o=t.Label,s=t.ScrollView,r=t.sys,d=t.Color,a=t.Sprite,f=t.ProgressBar,h=t.Vec2},function(t){c=t.V2},function(t){l=t.ListItem},function(t){p=t.default},function(t){u=t.default},null,function(t){v=t.RoleDataCache},function(t){g=t.SeasonEventDefine},function(t){m=t.default},function(t){C=t.BaseView}],execute:function(){n._RF.push({},"6ade4WqPhNB47yqa/KBJAd0","SeasonSceneLookView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).txtName=void 0,e.txtDefInfo=void 0,e.txtDefInfo1=void 0,e.defList=void 0,e.pos=new h,e.nodeGrid=void 0,e.servId=0,e.name="SeasonSceneLookView",e.url="ui/module/season/scene-view/SeasonSceneLookView",e}e(n,t);var a=n.prototype;return a.onInit=function(){var t=this,e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,i.EventType.CLICK,(function(){t.close()}));var n=this.findChild("imgMask");this.addComponentCallbackListener(n,i.EventType.CLICK,(function(){t.close()}));var r=this.findChild("content");this.txtName=p.findChildComponent(r,"info/txtName",o),this.txtDefInfo=p.findChildComponent(r,"txtDefInfo",o),this.txtDefInfo1=p.findChildComponent(r,"txtDefInfo1",o);var d=p.findChildComponent(r,"box/defList",s);this.defList=this.addUIList(d,I),this.nodeGrid=p.findChild(r,"info/grid")},a.registerUpdateHandler=function(){this.addEvent(g.SEASON_SCENE_DEF_DETAIL_INFO,this.onDefInfo,this)},a.onAfterOpen=function(){var t=this.openArgs[0],e=this.openArgs[1],n=configSeason_building_plot.getDataByKey(t);this.txtName.string=u.formatStr(r.uiMirror?"[##2,##3] ##1":"##1 [##2,##3]",n.name,e.x,e.y),this.pos.set(e),this.addUIEffect("prefab/map/slgmap/"+n.prefab_name,this.nodeGrid,-1,new c(0,n.ui_scale[1]),n.ui_scale[0]/1e4,(function(t){r.uiMirror&&(t.dir=-1)})),IS(m).reqDefDetailInfo({x:e.x,y:e.y})},a.onBeforeClose=function(){},a.onDestroy=function(){},a.onDefInfo=function(t){this.txtDefInfo.string=u.formatStr(GetLanguage(204620),t.num,t.total),this.servId=t.serv_id,0==this.servId?(this.txtDefInfo1.string=GetLanguage(204720),this.txtDefInfo1.color=d.fromHEX(new d,"#FEE439")):this.servId==IS(v).GetServerId()?(this.txtDefInfo1.string=GetLanguage(204621),this.txtDefInfo1.color=d.fromHEX(new d,"#7cff48")):(this.txtDefInfo1.string=GetLanguage(204622),this.txtDefInfo1.color=d.fromHEX(new d,"#FEE439")),this.defList.datas=t.list},n}(C));var I=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).txtName=void 0,e.txtFightPower=void 0,e.imgHead=void 0,e.pbHp=void 0,e.pbHpRed=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(){this.txtName=p.findChildComponent(this.node,"txtName",o),this.txtFightPower=p.findChildComponent(this.node,"txtFightPower",o),this.imgHead=p.findChildComponent(this.node,"head",a),this.pbHp=p.findChildComponent(this.node,"hp",f),this.pbHpRed=p.findChildComponent(this.node,"hpRed",f)},i.onRender=function(t,e){this.txtFightPower.string=u.GetNumString(t.power),this.txtName.string=u.format_p_lang_info("",t.name),this.view.loadRemoteIcon(t.head.url,this.imgHead),this.view.servId==IS(v).GetServerId()?(this.pbHp.node.active=!0,this.pbHpRed.node.active=!1,this.pbHp.progress=t.hp/1e4):(this.pbHp.node.active=!1,this.pbHpRed.node.active=!0,this.pbHpRed.progress=t.hp/1e4)},n}(l);n._RF.pop()}}}));

