System.register("chunks:///_virtual/FundBuyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./BagModel.ts","./PayControl.ts","./PrivilegeDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,r,o,d,a,s,l,u,h,c,f,v,g;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,r=t.Button,o=t.Label,d=t.UITransform,a=t.ScrollView},function(t){s=t.ItemGrid},function(t){l=t.ListItem},function(t){u=t.default},function(t){h=t.default},null,function(t){c=t.BagModel},function(t){f=t.default},function(t){v=t.PrivilegeDataCache},function(t){g=t.BaseView}],execute:function(){n._RF.push({},"b63d6ercRNLy62kqo2xXScL","FundBuyView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).utBg=void 0,i.nodeReward1=void 0,i.nodeReward2=void 0,i.txtTitle=void 0,i.scroll1=void 0,i.scroll2=void 0,i.rewardTitle=void 0,i.txtContent=void 0,i.txtDiamond=void 0,i.cfgId=0,i.is_mid=void 0,i.name="FundBuyView",i.url="ui/module/recharge/FundBuyView",i}i(n,t);var s=n.prototype;return s.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,r.EventType.CLICK,(function(){t.close()})),this.txtTitle=this.findChildComponent("view/titleBg/title",o),this.txtContent=this.findChildComponent("view/tips/btnDiamond/txtContent",o),this.txtDiamond=this.findChildComponent("view/tips/btnDiamond/txtDiamond",o),this.utBg=this.findChildComponent("view",d),this.nodeReward1=this.findChild("view/reward/reward1"),this.nodeReward2=this.findChild("view/reward/reward2"),this.rewardTitle=this.findChildComponent("view/reward/reward2/title/Label",o);var e=this.findChildComponent("view/reward/reward1/rewardScroll",a);this.scroll1=this.addUIList(e,m);var n=this.findChildComponent("view/reward/reward2/rewardScroll",a);this.scroll2=this.addUIList(n,m);var s=this.findChild("view/tips/buttons/btnEnsure");this.addComponentCallbackListener(s,r.EventType.CLICK,(function(){IS(f).send_19_5(t.cfgId),t.close()}));var l=this.findChild("view/tips/buttons/btnCancel");this.addComponentCallbackListener(l,r.EventType.CLICK,(function(){t.close()}))},s.registerUpdateHandler=function(){},s.onAfterOpen=function(){var t;this.txtDiamond.string=h.GetNumString(IS(c).getGoodsCountByGoodsGtid(999));var i=this.openArgs[0];this.is_mid=null!=(t=this.openArgs[1])&&t;var n=IS(v).getFundInfoByFundID(i),r=configFund_reward.getDataByList("id",i);if(r){var o=configFund.getDataByKey(i),d=configPay_mall.getDataByKey(this.is_mid?o.mid_gift_id:o.gift_id);this.txtContent.string=h.formatStrWithMirrorDeal(GetLanguage(200475),d.price),this.cfgId=this.is_mid?o.mid_gift_id:o.gift_id,this.txtTitle.string=d.name;var a=r[r.length-1].condition[2];this.rewardTitle.string=h.formatStrWithMirrorDeal(GetLanguage(201890),a);for(var s,l=[],u=e(r);!(s=u()).done;)for(var f,g=s.value,m=this.is_mid?g.mid_reward:g.high_reward,w=e(m);!(f=w()).done;){var y=f.value;n.lev<g.level||(l[y[0]]||(l[y[0]]={id:y[0],num:0}),l[y[0]].num=l[y[0]].num+y[1])}var C=[];for(var p in l)l.hasOwnProperty(p)&&C.push(l[p]);if(C.sort((function(t,i){var e=configGoods.getDataByKey(t.id),n=configGoods.getDataByKey(i.id);return e.quality==n.quality?t.id-i.id:n.quality-e.quality})),this.scroll1.datas=C,this.nodeReward1.active=C.length>0,n.lev<r.length){this.nodeReward2.active=!0;for(var B,I=[],_=e(r);!(B=_()).done;)for(var L,D=B.value,G=this.is_mid?D.mid_reward:D.high_reward,x=e(G);!(L=x()).done;){var b=L.value;I[b[0]]||(I[b[0]]={id:b[0],num:0}),I[b[0]].num=I[b[0]].num+b[1]}var R=[];for(var S in I)I.hasOwnProperty(S)&&R.push(I[S]);R.sort((function(t,i){var e=configGoods.getDataByKey(t.id),n=configGoods.getDataByKey(i.id);return e.quality==n.quality?t.id-i.id:n.quality-e.quality})),this.scroll2.datas=R}else this.nodeReward2.active=!1;this.utBg.height=this.nodeReward1.active&&this.nodeReward2.active?661:487}},s.onBeforeClose=function(){this.cfgId=0},s.onDestroy=function(){},n}(g));var m=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,i.itemGrid=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.itemGridNode=u.findChild(this.node,"itemGrid"),this.itemGrid=new s(this.view,this.itemGridNode)},n.onRender=function(t,i){this.itemGrid.SetItemId(t.id,t.num)},e}(l);n._RF.pop()}}}));

