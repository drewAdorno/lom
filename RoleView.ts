System.register("chunks:///_virtual/RoleView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./NodeUtil.ts","./BaseTabView.ts","./UIDefine.ts","./ConfigGlobal.ts","./CommonDefine.ts","./MessageView.ts","./SkillDataCache.ts","./RoleDataCache.ts","./RoleDefine.ts"],(function(e){"use strict";var t,i,n,o,l,a,s,u,c,p,r,f,d,h,S;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.audioMgr},function(e){o=e.default},function(e){l=e.BaseTabView},function(e){a=e.UIViewState,s=e.PanelTabType,u=e.OpenFunction},function(e){c=e.ConfigGlobal},function(e){p=e.CommonEventDefine},function(e){r=e.default},function(e){f=e.SkillDataCache},function(e){d=e.RoleDataCache},function(e){h=e.RoleEventDefine,S=e.PlayerAttr}],execute:function(){i._RF.push({},"da7fa4FD0VBjKFaq8W4TxNB","RoleView",void 0);e("default",function(e){t(l,e);var i=l.prototype;function l(){var t;return(t=e.call(this)||this).isActive=!1,t.parentView=void 0,t.name="RoleView",t.url="ui/module/role/RoleView",t.tabTypes=[s.Role_Job,s.Role_Skill,s.Role_Awake],t}return i._setViewState=function(e){if((!this.state||this.state!=e)&&(this.state=e,e==a.Init)){var t=o.findChild(this.parentView.node,"container/"+this.name);t||(t=this.parentView.node),this.node.parent=t,this._openViewInit()}},i.setActive=function(e){this.isActive!=e&&(this.isActive=e,e?(this.trySetOpenType()||this.trySetDefaultOpenTab(),this.open()):this.close())},i.checkFunctionOpen=function(e){return IS(d).CheckFuncOpen(e,!0)},i.trySetDefaultOpenTab=function(){if(uiMgr.isOpenGuide)this.openType=s.Role_Job;else if(IS(d).GetJobRed()>0)this.openType=s.Role_Job;else{var e=IS(f).getAllSkillEquipRedPoint()+IS(f).getAllSkillUpgradeRedPoint()+IS(f).getAllSkillComposeRedPoint();this.openType=e>0?s.Role_Skill:s.Role_Job}},i.registerUpdateHandler=function(){this.addEvent(h.ROLE_INFO_UPDATE,this.updateInfo,this),this.addEvent(p.JUMP_TO_SUB_VIEW_SUB_TYPE,this.onJumpToSubViewSubType,this)},i.onAfterOpenTab=function(){n.playSound("common_jiemian"),this.setRedPoint(s.Role_Skill,IS(f).getAllSkillEquipRedPoint()+IS(f).getAllSkillUpgradeRedPoint()+IS(f).getAllSkillComposeRedPoint()),this.updateRed(s.Role_Job),this.updateRed(s.Role_Awake)},i.onJumpToSubViewSubType=function(e,t){e==s.Main_Role&&null!=t&&t!=this.curType&&this.setIndex(t)},i.onTabSelected=function(e,t){if(e==s.Role_Awake){var i=IS(d).GetJob();if(configJobs.getDataByKey(i).change_times<5)return void r.showFlyTip(GetLanguage(200589))}this.setIndex(e)},i.canShowType=function(e){return e!=s.Role_Awake||!!IS(d).CheckFuncOpen(u.FUNC_JOBS_WAKEUP)&&IS(d).GetLevel()>=c.jobs_wakeup_condition},i.updateInfo=function(e){e[S.ROLE_ATTR_LVL]&&(IS(d).GetLevel()==c.jobs_wakeup_condition&&this.updateTabScroll())},l}(l));i._RF.pop()}}}));

