System.register("chunks:///_virtual/RechargeQRCodeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeUtil.ts","./index57.ts","./MessageView.ts","./PayDataCache.ts","./PayDefine.ts","./BasePopupView.ts"],(function(e){"use strict";var t,i,n,o,r,s,a,c,u,l,d;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Sprite,o=e.Button,r=e.assetManager,s=e.SpriteFrame},function(e){a=e.default},null,function(e){c=e.default},function(e){u=e.default},function(e){l=e.PayEventDefine},function(e){d=e.BasePopupView}],execute:function(){i._RF.push({},"aac07crcfxPSLcfwfpYQZYA","RechargeQRCodeView",void 0);e("default",function(e){function i(){var t;return(t=e.call(this)||this).picImg=void 0,t.tips=void 0,t.errorno=void 0,t.name="RechargeQRCodeView",t.url="ui/module/recharge/RechargeQRCodeView",t}t(i,e);var d=i.prototype;return d.onInit=function(){var e=this;this.picImg=this.findChildComponent("root/content/qrcode",n),this.tips=this.findChild("root/content/tips");var t=this.findChild("root/imgMask");this.addComponentCallbackListener(t,o.EventType.CLICK,(function(){e.onMaskClick()}));var i=this.findChild("root/content/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){e.onMaskClick()}))},d.onAfterOpen=function(){var e=this;this.errorno=0,this.picImg.node.active=!1,this.tips.active=!0,a.getLocalTime()-IS(u).requestQRCodeTime>3?this.updateroleHead(this.openArgs[0],this.openArgs[1]):normalTimer.start(2,1,(function(){e.updateroleHead(e.openArgs[0],e.openArgs[1])}))},d.updateroleHead=function(e,t){var i=this;IS(u).requestQRCodeTime=a.getLocalTime(),this.picImg.node.active=!1,this.tips.active=!0,r.loadRemote(e,{ext:".png"},(function(e,n){if(e){if(i.errorno>3)return c.showFlyTip(GetLanguage(201420)),void i.close();i.errorno++,normalTimer.start(1,1,(function(){IS(u).Pay(t,!0)}))}else i.tips.active=!1,i.picImg.node.active=!0,console.log("url下载成功"),i.picImg.spriteFrame=s.createWithImage(n)}))},d.registerUpdateHandler=function(){this.addEvent(l.PAY_RECHARGE_SUCCESS,this.close,this)},d.onBeforeClose=function(){},d.onDestroy=function(){},d.onMaskClick=function(){this.close()},i}(d));i._RF.pop()}}}));

