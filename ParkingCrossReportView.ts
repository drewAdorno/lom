System.register("chunks:///_virtual/ParkingCrossReportView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./RoleDefine.ts","./ParkingControl.ts","./ParkingDataCache.ts","./ParkingDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,f,r,s,h,a,d,l,R,u,g,_,m;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,f=t.ScrollView,r=t.Label,s=t.Sprite},function(t){h=t.ListItem},function(t){a=t.default},function(t){d=t.default},function(t){l=t.default},null,function(t){R=t.PlayerAttr},function(t){u=t.default},function(t){g=t.ParkingDataCache},function(t){_=t.ParkingEventDefine},function(t){m=t.BaseView}],execute:function(){n._RF.push({},"423a0InDq9FdoWdb3XNPiJs","ParkingCrossReportView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).reportList=void 0,i.defNum=void 0,i.atkNum=void 0,i.nodeNone=void 0,i.name="ParkingCrossReportView",i.url="ui/module/parking/ParkingCrossReportView",i.poolTime=3e3,i}i(e,t);var n=e.prototype;return n.onInit=function(){var t=this,i=this.findChild("content/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChildComponent("content/scroll",f);this.reportList=this.addUIList(e,L,!0),this.defNum=this.findChildComponent("content/top/def/num",r),this.atkNum=this.findChildComponent("content/top/atk/num",r),this.nodeNone=this.findChild("content/none")},n.registerUpdateHandler=function(){this.addEvent(_.PARKING_CROSS_FIGHTING_LOOK,this.onRecordList,this)},n.onAfterOpen=function(){var t=this;IS(u).reqCrossParkBattleLook(IS(g).master_id),this.addTimer(1,-1,(function(){t.reportList.updateAll()}))},n.onRecordList=function(t){var i,e=null!=(i=t.list)?i:[];this.defNum.string=t.def_num,this.atkNum.string=t.atk_num,0==e.length?(this.nodeNone.active=!0,this.reportList.node.active=!1):(this.reportList.node.active=!0,this.nodeNone.active=!1,e.sort((function(t,i){return t.time<i.time?1:-1})),this.reportList.datas=e)},n.onBeforeClose=function(){},n.onDestroy=function(){},e}(m));var L=function(t){function n(){for(var i,e,n,o=arguments.length,f=new Array(o),r=0;r<o;r++)f[r]=arguments[r];return(n=t.call.apply(t,[this].concat(f))||this).txtNameLeft=void 0,n.txtPowerLeft=void 0,n.imgHeadLeft=void 0,n.imgHeadFrameLeft=void 0,n.txtNameRight=void 0,n.txtPowerRight=void 0,n.imgHeadRight=void 0,n.imgHeadFrameRight=void 0,n.txtTime=void 0,n.txtIndex=void 0,n.txtBuffLeft=void 0,n.txtBuffRight=void 0,n.btnBuffLeft=void 0,n.btnBuffRight=void 0,n.leftBuffId=void 0,n.rightBuffId=void 0,n.roleInfoRight=((i={})[R.ROLE_ATTR_LVL]=0,i[R.ROLE_ATTR_ID]=0,i[R.ROLE_ATTR_NAME]="",i[R.ROLE_ATTR_SERVER]=0,i[R.ROLE_ATTR_CUR_POWER]=0,i[R.ROLE_ATTR_POWER_SHOW]=0,i[R.ROLE_ATTR_HEAD_ID]=0,i[R.ROLE_ATTR_HEAD_FRAME_ID]=0,i[R.ROLE_ATTR_HEAD_URL]="",i),n.roleInfoLeft=((e={})[R.ROLE_ATTR_LVL]=0,e[R.ROLE_ATTR_ID]=0,e[R.ROLE_ATTR_NAME]="",e[R.ROLE_ATTR_SERVER]=0,e[R.ROLE_ATTR_CUR_POWER]=0,e[R.ROLE_ATTR_POWER_SHOW]=0,e[R.ROLE_ATTR_HEAD_ID]=0,e[R.ROLE_ATTR_HEAD_FRAME_ID]=0,e[R.ROLE_ATTR_HEAD_URL]="",e),n}i(n,t);var f=n.prototype;return f.onInit=function(){var t=this;this.txtNameLeft=a.findChildComponent(this.node,"fight/infoLeft/txtName",r),this.txtPowerLeft=a.findChildComponent(this.node,"fight/infoLeft/txtFightPower",r),this.imgHeadLeft=a.findChildComponent(this.node,"fight/infoLeft/imgIcon",s),this.imgHeadFrameLeft=a.findChildComponent(this.node,"fight/infoLeft/imgHeadFrame",s),this.txtNameRight=a.findChildComponent(this.node,"fight/infoRight/txtName",r),this.txtPowerRight=a.findChildComponent(this.node,"fight/infoRight/txtFightPower",r),this.imgHeadRight=a.findChildComponent(this.node,"fight/infoRight/imgIcon",s),this.imgHeadFrameRight=a.findChildComponent(this.node,"fight/infoRight/imgHeadFrame",s),this.txtTime=a.findChildComponent(this.node,"time/txtTime",r),this.txtIndex=a.findChildComponent(this.node,"num",r),this.txtBuffLeft=a.findChildComponent(this.node,"fight/infoLeft/buff/num",r),this.btnBuffLeft=a.findChild(this.node,"fight/infoLeft/buff"),this.view.addComponentCallbackListener(this.btnBuffLeft,o.EventType.CLICK,(function(){if(null!=t.leftBuffId){var i=configPark_pvp_debuff.getDataByKeys("type",3,"num",t.leftBuffId);uiMgr.openView("JobSkillTipsView",d.formatStr.apply(d,[i.debuff_desc].concat(i.desc_parm)),t.btnBuffLeft)}})),this.txtBuffRight=a.findChildComponent(this.node,"fight/infoRight/buff/num",r),this.btnBuffRight=a.findChild(this.node,"fight/infoRight/buff"),this.view.addComponentCallbackListener(this.btnBuffRight,o.EventType.CLICK,(function(){if(null!=t.rightBuffId){var i=configPark_pvp_debuff.getDataByKeys("type",4,"num",t.rightBuffId);uiMgr.openView("JobSkillTipsView",d.formatStr.apply(d,[i.debuff_desc].concat(i.desc_parm)),t.btnBuffRight)}}))},f.onRender=function(t,i){var n,o,f,r,s=t.end_time-l.serverTime;if(s<=0)IS(u).reqCrossParkBattleLook(IS(g).master_id);else{this.txtTime.string=l.getTimeLeft(s),this.txtIndex.string=i+1+"";var h=t.atk_info_list.kv,a=t.atk_info_list.ks;if(null!=h)for(var _,m=e(h);!(_=m()).done;){var L=_.value;this.roleInfoRight[L.k]=L.v}if(null!=a)for(var v,c=e(a);!(v=c()).done;){var T=v.value;this.roleInfoRight[T.k]=T.s}var p=t.def_info_list.kv,E=t.def_info_list.ks;if(null!=h)for(var C,I=e(p);!(C=I()).done;){var A=C.value;this.roleInfoLeft[A.k]=A.v}if(null!=a)for(var k,O=e(E);!(k=O()).done;){var B=k.value;this.roleInfoLeft[B.k]=B.s}this.txtNameLeft.string="[s"+this.roleInfoLeft[R.ROLE_ATTR_SERVER]+"]"+this.roleInfoLeft[R.ROLE_ATTR_NAME],this.txtPowerLeft.string=d.GetNumString(this.roleInfoLeft[R.ROLE_ATTR_POWER_SHOW]),this.view.loadRemoteIcon(this.roleInfoLeft[R.ROLE_ATTR_HEAD_URL],this.imgHeadLeft);var x=null!=(n=null==(o=configAvatar_frame.getDataByKey(this.roleInfoLeft[R.ROLE_ATTR_HEAD_FRAME_ID]))?void 0:o.icon)?n:"";this.view.loadIcon(this.imgHeadFrameLeft,"icon_frame",x),this.txtNameRight.string="[s"+this.roleInfoRight[R.ROLE_ATTR_SERVER]+"]"+this.roleInfoRight[R.ROLE_ATTR_NAME],this.txtPowerRight.string=d.GetNumString(this.roleInfoRight[R.ROLE_ATTR_POWER_SHOW]),this.view.loadRemoteIcon(this.roleInfoRight[R.ROLE_ATTR_HEAD_URL],this.imgHeadRight);var H=null!=(f=null==(r=configAvatar_frame.getDataByKey(this.roleInfoRight[R.ROLE_ATTR_HEAD_FRAME_ID]))?void 0:r.icon)?f:"";this.view.loadIcon(this.imgHeadFrameRight,"icon_frame",H);var b=t.atk_data_list,P=t.def_data_list;if(this.btnBuffLeft.active=!1,P)for(var D=0;D<P.length;D++)if(2==P[D].k&&0!=P[D].v){this.btnBuffLeft.active=!0,this.leftBuffId=P[D].v,this.txtBuffLeft.string=P[D].v;break}if(this.btnBuffRight.active=!1,b)for(var N=0;N<b.length;N++)if(2==b[N].k&&0!=b[N].v){this.btnBuffRight.active=!0,this.rightBuffId=b[N].v,this.txtBuffRight.string=b[N].v;break}}},f.onItemClick=function(){},n}(h);n._RF.pop()}}}));

