System.register("chunks:///_virtual/LampGetView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./AudioMgr.ts","./index3.ts","./BaseView.ts","./UIEffectAsset.ts","./MathUtil.ts","./EaseMethod.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,c,u,l,f,p;return{setters:[function(t){e=t.inheritsLoose,i=t.regeneratorRuntime},function(t){n=t.cclegacy,o=t.Vec3,s=t.Layout,a=t.Button},function(t){r=t.V2},function(t){c=t.audioMgr},null,function(t){u=t.BaseView},function(t){l=t.UIEffectAsset},function(t){f=t.default},function(t){p=t.EasingMethod}],execute:function(){n._RF.push({},"08e28H+r/BCKJ1EVVjoPTui","LampGetView",void 0);var d=new o,h=new r;t("default",function(t){function n(){var e;return(e=t.call(this)||this).closeLamp=!1,e.btnMask=void 0,e.tip=void 0,e.leftTip=void 0,e.name="LampGetView",e.url="ui/module/common/LampGetView",e}e(n,t);var u=n.prototype;return u.onInit=function(){var t=this,e=this.findChild("imgMask");this.tip=this.findChild("tip"),this.leftTip=this.findChild("leftTip"),this.dealMirrorLayout(this.findChildComponent("leftTip",s)),this.btnMask=e,this.addComponentCallbackListener(e,a.EventType.CLICK,(function(){t.closeLamp=!0,e.active=!1,t.tip.active=!1,t.leftTip.active=!1}))},u.registerUpdateHandler=function(){},u.onAfterOpen=function(){c.playSound("common_reward"),this.closeLamp=!1,this.btnMask.active=!0,this.tip.active=!0,this.leftTip.active=!0,this.flyKillLamp(5)},u.flyKillLamp=function(t){t=Math.min(t,5);var e=new o(236,157),i=uiMgr.getOpenView("MainView").findChild("subRoots/boxRoot/btnBox");this.startCoroutine(this.flyKillAni("prefab/ui-effect/MX_tx_diaoluo_shendeng",e,t,i,1001))},u.flyKillAni=i().mark((function t(e,n,s,a,c){var u,m,v,w,x,y,M,L,b,g=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=Math.min(s,5),u=this.ut.convertToNodeSpaceAR(a.worldPosition,new o),m=5,v=[],w=0;case 6:if(!(w<s)){t.next=20;break}return d.set(n),d.y+=f.random(-50,50),d.x+=f.random(-100,100),(x=l.alloc(e,this.node,10,null,20)).position=h.set(d.x,d.y),v.push(x),y=f.random(.01,.1),m-=y,t.next=17,coroutine.wait(y);case 17:w++,t.next=6;break;case 20:if(!(m>0)||this.closeLamp){t.next=26;break}return t.next=23,coroutine.wait(.1);case 23:m-=.1,t.next=20;break;case 26:for(this.btnMask.active=!1,this.tip.active=!1,this.leftTip.active=!1,M=function(){var t=b[L],e=new r(t.position.x,t.position.y),i=new o(u.x-e.x,u.y-e.y);g.addTween(0,1,.95,(function(n,o){h.set(e).add2f(i.x*o,i.y*o),t.position=h})).delay(f.random(0,.2)).easing(p.BACK_IN).call((function(){t.free()})).start()},L=0,b=v;L<b.length;L++)M();return t.next=33,coroutine.wait(2);case 33:this.close();case 34:case"end":return t.stop()}}),t,this)})),u.onBeforeClose=function(){},u.onDestroy=function(){},n}(u));n._RF.pop()}}}));

