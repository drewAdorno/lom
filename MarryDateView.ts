System.register("chunks:///_virtual/MarryDateView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./ItemIcon.ts","./FriendControl.ts","./RoleDataCache.ts","./MarryControl.ts","./MarryDefine.ts","./MarryDialogDataCache.ts","./BaseView.ts"],(function(i){"use strict";var e,n,t,o,r,s,a,d,l,h,f,c,v,u,m,_,C,I;return{setters:[function(i){e=i.inheritsLoose},function(i){n=i.cclegacy,t=i.Button,o=i.Label,r=i.ScrollView,s=i.UITransform,a=i.Sprite,d=i.LabelOutline,l=i.Color},function(i){h=i.ListItem},function(i){f=i.default},null,function(i){c=i.IconAseetType},function(i){v=i.default},function(i){u=i.RoleDataCache},function(i){m=i.default},function(i){_=i.MarryEventDefine},function(i){C=i.default},function(i){I=i.BaseView}],execute:function(){n._RF.push({},"5daecfiL49HYaNcnaq2Ir6E","MarryDateView",void 0);i("default",function(i){function n(){var e;return(e=i.call(this)||this).dateLimit=void 0,e.friendList=void 0,e.noFriend=void 0,e.friend_info_list=void 0,e.friendInfo=void 0,e.list_content=void 0,e.item_height=109,e.screen_height=682,e.is_send_server=!1,e.send_num=0,e.page=1,e.utScrollView=void 0,e.selfGender=void 0,e.name="MarryDateView",e.url="ui/module/marry/MarryDateView",e}e(n,i);var a=n.prototype;return a.onInit=function(){var i=this,e=this.findChild("root/imgMask");this.addComponentCallbackListener(e,t.EventType.CLICK,(function(){i.close()}));var n=this.findChild("root/btnClose");this.addComponentCallbackListener(n,t.EventType.CLICK,(function(){i.close()})),this.noFriend=this.findChild("root/noFriend"),this.dateLimit=this.findChildComponent("root/dateLimit",o),this.friendList=this.addUIList(this.findChildComponent("root/friendList",r),g),this.utScrollView=this.findChildComponent("root/friendList/view",s),this.addComponentCallbackListener(this.friendList.node,r.EventType.SCROLL_TO_BOTTOM,(function(){i.is_send_server||i.checkNeedSend()})),this.list_content=this.findChild("root/friendList/view/content")},a.registerUpdateHandler=function(){this.addEvent(_.MARRY_FAVOR_FRIEND_INFO_UPDATE,this.updateFriendInfo,this)},a.GetDetailHeight=function(){return 90*this.friend_info_list.length},a.checkNeedSend=function(){!this.friendInfo||this.friend_info_list.length>=this.friendInfo.total_num||(this.page+=1,IS(m).send_favor_friend_info_c2s(this.page),this.is_send_server=!0)},a.onAfterOpen=function(){this.friend_info_list=[],IS(m).send_favor_friend_info_c2s(1),this.send_num=1,this.page=1,this.is_send_server=!1,this.dateLimit.string=GetLanguage(204144),this.noFriend.active=!0,this.friendList.node.active=!1,this.selfGender=IS(u).GetGender()},a.updateFriendInfo=function(){var i=IS(C).GetFavorFriendInfo();i&&i.friend_list&&i.friend_list.length>0?(this.noFriend.active=!1,this.friendList.node.active=!0,this.friendList.datas=i.friend_list,this.friendInfo=i,this.friend_info_list=i.friend_list):(this.noFriend.active=!0,this.friendList.node.active=!1),this.is_send_server=!1,this.checkNeedSend()},a.onBeforeClose=function(){},a.onDestroy=function(){},n}(I));var g=function(i){function n(){for(var e,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(e=i.call.apply(i,[this].concat(t))||this).imgFrame=void 0,e.imgIcon=void 0,e.imgHeadFrame=void 0,e.rank=void 0,e.rankIcon=void 0,e.btnSendDate=void 0,e.favorIcon=void 0,e.friendFavorTitle=void 0,e.titleOutline=void 0,e.friendFavorCount=void 0,e.name=void 0,e.power=void 0,e.player_id=void 0,e}e(n,i);var r=n.prototype;return r.onInit=function(){var i=this;this.imgFrame=f.findChildComponent(this.node,"imgFrame",a),this.imgIcon=f.findChildComponent(this.node,"imgFrame/imgIcon",a),this.imgHeadFrame=f.findChildComponent(this.node,"imgFrame/imgHeadFrame",a),this.rank=f.findChildComponent(this.node,"rank",o),this.rankIcon=f.findChildComponent(this.node,"rankIcon",a),this.btnSendDate=f.findChild(this.node,"btnSendDate"),this.view.addComponentCallbackListener(this.btnSendDate,t.EventType.CLICK,(function(){i.onSendClick()})),this.favorIcon=f.findChildComponent(this.node,"favorIcon",a),this.friendFavorTitle=f.findChildComponent(this.node,"favorIcon/favorTitle",o),this.titleOutline=f.findChildComponent(this.node,"favorIcon/favorTitle",d),this.friendFavorCount=f.findChildComponent(this.node,"favorCount",o),this.name=f.findChildComponent(this.node,"Node/name",o),this.power=f.findChildComponent(this.node,"Node/power",o),this.view.addComponentCallbackListener(this.imgFrame.node,t.EventType.CLICK,(function(){i.player_id&&IS(v).reqOtherRoleNotice(i.player_id)})),this.view.addComponentCallbackListener(this.favorIcon.node,t.EventType.CLICK,(function(){i.player_id&&uiMgr.openView("MarryFavorDetailView",i.player_id,i.data)}))},r.onRender=function(i,e){var n;this.data=i,e<3?(this.rankIcon.node.active=!0,this.rank.node.active=!1,this.view.loadIcon(this.rankIcon,"common","common_ICON_paiming0"+(e+1))):(this.rankIcon.node.active=!1,this.rank.node.active=!0,this.rank.string=(e+1).toString()),this.view.loadRemoteIcon(i.head.url,this.imgIcon);var t=i.head.frame_id;if(t>0){this.imgHeadFrame.node.active=!0;var o=configAvatar_frame.getDataByKey(t);this.view.loadIcon(this.imgHeadFrame,"icon_frame",o.icon)}else this.imgHeadFrame.node.active=!1;this.player_id=i.role_id,this.name.string=i.name,this.power.string=GetLanguage(200295)+i.cur_power,this.friendFavorCount.string=null!=(n=i.favor)?n:0;var r=configFavorability_level.getDataByKey(i.favor_lv);r.level_group<3?(this.titleOutline.color=(new l).fromHEX(r.color),1==r.level_group?this.friendFavorTitle.node.setPosition(1,-15):this.friendFavorTitle.node.setPosition(20,-15),i.gender!=this.view.selfGender?(this.friendFavorTitle.string=GetLanguage(r.desc[0]),this.view.loadIcon(this.favorIcon,"icon_marry",r.icon[0],null,c.ICON_SPRITE)):2==this.view.selfGender?(this.friendFavorTitle.string=GetLanguage(r.desc[2]),this.view.loadIcon(this.favorIcon,"icon_marry",r.icon[2],null,c.ICON_SPRITE)):(this.friendFavorTitle.string=GetLanguage(r.desc[1]),this.view.loadIcon(this.favorIcon,"icon_marry",r.icon[1],null,c.ICON_SPRITE))):(this.titleOutline.color=(new l).fromHEX(r.color),this.friendFavorTitle.node.setPosition(1,-20),i.gender!=this.view.selfGender?(this.friendFavorTitle.string=GetLanguage(r.desc[0]),this.view.loadIcon(this.favorIcon,"icon_marry",r.title[0],null,c.ICON_SPRITE)):2==this.view.selfGender?(this.friendFavorTitle.string=GetLanguage(r.desc[2]),this.view.loadIcon(this.favorIcon,"icon_marry",r.title[2],null,c.ICON_SPRITE)):(this.friendFavorTitle.string=GetLanguage(r.desc[1]),this.view.loadIcon(this.favorIcon,"icon_marry",r.title[1],null,c.ICON_SPRITE)))},r.onSendClick=function(){this.player_id&&uiMgr.openView("MarryProposeView",this.player_id)},n}(h);n._RF.pop()}}}));

