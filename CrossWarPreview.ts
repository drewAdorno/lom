System.register("chunks:///_virtual/CrossWarPreview.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GuildPinItem.ts","./StorageUtil.ts","./index57.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./CrossWarDatacache.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,n,i,r,o,s,a,c,u,f,l,d;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,r=t.Button,o=t.Label},function(t){s=t.GuildPinItem},function(t){a=t.default},null,function(t){c=t.default},function(t){u=t.ActivityType},function(t){f=t.CrossWarDataCache},function(t){l=t.ViewType},function(t){d=t.BaseView}],execute:function(){i._RF.push({},"2988aB2h9hG2bxmYUq0HZwX","CrossWarPreview",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).flagList=[],e.name="CrossWarPreview",e.url="ui/module/crosswar/CrossWarPreview",e.poolTime=3e3,e}e(i,t);var d=i.prototype;return d.onInit=function(){var t=this;this.node.parent=uiMgr.pNodes[l.TopView];var e=this.findChild("imgMask");this.addComponentCallbackListener(e,r.EventType.CLICK,(function(){var e=IS(c).GetActivityInfo(u.CrossWar);e&&a.set("CROSS_WAR_PREVIEW",e.round),t.close()}));for(var n=1;n<5;n++){var i={nodeBase:this.findChild("content/node"+n),nodeFlag:this.findChild("content/node"+n+"/flag1"),txtServer:this.findChildComponent("content/node"+n+"/txtTitle",o),nid:n};this.flagList.push(i)}},d.onAfterOpen=function(){this.refreshFlagInfo(this.flagList)},d.refreshFlagInfo=function(t){var e=IS(f).server_list;e.sort((function(t,e){return t.rank>e.rank?1:-1}));for(var i,r=n(this.flagList);!(i=r()).done;){i.value.nodeBase.active=!1}for(var o,a=n(e.entries());!(o=a()).done;){var c=o.value,u=c[0],l=c[1],d=t[u];d.nodeBase.active=!0,new s(this,d.nodeFlag).SetItem(l.guild_flag),d.txtServer.string="s"+l.serv_id,d.txtScore&&(d.txtScore.string=l.point)}},d.registerUpdateHandler=function(){},d.onBeforeClose=function(){},d.onDestroy=function(){},i}(d));i._RF.pop()}}}));

