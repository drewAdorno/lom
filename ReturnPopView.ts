System.register("chunks:///_virtual/ReturnPopView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./PlatformUtil.ts","./StorageUtil.ts","./index57.ts","./ConfigGlobal.ts","./MessageView.ts","./RoleDataCache.ts","./ReturnControl.ts","./ReturnDataCache.ts","./ReturnDefine.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,n,i,o,r,s,a,c,u,d,h,l,f,C,p,v,w,g;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Button,o=t.UITransform,r=t.ScrollView},function(t){s=t.ItemGrid},function(t){a=t.ListItem},function(t){c=t.default},function(t){u=t.PlatformUtil},function(t){d=t.default},null,function(t){h=t.ConfigGlobal},function(t){l=t.default},function(t){f=t.RoleDataCache},function(t){C=t.default},function(t){p=t.ReturnDataCache},function(t){v=t.ReturnEventDefine},function(t){w=t.OpenFunction},function(t){g=t.BaseView}],execute:function(){n._RF.push({},"a44cdQ8BAZGCK13w9SIlQrY","ReturnPopView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).selectList=[{reward:h.back_showredawrd1,func:function(){IS(C).send_return_choose_c2s(1,0)}},{reward:h.back_showredawrd2,func:function(){var t=IS(p).GetReturnNewServPush();IS(C).send_return_choose_c2s(2,t)}}],e.rewardList=[],e.changeBtn=void 0,e.changeNode=void 0,e.rootTrans=void 0,e.name="ReturnPopView",e.url="ui/module/return/ReturnPopView",e.poolTime=3e3,e}e(n,t);var s=n.prototype;return s.onInit=function(){this.addComponentCallbackListener(this.findChild("imgMask"),i.EventType.CLICK,(function(){})),this.addComponentCallbackListener(this.findChild("closeBtn"),i.EventType.CLICK,(function(){IS(C).send_return_choose_c2s(1,0)})),this.rootTrans=this.findChildComponent("root",o),this.changeNode=this.findChild("root/change"),this.changeBtn=this.findChild("root/change/changeBtn"),this.addComponentCallbackListener(this.changeBtn,i.EventType.CLICK,(function(){uiMgr.openView("TransferTabView")}));for(var t=0;t<2;t++){var e=this.addUIList(this.findChildComponent("root/select/"+(t+1)+"/rewardScroll",r),I);this.rewardList[t]=e,this.addComponentCallbackListener(this.findChild("root/select/"+(t+1)+"/changeBtn"),i.EventType.CLICK,this.selectList[t].func)}},s.onAfterOpen=function(){IS(C).send_return_new_serv_push_c2s();for(var t=0;t<this.rewardList.length;t++)this.rewardList[t].datas=this.selectList[t].reward;IS(f).CheckFuncOpen(w.FUNC_TRANSFER)?(this.rootTrans.height=100,this.changeNode.active=!0):(this.rootTrans.height=-196,this.changeNode.active=!1)},s.registerUpdateHandler=function(){this.addEvent(v.UpdateReturnChoose,this.chooseSucuess)},s.chooseSucuess=function(t){if(1==t.return_type)this.close(),uiMgr.openView("ReturnActivityView");else if(2==t.return_type){var e=IS(p).GetReturnNewServPush();e&&e>0?(d.set("newServerOldId",String(IS(f).GetRoleId())),d.set("chooseServerId",String(e)),u.restartGame()):l.showFlyTip(GetLanguage(104400))}else this.close()},s.onBeforeClose=function(){},s.onDestroy=function(){},n}(g));var I=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(){this.itemGridNode=c.findChild(this.node,"itemGrid"),this.itemGrid=new s(this.view,this.itemGridNode)},i.onRender=function(t,e){this.itemGrid.SetItemId(t,0)},n}(a);n._RF.pop()}}}));

