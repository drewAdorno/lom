System.register("chunks:///_virtual/ActivitySakuraControl.ts",["cc","./StorageUtil.ts","./ControlMgr.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivitySakuraDataCache.ts","./ActivitySakuraDefine.ts"],(function(t){"use strict";var e,a,n,i,c,r,_,o;return{setters:[function(t){e=t.cclegacy},function(t){a=t.default},function(t){n=t.controlMgr},function(t){i=t.RoleDataCache},function(t){c=t.default},function(t){r=t.ActivityType},function(t){_=t.default},function(t){o=t.ActivitySakuraEvent}],execute:function(){e._RF.push({},"b25305wjUBOmbc3B9xUwAfa","ActivitySakuraControl",void 0);t("default",function(){var t=e.prototype;function e(){netManager.addEventListener("act.act_mini_game_info_s2c",this.update_24_120,this),netManager.addEventListener("act.act_mini_game_start_s2c",this.update_24_121,this),netManager.addEventListener("act.act_mini_game_result_s2c",this.update_24_122,this),n.addControl(this)}return t.clear=function(){},t.onLogin=function(){this.send_24_120()},t.onReconnect=function(){},t.send_24_120=function(){netManager.send("act.act_mini_game_info_c2s",{act_type:r.SakuraGame})},t.update_24_120=function(t){if(t.act_type==r.SakuraGame){IS(_).act_day=t.act_day,IS(_).openLevelList=[];for(var e=0;e<t.chapter_info.length;e++)IS(_).openLevelList.push(t.chapter_info[e].chapter_id);IS(_).openLevelList.sort((function(t,e){return t-e})),parseInt(a.get("SakuraGame_LatestLevel_"+IS(i).GetRoleId()))!=IS(_).openLevelList[IS(_).openLevelList.length-1]&&(a.set("SakuraGame_NewLevel_"+IS(i).GetRoleId(),"1"),a.set("SakuraGame_LatestLevel_"+IS(i).GetRoleId(),IS(_).openLevelList[IS(_).openLevelList.length-1].toString()),IS(c).UpdateMainRedByActType(r.Sakura),normalEvent.emit(o.OnSakuraGameNewLevelUpdate)),normalEvent.emit(o.OnSakuraGameLevelUpdate)}},t.send_24_121=function(){netManager.send("act.act_mini_game_start_c2s",{act_type:r.SakuraGame,chapter_id:IS(_).curLevelId})},t.update_24_121=function(t){t.act_type==r.SakuraGame&&0==t.code&&(IS(_).curLevelId=t.chapter_id,normalEvent.emit(o.OnSakuraGameStart))},t.send_24_122=function(){netManager.send("act.act_mini_game_result_c2s",{act_type:r.SakuraGame,chapter_id:IS(_).curLevelId,result:1})},t.update_24_122=function(t){},e}());e._RF.pop()}}}));

