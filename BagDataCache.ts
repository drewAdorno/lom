System.register("chunks:///_virtual/BagDataCache.ts",["cc","./BagDefine.ts"],(function(o){"use strict";var t,d;return{setters:[function(o){t=o.cclegacy},function(o){d=o.BagEventDefine}],execute:function(){t._RF.push({},"c37c7sBySdOb452bUhjxfN2","BagDataCache",void 0);o("BagDataCache",function(){var o=t.prototype;function t(){this.goodsIdToInfo=void 0,this.goodsGtidToIds=void 0,this.goodsIdToInfo={},this.goodsGtidToIds={}}return o.clear=function(){},o.updateBagInfo=function(o,i){if(!(null==o||o.length<=0)){for(var s,n,e=0;e<o.length;e++){var r=o[e];if(s=r.goods_id,n=r.goods_gtid,r.num<=0){if(null==IS(t).goodsIdToInfo[s])continue;IS(t).goodsIdToInfo[s]=null,this.tryRemoveGtidToIds(n,s)}IS(t).goodsIdToInfo[s]=r,this.tryAddGtidToIds(n,s),normalEvent.emit(d.GOODS_INFO_UPDATE,s,n,i)}normalEvent.emit(d.GOODS_LIST_UPDATE,i)}},o.tryAddGtidToIds=function(o,t){var d=this.goodsGtidToIds[o];if(null==d||d.length<=0)return this.goodsGtidToIds[o]=[],void this.goodsGtidToIds[o].push(t);for(var i=0;i<d.length;i++)if(d[i]==t)return;this.goodsGtidToIds[o].push(t)},o.tryRemoveGtidToIds=function(o,t){var d=this.goodsGtidToIds[o];if(!(null==d||d.length<=0))for(var i=d.length-1;0==i;i--)if(d[i]==t){this.goodsGtidToIds[o].splice(i,1);break}},t}());t._RF.pop()}}}));

