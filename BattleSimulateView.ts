System.register("chunks:///_virtual/BattleSimulateView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./BattleDataFill.ts","./EnumDefine.ts","./StringUtil.ts","./index57.ts","./BattleMainServer.ts","./ChapterDataCache.ts","./ChapterDefine.ts","./MessageView.ts","./BasePopupView.ts"],(function(e){"use strict";var t,a,n,r,i,o,l,s,p,u,c,h,f,d,y,m;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,n=e.Button,r=e.EditBox,i=e.Toggle},function(e){o=e.PlayerData,l=e.ChapterType,s=e.BattleData},function(e){p=e.BattleDataFill},function(e){u=e.RunState},function(e){c=e.default},null,function(e){h=e.BattleMainServer},function(e){f=e.ChapterDataCache},function(e){d=e.ChapterEventDefine},function(e){y=e.default},function(e){m=e.BasePopupView}],execute:function(){a._RF.push({},"9f415PxhShL0r4WotWms25+","BattleSimulateView",void 0);e("default",function(e){function a(){var t;return(t=e.call(this)||this).ebNum=void 0,t.playerImage=!1,t.name="BattleSimulateView",t.url="ui/module/common/BattleSimulateView",t}t(a,e);var m=a.prototype;return m.onInit=function(){var e=this,t=this.findChild("root/content/btnSend");this.addComponentCallbackListener(t,n.EventType.CLICK,(function(){e.onSendClick()}));var a=this.findChild("root/content/btnSimulate");this.addComponentCallbackListener(a,n.EventType.CLICK,(function(){e.onSimulatClick()})),this.ebNum=this.findChildComponent("root/content/ebNum",r);var o=this.findChildComponent("root/content/togglePlayerImage",i);this.addComponentCallbackListener(o.node,i.EventType.TOGGLE,(function(){e.playerImage=o.isChecked}))},m.registerUpdateHandler=function(){},m.onBeforeClose=function(){},m.onDestroy=function(){},m.onMaskClick=function(){this.close()},m.onSendClick=function(){var e=this.ebNum.string;if(!c.isEmpty(e)){var t=new s,a=JSON.parse(e);t.chapterId=a.chapter_id,t.chapterType=a.chapter_type,t.seed=a.random_seed,t.playerList[1]=new o(1),p.setPlayerList(a.roles_left[0],t.playerList[1],a.chapter_type),a.roles_right&&(t.playerList[2]=new o(2),p.setPlayerList(a.roles_right[0],t.playerList[2],a.chapter_type)),a.roles_left[0].manual_operator;var n=a.roles_left[0].operators,r=a.roles_left[0].manual_operator,i=new h(t.seed);for(i.start2(t,r,n),i.printLogFlag=!0;i.runState==u.Running;)i.update(i.frameTime);1==i.result?y.showFlyTip(GetLanguage(200198)):y.showFlyTip(GetLanguage(200199))}},m.onSimulatClick=function(){var e=this.ebNum.string;if(!c.isEmpty(e)){var t=new s,a=JSON.parse(e);t.chapterId=a.chapter_id,t.chapterType=a.chapter_type,t.seed=a.random_seed,t.playerList[1]=new o(1),p.setPlayerList(a.roles_left[0],t.playerList[1],a.chapter_type),a.roles_right&&(t.playerList[2]=new o(2),p.setPlayerList(a.roles_right[0],t.playerList[2],a.chapter_type),t.playerImage=this.playerImage);var n=a.roles_left[0].operators,r=a.roles_left[0].manual_operator;t.operators=n,t.manualOperator=r,t.battleCheckout=3,IS(f).battleData=t,IS(f).worldBossRank=[],IS(f).chapterType=a.chapter_type,battleMain.enterChapter(),t.chapterType!=l.Main&&normalEvent.emit(d.BATTLE_STATE,a.chapter_type,!0),this.close()}},a}(m));a._RF.pop()}}}));

