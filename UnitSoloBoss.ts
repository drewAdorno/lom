System.register("chunks:///_virtual/UnitSoloBoss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigGlobal.ts","./FixMath.ts","./EventDefine.ts","./MetaAttrib.ts","./Unit.ts"],(function(t){"use strict";var i,n,e,s,o,r,h,a,u;return{setters:[function(t){i=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,e=t.createClass},function(t){s=t.cclegacy},function(t){o=t.ConfigGlobal},function(t){r=t.FixMath},function(t){h=t.EventDefine},function(t){a=t.AttribDefine},function(t){u=t.Unit}],execute:function(){s._RF.push({},"3e29dX3jHRABbL7Wo2yC/EY","UnitSoloBoss",void 0);var c=[4011,4012,4013,4014];t("UnitSoloBoss",function(t){function s(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this).units=[],i.hpNum=0,i.hurtNum=0,i._index=0,i}i(s,t);var u=s.prototype;return u.init=function(i){t.prototype.init.call(this,i),this.modelObj.skins=["1","2","3","4"]},u.setHpBar=function(t){},u._hpAction=function(t,i,e){if(!(e>200)&&(e++,t>0&&0==this.data.currenHp)){this.hpNum++;var s=o.league_solo_chapter_transform_level;this.hpNum>=s[0]&&0==this._index&&(this._index=1,this.modelObj.skins=["2","3","4"]),this.hpNum>=s[1]&&1==this._index&&(this._index=2,this.modelObj.skins=["3","4"]),this.hpNum>=s[2]&&2==this._index&&(this._index=3,this.modelObj.skins=["4"]),t=r.roundInt(t+i);for(var h,u=Math.min(this.units.length-1,this.hpNum),c=this.units[u],p=configAttribute.getDataByList("module",1),l=n(p);!(h=l()).done;){var d=h.value;this.data.attribs[d.id].baseValue=c[d.key]}if(this.data.currenHp=this.data.getAttribByInt(a.hp),this.data.currenHp<=t)return t=r.roundInt(t-this.data.currenHp),this.data.currenHp=0,void this._hpAction(t,0,e);this.data.currenHp=r.roundInt(this.data.currenHp-t)}},u.onHpAction=function(t,i){this.hurtNum+=t>0?t:0;var n=this.hpNum;this._hpAction(t,i,0),0!=i&&this.battleMain.emit(h.BossHpChange,this),this.hpNum!=n&&this.battleMain.emit(h.UnitHpNumChange,this.hpNum)},e(s,[{key:"weapon",get:function(){return c[this._index]}}]),s}(u));s._RF.pop()}}}));

