System.register("chunks:///_virtual/SurveyControl.ts",["cc","./PlatformUtil.ts","./TimeUtil.ts","./Md5.ts","./HttpClient.ts","./ControlMgr.ts","./LoginControl.ts","./LoginDataCache.ts","./PayDataCache.ts","./RoleDataCache.ts","./SdkDataCache.ts","./SurveyDataCache.ts","./SurveyDefine.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,u,f,l,v,d;return{setters:[function(e){t=e.cclegacy},function(e){n=e.PlatformUtil},function(e){o=e.default},function(e){r=e.Md5},function(e){i=e.HttpClient},function(e){a=e.controlMgr},function(e){s=e.default},function(e){c=e.LoginDataCache},function(e){u=e.default},function(e){f=e.RoleDataCache},function(e){l=e.SdkDataCache},function(e){v=e.SurveyDataCache},function(e){d=e.SurveyDefine}],execute:function(){t._RF.push({},"ec42bW1tx9CMpkRO9RQFWJe","SurveyControl",void 0);e("default",function(){var e=t.prototype;function t(){netManager.addEventListener("act.questionnaire_info_s2c",this.on_questionnaire_info_s2c,this),a.addControl(this)}return e.clear=function(){printLog("SurveyControl")},e.onLogin=function(){this.reqSurveyInfo()},e.onReconnect=function(){this.reqSurveyInfo()},e.reqSurveyInfo=function(){netManager.send("act.questionnaire_info_c2s",{})},e.reqReward=function(e,t){console.error("reqReward "+e+" "+t),netManager.send("act.questionnaire_take_c2s",{ques_id:e,opt:t})},e.on_questionnaire_info_s2c=function(e){IS(v).surveyList=e.ques_list,normalEvent.emit(d.SURVEY_INFO_UPDATE)},e.commitResult=function(e,t,a,v){var d=JSON.stringify(a),p=IS(f),m=IS(c),g=o.serverTime+v+"qmqbqrdxjoklm5343be",S=r.hashStr(g).toUpperCase();printLogErr("问卷字符串组装 MD5 flag："+S+"-------原字符串："+g);var y={game:"xxjzz",mainPlatform:IS(s).getLoginArea(),platform:m.plat+"_"+IS(l).gameid,server:"S"+m.loginServer.id,device:n.systemInfo.platform,questionnaireId:e.ques_id,applyId:0,ip:m.ip,accountName:m.uid,roleId:m.roleId,roleName:encodeURIComponent(p.GetRoleName()),level:p.GetLevel(),vipLevel:0,payMoney:IS(u).GetRechargeInfo().total_money,power:p.GetPowerInfoByID(0),costTime:t,version:v,answers:d,time:o.serverTime,flag:S},_="";for(var h in y)if(y.hasOwnProperty(h)){var C=y[h];_="flag"==h?_+h+"="+C:_+h+"="+C+"&"}var q="https://i.4399data.com/questionnaire/result?"+_;printLogErr(q),i.requestUrl(q,!1,(function(e){printLogErr("问卷提交返回"+e)}))},t}());t._RF.pop()}}}));

