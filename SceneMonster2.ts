System.register("chunks:///_virtual/SceneMonster2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./NodeUtil.ts","./UIEffectAsset.ts","./CrossWarDefine.ts","./SceneUnit8.ts"],(function(t){"use strict";var e,o,n,i,s,r,a,c,l,f,h,d;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){n=t.cclegacy,i=t.ProgressBar,s=t.Sprite,r=t.sys,a=t.UITransform},function(t){c=t.V2},function(t){l=t.default},function(t){f=t.UIEffectAsset},function(t){h=t.SceneObjState},function(t){d=t.SceneUnit}],execute:function(){n._RF.push({},"f5d64nlY1pEFJvo77da+3mo","SceneMonster",void 0);t("SceneMonster",function(t){function n(e,o){var n;(n=t.call(this)||this).map=void 0,n.model=void 0,n.battleInfo=void 0,n.pbHp=void 0,n.initState=!1,n.info=o,n.uid=o.obj_id,n.map=e;var i=new c(o.pos.x,o.pos.y);return n.model=f.alloc("ui/module/crosswar/scene/Monster",e.nodeUnit,-1,(function(t){n.onInit(t)})),n.model.position=i,n.rect.width=100,n.rect.height=100,n.rect.center=i,n.id="obj:"+o.obj_id,n}e(n,t);var d=n.prototype;return d.onInit=function(t){var e=t.node,o=l.findChildComponent(e,"pbHp",i);o.progress=this.info.hp,this.pbHp=o;var n=l.findChildComponent(e,"imgIcon",s);this.adjustMirrorNode(n.node,0,!0);var r=configMonster.getDataByKey(this.info.monster.base_id);r&&this.map.view.loadIcon(n,"crosswar_scene",r.head)},d.adjustMirrorNode=function(t,e,o,n){if(void 0===e&&(e=0),void 0===o&&(o=!0),r.uiMirror){if(o&&t.setScale(-Math.abs(t.scale.x),t.scale.y),n)t.getComponent(a).anchorX=n;e&&0!=e&&t.setPosition(t.position.x+e,t.position.y)}},d.onInfoInit=function(t){t.node},d.removeEvent=function(){},d.onShowInfo=function(){},d.onUpdate=function(t){this.del||this.pbHp&&!this.initState&&(this.initState=!0,this.updateState())},d.onDestroy=function(){this.battleInfo&&this.battleInfo.free(),this.model&&this.model.free(),this.battleInfo=null,this.model=null},d.updateState=function(){var t=this.model;if(t){switch(this.info.state){case h.Battle:null==this.battleInfo&&(this.battleInfo=f.alloc("ui/module/crosswar/scene/BattletInfo",this.map.nodeUnitState,-1),this.battleInfo.position=t.position);break;case h.Dead:case h.Normal:null!=this.battleInfo&&(this.battleInfo.free(),this.battleInfo=null)}this.pbHp&&(this.pbHp.progress=this.info.hp/1e4)}},o(n,[{key:"position",get:function(){return this.model.position},set:function(t){this.model.position=t,this.battleInfo&&(this.battleInfo.position=t),this.rect.center=t}},{key:"depth",get:function(){return this.model.depth},set:function(t){this.model.depth=t}}]),n}(d));n._RF.pop()}}}));

