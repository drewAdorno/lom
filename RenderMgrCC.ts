System.register("chunks:///_virtual/RenderMgrCC.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MetaAttrib.ts","./RenderMgr.ts","./EventDefine.ts","./Effect.ts","./HpBar.ts","./UnitModelObj.ts"],(function(t){"use strict";var n,e,i,r,o,s,a,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.AttribDefine},function(t){r=t.RenderMgr},function(t){o=t.EventDefine},function(t){s=t.Effect},function(t){a=t.HpBar},function(t){c=t.UnitModelObj}],execute:function(){e._RF.push({},"d70b4+6WGFOUok66f4eUMqW","RenderMgrCC",void 0);t("RenderMgrCC",function(t){function e(){var n;return(n=t.call(this)||this)._hpBars=void 0,n._hpBars=new Map,n}n(e,t);var r=e.prototype;return r.clear=function(){t.prototype.clear.call(this),this._hpBars.forEach((function(t){a.free(t)})),this._hpBars.clear()},r.init=function(){battleEvent.on(o.UnitHpChange,this.onUnitHpChange,this)},r.addHpBar=function(t,n,e){void 0===e&&(e=!1),this._hpBars.has(t.unitId)||this._hpBars.set(t.unitId,a.alloc(t,n,e))},r.removeHpBar=function(t){this._hpBars.has(t.unitId)&&(a.free(this._hpBars.get(t.unitId)),this._hpBars.delete(t.unitId))},r.getHpBar=function(t){return this._hpBars.get(t.unitId)},r.allocUnitModel=function(t,n){return c.alloc(t,n)},r.freeUnitModel=function(t){c.free(t)},r.allocEffect=function(t,n,e){return s.alloc(t,n,e)},r.freeEffect=function(t){s.free(t)},r.onUnitHpChange=function(t,n){this._hpBars.has(t.unitId)&&(this._hpBars.get(t.unitId).progress=t.data.currenHp/t.data.getAttrib(i.hp))},e}(r));e._RF.pop()}}}));

