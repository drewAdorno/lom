System.register("chunks:///_virtual/MaintainNoticeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLoadingView.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ConfigGlobal.ts","./NativeToJs.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,r,c,a,h,l,m,f,d,T;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Label,o=t.RichText,s=t.UITransform,r=t.Button,c=t.js},function(t){a=t.GameLoadingView},function(t){h=t.default},function(t){l=t.default},null,function(t){m=t.ConfigGlobal},function(t){f=t.NativeToJs},function(t){d=t.ViewType},function(t){T=t.BaseView}],execute:function(){i._RF.push({},"78c68yEmWNEhYA5jPsLaYa8","MaintainNoticeView",void 0);t("MaintainNoticeView",function(t){function i(){var e;return(e=t.call(this)||this).txtTitle1=void 0,e.txtTitle2=void 0,e.txtDesc=void 0,e.txtContent=void 0,e.leftTime1=void 0,e.leftTime2=void 0,e.txtTime=void 0,e.txtDescTrans=void 0,e.nodeTimer=void 0,e.checkTimer=void 0,e.btnClose=void 0,e.btnRefresh=void 0,e.name="MaintainNoticeView",e.url="ui/module/notice/MaintainNoticeView",e.poolTime=3e3,e.viewType=d.TopView,e.checkTimer=-1,e}e(i,t);var T=i.prototype;return T.onInit=function(){this.node.parent=uiMgr.pNodes[d.TopView],this.txtTitle1=this.findChildComponent("imgBg/txtTitle1",n),this.txtTitle2=this.findChildComponent("imgBg/txtTitle2",n),this.txtDesc=this.findChildComponent("ScrollView/view/content/item",o),this.txtDescTrans=this.findChildComponent("ScrollView/view/content/item",s),this.txtContent=this.findChild("ScrollView/view/content"),this.txtTime=this.findChildComponent("nodeTimer/txtTime",n),this.nodeTimer=this.findChild("nodeTimer");var t=this.findChild("btnKakao");this.addComponentCallbackListener(t,r.EventType.CLICK,(function(){f.openURL("https://discord.gg/rgX9GT9h4S")}));var e=this.findChild("btnNaver");this.addComponentCallbackListener(e,r.EventType.CLICK,(function(){f.openURL("https://www.facebook.com/profile.php?id=61555697762738")})),this.btnRefresh=this.findChild("btnRefresh"),this.addComponentCallbackListener(this.btnRefresh,r.EventType.CLICK,(function(){mainGame.resetApp()}))},T.onAfterOpen=function(){a.instance.close(),0==this.openArgs[0]?(this.txtTitle1.node.active=!0,this.txtTitle2.node.active=!1,this.nodeTimer.active=!1,this.btnRefresh.active=!1,this.updateNotice(this.openArgs[1])):(this.txtTitle1.node.active=!1,this.txtTitle2.node.active=!0,this.nodeTimer.active=!0,this.updateNotice(this.openArgs[1],this.openArgs[2],this.openArgs[3]))},T.registerUpdateHandler=function(){},T.onBeforeClose=function(){-1!=this.checkTimer&&normalTimer.stop(this.checkTimer)},T.onDestroy=function(){},T.UpdateBtnState=function(){console.error("实际开服剩余时间：",this.leftTime1),console.error("展示开服剩余时间：",this.leftTime2),this.leftTime2>m.refresh_appear?this.btnRefresh.active=!1:this.btnRefresh.active=!0},T.updateNotice=function(t,e,i){var n=this;if(t){var o,r,a,m=t.split("|"),f=parseInt(null!=(o=m[0])?o:"0"),d=parseInt(null!=(r=m[1])?r:"0"),T=parseInt(null!=(a=m[2])?a:"0");printLogErr("cccccccccccccccccc==="+t);var p="";if(d&&d>0){var g=new Date(1e3*d);p=l.formatDate(g,"yyyy/MM/dd hh:mm:ss");var u=g.getTimezoneOffset()/60*-1;p=u>0?p+"(UTC+"+u+")":p+"(UTC"+u+")"}var v="";if(T&&T>0){var C=new Date(1e3*T);v=l.formatDate(C,"yyyy/MM/dd hh:mm:ss");var x=C.getTimezoneOffset()/60*-1;v=x>0?v+"(UTC+"+x+")":v+"(UTC"+x+")"}printLogErr("cccbbbnnnnnnnnccc==="+f+",time_1="+d+",time_2="+T),printLogErr("gggggggggggggggg"),this.txtDesc.string=c.formatStr("<color=#4C3824>%s</color>",h.formatStrWithMirrorDeal(GetLanguage(f),p,v))}this.txtContent.getComponent(s).height=this.txtDescTrans.height,e&&(this.leftTime1=e-l.serverTime,this.leftTime2=i-l.serverTime,this.leftTime1>0?(this.UpdateBtnState(),this.txtTime.string=l.formatTimeForSecond(this.leftTime2),this.checkTimer=normalTimer.start(1,-1,(function(){n.leftTime1=n.leftTime1-1,n.leftTime2=n.leftTime2-1,n.UpdateBtnState(),n.leftTime1>0?n.txtTime.string=l.formatTimeForSecond(n.leftTime2):mainGame.resetApp()}))):this.txtTime.node.active=!1)},i}(T));i._RF.pop()}}}));

