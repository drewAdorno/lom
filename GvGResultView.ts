System.register("chunks:///_virtual/GvGResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./StringUtil.ts","./BaseView.ts","./CommonModel.ts"],(function(t){"use strict";var e,i,n,o,s,d,r,h,l,a,f;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Sprite,s=t.Label,d=t.sys,r=t.js},function(t){h=t.ItemGrid},function(t){l=t.default},function(t){a=t.BaseView},function(t){f=t.CommonModel}],execute:function(){i._RF.push({},"2fd32qbRytO2ZObH7/fQ4Zo","GvGResultView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).imgTitleBg=void 0,e.txtTitle=void 0,e.info=void 0,e.nodeModelFirst=void 0,e.nodeModelSecond=void 0,e.nodeModelThird=void 0,e.txtNameFirst=void 0,e.txtNameSecond=void 0,e.txtNameThird=void 0,e.txtDefeatFirst=void 0,e.txtDefeatSecond=void 0,e.txtDefeatThird=void 0,e.nodeDefeatFirst=void 0,e.nodeDefeatSecond=void 0,e.nodeDefeatThird=void 0,e.txtDefeat=void 0,e.txtFightTitle=void 0,e.txtFightValue=void 0,e.txtPersonValue=void 0,e.txtGuildValue=void 0,e.txtTotalValue=void 0,e.nodeRewardContent=void 0,e.nodeRewardItem=void 0,e.rewardItems=void 0,e.roleFirst=void 0,e.roleSecond=void 0,e.roleThird=void 0,e.name="GvGResultView",e.url="ui/module/gvg/GvGResultView",e}e(i,t);var a=i.prototype;return a.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.onMaskClick()})),this.imgTitleBg=this.findChildComponent("content/imgTitleBg",o),this.txtTitle=this.findChildComponent("content/txtTitle",s),this.nodeModelFirst=this.findChild("content/nodeFirst/modelRoot"),this.nodeModelSecond=this.findChild("content/nodeSecond/modelRoot"),this.nodeModelThird=this.findChild("content/nodeThird/modelRoot"),this.txtNameFirst=this.findChildComponent("content/nodeFirst/txtName",s),this.txtNameSecond=this.findChildComponent("content/nodeSecond/txtName",s),this.txtNameThird=this.findChildComponent("content/nodeThird/txtName",s),this.nodeDefeatFirst=this.findChild("content/nodeFirst/defeat"),this.nodeDefeatSecond=this.findChild("content/nodeSecond/defeat"),this.nodeDefeatThird=this.findChild("content/nodeThird/defeat"),this.txtDefeatFirst=this.findChildComponent("content/nodeFirst/defeat/txtDefeat",s),this.txtDefeatSecond=this.findChildComponent("content/nodeSecond/defeat/txtDefeat",s),this.txtDefeatThird=this.findChildComponent("content/nodeThird/defeat/txtDefeat",s),this.txtDefeat=this.findChildComponent("content/txtSelfKill",s),this.txtFightTitle=this.findChildComponent("content/scoreFight/txtTitle",s),this.txtFightValue=this.findChildComponent("content/scoreFight/txtValue",s),this.txtPersonValue=this.findChildComponent("content/scorePerson/txtValue",s),this.txtGuildValue=this.findChildComponent("content/scoreGuild/txtValue",s),this.txtTotalValue=this.findChildComponent("content/scoreTotal/txtValue",s),this.nodeRewardContent=this.findChild("content/rewardContent"),this.nodeRewardItem=this.findChild("content/rewardContent/itemGrid"),this.nodeRewardItem.active=!1,d.uiMirror&&this.loadIcon(this.findChildComponent("content/imgMvp",o),"gvg","gvg_icon_MVP")},a.registerUpdateHandler=function(){},a.onMaskClick=function(){this.close()},a.onAfterOpen=function(){this.info=this.openArgs[0],this.info?(this.showTitle(),this.showRank(),this.showScore(),this.showReward()):this.close()},a.showTitle=function(){this.loadIcon(this.imgTitleBg,"gvg",0==this.info.status?"gvg_img_luobai":"gvg_img_jibaishu"),this.txtTitle.string=0==this.info.status?GetLanguage_UI(999000192):GetLanguage_UI(999000189)},a.showRank=function(){var t=this.info.top_three[0];null!=this.roleFirst&&(this.removeUnitModel(this.roleFirst),this.roleFirst=null),this.txtNameFirst.string=t?t.name:GetLanguage(200038),this.nodeDefeatFirst.active=null!=t,null!=t&&(this.txtDefeatFirst.string=r.formatStr("%s%s",GetLanguage_UI(999000191),t.kill_num),this.roleFirst=IS(f).AddRoleModel(this,t.figure,this.nodeModelFirst),d.uiMirror&&(this.getUnitModel(this.roleFirst).dir=-1));var e=this.info.top_three[1];null!=this.roleSecond&&(this.removeUnitModel(this.roleSecond),this.roleSecond=null),this.txtNameSecond.string=e?e.name:GetLanguage(200038),this.nodeDefeatSecond.active=null!=e,null!=e&&(this.txtDefeatSecond.string=r.formatStr("%s%s",GetLanguage_UI(999000191),e.kill_num),this.roleSecond=IS(f).AddRoleModel(this,e.figure,this.nodeModelSecond),d.uiMirror&&(this.getUnitModel(this.roleSecond).dir=-1));var i=this.info.top_three[2];null!=this.roleThird&&(this.removeUnitModel(this.roleThird),this.roleThird=null),this.txtNameThird.string=i?i.name:GetLanguage(200038),this.nodeDefeatThird.active=null!=i,null!=i&&(this.txtDefeatThird.string=r.formatStr("%s%s",GetLanguage_UI(999000191),i.kill_num),this.roleThird=IS(f).AddRoleModel(this,i.figure,this.nodeModelThird),d.uiMirror&&(this.getUnitModel(this.roleThird).dir=-1))},a.showScore=function(){this.txtDefeat.string=l.formatStrWithMirrorDeal(GetLanguage(200400),this.info.kill_num),this.txtFightTitle.string=0==this.info.status?GetLanguage(200401):GetLanguage(200402),this.txtFightValue.string=this.info.status_score,this.txtPersonValue.string=this.info.self_score,this.txtGuildValue.string=this.info.guild_score,this.txtTotalValue.string=this.info.total_score},a.showReward=function(){var t=this.info.reward_list||[];this.rewardItems||(this.rewardItems=[]);for(var e=0;e<t.length;e++){var i=this.rewardItems[e];i||(i=this.newRewardItem()),i.itemGrid.SetItemId(t[e].gtid,t[e].num),i.go.active=!0,this.rewardItems[e]=i}for(var n=t.length;n<this.rewardItems.length;n++)this.rewardItems[n].go.active=!1},a.newRewardItem=function(){var t=nodeInstantiate.instantiate(this.nodeRewardItem);return t.parent=this.nodeRewardContent,{go:t,itemGrid:new h(this,t)}},a.onBeforeClose=function(){if(this.rewardItems)for(var t=0;t<this.rewardItems.length;t++)this.rewardItems[t].go.active=!1},a.onDestroy=function(){if(this.rewardItems)for(var t=0;t<this.rewardItems.length;t++)this.rewardItems[t].go.destroy();this.rewardItems=null},i}(a));i._RF.pop()}}}));

