System.register("chunks:///_virtual/TFMonsterAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FixMath.ts","./IAIHandle.ts","./Target.ts","./EnumDefine.ts","./EventDefine.ts","./V2.ts"],(function(t){"use strict";var e,n,i,a,r,s,o,u,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){a=t.FixMath},function(t){r=t.IAIHandle},function(t){s=t.TargetUnit},function(t){o=t.TargetFilter},function(t){u=t.EventDefine},function(t){c=t.V2}],execute:function(){i._RF.push({},"12415hnjspD9piYHuB/b8hi","TFMonsterAI",void 0);var l=new c;t("TFMonsterAI",function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var r=i.prototype;return r.handleAction=function(){if(!this.checkPos()&&!this.startSkill()){var t=this.getTarget();this.selectTarget(t)||this.selectTargetPoint()}},r.checkPos=function(){var t=this.cast;if(l.set(t.battleMain.mapCamera.offsetX-100,t.position.y),a.distanceX(t.position,l)<1)return t.dead(),t.battleMain.emit(u.TFMonsterTriggerDef,t.config.type),!0},r.selectTargetPoint=function(){var t=this.cast;t.battleMain;l.set(t.battleMain.mapCamera.offsetX-100,t.position.y);var e=s.toPos(l);return t.wantTarget=e,!(null==t.wantTarget||t.wantTarget!=e)},r.getTarget=function(){for(var t,e=this.cast,i=e.hatredCtr.getHatredList(),a=n(i);!(t=a()).done;){var r=t.value;if(!r.unit.isDead&&r.unit.position.y==e.position.y)return r.unit}return null},r.startSkill=function(){var t=this.cast,e=t.data.skillList;if(null==e||0==e.length)return!1;for(var i,a=n(e);!(i=a()).done;){var r=i.value;if(t.aiTime>=r.useDelay&&0==r.state){if(0==t.battleMain.unitMgr.findTarget(t,o.Enemy,r.config.autoDis,t.position).length)continue;return t.addUnlimitSkill(r),!0}}},i}(r));i._RF.pop()}}}));

