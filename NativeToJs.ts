System.register("chunks:///_virtual/NativeToJs.ts",["cc","./GameLoadingView.ts","./TranslateMgr.ts","./LogUtil.ts","./HttpClient.ts","./AdDefine.ts","./CommonDefine.ts","./GameSetting.ts","./GameClubControl.ts","./LoginControl.ts","./LoginDataCache.ts","./PayDataCache.ts","./RoleControl.ts","./RoleDataCache.ts","./WelfareDefine.ts"],(function(e){"use strict";var n,t,i,r,a,o,c,s,g,u,l,d,f,v,p,L,S,E;return{setters:[function(e){n=e.cclegacy,t=e.native,i=e.sys,r=e.game,a=e.assetManager},function(e){o=e.GameLoadingView},function(e){c=e.TranslateMgr},null,function(e){s=e.HttpClient},function(e){g=e.AdEventDefine},function(e){u=e.CommonEventDefine},function(e){l=e.default,d=e.GameSettingKey},function(e){f=e.default},function(e){v=e.default},function(e){p=e.LoginDataCache},function(e){L=e.default},function(e){S=e.default},null,function(e){E=e.WelfareEvent}],execute:function(){n._RF.push({},"a36aaXGEApIXYZZeBHrbrl5","NativeToJs",void 0);var m=e("NativeToJs",function(){function e(){}return e.RegisterFun=function(){var n=this;t.jsbBridgeWrapper.addNativeEventListener("SdkLoginBack",(function(t){n.is_switch_user=!1,n.login_usr=t,n.getPlatformInfo(),e.GetShareImg()})),t.jsbBridgeWrapper.addNativeEventListener("SdkLogoutBack",(function(e){printLogErr("SdkLogoutBackccccccccccccccccccccccccc  ",e),printLogException(e),i.restartVM()})),t.jsbBridgeWrapper.addNativeEventListener("deleteAccountBack",(function(e){printLogErr("88888888888888888888888"),i.restartVM(),i.os==i.OS.IOS&&r.restart()})),t.jsbBridgeWrapper.addNativeEventListener("getPlatformInfoBack",(function(e){printLogErr("hhhhhhhhh  ",e);var t=JSON.parse(e);IS(p).fngid=t.fngid,IS(p).plat=t.fnpid,IS(p).fnpidunion=t.fnpidunion;var i=t.DeviceName,r=t.DeviceType;IS(p).device_name=r+":"+i,IS(p).device_id=t.DeviceId,null!=n.login_usr&&(n.loginBack(n.login_usr),n.login_usr=null),n.GetBatteryRate(),IS(L).GetCurrencyCode()})),t.jsbBridgeWrapper.addNativeEventListener("getCfgDataBack",(function(e){loginControl.UpdateLoginArea(e)})),t.jsbBridgeWrapper.addNativeEventListener("UploadImgBack",(function(e){var n=JSON.parse(e),t=n.url,i=n.imageType||0;printLogErr("img upload suc  ================"+t),normalEvent.emit(u.PhotoUpLoadSuccess,t,i)})),t.jsbBridgeWrapper.addNativeEventListener("OnFNServerReturnEvent",(function(e){sdkControl.OnFNServerReturnEventstring(e)})),t.jsbBridgeWrapper.addNativeEventListener("PlayVideoBack",(function(e){printLogErr("PlayVideoBack  ================"+e,"1"==e?1:0),normalEvent.emit(g.AD_WATCH_FINISH,"1"==e?1:0)})),t.jsbBridgeWrapper.addNativeEventListener("BindAccountBack",(function(e){var n=JSON.parse(e),t=String(n.code);n.msg;printLogErr("BindAccountBack  ================"+t,"1"==t?1:0),normalEvent.emit(E.WELFARE_BIND_CALLBACK,t)})),t.jsbBridgeWrapper.addNativeEventListener("GetFirebaseTokenBack",(function(e){null!=e&&""!=e&&"false"!=e&&IS(f).reqFcmToken(e),printLogErr("GetFirebaseTokenBack  ================"+e)})),t.jsbBridgeWrapper.addNativeEventListener("fbShowShareDialogBack",(function(e){printLogErr("fbShowShareDialogBack  ================"+e),normalEvent.emit(E.WELFARE_SHARE_CALLBACK,e)})),t.jsbBridgeWrapper.addNativeEventListener("fbShowLikeDialogBack",(function(e){printLogErr("fbShowLikeDialogBack  ================"+e),normalEvent.emit(E.WELFARE_LIKE_CALLBACK,e)})),t.jsbBridgeWrapper.addNativeEventListener("getSystemLanguageBack",(function(e){printLogErr("getSystemLanguageBack  ================"+e),n.CountryCode=e,n.UseLanguage=e;var t=IS(l).Get(d.LANGUAGE_SELECT);if(t>0){var i="CN";1==t&&(i="HK"),n.UseLanguage=i}})),t.jsbBridgeWrapper.addNativeEventListener("SdkTranslateBack",(function(e){printLogErr("SdkTranslateBack  ================"+e);var n=JSON.parse(e);IS(c).CallBackTranslateInfo(n)})),t.jsbBridgeWrapper.addNativeEventListener("SdkGetCurrencyCodeBack",(function(e){printLogErr("SdkGetCurrencyCodeBack  ================"+e),IS(L).CurrencyCode=e})),t.jsbBridgeWrapper.addNativeEventListener("GetBatteryRateBack",(function(e){printLogErr("GetBatteryRateBack  ================"+e),n.BatteryRate=e}))},e.getCfgData=function(){},e.onUpdate=function(){this.GetBatteryRate()},e.logRoleLoginLog=function(e){t.bridge.sendToNative("logRoleLoginLog",JSON.stringify(e))},e.GetBagTag=function(){var e=IS(p).fngid;return"1704264507770400"==e?1:"1704264657624580"==e?2:"1708346972150370"==e?3:"1705628263327750"==e?4:"1704264601861920"==e?6:1},e.SwitchUser=function(){},e.exitGame=function(){printLogErr("cccccccccccccccc"),t.bridge.sendToNative("exitGame")},e.Login=function(){t.bridge.sendToNative("login")},e.Logout=function(){t.bridge.sendToNative("logoutGame")},e.deleteAccount=function(){},e.getSystemLanguage=function(){t.bridge.sendToNative("getSystemLanguage")},e.killGame=function(){t.bridge.sendToNative("killGame")},e.GetCurrencyCode=function(e){},e.translate=function(e,n,t){var i={};i.content=n,i.target=t,FNSDK.invoke("hwApiTranslate",i,(function(n,t,i){if(n==FNCode.SUCC){var r=i.content,a={code:"1",key:e,result:r};IS(c).CallBackTranslateInfo(a)}}))},e.loginBack=function(n){printLogErr("1111111111111  ==="+n);var t=JSON.parse(n);if(printLogErr(t),null!=t.errorMsg&&""!=t.errorMsg)"1"==t.errMsg?o.instance.showExitGameNotice(GetLanguage(200600)):t.errMsg;else{var i=IS(p);t.uid,t.name,t.ext,console.log(t),console.log("登录成功 "+t.uid),i.hasLoginsdk=!0,i.uid=t.uid,i.uname=t.name,i.sdkExt=t.ext,loginControl.checkSdkLoginCenterServer();var r="60bee1bc7e31238c";2==e.GetBagTag()?r="f9229258fc8566cd":4==e.GetBagTag()&&(r="dc8f921860813586"),r&&e.callFunByName("loadVideoAD",r),this.GetBatteryRate()}},e.logLoginFinish=function(e){0!=GlobalDefine.ENABLE_SDK&&t.bridge.sendToNative("logLoginFinish",JSON.stringify(e))},e.logSelectServer=function(e){0!=GlobalDefine.ENABLE_SDK&&t.bridge.sendToNative("logSelectServer",JSON.stringify(e))},e.logCreateRole=function(e){0!=GlobalDefine.ENABLE_SDK&&t.bridge.sendToNative("logCreateRole",JSON.stringify(e))},e.logRoleLevel=function(e){0!=GlobalDefine.ENABLE_SDK&&t.bridge.sendToNative("logRoleLevel",JSON.stringify(e))},e.logEnterGame=function(e){0!=GlobalDefine.ENABLE_SDK&&(t.bridge.sendToNative("logEnterGame",JSON.stringify(e)),this.GetFirebaseToken())},e.IsPreviewServer=function(){return"preview"==o.instance.isPublic&&"9.0.2"!=o.instance.AppVerion&&"9.0.4"!=o.instance.AppVerion||"public1"==o.instance.isPublic},e.pay=function(e){t.bridge.sendToNative("NativeToPay",JSON.stringify(e))},e.noticePayFinish=function(e){0!=GlobalDefine.ENABLE_SDK&&printLogErr(JSON.stringify(e))},e.logNative=function(e){console.error(e)},e.getPlatformInfo=function(){},e.logGameEvent=function(e,n){if(0!=GlobalDefine.ENABLE_SDK){var i={eventName:String(e),eventValue:String(n)};t.bridge.sendToNative("logGameEvent",JSON.stringify(i))}},e.hwLogEventApi=function(e){},e.openURL=function(e){i.openURL(e)},e.TakePhoto=function(e){},e.GetBagAreaId=function(){var e,n,t,i,r,a,o,c=((o={})[1]=((e={})[1]="66",e[2]="68",e),o[2]=((n={})[1]="78",n[2]="82",n),o[3]=((t={})[1]="70",t[2]="72",t),o[4]=((i={})[1]="74",i[2]="76",i),o[5]=((r={})[1]="86",r[2]="88",r),o[6]=((a={})[1]="82",a[2]="84",a),o),s=this.GetBagTag(),g=1;return"mix_us2"==IS(v).getLoginArea()&&(g=2),c[s]&&c[s][g]?c[s][g]:"66"},e.saveToPhotos=function(e){},e.SelectImg=function(e){},e.hwLogApi=function(e){},e.callFunByName=function(e,n){},e.bindTempAccount=function(){},e.loadAssistant=function(e){},e.storePraiseGuide=function(){},e.checkPermissions=function(){},e.GetFirebaseToken=function(){},e.GetShareImg=function(){var n="share_"+o.instance.curlaguage;["share_de","share_en","share_es","share_fr","share_pt","share_ru","share_tr"].find((function(e){return e==n}))||(n="share_en"),n+=".jpg";var i=a.downloader.remoteServerAddress+"share/"+n;console.error("fytest======1111   remotePath:",i);var r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="arraybuffer",r.onload=function(){var i=r.response;if(null!=i){var a=t.fileUtils.getWritablePath()+"gamecaches/",o=a+n;if(console.error("fytest======1111   remotePath:",a,o),t.fileUtils.isFileExist(a))t.fileUtils.writeDataToFile(i,o)&&(e.share_url=o,printLogErr("ggggggggggggggggggggggg  ",o))}},r.send()},e.isHwBag=function(){if("1704264657624580"==IS(p).fngid)return!0},e.fbShowShareDialog=function(){normalEvent.emit(E.WELFARE_SHARE_CALLBACK,"1"),IS(S).send_3_30(2,0)},e.fbShowLikeDialog=function(){},e.selectLanguage=function(e){},e.openCustomerServices=function(){var e="https://www.joynetgame.com/SupportCenter/inquiry/",n=IS(p).fngid,t=IS(p).loginServer.id,i=IS(p).roleId,r=JSON.parse(IS(p).sdkExt);e=e+"?self_area=eru&client_id="+n+"&server_id="+t+"&role_id="+i+"&oauth_token="+(r&&r.access_token)+"&area_id="+this.GetBagAreaId(),this.openURL(e);var a={roleId:String(IS(p).roleId),serverId:String(IS(p).loginServer.id)};printLogErr("openCustomerServices=============="+JSON.stringify(a))},e.GetBatteryRate=function(){},e.RequestIpQury=function(){var e=this;this.maineInfo={ip:"",city_name:"",country_name:"",region_name:"",isp_domain:"",owner_domain:""};var n="https://apiapm.ssgamescenter.com/api/v2/ip/query";0==GlobalDefine.ENABLE_SDK&&(n="http://172.16.10.228/ip.txt"),printLogErr("ip归属查询url:"+n),s.get(n,(function(n,t){if(printLogErr("ip归属查询code:"+n),0==n){printLogErr("ip归属查询data:"+t);var i=JSON.parse(t);e.maineInfo={ip:"",city_name:i.city_name||"",country_name:i.country_name||"",region_name:i.region_name||"",isp_domain:i.isp_domain||"",owner_domain:i.owner_domain||""}}}))},e}());m.login_usr=void 0,m.share_url=void 0,m.is_switch_user=!1,m.PermissionCache=!1,m.CountryCode="CN",m.UseLanguage="CN",m.BatteryRate="100",m.checkTimer=-1,m.maineInfo={},n._RF.pop()}}}));

