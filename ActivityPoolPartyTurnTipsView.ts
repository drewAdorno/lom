System.register("chunks:///_virtual/ActivityPoolPartyTurnTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StorageUtil.ts","./index57.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,a,r,s,c,l,d,u,f,v,h,p,y;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.js,r=t.Sprite,s=t.Label},function(t){c=t.default},function(t){l=t.default},null,function(t){d=t.RoleDataCache},function(t){u=t.default},function(t){f=t.ActivityEventDefine,v=t.ActivityType},function(t){h=t.default},function(t){p=t.HorseCarnivalDataCache},function(t){y=t.BaseView}],execute:function(){n._RF.push({},"67bd0Xgfs1OBZjds+DiYH+X","ActivityPoolPartyTurnTipsView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).itemList=[],i.lockNode=void 0,i.unlockNode=void 0,i.cfg=void 0,i.name="ActivityPoolPartyTurnTipsView",i.url="ui/module/activityPoolParty/ActivityPoolPartyTurnTipsView",i}i(n,t);var y=n.prototype;return y.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChild("view/btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()})),this.lockNode=this.findChild("view/lock"),this.unlockNode=this.findChild("view/unlock");for(var n=function(i){var e=c.findChild(t.node,a.formatStr("view/item/item%s",i)),n={itemGo:e,select:c.findChild(e,"select"),icon:c.findChildComponent(e,"imgIcon",r),name:c.findChildComponent(e,"name",s),index:i};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.setSelect(i)})),t.itemList[i]=n},l=1;l<=3;l++)n(l)},y.registerUpdateHandler=function(){this.addEvent(f.OnHorseCarnivalUpdate,this.updateInfo,this)},y.onAfterOpen=function(){var t,i=null!=(t=this.openArgs[0])?t:v.PoolPartyTurn,n=IS(u).GetActivityInfo(i),o=configMount_draw.getDatas();for(var a in o)if(o.hasOwnProperty(a)){var r=o[a];if(r.type==n.type&&r.group_id==n.roundCfg.group_id&&4==r.quality){this.cfg=r;break}}for(var s=1;s<=3;s++)this.itemList[s].itemGo.active=!1;for(var c,h=e(this.cfg.reward_replace);!(c=h()).done;){var p=c.value,y=this.itemList[p[0]];y.itemGo.active=!0;var C=configGoods.getDataByKey(p[1][0]);y.name.string=C.name,this.loadIcon(y.icon,C.icon_group,C.icon),y.select.active=!1}if(this.updateInfo(),this.unlockNode.active){var g,m=String(n.id)+"#"+String(n.round),P="ActivityPoolPartySelectRed"+IS(d).GetRoleId();(null!=(g=l.get(P))?g:"")!=m&&(l.set(P,m),IS(u).UpdateMainRedByActType(n.type),normalEvent.emit(f.OnHorseCarnivalUpdate))}},y.onBeforeClose=function(){},y.onDestroy=function(){},y.setSelect=function(t){var i;if(!this.lockNode.active){var e=null!=(i=this.openArgs[0])?i:v.PoolPartyTurn;IS(h).send_24_66(e,this.cfg.id,t)}},y.updateInfo=function(){var t,i,e,n=null!=(t=this.openArgs[0])?t:v.PoolPartyTurn,o=null!=(i=null==(e=IS(p).getInfo(n).choose_list[this.cfg.id])?void 0:e[1])?i:0;for(var a in this.lockNode.active=0==o,this.unlockNode.active=o>0,this.itemList)if(this.itemList.hasOwnProperty(a)){var r=this.itemList[a];r.select.active=o==r.index}},n}(y));n._RF.pop()}}}));

