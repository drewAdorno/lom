System.register("chunks:///_virtual/ActivityMergeDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattlePassControl.ts","./PayDataCache.ts","./PayDefine.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivityMergeDefine.ts"],(function(e){"use strict";var t,n,i,r,a,c,o,u,f;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){i=e.default},function(e){r=e.default},function(e){a=e.GiftType},function(e){c=e.default},function(e){o=e.ActivityType,u=e.ActivityState},function(e){f=e.ActivityMergeEvent}],execute:function(){n._RF.push({},"6f33cdxxm9OlawyPfUT0jWU","ActivityMergeDataCache",void 0);e("default",function(){var e=n.prototype;function n(){this.targetMergeLevel=-1,this.updateOrderPos=-1,this.curDemandGoods=[],this.energyRedPoint=0,normalEvent.on(f.OnMergeGamePassEnergyUpdate,this.updateEnergyRedPoint)}return e.clear=function(){},e.checkInDemand=function(e){for(var n,i=t(this.curDemandGoods);!(n=i()).done;){if(n.value==e)return!0}return!1},e.getPassRedNum=function(){var e=IS(c).GetActivityInfo(o.MergeGame);if(!e||e.state!=u.Open)return 0;var t=0,n=e.roundCfg.group_id;return t=(t=t+i.checkRewardRP(n)>=0?1:0)+i.checkAddRewardRP(n)>0?1:0,t+=i.checkSpecialRewardRP(n),t+=this.energyRedPoint},e.GetOptionGiftRed=function(){var e=IS(c).GetActivityInfo(o.MergeGame);if(!e||e.state!=u.Open)return 0;for(var n,i=IS(r).GetAcivityGift(a.Activity,e.type,e.round),f=t(i);!(n=f()).done;){var d=n.value;if(0==d.cost_level){var s=IS(r).GetPayGiftInfo(d.id);if(!s||2!=s.rewardState)return 1}}return 0},e.updateEnergyRedPoint=function(e){0!=e.is_buy?IS(n).energyRedPoint=e.num>0?1:0:IS(n).energyRedPoint=0,normalEvent.emit(f.OnMergeGameEnergyUpdate,e)},n}());n._RF.pop()}}}));

