System.register("chunks:///_virtual/SceneCamera4.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,s,e,o,h,n;return{setters:[function(i){t=i.createClass},function(i){s=i.cclegacy,e=i.Vec2,o=i.Vec3,h=i.Rect,n=i.screen}],execute:function(){s._RF.push({},"2825ef1vi1BgbDXdBThLJHp","SceneCamera",void 0);var r=800;i("SceneCamera",function(){function i(){this.nodeCamera=void 0,this.camera=void 0,this.follow=void 0,this.oriPos=new o,this.box=new h(-360,-20,720,40),this._destPos=new o,this._startPos=new o,this._moveTime=0,this._moveTimer=0,this._isMove=!1,r=800/n.windowSize.height*n.windowSize.width}var s=i.prototype;return s.onUpdate=function(i){this.updatePosition(i);var t=this.oriPos,s=this.box;t.x<=s.xMin&&(this.oriPos.x=s.xMin),t.x>=s.xMax&&(this.oriPos.x=s.xMax),t.y<=s.yMin&&(this.oriPos.y=s.yMin),t.y>=s.yMax&&(this.oriPos.y=s.yMax),this.nodeCamera.position=this.oriPos},s.getEdge=function(i){var t=this.box;i.x<=t.xMin&&(i.x=t.xMin),i.x>=t.xMax&&(i.x=t.xMax),i.y<=t.yMin&&(i.y=t.yMin),i.y>=t.yMax&&(i.y=t.yMax)},s.updatePosition=function(i){if(this.follow){this.endMove();var t=this.follow.model.position;return this.oriPos.set(t.x,t.y,10),void this.getEdge(this.oriPos)}var s=0;if(this._isMove){this._moveTime=Math.min(this._moveTime+i,this._moveTimer);var o=1-Math.pow(2,-10*this._moveTime/this._moveTimer);this._moveTime>=this._moveTimer&&(o=1,this.endMove()),s=o}var h=this._destPos;s>0?e.lerp(this.oriPos,this._startPos,h,s):e.distance(this.oriPos,h)>.1&&this.oriPos.set(h),this.oriPos.z=10},s.endMove=function(){this._isMove=!1,this._moveTime=0,this._moveTimer=0,this._startPos.set(this._destPos)},s.setMapSize=function(i,t,s){void 0===s&&(s=1);var o=this.box;o.width=i-2*r,o.height=t-1600,o.width=o.width/s,o.height=o.height/s,o.center=e.ZERO},s.toTargetPos=function(i,t){void 0===t&&(t=0),this._destPos.set(i.x,i.y),this.getEdge(this._destPos),t>0?(this._isMove=!0,this._startPos.set(this.oriPos),this._moveTimer=t,this._moveTime=0):(this.endMove(),this.oriPos.set(this._destPos))},t(i,[{key:"destPos",get:function(){return this._destPos}}]),i}());s._RF.pop()}}}));

