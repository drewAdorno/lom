System.register("chunks:///_virtual/PetModel.ts",["cc","./StringUtil.ts","./TimeUtil.ts","./ObjectUtil.ts","./BagModel.ts","./MessageView.ts","./PetDataCache.ts"],(function(t){"use strict";var e,n,r,o,i,a,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default},function(t){r=t.default},function(t){o=t.default},function(t){i=t.BagModel},function(t){a=t.default},function(t){u=t.PetDataCache}],execute:function(){e._RF.push({},"f4c362ZoX1IlLYAGLD6TbkS","PetModel",void 0);t("PetModel",function(){var t=e.prototype;function e(){}return t.clear=function(){},t.checkPosUnlock=function(t){return IS(u).posToUnlock[t]||!1},t.getPetByPos=function(t){for(var e in IS(u).petIdToInfo){var n=IS(u).petIdToInfo[e];if(n.pos==t)return n}},t.getWearPetList=function(){var t=new Array;for(var e in IS(u).petIdToInfo){var n=IS(u).petIdToInfo[e];0!=n.pos&&t.push(n)}return t},t.getPetInfoByPetId=function(t){return IS(u).petIdToInfo[t]},t.getEmptyPos=function(){var t=[];for(var e in IS(u).posToUnlock)o.isEmpty(this.getPetByPos(Number(e)))&&t.push(e);return t.sort((function(t,e){return t<e?-1:1})),t[0]},t.tryShowPosLockTips=function(t){var e=configPet_pos.getDataByKey(t);a.showFlyTip(e.desc)},t.getPetAttrInfoByCfgId=function(t){return IS(u).petCfgIdToAttr[t]},t.getPetAttrByAttrId=function(t,e){var n=this.getPetAttrInfoByCfgId(t);return o.isEmpty(n)?0:n[e]||0},t.getPetFactAttrValue=function(t,e,n){var r=t;r=r+this.getPetAttrByAttrId(e,n)+this.getPetAttrByAttrId(0,n);var o=configAttribute.getDataByList("group",n);if(null==o||o.length<=0)return r;for(var i=0;i<o.length;i++)r*=1+(this.getPetAttrByAttrId(e,o[i].id)+this.getPetAttrByAttrId(0,o[i].id))/1e4;return r},t.checkPetCanUpgrade=function(t){var e=this.getPetInfoByPetId(t);if(o.isEmpty(e))return!1;if(!this.checkPetCanShow(t))return!1;var n=e.level,r=configPetlevel.getDataByKeys("id",t,"level",n+1);if(o.isEmpty(r))return!1;for(var a=r.expend||[],u=0;u<a.length;u++)if(IS(i).getGoodsCountByGoodsGtid(a[u][0])<a[u][1])return!1;return!0},t.getCurTab=function(){return IS(u).curTab},t.getCurTabInfo=function(){return this.getTabInfo(IS(u).curTab)},t.getTabInfo=function(t){if(null!=t)return IS(u).tabToInfo[t]},t.getTabName=function(t){var e=this.getTabInfo(t),r=e&&e.name;return r&&""!=r||(r=n.formatStrWithMirrorDeal(GetLanguage(200488),GetLanguage(200662+t))),r},t.checkAnyPetCompose=function(){for(var t in IS(u).petIdToInfo)if(this.checkPetCanCompose(Number(t)))return!0;return!1},t.checkHasPetByQuality=function(t){for(var e in IS(u).petIdToInfo){var n=IS(u).petIdToInfo[e];if(!(n.level<=0)){var r=configPet.getDataByKey(n.pet_id);if(null!=r&&r.quality==t)return!0}}return!1},t.checkPetCanCompose=function(t){var e=this.getPetInfoByPetId(t);if(o.isEmpty(e))return!1;if(!this.checkPetCanShow(t))return!1;var n=e.level,r=configPetlevel.getDataByKeys("id",t,"level",n+1);if(!o.isEmpty(r))return!1;var a=configPetlevel.getDataByKeys("id",t,"level",n).expend[0][0],u=configMix.getDataByKey(a);if(null==u)return!1;var f=u.cost;if(!f||0==f)return!1;var c=u.quality+1;return!!this.checkHasPetByQuality(c)&&IS(i).getGoodsCountByGoodsGtid(a)>=f},t.getAllComposePet=function(){var t=[];for(var e in IS(u).petIdToInfo){var n=this.getPetComposeNum(Number(e));0!=n.v&&t.push(n)}return t},t.getPetComposeNum=function(t){var e=this.getPetInfoByPetId(t);if(o.isEmpty(e))return{k:0,v:0};var n=e.level,r=configPetlevel.getDataByKeys("id",t,"level",n+1);if(!o.isEmpty(r))return{k:0,v:0};var a=configPetlevel.getDataByKeys("id",t,"level",n).expend[0][0],u=configMix.getDataByKey(a);if(null==u)return{k:a,v:0};var f=u.cost;if(!f||0==f)return{k:a,v:0};var c=u.quality+1;if(!this.checkHasPetByQuality(c))return{k:a,v:0};var s=IS(i).getGoodsCountByGoodsGtid(a);return{k:a,v:Math.floor(s/f)}},t.checkPetCanShow=function(t){var e=configPet.getDataByKey(t);if(null==e)return!1;var n=e.open_time;return!!o.isEmpty(n)||r.checkOpenTime(n)},e}());e._RF.pop()}}}));

