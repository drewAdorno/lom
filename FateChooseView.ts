System.register("chunks:///_virtual/FateChooseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ItemIcon.ts","./BagControl.ts","./MessageView.ts","./RoleDataCache.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,a,l,c,r,f,d,h,v,u,g,m;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.ScrollView,a=t.Sprite,l=t.Label},function(t){c=t.SelectedType,r=t.ListItem},function(t){f=t.default},function(t){d=t.default},null,function(t){h=t.IconAseetType},function(t){v=t.default},function(t){u=t.default},function(t){g=t.RoleDataCache},function(t){m=t.BaseView}],execute:function(){n._RF.push({},"a9c0bvvA2NPWK6fPnsbawqN","FateChooseView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).txtName=void 0,e.imgIcon=void 0,e.txtLev=void 0,e.scroll=void 0,e.selectId=0,e.attrItems=[],e.name="FateChooseView",e.url="ui/module/fate/FateChooseView",e}e(n,t);var r=n.prototype;return r.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("btn");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){if(0!=t.selectId){var e=configGoods.getDataByKey(t.selectId),i=d.formatStrWithMirrorDeal(GetLanguage(200277),e.name);u.showBoxTip({tip:i,title:GetLanguage(200048),ensure:GetLanguage(200053),cancel:GetLanguage(200054),func:function(e){"type_yes"==e&&(IS(v).reqUseGoods(t.openArgs[0],1,t.selectId,0),t.close())}})}}));var n=f.findChildComponent(this.node,"scroll",s);this.scroll=this.addUIList(n,p),this.scroll.selectedMode=c.SINGLE,this.imgIcon=f.findChildComponent(this.node,"imgIcon",a),this.txtName=f.findChildComponent(this.node,"txtName",l),this.txtLev=f.findChildComponent(this.node,"txtLev",l);for(var r=1;r<=3;r++){var h=new I;h.init(this.findChild("item/item"+r),this),this.attrItems.push(h)}},r.registerUpdateHandler=function(){},r.onAfterOpen=function(){var t=this.openArgs[0],e=configGoods.getDataByKey(t);this.selectId=e.effect[0][0],this.scroll.datas=e.effect;var n=configGoods.getDataByKey(this.selectId),o=configFate.getDataByKey(n.effect[0]),s=configFate_level.getDataByKeys("fate_id",o.fate_id,"level",n.effect[1]);this.loadIcon(this.imgIcon,"icon_fate",o.icon,null,h.ICON_SPRITE),this.txtName.string=o.name,this.txtLev.string="Lv."+s.level;for(var a,l=[],c=i(s.attr);!(a=c()).done;){var r=a.value;l.push({type:1,info:r})}for(var f,d=i(s.skill);!(f=d()).done;){var v=f.value;l.push({type:2,info:v})}for(var u=0;u<this.attrItems.length;u++)this.attrItems[u].show(l[u])},r.onBeforeClose=function(){this.selectId=0},r.onDestroy=function(){},n}(m));var p=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).imgIcon=void 0,e.txtLevel=void 0,e.select=void 0,e}e(n,t);var o=n.prototype;return o.onInit=function(){this.imgIcon=f.findChildComponent(this.node,"imgIcon",a),this.txtLevel=f.findChildComponent(this.node,"txtLevel",l),this.select=f.findChild(this.node,"select")},o.onRender=function(t,e){this.select.active=this.view.selectId==t[0];var i=configGoods.getDataByKey(t[0]),n=configFate.getDataByKey(i.effect[0]);this.txtLevel.string="Lv."+i.effect[1],this.view.loadIcon(this.imgIcon,"icon_fate",n.icon,null,h.ICON_SPRITE)},o.onItemClick=function(){this.view.selectId=this.data[0],this.view.scroll.updateAll();var t=configGoods.getDataByKey(this.data[0]),e=configFate.getDataByKey(t.effect[0]),n=configFate_level.getDataByKeys("fate_id",e.fate_id,"level",t.effect[1]);this.view.loadIcon(this.view.imgIcon,"icon_fate",e.icon,null,h.ICON_SPRITE),this.view.txtName.string=e.name,this.view.txtLev.string="Lv."+n.level;for(var o,s=[],a=i(n.attr);!(o=a()).done;){var l=o.value;s.push({type:1,info:l})}for(var c,r=i(n.skill);!(c=r()).done;){var f=c.value;s.push({type:2,info:f})}for(var d=0;d<this.view.attrItems.length;d++)this.view.attrItems[d].show(s[d])},n}(r),I=function(){function t(){this.view=void 0,this.node=void 0,this.txtName=void 0,this.txtValue=void 0}var e=t.prototype;return e.init=function(t,e){this.view=e,this.node=t,this.onInit()},e.onInit=function(){this.txtName=f.findChildComponent(this.node,"txtName",l),this.txtValue=f.findChildComponent(this.node,"txtValue",l)},e.show=function(t){if(t)if(this.node.active=!0,1==t.type){var e=configAttribute.getDataByKey(t.info[0]);this.txtName.string=e.desc,this.txtValue.string=IS(g).getAttrValueShow(e.id,t.info[1])}else{var i=configSkill.getDataByKey(t.info[0]),n=configSkill_level.getDataByKeys("id",i.id,"level",t.info[1]);this.txtName.string=i.name,this.txtValue.string=d.formatStr.apply(d,[n.desc].concat(n.desc_parm))}else this.node.active=!1},t}();n._RF.pop()}}}));

