System.register("chunks:///_virtual/SeasonShipOverView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./SeasonDataCache.ts","./SeasonDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,n,i,o,s,r,a,h,d,l,f,p,u,v;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,o=t.Button,s=t.ScrollView,r=t.ProgressBar,a=t.Label,h=t.Layout},function(t){d=t.ListItem},function(t){l=t.default},function(t){f=t.default},null,function(t){p=t.SeasonDataCache},function(t){u=t.SeasonShipEventDefind},function(t){v=t.BaseView}],execute:function(){i._RF.push({},"82084Ibg41BhrAUn3aN9V5i","SeasonShipOverView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).attrUIList=void 0,e.attrTopUIList=void 0,e.nodeRoot=void 0,e.txtLevel=void 0,e.txtLevelDesc=void 0,e.pbExp=void 0,e.baseUIList=void 0,e.buffUIList=void 0,e.nodeBuff=void 0,e.nodeNone=void 0,e.name="SeasonShipOverView",e.url="ui/module/season/SeasonShipOverView",e.poolTime=3e3,e}e(i,t);var d=i.prototype;return d.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var n=this.findChildComponent("content/nodeBase/ScrollView",s);this.baseUIList=this.addUIList(n,x);var i=this.findChildComponent("content/nodeBuff/ScrollView",s);this.buffUIList=this.addUIList(i,x),this.nodeBuff=this.findChild("content/nodeBuff"),this.nodeNone=this.findChild("content/none");var d=this.findChildComponent("content/nodeChange/ScrollView",s);this.attrUIList=this.addUIList(d,c);var l=this.findChildComponent("content/nodeTop/ScrollView",s);this.attrTopUIList=this.addUIList(l,g),this.nodeRoot=this.findChild("content"),this.pbExp=this.findChildComponent("content/nodeProgress/ProgressBar",r),this.txtLevel=this.findChildComponent("content/nodeProgress/ProgressBar/Node",a),this.txtLevelDesc=this.findChildComponent("content/nodeProgress/ProgressBar/txtDesc",a);for(var f=this.node.getComponentsInChildren(h),p=0;p<f.length;p++)1==f[p].type&&this.dealMirrorLayout(f[p])},d.registerUpdateHandler=function(){this.addEvent(u.TYPE_SHIP_INFO_UPDATE,this.refreshAll,this),this.addEvent(u.TYPE_SHIP_LEVEL_INFO_UPDATE,this.refreshLevelShow,this),this.addEvent(u.SHIP_EQUIP_LIST_UPDATE,this.refreshAttrShow,this)},d.onAfterOpen=function(){this.refreshAll()},d.refreshAll=function(){this.refreshAttrChange(),this.refreshLevelShow(),this.refreshAttrShow()},d.refreshLevelShow=function(){this.txtLevel.string=IS(p).ship_level+"";var t=configSeason_ship_level.getDataByKey(IS(p).ship_level),e=configSeason_ship_level.getDataByKey(IS(p).ship_level+1);null!=t&&(null!=e?(this.txtLevelDesc.string=IS(p).ship_exp-t.expend_exp+"/"+(e.expend_exp-t.expend_exp),this.pbExp.progress=(IS(p).ship_exp-t.expend_exp)/(e.expend_exp-t.expend_exp)):(this.txtLevelDesc.string="max",this.pbExp.progress=1))},d.refreshAttrChange=function(){var t=this.findChild("content/nodeChange"),e=this.findChild("content/nodeTop"),n=l.findChildComponent(this.nodeRoot,"nodeChange/txtLevelBase",a),i=l.findChildComponent(this.nodeRoot,"nodeChange/txtLevelNext",a),o=l.findChildComponent(e,"txtLevelBase",a),s=configSeason_ship_level.getDataByKey(IS(p).ship_level),r=configSeason_ship_level.getDataByKey(IS(p).ship_level+1),h=[],d=[];if(null!=s)if(null!=r){n.string=s.level+"",i.string=r.level+"";for(var f=0;f<s.attr.length;f++){var u=configAttribute.getDataByKey(s.attr[f][0]),v={show_type:u.show_type,num_type:u.num_type,name:u.name,base:s.attr[f][1],next:r.attr[f][1]};0!=r.attr[f][1]&&h.push(v)}this.attrUIList.datas=h,t.active=!0,e.active=!1}else{o.string=s.level+"";for(f=0;f<s.attr.length;f++){var c=configAttribute.getDataByKey(s.attr[f][0]),g={show_type:c.show_type,num_type:c.num_type,name:c.name,base:s.attr[f][1]};d.push(g)}this.attrTopUIList.datas=d,t.active=!1,e.active=!0}},d.refreshAttrShow=function(){for(var t,e=IS(p).getUsingEquipList(),i={10001:0,10002:0,10003:0,10004:0},o={},s=n(e);!(t=s()).done;){for(var r,a=t.value,h=n(a.base_attr);!(r=h()).done;){var d=r.value;i[d.k]?i[d.k]+=d.v:i[d.k]=d.v}for(var l,f=n(a.rand_attr);!(l=f()).done;){var u=l.value;o[u.k]?o[u.k]+=u.v:o[u.k]=u.v}}var v=[];for(var c in i)v.push({k:c,v:i[c]});var g=[];for(var x in o)g.push({k:x,v:o[x]});this.baseUIList.datas=v,this.buffUIList.datas=g,this.nodeBuff.active=0!=g.length,this.nodeNone.active=0==g.length},d.onBeforeClose=function(){},d.onDestroy=function(){},i}(v));var c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).txtAttrName=void 0,e.txtAttrBase=void 0,e.txtAttrNext=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(){this.txtAttrName=l.findChildComponent(this.node,"txtAttrName",a),this.txtAttrBase=l.findChildComponent(this.node,"txtAttrBase",a),this.txtAttrNext=l.findChildComponent(this.node,"txtAttrNext",a)},i.onRender=function(t,e){var n=1==t.num_type?"":"%";this.txtAttrName.string=t.name,2==t.show_type?(this.txtAttrBase.string=f.formatStr("+##1##2",f.GetNumString(t.base/100),n),this.txtAttrNext.string=f.formatStr("+##1##2",f.GetNumString(t.next/100),n)):3==t.show_type?(this.txtAttrBase.string=f.GetNumString(Math.floor(t.base/100)/100),this.txtAttrNext.string=f.GetNumString(Math.floor(t.next/100)/100)):(this.txtAttrBase.string=f.formatStr("+##1##2",f.GetNumString(t.base),n),this.txtAttrNext.string=f.formatStr("+##1##2",f.GetNumString(t.next),n))},i.onItemClick=function(){},n}(d),g=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).txtAttrName=void 0,e.txtAttrBase=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(){this.txtAttrName=l.findChildComponent(this.node,"txtAttrName",a),this.txtAttrBase=l.findChildComponent(this.node,"txtAttrBase",a)},i.onRender=function(t,e){var n=1==t.num_type?"":"%";this.txtAttrName.string=t.name,2==t.show_type?this.txtAttrBase.string=f.formatStr("##1##2",f.GetNumString(t.base/100),n):3==t.show_type?this.txtAttrBase.string=f.GetNumString(Math.floor(t.base/100)/100):this.txtAttrBase.string=f.formatStr("##1##2",f.GetNumString(t.base),n)},i.onItemClick=function(){},n}(d),x=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).txtName=void 0,e.txtAttr=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(){this.txtName=l.findChildComponent(this.node,"name",a),this.txtAttr=l.findChildComponent(this.node,"attr",a)},i.onRender=function(t,e){var n=configAttribute.getDataByKey(t.k),i=1==n.num_type?"":"%";this.txtName.string=n.name,2==n.show_type?this.txtAttr.string=f.formatStr("+##1##2",f.GetNumString(t.v/100),i):3==n.show_type?this.txtAttr.string=f.formatStr("+##1",f.GetNumString(Math.floor(t.v/100)/100)):this.txtAttr.string=f.formatStr("+##1##2",f.GetNumString(t.v),i)},n}(d);i._RF.pop()}}}));

