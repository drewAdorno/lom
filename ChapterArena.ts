System.register("chunks:///_virtual/ChapterArena.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigGlobal.ts","./FixMath.ts","./index83.ts","./EnumDefine.ts","./BaseChapter.ts","./UnitGroupCtr.ts"],(function(t){"use strict";var e,a,r,n,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){r=t.ConfigGlobal},function(t){n=t.FixMath},null,function(t){i=t.UnityType},function(t){o=t.BaseChapter},function(t){s=t.UnitGroupCtr}],execute:function(){a._RF.push({},"4b3d6gNTQNAPonnhIK8vzNN","ChapterArena",void 0);t("ChapterArena",function(t){function a(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).arenaPlayerCtr=void 0,e}e(a,t);var o=a.prototype;return o.init=function(){this.battleMain.hitThrowDis=!1},o.destroy=function(){},o.getConfig=function(t){return configPvp_chapter.getDataByKey(t)},o.start=function(){var t=this.battleMain.mainCtr.player.data.level,e=this.arenaPlayerCtr.player.data.level,a=n.roundInt((t+e)/2),i=configLevel.getDataByKey(a);this.battleMain.injuryReduce=n.round(i.pvp_injury_reduce/1e4),this.battleMain.shieldDecay=n.round(r.shield_correct/1e4),this.battleMain.treatDecay=n.round(r.hp_recovery_correct/1e4)},o.toResult=function(t,e){this.battleMain},o._addPlayer=function(t,e,a,r){var n=this.battleMain,o=new s;o.offsetY=160,o.type=e,o.playerData=a;for(var l=a.units,u=0;u<l.length;u++){var c=n.unitMgr.addPlayer(l[u],r);c.direction=1==e?-1:1,c.config.type==i.Player&&(o.player=c),c.config.type==i.FlyPet&&(o.player.flyPet=c),o.units.push(c)}return o.positionSelected(t+e==1?720:0,!0),o},o.loadData=function(t){var e=this.battleMain,a=e.data.playerImage?1:0,r=this._addPlayer(t,a,e.data.playerList[1],0);e.playerCtrs.push(r),e.mainCtr=r,e.showMainCtr=r,a=e.data.playerImage?0:1,this.arenaPlayerCtr=this._addPlayer(t,a,e.data.playerList[2],1),e.data.playerImage&&(e.showMainCtr=this.arenaPlayerCtr)},o.onUpdate=function(t){if(!this.over){if(this.battleMain.mainCtr.player.isDead)return this.over=!0,this.toResult(1),!0;if(!this.updateTime(t))this.arenaPlayerCtr.player.isDead&&(this.over=!0,this.toResult(0))}},a}(o));a._RF.pop()}}}));

