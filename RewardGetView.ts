System.register("chunks:///_virtual/RewardGetView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./NodeUtil.ts","./index57.ts","./CommonModel.ts","./MessageView.ts","./FriendControl.ts","./FriendDefine.ts","./FriendModel.ts","./RoleDataCache.ts","./RoleDefine.ts","./UIDefine.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,r,d,s,a,l,f,h,c,u,v,p,g,m,C,L;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.Button,r=e.Label,d=e.Sprite,s=e.sys},function(e){a=e.ItemGrid},function(e){l=e.default},null,function(e){f=e.CommonModel},function(e){h=e.default},function(e){c=e.default},function(e){u=e.FriendDefine,v=e.FriendListType},function(e){p=e.FriendModel},function(e){g=e.RoleDataCache},function(e){m=e.PlayerAttr},function(e){C=e.ViewType},function(e){L=e.BaseView}],execute:function(){n._RF.push({},"55c3blMVLlJVZZij7YfQ5oy","RewardGetView",void 0);e("default",function(e){function n(){var t;return(t=e.call(this)||this).modelList=[],t.effectList=[],t.MemberList=void 0,t.rewardType=void 0,t.defence=void 0,t.rewardList=void 0,t.targetID=0,t.nodeReward=void 0,t.txtRewardType=void 0,t.name="RewardGetView",t.url="ui/module/team/RewardGetView",t.poolTime=3e3,t}t(n,e);var L=n.prototype;return L.onInit=function(){var e=this;this.node.parent=uiMgr.pNodes[C.TopView];var t=this.findChild("imgMask");this.addComponentCallbackListener(t,o.EventType.CLICK,(function(){e.close()})),this.nodeReward=this.findChild("root/Node/Layout"),this.txtRewardType=this.findChildComponent("root/Node/Label",r)},L.onAfterOpen=function(){this.rewardType=this.openArgs[0],this.rewardList=this.openArgs[1],this.MemberList=this.openArgs[2],this.defence=this.openArgs[3],this.targetID=0,this.refreshRewardTips(),this.refreshReward(),this.refreshTeamMember()},L.registerUpdateHandler=function(){this.addEvent(u.FriendInfoBack,this.refreshAddFriendButton,this)},L.refreshReward=function(){var e=this.findChild("root/Node/item");this.nodeReward.removeAllChildren();for(var t,n=i(this.rewardList);!(t=n()).done;){var o=t.value,r=nodeInstantiate.instantiate(e);r.setParent(this.nodeReward),new a(this,r).SetItemId(o.gtid,o.num)}},L.refreshRewardTips=function(){var e=this.findChild("root/Node/nodeDefence/txtDesc1"),t=this.findChild("root/Node/nodeDefence/txtDesc2"),i=this.findChild("root/Node/nodeDefence/txtNum"),n=this.findChild("root/Node/txtNum");this.findChild("root/Node/nodeDefence").active=!0,1==this.rewardType?(this.txtRewardType.string=GetLanguage(200623),e.active=!0,t.active=!1,i.active=!0,n.active=!0,i.getComponent(r).string=this.defence+"/10",this.defence<=3?n.active=!1:this.defence<=6?n.getComponent(r).string="+20%":this.defence<=9?n.getComponent(r).string="+50%":this.defence<=10&&(n.getComponent(r).string="+100%")):2==this.rewardType?(this.txtRewardType.string=GetLanguage(200624),e.active=!1,t.active=!0,i.active=!1,n.active=!1):(this.txtRewardType.string=GetLanguage(200625),n.active=!1,this.findChild("root/Node/nodeDefence").active=!1)},L.refreshAddFriendButton=function(){for(var e=0;e<3;e++){var t=this.MemberList[e],i=this.findChild("root/nodeTeamShow/NodeMember"+e),n=l.findChild(i,"btnAdd"),d=l.findChildComponent(i,"btnAdd/Label",r);t&&(t.role_id==this.targetID&&(d.string=GetLanguage(200302),this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){h.showFlyTip(GetLanguage(200305))}))))}},L.refreshTeamMember=function(){var e=this;if(0!=this.modelList.length)for(var t,n=i(this.modelList);!(t=n()).done;){var a=t.value;this.removeUnitModel(a)}if(0!=this.effectList.length)for(var h,u=i(this.effectList);!(h=u()).done;){a=h.value;this.removeUIEffect(a)}this.modelList.length=0,this.effectList.length=0;for(var C=function(){var t=e.MemberList[L];if(w=e.findChild("root/nodeTeamShow/NodeMember"+L),null==t)return w.active=!1,"continue";w.active=!0,_=l.findChildComponent(w,"pet",d),I=l.findChildComponent(w,"bgID/txtID",r),y=l.findChildComponent(w,"bgLevel/txtLevel",r),e.addComponentCallbackListener(w,o.EventType.CLICK,(function(){IS(c).reqOtherRoleNotice(t.role_id)}));var n=l.findChild(w,"btnAdd");n.active=!0,t.role_id==IS(g).GetRoleId()&&(n.active=!1),e.addComponentCallbackListener(n,o.EventType.CLICK,(function(){e.targetID=t.role_id,IS(c).reqDealFriend(1,t.role_id)})),T=IS(p).GetListByType(v.FriendList);for(var a,h=i(T);!(a=h()).done;){if(a.value.role_id==t.role_id){n.active=!1;break}}var u=l.findChild(w,"pet");if(e.loadIcon(_,"main","zjm_ICON_tongban"),0!=t.pet_list.length)for(var C,b=i(t.pet_list);!(C=b()).done;){var M=C.value;if(1==M.pet_pos&&M.pet_id){var D=configUnitModel.getDataByKey(M.pet_id);R=e.addUIEffect(D.path,u,-1,null,D.scale/100*1.5),e.effectList.push(R)}}for(var N,G=i(t.info_list.ks);!(N=G()).done;){var A=N.value,F=A.k,k=A.s;F==m.ROLE_ATTR_NAME&&(I.string=""+k)}for(var x,B=i(t.info_list.kv);!(x=B()).done;){var S=x.value,V=S.k,K=S.v;V==m.ROLE_ATTR_LVL&&(y.string="Lv."+K)}for(var E=t.figure,q=E.hair_figure>0&&E.hair_figure||6,U=E.equip_list.length>0&&IS(f).GetKvListByK(E.equip_list,0)||0,O=E.equip_list.length>1&&IS(f).GetKvListByK(E.equip_list,1)||0,j=E.equip_list.length>2&&IS(f).GetKvListByK(E.equip_list,2)||0,H=l.findChild(w,"role"),P=E.skin_list||[],Z=0,z=0;z<P.length;z++)2==P[z].k&&(Z=P[z].v);var J=E.gender||1,Q=e.addUnitModel({job:E.job_figure,parent:H,dressId:Z,gender:J,color:q,weapon:U,ornaments:O,face:j,shenqi:0});s.uiMirror&&(e.getUnitModel(Q).dir=-1),e.modelList.push(Q)},L=0;L<3;L++){var w,_,I,y,T,R;C()}},L.onBeforeClose=function(){},L.onDestroy=function(){},n}(L));n._RF.pop()}}}));

