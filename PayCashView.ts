System.register("chunks:///_virtual/PayCashView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./MulLanguageUtil.ts","./BagModel.ts","./MessageView.ts","./RoleDefine.ts","./PayDataCache.ts","./PayDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,h,d,r,l,c,u,f,m,p,g,v,C;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.HorizontalTextAlignment,s=t.ScrollView,a=t.Sprite,h=t.Label,d=t.js},function(t){r=t.ListItem},function(t){l=t.default},function(t){c=t.default},null,function(t){u=t.default},function(t){f=t.BagModel},function(t){m=t.default},function(t){p=t.RoleEventDefine},function(t){g=t.default},function(t){v=t.PayEventDefine},function(t){C=t.BaseView}],execute:function(){e._RF.push({},"545f6Sa7yNCNr6uKYOC8JBM","PayCashView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).scroll=void 0,i.imgDiamond=void 0,i.imgDiamondText=void 0,i.openType=void 0,i.typeList={},i.diamondInfo={1:{itemId:2,payType:3},2:{itemId:999,payType:8}},i.name="PayCashView",i.url="ui/module/shop/PayCashView",i.poolTime=3e3,i}i(e,t);var d=e.prototype;return d.onInit=function(){var t=this;this.addComponentCallbackListener(this.findChild("imgBg2/cash/tips"),n.EventType.CLICK,(function(){var t=u.GetconfigLanguage_Text(103448).text;m.showBoxTip({tip:t,btnCnt:1,horizontalAlign:o.LEFT})})),this.addComponentCallbackListener(this.findChild("imgMask"),n.EventType.CLICK,(function(){t.close()})),this.addComponentCallbackListener(this.findChild("closeBtn"),n.EventType.CLICK,(function(){t.close()}));var i=this.findChildComponent("scrollList",s);this.scroll=this.addUIList(i,y),this.imgDiamond=this.findChildComponent("btnDiamond/imgDiamond",a),this.imgDiamondText=this.findChildComponent("btnDiamond/txtDiamond",h);for(var e=function(i){t.typeList[i]={imgBg:t.findChild("imgBg"+i),tabNormal:t.findChild("tabScroll/item"+i+"/normal"),highLight:t.findChild("tabScroll/item"+i+"/highLight"),tabBtn:t.findChild("tabScroll/item"+i)},t.addComponentCallbackListener(t.typeList[i].tabBtn,n.EventType.CLICK,(function(){t.openType!=i&&t.Refresh(i)}))},d=1;d<=2;d++)e(d)},d.onAfterOpen=function(){var t;this.openType=null;var i=null!=(t=this.openArgs[0])?t:1;this.Refresh(i)},d.registerUpdateHandler=function(){this.addEvent(v.PAY_INFO_UPDATE,this.updateInfo,this),this.addEvent(p.ROLE_RES_UPDATE,this.updateResShow,this)},d.Refresh=function(t){for(var i in this.openType=t,this.typeList){var e=this.typeList[i],n=parseInt(i);e.imgBg.active=n==this.openType,e.tabNormal.active=n!=this.openType,e.highLight.active=n==this.openType}var o=this.diamondInfo[this.openType],s=configGoods.getDataByKey(o.itemId);this.loadIcon(this.imgDiamond,s.icon_group,s.icon);for(var a=configPay_mall.getDatas(),h=[],d=[],r=0;r<a.length;r++){var l=a[r];l.type==o.payType&&h.push(l),(2==h.length||a.length-1==r&&h.length>0)&&(d.push(h),h=[])}this.scroll.datas=d,this.updateResShow()},d.updateInfo=function(){this.scroll.updateAll()},d.updateResShow=function(){var t=this.diamondInfo[this.openType];this.imgDiamondText.string=c.GetNumString(IS(f).getGoodsCountByGoodsGtid(t.itemId))},d.onBeforeClose=function(){},d.onDestroy=function(){},e}(C));var y=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).myList=[],i}i(e,t);var n=e.prototype;return n.onInit=function(){for(var t=0;t<2;t++)this.myList.push(new x),this.myList[t].onInit(this.view,l.findChild(this.node,"content/item"+(t+1)))},n.onRender=function(t,i){for(var e=0;e<2;e++)this.myList[e].onRender(t[e])},e}(r),x=function(){function t(){this.bg=void 0,this.icon=void 0,this.txtName=void 0,this.btnBuy=void 0,this.txtPrice=void 0,this.priceIcon=void 0,this.gemNumNode=void 0,this.txtGemNum=void 0,this.gemExt=void 0,this.nums=[],this.data=void 0,this.view=void 0,this.extCashText=void 0,this.extCashNode=void 0,this.node=void 0}var i=t.prototype;return i.onInit=function(t,i){var e=this;this.node=i,this.view=t,this.txtName=l.findChildComponent(this.node,"txtName",h),this.icon=l.findChildComponent(this.node,"icon",a),this.txtPrice=l.findChildComponent(this.node,"btnBuy/Label",h),this.extCashNode=l.findChild(this.node,"extCash"),this.extCashText=l.findChildComponent(this.node,"extCash/Label",h),this.txtGemNum=l.findChildComponent(this.node,"gemNum/txtNum",h),this.gemExt=l.findChild(this.node,"gemNum/ext"),this.btnBuy=l.findChild(this.node,"btnBuy"),this.view.addComponentCallbackListener(this.btnBuy,n.EventType.CLICK,(function(){IS(g).Pay(e.data.id,8==e.data.type)}))},i.onRender=function(t,i){if(t){this.data=t,this.node.active=!0,this.txtName.string=t.name,this.txtPrice.string=IS(g).GetPriceString(t.cost_level);var e,n=IS(g).GetPayGiftInfo(t.id);this.view.loadIcon(this.icon,"pay4",t.pic_back),3==t.type?(e=configDiamond_mall.getDataByKey(t.id),this.txtGemNum.string=d.formatStr("%s",e.recharge),this.extCashNode.active=!1,null!=n&&n.bought_times>0?this.gemExt.active=!1:this.gemExt.active=!0):(e=configStar_diamond_mall.getDataByKey(t.id),this.txtGemNum.string=d.formatStr("%s",e.reward[0][1]),this.gemExt.active=!1,this.extCashNode.active=!(null!=n&&n.bought_times>0),this.extCashText.string=c.formatStrWithMirrorDeal(GetLanguage(200476),e.first_reward[0][1]))}else this.node.active=!1},t}();e._RF.pop()}}}));

