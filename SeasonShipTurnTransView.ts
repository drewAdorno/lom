System.register("chunks:///_virtual/SeasonShipTurnTransView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./index57.ts","./ObjectUtil.ts","./BagModel.ts","./MessageView.ts","./SeasonControl.ts","./SeasonDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,n,e,o,s,a,r,d,l,c,u,h,f,m,p,v,L;return{setters:[function(t){i=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,o=t.Button,s=t.sys,a=t.HorizontalTextAlignment,r=t.Label,d=t.ScrollView},function(t){l=t.ItemGrid},function(t){c=t.ListItem},function(t){u=t.default},null,function(t){h=t.default},function(t){f=t.BagModel},function(t){m=t.default},function(t){p=t.default},function(t){v=t.SeasonDataCache},function(t){L=t.BaseView}],execute:function(){e._RF.push({},"708c6+/5ZBFMYn2Dy2qhTnT","SeasonShipTurnTransView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).txtNum=void 0,i.scrollList=void 0,i.nodeNode=void 0,i.itemList=[],i.name="SeasonShipTurnTransView",i.url="ui/module/season/SeasonShipTurnTransView",i}i(e,t);var l=e.prototype;return l.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var n=this.findChild("content/btnStart");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.itemList.length>0&&(IS(p).reqItemTransform(t.itemList),t.itemList=[]),t.close()}));var e=this.findChild("content/bg/btnRule");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){m.showBoxTip({tip:GetLanguage(205110),btnCnt:1,horizontalAlign:s.uiMirror?a.RIGHT:a.LEFT})})),this.txtNum=this.findChildComponent("content/conditions/tips/num",r);var l=this.findChildComponent("content/ScrollView",d);this.scrollList=this.addUIList(l,g,!0),this.nodeNode=this.findChild("content/nodeNone")},l.registerUpdateHandler=function(){},l.onAfterOpen=function(){this.itemList=[];for(var t,i=IS(v).skin_list,e=0,o=n(i);!(t=o()).done;){var s=t.value,a=IS(v).getSkinLevelByID(s.skin_id),r=configSeason_ship_skin.getDataByKeys("mount_id",s.skin_id,"skin_level",a);if(h.isEmpty(r.expend)){var d=configSeason_ship_skin.getDataByKeys("mount_id",s.skin_id,"skin_level",a-1);if(d.expend){var l=configSeason_transform.getDataByKey(d.expend[0][0]);if(l){var c=IS(f).getGoodsCountByGoodsGtid(l.id);c>0&&(this.itemList.push({k:l.id,v:c}),e+=c*l.transform_item[1])}}}}this.itemList.sort((function(t,i){return configGoods.getDataByKey(i.k).quality-configGoods.getDataByKey(t.k).quality})),this.itemList.length>0?(this.scrollList.node.active=!0,this.scrollList.datas=this.itemList,this.nodeNode.active=!1):(this.scrollList.node.active=!1,this.nodeNode.active=!0),this.txtNum.string=e+""},l.onBeforeClose=function(){},l.onDestroy=function(){},e}(L));var g=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).itemGridNode=void 0,i.itemGrid=void 0,i}i(n,t);var e=n.prototype;return e.onInit=function(){this.itemGridNode=u.findChild(this.node,"itemGrid"),this.itemGrid=new l(this.view,this.itemGridNode)},e.onRender=function(t,i){this.itemGrid.SetItemId(t.k,t.v)},n}(c);e._RF.pop()}}}));

