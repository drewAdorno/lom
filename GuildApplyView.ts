System.register("chunks:///_virtual/GuildApplyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./RoleDataCache.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,n,e,o,s,l,a,d,h,r,u,c,f,p,v;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,o=t.ScrollView,s=t.Toggle,l=t.Sprite,a=t.Label},function(t){d=t.ListItem},function(t){h=t.default},function(t){r=t.default},null,function(t){u=t.RoleDataCache},function(t){c=t.default},function(t){f=t.default},function(t){p=t.GuildEventDefine},function(t){v=t.BaseView}],execute:function(){n._RF.push({},"c5e3fALEvRIt7+pzy03flVI","GuildApplyView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).tog=void 0,i.applyList=void 0,i.role_list=[],i.txtLimit=void 0,i.noList=void 0,i.name="GuildApplyView",i.url="ui/module/guild/GuildApplyView",i}i(n,t);var d=n.prototype;return d.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()}));var n=this.findChild("view/btnClose");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.close()})),this.noList=this.findChild("view/noList");var d=this.findChildComponent("view/list",o);this.applyList=this.addUIList(d,m),this.tog=this.findChildComponent("view/Toggle",s),this.loadIcon(h.findChildComponent(this.node,"view/Toggle/Checkmark",l),"common","common_ui_dagou"),this.addComponentCallbackListener(this.tog.node,s.EventType.TOGGLE,(function(){var i=t.tog.isChecked?1:0;i!=IS(f).GetGuildInfo().is_auto_join&&IS(c).send_29_6(3,i)})),this.txtLimit=this.findChildComponent("view/btnLimit/txt",a);var r=this.findChild("view/btnLimit");this.addComponentCallbackListener(r,e.EventType.CLICK,(function(){uiMgr.openView("GuildLimitTipsView",r)}))},d.registerUpdateHandler=function(){this.addEvent(p.GUILD_APPLY_UPDATE,this.updateInfo,this),this.addEvent(p.GUILD_INFO_UPDATE,this.updateSetting,this)},d.onAfterOpen=function(){IS(c).send_29_7(IS(u).GetGuildId());var t=IS(f).GetGuildInfo();this.tog.isChecked=1==t.is_auto_join,0==t.join_limit_lv?this.txtLimit.string=GetLanguage(200274):this.txtLimit.string=r.formatStrWithMirrorDeal(GetLanguage(200326),t.join_limit_lv)},d.onBeforeClose=function(){},d.onDestroy=function(){},d.updateSetting=function(){var t=IS(f).GetGuildInfo();0==t.join_limit_lv?this.txtLimit.string=GetLanguage(200274):this.txtLimit.string=r.formatStrWithMirrorDeal(GetLanguage(200326),t.join_limit_lv)},d.updateInfo=function(t){this.role_list=null!=t?t:IS(f).GetApplyList(),null==this.role_list||0==this.role_list.length?(this.noList.active=!0,this.applyList.node.active=!1):(this.noList.active=!1,this.applyList.node.active=!0,this.applyList.datas=this.role_list)},n}(v));var m=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).imgFrame=void 0,i.imgIcon=void 0,i.txtName=void 0,i.txtLev=void 0,i}i(n,t);var o=n.prototype;return o.onInit=function(){var t=this;this.imgFrame=h.findChildComponent(this.node,"imgFrame",l),this.imgIcon=h.findChildComponent(this.node,"imgFrame/imgIcon",l),this.txtName=h.findChildComponent(this.node,"name",a),this.txtLev=h.findChildComponent(this.node,"lev",a);var i=h.findChild(this.node,"btnAgree");this.view.loadIcon(h.findChildComponent(this.node,"btnAgree",l),"friend","hy_ICON_gou"),this.view.addComponentCallbackListener(i,e.EventType.CLICK,(function(){IS(c).send_29_8(t.data.apply_uid,1)}));var n=h.findChild(this.node,"btnRefuse");this.view.addComponentCallbackListener(n,e.EventType.CLICK,(function(){IS(c).send_29_8(t.data.apply_uid,2)}))},o.onRender=function(t,i){this.txtName.string=t.name,this.txtLev.string=t.role_lv,this.view.loadRemoteIcon(t.head.url,this.imgIcon)},n}(d);n._RF.pop()}}}));

