System.register("chunks:///_virtual/RelicControl.ts",["cc","./ObjectUtil.ts","./RelicDataCache.ts","./RelicDefine.ts"],(function(e){"use strict";var n,i,c,t;return{setters:[function(e){n=e.cclegacy},function(e){i=e.default},function(e){c=e.RelicDataCache},function(e){t=e.RelicEventDefine}],execute:function(){n._RF.push({},"3fcbcgABw9HNafvqTLVTfdh","RelicControl",void 0);e("default",function(){var e=n.prototype;function n(){netManager.addEventListener("relic.relic_info_s2c",this.on_relic_info_s2c,this),netManager.addEventListener("relic.relic_equip_s2c",this.on_relic_equip_s2c,this),netManager.addEventListener("relic.relic_level_up_s2c",this.on_relic_level_up_s2c,this),netManager.addEventListener("relic.relic_find_s2c",this.on_relic_find_s2c,this),netManager.addEventListener("relic.relic_tab_info_s2c",this.on_relic_tab_info_s2c,this),netManager.addEventListener("relic.relic_tab_info_update_s2c",this.on_relic_tab_info_update_s2c,this),netManager.addEventListener("relic.relic_choose_tab_s2c",this.on_relic_choose_tab_s2c,this),netManager.addEventListener("relic.relic_change_tab_name_s2c",this.on_relic_change_tab_name_s2c,this)}return e.clear=function(){console.log("清理RelicControl")},e.reqRelicInfo=function(){netManager.send("relic.relic_info_c2s",{})},e.on_relic_info_s2c=function(e){IS(c).initRelicInfo(e.relic_list)},e.reqRelicEquip=function(e){netManager.send("relic.relic_equip_c2s",{id:e})},e.on_relic_equip_s2c=function(e){IS(c).updateRelicInfo(e.change_list),IS(c).updateRelicEquipRed()},e.reqRelicLevelUp=function(e){netManager.send("relic.relic_level_up_c2s",{id:e})},e.on_relic_level_up_s2c=function(e){IS(c).updateRelicInfo([e.relic])},e.reqRelicFind=function(){netManager.send("relic.relic_find_c2s",{})},e.on_relic_find_s2c=function(e){var n=e.relic;if(!i.isEmpty(n)){IS(c).relicIdToInfo[n.id]=n,IS(c).updateRelicFindCount();var a=configRelic.getDataByKeys("id",n.cfg_id,"level",n.lv);IS(c).typeToUnlock[a.type]=!0,normalEvent.emit(t.RELIC_INFO_ADD,a.type),IS(c).updateRelicFindRed(),IS(c).updateRelicEquipRed(),uiMgr.openView("RelicGetView",n.id)}},e.reqRelicTabInfo=function(){netManager.send("relic.relic_tab_info_c2s",{})},e.on_relic_tab_info_s2c=function(e){var n=e.tab;if(null!=n){IS(c).curTab=n;var i=e.tab_list;if(null!=i)for(var t=0;t<i.length;t++)IS(c).tabToInfo[i[t].tab]=i[t]}},e.on_relic_tab_info_update_s2c=function(e){var n=e.tab;null!=n&&(null==IS(c).tabToInfo[n]&&(IS(c).tabToInfo[n]={tab:n,name:"",pos_info:[]}),IS(c).tabToInfo[n].pos_info=e.pos_info,normalEvent.emit(t.RELIC_TAB_INFO_UPDATE,n))},e.reqRelicChooseTab=function(e){netManager.send("relic.relic_choose_tab_c2s",{tab:e})},e.on_relic_choose_tab_s2c=function(e){var n=e.new_tab;null!=n&&(IS(c).curTab=n,normalEvent.emit(t.RELIC_CUR_TAB_CHANGE))},e.reqRelicChangeTabName=function(e,n){netManager.send("relic.relic_change_tab_name_c2s",{tab:e,name:n})},e.on_relic_change_tab_name_s2c=function(e){var n=e.tab;null!=n&&(null==IS(c).tabToInfo[n]&&(IS(c).tabToInfo[n]={tab:n,name:"",pos_info:[]}),IS(c).tabToInfo[n].name=e.name,uiMgr.close("TabRenameView"),normalEvent.emit(t.RELIC_TAB_INFO_UPDATE,n))},e.reqRelicChangeTabInfo=function(e,n){netManager.send("relic.relic_change_tab_info_c2s",{tab:e,pos_info:n})},n}());n._RF.pop()}}}));

