System.register("chunks:///_virtual/ActivityFPSGameResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ChatDataCache.ts","./ChatDefine.ts","./ActivityControl.ts","./ActivityDefine.ts","./ActivityFPSControl.ts","./ActivityFPSDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,l,s,r,c,a,d,u,h,f,v,C,S,m;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Label,o=t.Button,l=t.ScrollView,s=t.Sprite},function(t){r=t.ListItem},function(t){c=t.default},function(t){a=t.default},null,function(t){d=t.ChatDataCache},function(t){u=t.ChatDefine},function(t){h=t.default},function(t){f=t.ActivityEventDefine,v=t.ActivityType},function(t){C=t.default},function(t){S=t.default},function(t){m=t.BaseView}],execute:function(){e._RF.push({},"22ab3FUa/hGT4yhwJzKTTyR","ActivityFPSGameResultView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).txtScore=void 0,i.txtRecord=void 0,i.txtBonus=void 0,i.txtKillScore=void 0,i.score=void 0,i.killScore=void 0,i.txtCount=void 0,i.killCount=void 0,i.imgRecord=void 0,i.killList=void 0,i.HPList=[],i.name="ActivityFPSGameResultView",i.url="ui/module/activityFPS/ActivityFPSGameResultView",i}i(e,t);var s=e.prototype;return s.onInit=function(){var t=this;this.txtScore=this.findChildComponent("content/nodeTop/txtScore",n),this.txtRecord=this.findChildComponent("content/nodeTop/txtRecord",n),this.txtBonus=this.findChildComponent("content/nodeKill/txtBonus",n),this.txtKillScore=this.findChildComponent("content/nodeKill/killScore/txtScore",n),this.txtCount=this.findChildComponent("content/nodeKill/killCount/txtCount",n),this.imgRecord=this.findChild("content/nodeTop/imgRecord");for(var i=1;i<=IS(S).levelInfo.guard_point;i++)this.HPList[i]=this.findChild("content/nodeKill/HP/hp"+i+"/HP"+i);var e=this.findChild("content/btnShare");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){IS(d).SendShareData(u.ChatLinkType.MoleScoreshare,{level_num:IS(S).curMoleLevelId,score_num:t.score},u.Channel.World)}));var s=this.findChild("imgMask");this.addComponentCallbackListener(s,o.EventType.CLICK,(function(){uiMgr.getView("ActivityFPSGameView").destroy(),t.close(),IS(C).send_24_126()}));var r=this.findChildComponent("content/nodeKill/ScrollView",l);this.killList=this.addUIList(r,g,!0)},s.registerUpdateHandler=function(){this.addEvent(f.OnTangMoleGameResult,this.OnRecvResult,this)},s.onAfterOpen=function(){uiMgr.getView("ActivityFPSGameConfirmView")&&uiMgr.getView("ActivityFPSGameConfirmView").close(),IS(S).checkCurLevel(),IS(C).send_24_129(),this.txtBonus.string=(IS(S).leftHP*IS(S).levelInfo.hp_score).toString(),this.UpdateLeftHP()},s.onBeforeClose=function(){IS(h).send_24_14(v.FPSGame)},s.onDestroy=function(){},s.OnRecvResult=function(t,i,e){this.score=t,this.txtScore.string=t.toString(),this.killScore=IS(S).levelScore,this.txtKillScore.string=this.killScore.toString(),this.txtRecord.string=a.formatStrWithMirrorDeal(GetLanguage(201716),i),this.imgRecord.active=1==e,this.UpdateKillList()},s.UpdateKillList=function(){this.killCount=0;for(var t=[],i=0;i<5;i++)if(0!=IS(S).levelKillInfo[i]){var e=configMole_enemy.getDataByKey(i+1);this.killCount+=IS(S).levelKillInfo[i],this.killScore+=this.killCount*e.score;var n={id:i+1,count:IS(S).levelKillInfo[i]};t.push(n)}this.killList.datas=t,this.txtCount.string=this.killCount.toString()},s.UpdateLeftHP=function(){for(var t=IS(S).levelInfo.guard_point;t>0;t--)t>IS(S).leftHP?this.HPList[t].active=!1:this.HPList[t].active=!0},e}(m));var g=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).imgEnemy=void 0,i.txtCount=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){this.imgEnemy=c.findChildComponent(this.node,"imgEnemy",s),this.txtCount=c.findChildComponent(this.node,"txtCount",n)},o.onRender=function(t,i){var e=configMole_enemy.getDataByKey(t.id);this.view.loadIcon(this.imgEnemy,"act_fps_game",e.icon),this.txtCount.string=a.formatStrWithMirrorDeal(GetLanguage(201717),e.name,t.count)},e}(r);e._RF.pop()}}}));

