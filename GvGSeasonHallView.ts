System.register("chunks:///_virtual/GvGSeasonHallView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GuildPinItem.ts","./BaseView.ts","./GvGControl.ts","./GvGDefine.ts"],(function(t){"use strict";var e,i,n,o,l,s,d,a,h,u,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Label,l=t.Sprite,s=t.js,d=t.sys},function(t){a=t.GuildPinItem},function(t){h=t.BaseView},function(t){u=t.default},function(t){c=t.GvGEventDefine}],execute:function(){i._RF.push({},"4aebfD1WWtPbZL3N4J/z8Dn","GvGSeasonHallView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).txtDesc=void 0,e.curSelectStr=void 0,e.curInfo=void 0,e.nodeSelectGuild=void 0,e.nodeSelectRole=void 0,e.nodeShadow=void 0,e.nodeGuild=void 0,e.nodeRole=void 0,e.nodeEmpty=void 0,e.txtName=void 0,e.txtPointDesc=void 0,e.txtPoint=void 0,e.txtGuildName=void 0,e.txtRoleName=void 0,e.nodeEmptyGuild=void 0,e.nodeEmptyRole=void 0,e.nodeInfoGuild=void 0,e.nodeInfoRole=void 0,e.guildFlagShow=void 0,e.guildFlagInfo=void 0,e.imgHead=void 0,e.imgHeadFrame=void 0,e.modelRole=void 0,e.name="GvGSeasonHallView",e.url="ui/module/gvg/GvGSeasonHallView",e}e(i,t);var h=i.prototype;return h.onInit=function(){var t=this,e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()})),this.txtDesc=this.findChildComponent("content/desc/imgDescBg/txtDesc",o);var i=this.findChild("content/desc/buttonGuild");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){"guild"!=t.curSelectStr&&(t.curSelectStr="guild",t.updateSelectStatus(),t.updateInfo())}));var s=this.findChild("content/desc/buttonRole");this.addComponentCallbackListener(s,n.EventType.CLICK,(function(){"role"!=t.curSelectStr&&(t.curSelectStr="role",t.updateSelectStatus(),t.updateInfo())})),this.nodeSelectGuild=this.findChild("content/desc/buttonGuild/selected"),this.nodeSelectRole=this.findChild("content/desc/buttonRole/selected");var d=this.findChild("content/bottomBtns/btnHallOfFame");this.addComponentCallbackListener(d,n.EventType.CLICK,(function(){uiMgr.openView("GvGSeasonHallOfFameView")})),this.nodeShadow=this.findChild("content/show/imgShadow"),this.nodeGuild=this.findChild("content/show/GuildPinItem"),this.nodeRole=this.findChild("content/show/role"),this.nodeEmpty=this.findChild("content/show/txtEmpty"),this.txtName=this.findChildComponent("content/info/txtName",o),this.txtPointDesc=this.findChildComponent("content/info/point/txtPointDesc",o),this.txtPoint=this.findChildComponent("content/info/point/txtPoint",o),this.txtGuildName=this.findChildComponent("content/info/txtNameGuild",o),this.txtRoleName=this.findChildComponent("content/info/txtNameRole",o),this.nodeEmptyGuild=this.findChild("content/info/emptyGuild"),this.nodeEmptyRole=this.findChild("content/info/emptyRole"),this.nodeInfoGuild=this.findChild("content/info/GuildPinItem"),this.nodeInfoRole=this.findChild("content/info/imgFrame"),this.guildFlagShow=new a(this,this.nodeGuild),this.guildFlagInfo=new a(this,this.nodeInfoGuild),this.imgHeadFrame=this.findChildComponent("content/info/imgFrame/imgHeadFrame",l),this.imgHead=this.findChildComponent("content/info/imgFrame/head",l)},h.registerUpdateHandler=function(){this.addEvent(c.GVG_HALL_INFO_BACK,this.onGvGHallInfoBack,this)},h.onAfterOpen=function(){this.curSelectStr=this.openArgs[0]||"guild",this.updateSelectStatus(),IS(u).reqGvGHall()},h.updateInfo=function(){null!=this.curInfo&&(this.showCommonInfo(),"guild"==this.curSelectStr?this.showGuildInfo():this.showRoleInfo())},h.showGuildInfo=function(){this.nodeRole.active=!1,this.nodeShadow.active=!1;var t=this.curInfo.season_top_guild;this.nodeEmpty.active=null==t,this.nodeGuild.active=null!=t,this.txtPoint.node.active=null!=t,this.txtPointDesc.node.active=null!=t,this.txtName.node.active=null!=t,null!=t&&(this.txtName.string=s.formatStr("%s:[s%s]",t.guild_name,t.serv_id),this.txtPoint.string=t.score,this.guildFlagShow.SetItem(t.guild_flag))},h.showRoleInfo=function(){this.nodeGuild.active=!1;var t=this.curInfo.season_top_role;if(this.nodeEmpty.active=null==t,this.nodeRole.active=null!=t,this.nodeShadow.active=null!=t,this.txtPoint.node.active=null!=t,this.txtPointDesc.node.active=null!=t,this.txtName.node.active=null!=t,null!=t){this.txtName.string=s.formatStr("%s:[s%s]",t.name,t.serv_id),this.txtPoint.string=t.score,null!=this.modelRole&&(this.removeUnitModel(this.modelRole),this.modelRole=null);for(var e=t.figure,i=e.skin_list||[],n=0,o=0;o<i.length;o++)2==i[o].k&&(n=i[o].v);for(var l=0,a=0,h=0,u=0;u<e.equip_list.length;u++)1==e.equip_list[u].k&&(l=e.equip_list[u].v),2==e.equip_list[u].k&&(a=e.equip_list[u].v),3==e.equip_list[u].k&&(h=e.equip_list[u].v);var c=e.gender||1;this.modelRole=this.addUnitModel({job:e.job_figure,dressId:n,gender:c,parent:this.nodeRole,color:e.hair_figure,weapon:l,ornaments:a,face:h,mount:e.mount_figure,shenqi:e.artifact_figure}),d.uiMirror&&(this.getUnitModel(this.modelRole).dir=-1)}},h.showCommonInfo=function(){var t=this.curInfo.top_guild;this.nodeInfoGuild.active=null!=t,this.nodeEmptyGuild.active=null==t,this.txtGuildName.node.active=null!=t,null!=t&&(this.txtGuildName.string=s.formatStr("%s:[s%s]",t.guild_name,t.serv_id),this.guildFlagInfo.SetItem(t.guild_flag));var e=this.curInfo.top_role;if(this.nodeInfoRole.active=null!=e,this.nodeEmptyRole.active=null==e,this.txtRoleName.node.active=null!=e,null!=e){this.txtRoleName.string=s.formatStr("%s:[s%s]",e.name,e.serv_id),this.loadRemoteIcon(e.head.url,this.imgHead);var i=e.head.frame_id;if(i>0){this.imgHeadFrame.node.active=!0;var n=configAvatar_frame.getDataByKey(i);this.loadIcon(this.imgHeadFrame,"icon_frame",n.icon)}else this.imgHeadFrame.node.active=!1}},h.updateSelectStatus=function(){this.txtDesc.string="guild"==this.curSelectStr?GetLanguage(201565):GetLanguage(201566),this.txtPointDesc.string=s.formatStr("%s:","guild"==this.curSelectStr?GetLanguage(201567):GetLanguage(201568)),this.nodeSelectGuild.active="guild"==this.curSelectStr,this.nodeSelectRole.active="role"==this.curSelectStr},h.onBeforeClose=function(){this.curInfo=null},h.onDestroy=function(){},h.onGvGHallInfoBack=function(t){this.curInfo=t,this.updateInfo()},i}(h));i._RF.pop()}}}));

