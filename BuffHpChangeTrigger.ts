System.register("chunks:///_virtual/BuffHpChangeTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./FixMath.ts","./Buff.ts","./MetaAttrib.ts","./EnumDefine.ts"],(function(t){"use strict";var e,i,a,r,n,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){a=t.ObjectPool},function(t){r=t.FixMath},function(t){n=t.Buff},function(t){o=t.AttribDefine},function(t){c=t.SpBuffState}],execute:function(){i._RF.push({},"db4116t3pNOz6QI20sk5OW8","BuffHpChangeTrigger",void 0);var s=t("BuffHpChangeTrigger",function(t){function i(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).operator=void 0,e.triggervalue=void 0,e._addBuffid=void 0,e._addlasttime=void 0,e._cd=void 0,e._checktime=void 0,e}e(i,t);var a=i.prototype;return a.onBegin=function(){this.owner.data.AddBuffState(c.HpChangeTriger,1),this._checktime=0},a.onDestroy=function(){this.owner.data.AddBuffState(c.HpChangeTriger,-1),i._pool.free(this)},a.onDamage=function(t){var e=r.round(t/this.owner.data.getAttrib(o.hp)),i=r.round(this.triggervalue/1e4),a=!1;switch(this.operator){case 0:a=e>i;break;case 1:a=e<i;break;case 2:a=e==i;break;case 3:a=e>=i;break;case 4:a=e<=i}a&&this._checktime<=0&&(this._checktime=this._cd,this.runner.addBuff(this.owner,this._addBuffid,this._addlasttime,this.skillPar))},a.onUpdate=function(t){this._checktime>0&&(this._checktime=r.round(this._checktime-t))},i.alloc=function(t){var e=i._pool.alloc();return e.config=t,e.operator=t.param1,e.triggervalue=t.param2,e._addBuffid=t.param3,e._addlasttime=t.param4,t.param5[0]?e._cd=t.param5[0]:e._cd=e._addlasttime,e._checktime=0,e},i}(n));s._pool=new a(s,10),i._RF.pop()}}}));

