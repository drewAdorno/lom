System.register("chunks:///_virtual/FateAttrView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./UIList.ts","./NodeUtil.ts","./RoleDataCache.ts","./FateDataCache.ts","./StringUtil.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,l,u,c,f,d;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.ScrollView,r=t.Label},null,function(t){s=t.ListItem},function(t){l=t.default},function(t){u=t.RoleDataCache},function(t){c=t.default},function(t){f=t.default},function(t){d=t.BaseView}],execute:function(){n._RF.push({},"17373KXHQBOGrhvc8QuyDa8","FateAttrView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).scroll=void 0,e.nothing=void 0,e.name="FateAttrView",e.url="ui/module/fate/FateAttrView",e}e(n,t);var r=n.prototype;return r.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()})),this.nothing=this.findChild("view/nothing");var i=l.findChildComponent(this.node,"view/scroll",a);this.scroll=this.addUIList(i,h)},r.registerUpdateHandler=function(){},r.onAfterOpen=function(){var t=[],e=[],n=IS(c).GetPosInfo();for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];if(0!=a.id){for(var r,s=IS(c).GetFateItem(a.id),l=i(s.lv_cfg.attr);!(r=l()).done;){var u=r.value;t[u[0]]||(t[u[0]]=0),t[u[0]]=t[u[0]]+u[1]}for(var f,d=i(s.lv_cfg.skill);!(f=d()).done;){var h=f.value;e[h[0]]||(e[h[0]]=h[1])}}}var v=[];for(var p in t)t.hasOwnProperty(p)&&v.push({type:1,id:p,value:t[p]});for(var y in e)e.hasOwnProperty(y)&&v.push({type:2,id:y,value:e[y]});v.sort((function(t,e){return t.type!=e.type?t.type-e.type:t.id-e.id})),this.scroll.datas=v,this.nothing.active=0==v.length},r.onBeforeClose=function(){},r.onDestroy=function(){},n}(d));var h=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtName=void 0,e.txtValue=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.txtName=l.findChildComponent(this.node,"txtAttrName",r),this.txtValue=l.findChildComponent(this.node,"txtAttrValue",r)},n.onRender=function(t,e){if(1==t.type){var i=configAttribute.getDataByKey(t.id);this.txtName.string=i.desc,this.txtValue.string=IS(u).getAttrValueShow(t.id,t.value)}else{var n=configSkill.getDataByKey(t.id),o=configSkill_level.getDataByKeys("id",n.id,"level",t.value);this.txtName.string=n.name,this.txtValue.string=f.formatStr.apply(f,[o.desc].concat(o.desc_parm))}},i}(s);n._RF.pop()}}}));

