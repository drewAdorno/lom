System.register("chunks:///_virtual/GuildMainApplyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./MessageView.ts","./RoleDataCache.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var i,n,e,l,s,o,a,d,u,h,r,p,c,f,v,L,C;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,l=t.ScrollView,s=t.EditBox,o=t.sys,a=t.Label,d=t.js},function(t){u=t.ListItem},function(t){h=t.default},function(t){r=t.default},null,function(t){p=t.default},function(t){c=t.RoleDataCache},function(t){f=t.default},function(t){v=t.default},function(t){L=t.GuildEventDefine},function(t){C=t.BaseSubView}],execute:function(){n._RF.push({},"a941dTGMOxKY7OriUiVzhra","GuildMainApplyView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).topTitle=void 0,i.input=void 0,i.guildList=void 0,i.noAllyList=void 0,i.name="GuildMainApplyView",i.url="ui/module/guild/GuildMainApplyView",i.fullScreen=!0,i}i(n,t);var a=n.prototype;return a.onInit=function(){var t=this;this.noAllyList=this.findChild("noAlly/noList");var i=this.findChild("noAlly/btnRefresh");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){IS(f).send_29_3(2,"",1)}));var n=this.findChild("noAlly/btnCreate");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){uiMgr.openView("GuildCreateView")}));var a=this.findChild("noAlly/btnRandom");this.addComponentCallbackListener(a,e.EventType.CLICK,(function(){IS(f).send_29_5()})),this.topTitle=this.findChild("noAlly/topTitle");var d=this.findChildComponent("noAlly/list",l);this.guildList=this.addUIList(d,m),this.input=this.findChildComponent("noAlly/input/input",s),this.input.placeholder=GetLanguage_UI(100462);var u=this.findChild("noAlly/input/btnSearch");this.addComponentCallbackListener(u,e.EventType.CLICK,(function(){var i=t.input.string;""!=i?IS(f).send_29_3(1,i,1):p.showFlyTip(GetLanguage(200336))})),o.uiMirror&&this.adjustMirrorNode(this.findChild("noAlly/input/input/PLACEHOLDER_LABEL"),0,!1,1)},a.registerUpdateHandler=function(){this.addEvent(L.GUILD_SEARCH_UPDATE,this.updateGuildList,this),this.addEvent(L.GUILD_SELF_APPLY_UPDATE,this.refreshGuildList,this)},a.onAfterOpen=function(){IS(f).send_29_3(2,"",1),IS(f).send_29_18()},a.onBeforeClose=function(){},a.onDestroy=function(){},a._update=function(i){t.prototype._update.call(this,i)},a.updateGuildList=function(t){null==t||0==t.length?(this.noAllyList.active=!0,this.topTitle.active=!1,this.guildList.node.active=!1):(this.noAllyList.active=!1,this.topTitle.active=!0,this.guildList.node.active=!0,this.guildList.datas=t)},a.refreshGuildList=function(){this.guildList.updateAll()},n}(C));var m=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),l=0;l<n;l++)e[l]=arguments[l];return(i=t.call.apply(t,[this].concat(e))||this).txtName=void 0,i.txtLev=void 0,i.txtNum=void 0,i.txtLimit=void 0,i.apply=void 0,i.btn=void 0,i}i(n,t);var l=n.prototype;return l.onInit=function(){var t=this;this.txtName=h.findChildComponent(this.node,"name",a),this.txtLev=h.findChildComponent(this.node,"lev",a),this.txtNum=h.findChildComponent(this.node,"num",a),this.txtLimit=h.findChildComponent(this.node,"limit",a),this.apply=h.findChild(this.node,"apply"),this.btn=h.findChild(this.node,"btn"),this.view.addComponentCallbackListener(this.btn,e.EventType.CLICK,(function(){var i=configGuild_level.getDataByKey(t.data.level).max_num;t.data.member_num>=i?p.showFlyTip(GetLanguage(200337)):t.data.join_limit_lv>IS(c).GetLevel()?p.showFlyTip(GetLanguage(200338)):IS(f).send_29_4(t.data.guild_id)})),this.view.addComponentCallbackListener(this.node,e.EventType.CLICK,(function(){IS(f).send_29_1(t.data.guild_id)}))},l.onRender=function(t,i){this.txtName.string=t.name,this.txtLev.string=r.formatStrWithMirrorDeal(GetLanguage(200333),t.level);var n=configGuild_level.getDataByKey(t.level).max_num;this.txtNum.string=d.formatStr("%s/%s",t.member_num,n),0==t.join_limit_lv?this.txtLimit.string="-":this.txtLimit.string=r.formatStrWithMirrorDeal(GetLanguage(200333),t.join_limit_lv),IS(v).GetSelfApplyList()[t.guild_id]?(this.btn.active=!1,this.apply.active=!0):(this.btn.active=!0,this.apply.active=!1)},n}(u);n._RF.pop()}}}));

