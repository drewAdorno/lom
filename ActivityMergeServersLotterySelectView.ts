System.register("chunks:///_virtual/ActivityMergeServersLotterySelectView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./index57.ts","./ActivityControl.ts","./ActivityDataCache.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,r,c,o,l,d,s,a,h;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.Button,c=e.ScrollView},function(e){o=e.ItemGrid},function(e){l=e.ListItem},function(e){d=e.default},null,function(e){s=e.default},function(e){a=e.default},function(e){h=e.BaseView}],execute:function(){n._RF.push({},"72641a1hKpNMo0FnNDmkBV2","ActivityMergeServersLotterySelectView",void 0);e("default",function(e){function n(){var t;return(t=e.call(this)||this).rewardScroll=void 0,t.nodeSelectNoGoods=void 0,t.nodeSelectAdd=void 0,t.nodeSelectItemGrid=void 0,t.itemGridSelect=void 0,t.actType=void 0,t.cfgId=void 0,t.curSelect=void 0,t.name="ActivityMergeServersLotterySelectView",t.url="ui/module/activityMergeServers/ActivityMergeServersLotterySelectView",t}t(n,e);var l=n.prototype;return l.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,r.EventType.CLICK,(function(){e.close()}));var i=this.findChild("btnClose");this.addComponentCallbackListener(i,r.EventType.CLICK,(function(){e.close()}));var n=this.findChild("view/btnConfirm");this.addComponentCallbackListener(n,r.EventType.CLICK,(function(){null!=e.curSelect&&(IS(s).send_act_double_draw_choose(e.actType,e.cfgId,e.curSelect[0]),e.close())})),this.nodeSelectNoGoods=this.findChild("view/selected/imgNoFrame"),this.nodeSelectAdd=this.findChild("view/selected/btnWear"),this.nodeSelectItemGrid=this.findChild("view/selected/itemGrid"),this.itemGridSelect=new o(this,this.nodeSelectItemGrid);var l=this.findChildComponent("view/rewardScroll",c);this.rewardScroll=this.addUIList(l,u)},l.registerUpdateHandler=function(){},l.onAfterOpen=function(){var e,t;this.actType=this.openArgs[0],this.cfgId=this.openArgs[1];var n=configDouble_probabillity.getDataByKey(this.cfgId),r=IS(a).getLotteryInfo(this.actType);r||this.close();var c=null!=(e=r.choose_list[n.reward_id])?e:0;if(0!=c)for(var o,l=i(n.reward_replace);!(o=l()).done;){var d=o.value;if(d[0]==c){this.curSelect=d;break}}else this.curSelect=null;var s=null!=(t=n.reward_replace)?t:[];this.rewardScroll.datas=s,this.updateSelect()},l.updateSelect=function(){this.rewardScroll.updateAll(),this.nodeSelectNoGoods.active=null==this.curSelect,this.nodeSelectAdd.active=null==this.curSelect,this.nodeSelectItemGrid.active=null!=this.curSelect,null!=this.curSelect&&this.itemGridSelect.SetItemId(this.curSelect[1][0],this.curSelect[1][1])},l.onBeforeClose=function(){},l.onDestroy=function(){},n}(h));var u=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).itemGridNode=void 0,t.itemGrid=void 0,t.select=void 0,t}t(i,e);var n=i.prototype;return n.onInit=function(){var e=this;this.itemGridNode=d.findChild(this.node,"itemGrid"),this.itemGrid=new o(this.view,this.itemGridNode),this.select=d.findChild(this.node,"imgSelect"),this.view.addComponentCallbackListener(this.node,r.EventType.CLICK,(function(){e.view.curSelect=e.data,e.view.updateSelect()}))},n.onRender=function(e,t){this.itemGrid.SetItemId(e[1][0],e[1][1]),this.SetSelect()},n.SetSelect=function(){this.select.active=this.view.curSelect&&this.view.curSelect[0]==this.data[0]},i}(l);n._RF.pop()}}}));

