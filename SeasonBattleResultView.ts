System.register("chunks:///_virtual/SeasonBattleResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./BagModel.ts","./SeasonDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,f,d,l,u,c,m,h,g;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Label,s=t.RichText,a=t.ScrollView,r=t.sys},function(t){f=t.V2},function(t){d=t.ItemGrid},function(t){l=t.ListItem},function(t){u=t.default},function(t){c=t.default},null,function(t){m=t.BagModel},function(t){h=t.SeasonBattleResultType},function(t){g=t.BaseView}],execute:function(){var p;i._RF.push({},"50995FiigxMF4vSdlEbBZcj","SeasonBattleResultView",void 0);var I=((p={})[h.Attack]=[799100676,799100677],p[h.Def]=[799100674,799100675],p[h.Monster]=[999000545,999000546],p),v=(t("default",function(t){function i(){var e;return(e=t.call(this)||this).txtName=void 0,e.nodeGrid=void 0,e.rewardList=void 0,e.imgTitle=void 0,e.imgTitleDef=void 0,e.type=h.Attack,e.servId=0,e.infos={},e.name="SeasonBattleResultView",e.url="ui/module/season/scene-view/SeasonBattleResultView",e}e(i,t);var d=i.prototype;return d.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("content");this.txtName=u.findChildComponent(i,"info/txtName",o),this.infos[h.Attack]={root:u.findChild(i,"attackInfo"),txtBattleInfo:u.findChildComponent(i,"attackInfo/txtBattleInfo",s),txtBattleInfo1:u.findChildComponent(i,"attackInfo/txtBattleInfo1",s)},this.infos[h.Monster]={root:u.findChild(i,"monsterInfo"),txtBattleInfo:u.findChildComponent(i,"monsterInfo/txtBattleInfo",s),txtConsume:u.findChildComponent(i,"monsterInfo/txtConsume",s),txtNum:u.findChildComponent(i,"monsterInfo/txtNum",s)},this.infos[h.Def]={root:u.findChild(i,"defInfo"),txtBattleInfo:u.findChildComponent(i,"defInfo/txtBattleInfo",s)},this.imgTitle=u.findChildComponent(i,"title/title",o),this.imgTitleDef=u.findChildComponent(i,"title/title-def",o),this.nodeGrid=u.findChild(i,"grid");var r=this.findChildComponent("content/ScrollView",a);this.rewardList=this.addUIList(r,v)},d.registerUpdateHandler=function(){},d.onAfterOpen=function(){var t=this.openArgs[0],e=this.openArgs[1];this.type=e;var i=t.pos,n=configSeason_building_plot.getDataByKey(t.base_id);for(var o in this.txtName.string=c.formatStr(r.uiMirror?"[##2,##3] ##1":"##1 [##2,##3]",n.name,i.x,i.y),this.addUIEffect("prefab/map/slgmap/"+n.prefab_name,this.nodeGrid,-1,new f(0,n.ui_scale[1]),n.ui_scale[0]/1e4,(function(t){r.uiMirror&&(t.dir=-1)})),0==t.is_succ?(this.imgTitle.string=GetLanguage_UI(I[this.type][0]),this.imgTitle.node.active=!0,this.imgTitleDef.node.active=!1):(this.imgTitleDef.node.active=!0,this.imgTitle.node.active=!1,this.imgTitleDef.string=GetLanguage_UI(I[this.type][1])),this.infos)this.infos[o].root.active=!1;switch(this.infos[e].root.active=!0,e){case h.Attack:this.updateAttackInfo(t);break;case h.Def:this.updateDefInfo(t);break;case h.Monster:this.updateMonsterInfo(t)}this.rewardList.datas=t.reward_list},d.updateAttackInfo=function(t){var e=this.infos[h.Attack];0==t.is_succ?(e.txtBattleInfo1.node.active=!0,e.txtBattleInfo1.string=c.formatStr(GetLanguage(204617),this.txtName.string)):e.txtBattleInfo1.node.active=!1,e.txtBattleInfo.string=c.formatStr(GetLanguage(204618),t.team_num)},d.updateDefInfo=function(t){var e=this.infos[h.Def];0==t.is_succ?e.txtBattleInfo.string=c.formatStr(GetLanguage(204727),t.role_name):e.txtBattleInfo.string=c.formatStr(GetLanguage(204728),t.role_name)},d.updateMonsterInfo=function(t){var e=this.infos[h.Monster];e.txtBattleInfo.string=c.formatStr(GetLanguage(204618),t.team_num),e.txtConsume.string=c.formatStr(GetLanguage(204726),0==t.is_succ?1:0),e.txtNum.string=c.formatStr(GetLanguage(204725),t.monster_atk_times)},d.onBeforeClose=function(){},d.onDestroy=function(){},i}(g)),function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this;this.itemGridNode=u.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode,(function(){IS(m).OpenItemTips(t.data.gtid,t.itemGridNode)}))},n.onRender=function(t,e){this.itemGrid.SetItemId(t.gtid,t.num)},i}(l));i._RF.pop()}}}));

