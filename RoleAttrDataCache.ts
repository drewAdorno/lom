System.register("chunks:///_virtual/RoleAttrDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoleDefine.ts","./PetDataCache.ts","./SkillDataCache.ts"],(function(t){"use strict";var e,o,r,a,i,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,r=t.js},function(t){a=t.RoleEventDefine},function(t){i=t.PetDataCache},function(t){n=t.SkillDataCache}],execute:function(){o._RF.push({},"be747ybXj1J/po2Sy4UtAl5","RoleAttrDataCache",void 0);t("RoleAttrDataCache",function(){var t=o.prototype;function o(){this.level=0,this.fightPower=0,this.attrIdToValue={},this.initAttrib=!1}return t.updateRoleAttrByList=function(t){for(var o,r=e(t);!(o=r()).done;){var i=o.value;this.attrIdToValue[i.k]=3.5*i.v}this.initAttrib=!0,normalEvent.emit(a.ROLE_ATTR_LIST_UPDATE)},t.updateRoleAttrById=function(t,e){this.attrIdToValue[t]=3.5*e,normalEvent.emit(a.ROLE_ATTR_UPDATE,t)},t.calRoleAttrById=function(t){},t.getRoleAttrById=function(t){var e,o=null!=(e=this.attrIdToValue[t])?e:0;return Math.floor(o/3.5)},t.calFightPower=function(){this.fightPower=100},t.getAttrValue=function(t){var e=configAttribute.getDataByKey(t),o=this.getRoleAttrById(t);if(0==o&&3==e.type&&null!=e.group){var a=this.getRoleAttrById(e.group-1e3),i=this.getRoleAttrById(e.group),n=1;2==e.show_type&&(n=1e4),o=(a-i)/i*n}return 2==e.show_type?r.formatStr("%s%",o/100):3==e.show_type?String(o/1e4):String(o)},t.updateRoleAttrObj=function(t){if(null!=t&&0!=t.length)for(var e,o=0;o<t.length;o++)1==(e=t[o].type)&&IS(i).updatePetAttrInfo(t[o].id,t[o].attr_list),2==e&&IS(n).updateSkillAttrInfo(t[o].id,t[o].attr_list)},t.clear=function(){console.log("清理RoleAttrDataCache")},o}());o._RF.pop()}}}));

