System.register("chunks:///_virtual/SeasonBagView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ConfigSeason_kv.ts","./BagDefine.ts","./BagModel.ts","./MessageView.ts","./SeasonSceneControl.ts","./SeasonSceneDataCache.ts","./BaseView.ts"],(function(t){"use strict";var e,n,i,o,s,a,c,r,d,u,l,h,f,g,p,v,C,S;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Button,o=t.ScrollView,s=t.Label,a=t.RichText,c=t.sys},function(t){r=t.ItemGrid},function(t){d=t.ListItem},function(t){u=t.default},function(t){l=t.default},null,function(t){h=t.ConfigSeason_kv},function(t){f=t.BagEventDefine},function(t){g=t.BagModel},function(t){p=t.default},function(t){v=t.default},function(t){C=t.SeasonSceneDataCache},function(t){S=t.BaseView}],execute:function(){n._RF.push({},"017f03EErlDja9ylzUiLHRr","SeasonBagView",void 0);var m=h.SEASON_BAG_SHOW,w=(t("default",function(t){function n(){var e;return(e=t.call(this)||this).scroll=void 0,e.showGoodsList=void 0,e.name="SeasonBagView",e.url="ui/module/season/SeasonBagView",e}e(n,t);var s=n.prototype;return s.onInit=function(){var t=this,e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,i.EventType.CLICK,(function(){t.close()}));var n=this.findChildComponent("content/scroll",o);this.scroll=this.addUIList(n,w),this.showGoodsList=new Array;for(var s=configGoods.getDatas(),a=0;a<s.length;a++)m.includes(s[a].type)&&this.showGoodsList.push(s[a])},s.registerUpdateHandler=function(){this.addEvent(f.GOODS_CHANGE_SOURCE,this.updateInfo,this)},s.onAfterOpen=function(){this.scroll.datas=this.showGoodsList},s.updateInfo=function(t){[19000054,19000055,19000056,19000057].includes(t)&&(p.showFlyTip(GetLanguage(205439)),this.scroll.updateAll())},s.onBeforeClose=function(){},s.onDestroy=function(){},n}(S)),function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).txtName=void 0,e.itemGrid=void 0,e.num=void 0,e.btnUse=void 0,e}e(n,t);var o=n.prototype;return o.onInit=function(){var t=this;this.txtName=u.findChildComponent(this.node,"txtName",s),this.num=u.findChildComponent(this.node,"Node/num",a),this.itemGrid=new r(this.view,u.findChild(this.node,"itemGrid")),this.btnUse=u.findChild(this.node,"Node/btnUse"),this.view.addComponentCallbackListener(this.btnUse,i.EventType.CLICK,(function(){t.onClickCheck()}))},o.onRender=function(t,e){this.txtName.string=t.name,this.itemGrid.SetItemId(t.id);var n=IS(g).getGoodsCountByGoodsGtid(t.id);n<=0?(this.num.string=l.formatStr("<b><size=30><color=#9c0909>##1</color></size></b>",GetLanguage(200573)),this.btnUse.active=!1):(c.uiMirror,this.num.string=l.formatStr("<b><size=24><color=#6e452d>##1</color><color=#3fb510>##2</color></size></b>",GetLanguage(204104),n),this.btnUse.active=!0)},o.onClickCheck=function(){switch(this.data.id){case 270009:3==IS(C).teamInfo.state?p.showBoxTip({tip:GetLanguage(205321),func:function(t){"type_yes"==t&&IS(v).reqRevive()}}):p.showBoxTip({tip:GetLanguage(205320),btnCnt:1});break;case 270004:uiMgr.openView("SeasonUseActionPointView");break;case 270001:case 270002:case 270003:IS(v).reqSpeedup(this.data.id);break;case 270010:case 270011:IS(v).reqRecover(this.data.id)}},n}(d));n._RF.pop()}}}));

