System.register("chunks:///_virtual/SeasonSceneDetailRoyalView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./SeasonDefine.ts","./SeasonSceneControl.ts","./SeasonSceneDataCache.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,d,c,h,f,l,u,p,v,m,g,w,S,C;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.ScrollView,r=t.Label,s=t.RichText,a=t.sys,d=t.js,c=t.Color,h=t.Sprite,f=t.Vec2},function(t){l=t.ItemGrid},function(t){u=t.ListItem},function(t){p=t.default},function(t){v=t.default},function(t){m=t.default},null,function(t){g=t.SeasonEventDefine},function(t){w=t.default},function(t){S=t.SeasonSceneDataCache},function(t){C=t.BaseView}],execute:function(){i._RF.push({},"af0faGhQkJNfIGxTWAIGJmV","SeasonSceneDetailRoyalView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).txtName=void 0,e.txtDefInfo=void 0,e.txtDefInfo1=void 0,e.defList=void 0,e.rewardList=void 0,e.pos=new f,e.txtTips=void 0,e.txtReward1=void 0,e.txtReward2=void 0,e.selectGrid=void 0,e.txtTipsReward=void 0,e.check=!1,e.name="SeasonSceneDetailRoyalView",e.url="ui/module/season/scene-view/SeasonSceneDetailRoyalView",e}e(i,t);var h=i.prototype;return h.onInit=function(){var t=this,e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("imgMask");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var a=this.findChild("content"),d=p.findChildComponent(a,"reward/rewardScroll",o);this.rewardList=this.addUIList(d,_),this.rewardList.lackCenter=!0,this.txtTips=this.findChildComponent("content/txtTip",r),this.txtTipsReward=this.findChildComponent("content/reward/txtTip",r),this.txtReward1=this.findChildComponent("content/node1/desc",s),this.txtReward2=this.findChildComponent("content/node2/desc",s)},h.registerUpdateHandler=function(){this.addEvent(g.SEASON_SCENE_ROYAL_INFO_UPDATE,this.updateRewardInfo,this)},h.onAfterOpen=function(){var t=this,e=configSeason_building_plot.getDataByKey(10),i=configSeason_mapevent_reward.getDataByKey(e.event_reward_id[0]);this.rewardList.datas=i.reward;var n=configSeason_mapevent_reward.getDataByKey(e.event_reward_id[1]);this.txtReward1.string=(a.uiMirror?v:d).formatStr(GetLanguage(204643),n.reward[0][1]);var o=configSeason_battle_score.getDataByKey(15);this.txtReward2.string=(a.uiMirror?v:d).formatStr(GetLanguage(204640),o.item_num[1]),this.selectGrid=this.openArgs[0];var r=this.openArgs[1];IS(w).reqRoyalInfo(r),this.refreshOccTips(),this.addTimer(1,-1,(function(){t.refreshOccTips()}))},h.refreshOccTips=function(){var t,e=IS(S).gridTimeMap,i=(null!=(t=e[this.selectGrid.id]&&e[this.selectGrid.id].time)?t:0)-m.serverTime;i<=0?0==this.selectGrid.serv_id?(this.txtTips.color=new c("#ffffff"),this.txtTips.string=GetLanguage(204650)):(this.txtTips.color=new c("#fcce00"),this.txtTips.string=(a.uiMirror?v:d).formatStr(GetLanguage(204651),this.selectGrid.serv_id)):(this.txtTips.color=new c("#2aff28"),this.txtTips.string=(a.uiMirror?v:d).formatStr(GetLanguage(204652),m.getTimeLeft(i)))},h.updateRewardInfo=function(){this.check=!1;var t=IS(S);t.RoyalOccServ_id&&0!=t.RoyalOccServ_id?(this.txtTipsReward.string=v.formatStr(GetLanguage(204953),t.RoyalOccServ_id),this.check=!0,this.rewardList.updateAll()):this.txtTipsReward.string=GetLanguage(204952)},h.onBeforeClose=function(){},h.onDestroy=function(){},i}(C));var _=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e.check=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.itemGridNode=p.findChild(this.node,"itemGrid"),this.itemGrid=new l(this.view,this.itemGridNode),this.check=p.findChild(this.node,"check")},n.onRender=function(t,e){this.itemGrid.SetItemId(t[0],t[1]);var i=this.view;this.check.active=i.check;var n=p.findChildComponent(this.node,"check/common_ui_dagou",h);this.view.loadIcon(n,"common","common_ui_dagou")},i}(u);i._RF.pop()}}}));

