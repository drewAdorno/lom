System.register("chunks:///_virtual/StatueDetailView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILabel.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,l,a,r,s,u,v,d;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,l=t.ScrollView,a=t.Sprite},function(t){r=t.UILabel},function(t){s=t.ListItem},function(t){u=t.default},function(t){v=t.default},function(t){d=t.BaseView}],execute:function(){n._RF.push({},"4c261iGi3VGBIWUIh4+gIHL","StatueDetailView",void 0);t("StatueDetailView",function(t){function n(){var e;return(e=t.call(this)||this).nodeCurLevel=void 0,e.nodeMaxLevel=void 0,e.txtCurLevel=void 0,e.txtNextLevel=void 0,e.txtMaxLevel=void 0,e.curList=void 0,e.maxList=void 0,e.name="StatueDetailView",e.url="ui/module/statue/StatueDetailView",e.poolTime=3e3,e}e(n,t);var a=n.prototype;return a.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("content/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()})),this.nodeCurLevel=this.findChild("content/box/levelInfo/curLevel"),this.nodeMaxLevel=this.findChild("content/box/levelInfo/maxLevel"),this.txtCurLevel=u.findChildComponent(this.nodeCurLevel,"txtLevel",r),this.txtNextLevel=u.findChildComponent(this.nodeCurLevel,"txtLevelNext",r),this.txtMaxLevel=u.findChildComponent(this.nodeMaxLevel,"txtLevel",r);var n=u.findChildComponent(this.nodeCurLevel,"ScrollView",l),a=u.findChildComponent(this.nodeMaxLevel,"ScrollView",l);this.curList=this.addUIList(n,c),this.maxList=this.addUIList(a,c)},a.registerUpdateHandler=function(){},a.onAfterOpen=function(){this.onInfoUpdate(this.openArgs[0])},a.onBeforeClose=function(){},a.onDestroy=function(){},a.onInfoUpdate=function(t){var e=t.level>=t.maxLevel;if(e){this.curList.clearData(),this.txtMaxLevel.string=v.formatStrWithMirrorDeal(GetLanguage(300137),t.maxLevel);var i=this.makeMaxLevelProbabilityList(t.maxLevel);this.maxList.datas=i}else{this.maxList.clearData(),this.txtCurLevel.string=v.formatStrWithMirrorDeal(GetLanguage(300138),t.level),this.txtNextLevel.string=String(t.level+1);var n=this.makeLevelProbabilityList(t.level);this.curList.datas=n}this.nodeMaxLevel.active=e,this.nodeCurLevel.active=!e},a.makeLevelProbabilityList=function(t){for(var e,i,n=[],o=(null==(e=configStatue_level.getDataByKey(t))?void 0:e.pro_quality)||[],l=(null==(i=configStatue_level.getDataByKey(t+1))?void 0:i.pro_quality)||[],a=6,r=0;r<9;++r){var s=o[r]||[r+1,0],u=s[0],v=s[1],d=l[r]||[r+1,0],c=d[0],h=d[1];if(c>a&&0==h)break;c>=a&&0!=h&&++a;var L=.001*v,f=.001*h,x=configColor.getDataByKey(u).statue_name;n.push({qualityStr:x,probPercent:L,probPercentNext:f})}return n},a.makeMaxLevelProbabilityList=function(t){for(var e,n,o=[],l=(null==(e=configStatue_level.getDataByKey(t))?void 0:e.pro_quality)||[],a=i(l);!(n=a()).done;){var r=n.value,s=r[0],u=.001*r[1],v=configColor.getDataByKey(s).statue_name;o.push({qualityStr:v,probPercent:u})}return o},n}(d));var c=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).imgLevel=void 0,e.txtProbability=void 0,e.txtProbabilityNext=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.imgLevel=u.findChildComponent(this.node,"imgLevel",a),this.txtProbability=u.findChildComponent(this.node,"txtProbability",r),this.txtProbabilityNext=u.findChildComponent(this.node,"txtProbabilityNext",r)},n.onRender=function(t,e){t&&(this.view.loadIcon(this.imgLevel,"farm_statue","jy_png_"+t.qualityStr),this.txtProbability.string=t.probPercent.toFixed(2)+"%",null!=t.probPercentNext&&(this.txtProbabilityNext.string=t.probPercentNext.toFixed(2)+"%"))},i}(s);n._RF.pop()}}}));

