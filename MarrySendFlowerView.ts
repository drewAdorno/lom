System.register("chunks:///_virtual/MarrySendFlowerView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./BagModel.ts","./MarryControl.ts","./BaseView.ts"],(function(t){"use strict";var i,n,e,o,s,d,r,u,a;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,o=t.EditBox,s=t.Label,d=t.Sprite},null,function(t){r=t.BagModel},function(t){u=t.default},function(t){a=t.BaseView}],execute:function(){n._RF.push({},"fc66d9XNl9Im6bzSoWIZTIU","MarrySendFlowerView",void 0);var h=1106;t("default",function(t){function n(){var i;return(i=t.call(this)||this).player_id=void 0,i.nodeEdit=void 0,i.editBox=void 0,i.icon=void 0,i.useNum=void 0,i.minNum=void 0,i.maxNum=void 0,i.txtAdd=void 0,i.name="MarrySendFlowerView",i.url="ui/module/marry/MarrySendFlowerView",i}i(n,t);var a=n.prototype;return a.onInit=function(){var t=this,i=this.findChild("root/btnClose");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()}));var n=this.findChild("root/btnSend");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.useNum>0&&(IS(u).send_favor_give_flower_c2s(t.player_id,h,t.useNum),t.close())})),this.nodeEdit=this.findChild("root/edit");var r=this.findChild("root/edit/btnAdd");this.addComponentCallbackListener(r,e.EventType.CLICK,(function(){t.changeNum(1)}));var a=this.findChild("root/edit/btnMinus");this.addComponentCallbackListener(a,e.EventType.CLICK,(function(){t.changeNum(-1)}));var l=this.findChild("root/edit/btnAddTen");this.addComponentCallbackListener(l,e.EventType.CLICK,(function(){t.changeNum(10)}));var c=this.findChild("root/edit/btnMinusTen");this.addComponentCallbackListener(c,e.EventType.CLICK,(function(){t.changeNum(-10)})),this.editBox=this.findChildComponent("root/edit/EditBox",o),this.addComponentCallbackListener(this.editBox.node,o.EventType.EDITING_DID_ENDED,(function(){var i=Number(t.editBox.string);(isNaN(i)||i<=t.minNum)&&(i=t.minNum),t.useNum=Math.floor(i),t.changeNum()})),this.txtAdd=this.findChildComponent("root/edit/add/txtAdd",s),this.icon=this.findChildComponent("root/icon",d)},a.changeNum=function(t){null!=t&&(this.useNum=this.useNum+t),this.useNum=Math.min(this.maxNum,Math.max(this.useNum,this.minNum)),this.editBox.string=String(this.useNum),this.trySetTime()},a.trySetTime=function(){var t=configGoods.getDataByKey(h);this.txtAdd.string=(t.effect[0]*this.useNum).toString()},a.registerUpdateHandler=function(){},a.onAfterOpen=function(){this.player_id=this.openArgs[0],this.maxNum=IS(r).getGoodsCountByGoodsGtid(h),this.minNum=this.maxNum<=0?0:1,this.useNum=this.maxNum,this.editBox.string="",this.changeNum();var t=configGoods.getDataByKey(h);this.loadIcon(this.icon,t.icon_group,t.icon)},a.onBeforeClose=function(){},a.onDestroy=function(){},n}(a));n._RF.pop()}}}));

