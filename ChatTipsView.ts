System.register("chunks:///_virtual/ChatTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./FriendControl.ts","./FriendDefine.ts","./ChatDefine.ts","./BasePopupView.ts"],(function(t){"use strict";var e,n,i,o,r,s,a,h,d,c,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.UITransform,o=t.Button,r=t.Vec3},null,function(t){s=t.default},function(t){a=t.FriendDealType,h=t.FriendDefine},function(t){d=t.ChatDefine,c=t.ChatEventDefine},function(t){f=t.BasePopupView}],execute:function(){n._RF.push({},"7d1f6Ywk81KNo0v0p+QX1G+","ChatTipsView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).chatInfo=void 0,e.bgNode=void 0,e.bgUT=void 0,e.arrUT=void 0,e.viewContainerNode=void 0,e.arrNode=void 0,e.targetNode=void 0,e.friendBtn=void 0,e.btnBlack=void 0,e.btnInform=void 0,e.copyBtn=void 0,e.name="ChatTipsView",e.url="ui/module/Chat/ChatTipsView",e}e(n,t);var f=n.prototype;return f.onInit=function(){var t=this;this.viewContainerNode=this.findChild("view"),this.bgNode=this.findChild("view/imgBg"),this.bgUT=this.bgNode.getComponent(i),this.arrNode=this.findChild("view/imgBg/imgArr"),this.arrUT=this.arrNode.getComponent(i),this.btnBlack=this.findChild("view/imgBg/btnContent/btnBlack"),this.addComponentCallbackListener(this.btnBlack,o.EventType.CLICK,(function(){IS(s).reqDealFriend(a.AddBlack,t.chatInfo.role_id),t.close()})),this.btnInform=this.findChild("view/imgBg/btnContent/btnInform"),this.addComponentCallbackListener(this.btnInform,o.EventType.CLICK,(function(){var e="";t.chatInfo.type==d.ChatContentType.Conetnt&&(e=t.chatInfo.content),uiMgr.openView("InformView",{id:t.chatInfo.role_id,name:t.chatInfo.name,evidence:e}),t.close()})),this.friendBtn=this.findChild("view/imgBg/btnContent/addFriend"),this.addComponentCallbackListener(this.friendBtn,o.EventType.CLICK,(function(){IS(s).reqDealFriend(a.AddFriend,t.chatInfo.role_id),t.close()})),this.copyBtn=this.findChild("view/imgBg/btnContent/copyBtn"),this.addComponentCallbackListener(this.copyBtn,o.EventType.CLICK,(function(){t.chatInfo.type==d.ChatContentType.Face?normalEvent.emit(c.SendFace,t.chatInfo.content,d.ChatContentType.Face):normalEvent.emit(c.UpdateCopyContent,t.chatInfo),t.close()}))},f.registerUpdateHandler=function(){this.addEvent(h.roleOthersCheck,this.updateInfo)},f.onAfterOpen=function(){t.prototype.onAfterOpen.call(this),this.chatInfo=this.openArgs[0],this.targetNode=this.openArgs[1],this.bgNode.active=!1,this.chatInfo.is_my?this.updateInfo():IS(s).reqOtherRoleNotice(this.chatInfo.role_id,0,1)},f.onDestroy=function(){},f.updateInfo=function(t){this.bgNode.active=!0,this.chatInfo.is_my?(this.friendBtn.active=!1,this.btnBlack.active=!1,this.btnInform.active=!1,this.arrUT.width=85,this.arrNode.setRotationFromEuler(new r(0,0,90)),this.arrNode.position=new r(8,120,0)):(this.arrNode.setRotationFromEuler(new r(0,180,90)),this.arrNode.position=new r(-10,120,0),this.btnBlack.active=!0,this.btnInform.active=!0,4==t.other_role_info[0].friend_type?(this.friendBtn.active=!1,this.arrUT.width=190):(this.friendBtn.active=!0,this.arrUT.width=245)),this.UpdateAlign()},f.UpdateAlign=function(){var t=this.GetAlignCenter(),e=t.posX,n=t.posY;this.viewContainerNode.setPosition(e,n)},f.GetAlignCenter=function(){var t=this.targetNode.worldPosition,e=this.targetNode.getComponent(i),n=this.node.getComponent(i).convertToNodeSpaceAR(t);return{posX:this.chatInfo.is_my?n.x-e.width/2-this.bgUT.width/2-15:n.x+e.width/2+this.bgUT.width/2+15,posY:n.y-86}},n}(f));n._RF.pop()}}}));

