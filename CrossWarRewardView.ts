System.register("chunks:///_virtual/CrossWarRewardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./index57.ts","./RankControl.ts","./RankDefine.ts","./RankModel.ts","./CrossWarDefine.ts","./CrossWarRankView.ts","./BaseView.ts"],(function(t){"use strict";var n,e,i,o,r,a,s,d,c,h,l,u,f,m,v,I,k;return{setters:[function(t){n=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,o=t.Button,r=t.ScrollView,a=t.Label,s=t.Sprite,d=t.js},function(t){c=t.ItemGrid},function(t){h=t.ListItem},function(t){l=t.default},null,function(t){u=t.default},function(t){f=t.RankDefine},function(t){m=t.RankModel},function(t){v=t.TabName},function(t){I=t.tabToRankid},function(t){k=t.BaseView}],execute:function(){var C;i._RF.push({},"ae8529LFhVM5ZOjBm0igklo","CrossWarRewardView",void 0);var p=((C={})[1]=1,C[2]=2,C[3]=5,C[4]=4,C),y=(t("default",function(t){function i(){var n;return(n=t.call(this)||this).tabBtns=[],n.curIndex=0,n.rewardList=void 0,n.myRewardScroll=void 0,n.txtMyRank=void 0,n.myIcon=void 0,n.name="CrossWarRewardView",n.url="ui/module/crosswar/CrossWarRewardView",n.poolTime=3e3,n}n(i,t);var c=i.prototype;return c.onInit=function(){var t=this,n=this.findChild("btnClose");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.close()}));for(var e=function(n){var e=l.findChild(t.node,d.formatStr("root/bottom/bottomBtn/item%s",n)),i={itemGo:e,normalGo:l.findChild(e,"normal"),normalTxt:l.findChildComponent(e,"normal/Label",a),selectedGo:l.findChild(e,"selected"),selectTxt:l.findChildComponent(e,"selected/Label",a),index:n};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.SetIndex(i.index)})),t.tabBtns[n]=i},i=1;i<=4;i++)e(i);for(var c=1;c<=4;c++){var h=this.tabBtns[c];h.normalTxt.string=GetLanguage(v[c]),h.selectTxt.string=GetLanguage(v[c])}var u=this.findChildComponent("root/rankList",r);this.rewardList=this.addUIList(u,y,!0);var f=this.findChildComponent("root/myRank/rewardScroll",r);this.myRewardScroll=this.addUIList(f,x,!0),this.txtMyRank=this.findChildComponent("root/myRank/rankNum",a),this.myIcon=this.findChildComponent("root/myRank/rankIcon",s)},c.registerUpdateHandler=function(){this.addEvent(f.RankInfoBack,this.refreshRank,this)},c.onAfterOpen=function(){this.SetIndex(this.openArgs[0])},c.refreshRank=function(t){var n,i=IS(m).GetRankInfoByType(I[this.curIndex]),o=0;i&&i.my_info&&(o=i.my_info.rank);var r=configCross_war_rank_reward.getDataByList("type",this.curIndex);if(0==o)n=r[r.length-1];else for(var a,s=e(r);!(a=s()).done;){var d=a.value,c=d.range[0],h=d.range[1];if(o>=c){if(0==h){n=d;break}if(o<=h){n=d;break}}}if(this.myRewardScroll.datas=n.reward,0==o){this.myIcon.node.active=!1,this.txtMyRank.node.active=!0;var l="",u=n.range[0],f=n.range[1];0==f?l=u+"+":u==f&&(l=u),this.txtMyRank.string=l}else o>0&&o<=3?(this.myIcon.node.active=!0,this.txtMyRank.node.active=!1,this.loadIcon(this.myIcon,"common","common_ICON_paiming0"+o)):(this.myIcon.node.active=!1,this.txtMyRank.node.active=!0,this.txtMyRank.string=o+"")},c.onBeforeClose=function(){this.curIndex>0&&(this.tabBtns[this.curIndex].selectedGo.active=!1,this.tabBtns[this.curIndex].normalGo.active=!0),this.curIndex=null},c.onDestroy=function(){},c.SetIndex=function(t){if(this.curIndex!=t){this.curIndex>0&&(this.tabBtns[this.curIndex].selectedGo.active=!1,this.tabBtns[this.curIndex].normalGo.active=!0),this.curIndex=t,this.tabBtns[this.curIndex].normalGo.active=!1,this.tabBtns[this.curIndex].selectedGo.active=!0;var n=new Array;n.push({type:I[this.curIndex],server:2,page:1}),IS(u).reqRankList(n);var e=configCross_war_rank_reward.getDataByList("type",p[this.curIndex]);this.rewardList.datas=e}},i}(k)),function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).rewardScroll=void 0,n.txtRank=void 0,n.rankIcon=void 0,n}n(e,t);var i=e.prototype;return i.onInit=function(){this.txtRank=l.findChildComponent(this.node,"rankNum",a),this.rankIcon=l.findChildComponent(this.node,"rankIcon",s);var t=l.findChildComponent(this.node,"rewardScroll",r);this.rewardScroll=this.view.addUIList(t,x,!1),this.rewardScroll.touchEvent=!1},i.onRender=function(t,n){this.rewardScroll.datas=t.reward;var e=t.range[0],i=t.range[1];if(e==i&&e<=3)this.rankIcon.node.active=!0,this.txtRank.node.active=!1,this.view.loadIcon(this.rankIcon,"common","common_ICON_paiming0"+e);else{this.rankIcon.node.active=!1,this.txtRank.node.active=!0;var o="";o=0==i?e+"+":e==i?e:e+"-"+i,this.txtRank.string=o}},i.onItemClick=function(){},e}(h)),x=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).itemGridNode=void 0,n.itemGrid=void 0,n}n(e,t);var i=e.prototype;return i.onInit=function(){this.itemGridNode=l.findChild(this.node,"itemGrid"),this.itemGrid=new c(this.view,this.itemGridNode)},i.onRender=function(t,n){this.itemGrid.SetItemId(t[0],t[1])},e}(h);i._RF.pop()}}}));

