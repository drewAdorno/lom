System.register("chunks:///_virtual/checkPicView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./BaseView.ts"],(function(i){"use strict";var e,t,n,c,o,l,s,r,h,a;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,n=i.Button,c=i.Sprite,o=i.UITransform,l=i.ScrollView,s=i.Node,r=i.Vec3,h=i.Size},null,function(i){a=i.BaseView}],execute:function(){t._RF.push({},"94dccpzDqxPYqnhe9uGgphJ","checkPicView",void 0);i("default",function(i){function t(){var e;return(e=i.call(this)||this).pic=void 0,e.scrollView=void 0,e.scrollViewRect=void 0,e.contentRect=void 0,e.clickNum=0,e.preClickTime=0,e.sizeState=0,e.clickTimer=void 0,e.name="checkPicView",e.url="ui/module/Chat/checkPicView",e}e(t,i);var a=t.prototype;return a.onInit=function(){var i=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){i.close()}));var t=this.findChild("btnClose");this.addComponentCallbackListener(t,n.EventType.CLICK,(function(){i.close()})),this.pic=this.findChildComponent("ScrollView/view/content/pic",c),this.contentRect=this.findChildComponent("ScrollView/view/content",o),this.addComponentCallbackListener(this.contentRect.node,n.EventType.CLICK,(function(){i.close()})),this.scrollView=this.findChildComponent("ScrollView",l),this.scrollViewRect=this.findChildComponent("ScrollView",o),this.clickNum=0,this.addComponentCallbackListener(this.pic.node,s.EventType.TOUCH_END,(function(e){if(i.clickTimer){i.clickTimer&&(i.removeTimer(i.clickTimer),i.clickTimer=null),i.sizeState=0==i.sizeState?1:0;var t=0==i.sizeState?1:1.5;i.pic.node.scale=new r(t,t,t);var n=i.pic.spriteFrame.width*t,c=i.pic.spriteFrame.height*t,o=i.scrollViewRect.contentSize,l=o.width,s=o.height;if(n>o.width?(i.scrollView.horizontal=!0,l=n):i.scrollView.horizontal=!1,c>o.height?(i.scrollView.vertical=!0,s=c):i.scrollView.vertical=!1,i.contentRect.setContentSize(new h(l,s)),1==i.sizeState)i.contentRect.node.position=r.ZERO;else{var a=o.width/2-l/2,d=l/2-o.height/2,p=o.height/2-s/2,w=s/2-o.height/2,u=i.contentRect.node.position,m=0,C=0;l>o.width&&(m=u.x,u.x<a&&(m=a),u.x>d&&(m=d)),s>o.height&&(C=u.y,u.y<p&&(C=p),u.y>w&&(C=w)),i.contentRect.node.position=new r(m,C,0)}}else i.clickTimer=i.addTimer(.2,1,(function(){i.clickTimer=null}))}))},a.registerUpdateHandler=function(){},a.onAfterOpen=function(){this.clickNum=0,this.sizeState=0;var i=this.openArgs[0];this.pic.spriteFrame=i;var e=this.pic.spriteFrame.width,t=this.pic.spriteFrame.height,n=this.scrollViewRect.contentSize,c=n.width,o=n.height;this.pic.node.scale=new r(1,1,1),e>n.width?(this.scrollView.horizontal=!0,c=e):this.scrollView.horizontal=!1,t>n.height?(this.scrollView.vertical=!0,o=t):this.scrollView.vertical=!1,this.contentRect.setContentSize(new h(c,o)),this.contentRect.node.position=new r(0,n.height/2-o/2,1)},a.onBeforeClose=function(){this.clickTimer&&(this.removeTimer(this.clickTimer),this.clickTimer=null)},a.onDestroy=function(){},t}(a));t._RF.pop()}}}));

