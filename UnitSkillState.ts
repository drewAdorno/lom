System.register("chunks:///_virtual/UnitSkillState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillRunner.ts","./Target.ts","./EnumDefine.ts","./State.ts"],(function(t){"use strict";var n,l,i,r,e,u;return{setters:[function(t){n=t.inheritsLoose},function(t){l=t.cclegacy},function(t){i=t.SkillRunner},function(t){r=t.TargetSkill},function(t){e=t.StateType},function(t){u=t.State}],execute:function(){l._RF.push({},"e3ad2PI8PBDX6X9fLpqzhOQ","UnitSkillState",void 0);t("UnitSkillState",function(t){function l(n,l){var i;return(i=t.call(this,n,l)||this)._skillRunner=void 0,i.type=e.Skill,i}n(l,t);var u=l.prototype;return u.onEnter=function(){var t=this._owner;if(null!=t.curSkill||0==t.data.attack.state){null==t.curSkill&&(t.wantSkill=r.toSkill(t.data.attack),t.applySkill()),t.idle(),null!=t.curTarget&&null!=t.curTarget.unit&&t.lookAt(t.curTarget.unit.position),t.currenSkillRunner&&t.currenSkillRunner.interrupt(),t.statectr.lockCurrenState=!0;var n=new i;n.init(t,t.curSkill.skill),n.start(),null!=t.curSkill.target&&(n.lockTarget=t.curSkill.target),t.skillctr.addRunner(n),t.currenSkillRunner=n,this._skillRunner=n}else this.changeState()},u.onUpdate=function(t){var n=this._skillRunner,l=this._owner;if(null!=n&&!n.isInterrupt||null!=l.wantSkill)return null==l.wantSkill||this._ctr.lockCurrenState?void 0:(null!=n&&n.interrupt(),l.currenSkillRunner=null,l.applySkill(),void this.onEnter());this.changeState()},u.onExit=function(){var t=this._owner;t.applySkill(!0),this._skillRunner&&this._skillRunner.interrupt(),this._skillRunner=null,t.currenSkillRunner=null,t.movectr.startMove()},l}(u));l._RF.pop()}}}));

