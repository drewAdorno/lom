System.register("chunks:///_virtual/GuildDonateView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./BagModel.ts","./MessageView.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,n,e,o,s,d,a,l,r,u,c,h,f,C,g,G;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,o=t.Label,s=t.ScrollView},function(t){d=t.ItemGrid},function(t){a=t.ListItem},function(t){l=t.default},function(t){r=t.default},null,function(t){u=t.ConfigGlobal},function(t){c=t.BagModel},function(t){h=t.default},function(t){f=t.default},function(t){C=t.default},function(t){g=t.GuildEventDefine},function(t){G=t.BaseView}],execute:function(){n._RF.push({},"2b8baWsFDpGtaS00KhTXqh8","GuildDonateView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).btnDes=void 0,i.txtCost=void 0,i.txtNum=void 0,i.rewardScroll=void 0,i.cost=void 0,i.name="GuildDonateView",i.url="ui/module/guild/GuildDonateView",i}i(n,t);var d=n.prototype;return d.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.onCloseClick()}));var n=this.findChild("btnDonate");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){var i=IS(C).GetDonateNum(),n=0,e=0;i>0?(t.txtCost.node.active=!0,i>t.cost.length-1?(e=t.cost[t.cost.length-1][0],n=t.cost[t.cost.length-1][1]):(e=t.cost[i][0],n=t.cost[i][1]),IS(c).getGoodsCountByGoodsGtid(e)<n?h.showFlyTip(GetLanguage(200069)):IS(f).send_29_17()):IS(f).send_29_17()})),this.txtCost=this.findChildComponent("cost",o),this.txtNum=this.findChildComponent("num",o),this.btnDes=this.findChildComponent("btnDonate/Label",o);var d=l.findChildComponent(this.node,"rewardScroll",s);this.rewardScroll=this.addUIList(d,m),this.rewardScroll.lackCenter=!0},d.onCloseClick=function(){this.close()},d.registerUpdateHandler=function(){this.addEvent(g.GUIDE_UPATE_DONATEBTN,this.updateCost,this)},d.updateCost=function(){var t=IS(C).GetDonateNum();this.cost=u.guild_donate_cost,t>0?(this.txtCost.node.active=!0,t>this.cost.length-1?(this.needCost=this.cost[this.cost.length-1][1],this.txtCost.string=this.cost[this.cost.length-1][1]):(this.needCost=this.cost[t][1],this.txtCost.string=this.cost[t][1]),this.btnDes.string=GetLanguage(200331)):(this.txtCost.node.active=!1,this.btnDes.string=GetLanguage(200045)),this.txtNum.string=r.formatStrWithMirrorDeal(GetLanguage(200332),this.cost.length-t)},d.onAfterOpen=function(){this.rewardScroll.datas=u.guild_donate_reward,this.updateCost()},d.onBeforeClose=function(){},d.onDestroy=function(){},n}(G));var m=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).itemGridNode=void 0,i.itemGrid=void 0,i}i(n,t);var e=n.prototype;return e.onInit=function(){this.itemGridNode=l.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode)},e.onRender=function(t,i){this.itemGrid.SetItemId(t[0],t[1])},n}(a);n._RF.pop()}}}));

