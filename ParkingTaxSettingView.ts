System.register("chunks:///_virtual/ParkingTaxSettingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./BaseView.ts","./ConfigGlobal.ts","./MessageView.ts","./ParkingControl.ts","./ParkingDataCache.ts"],(function(t){"use strict";var n,i,e,o,s,l,a,r,c,d,h,m,u,C,f,p,g;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.Button,o=t.HorizontalTextAlignment,s=t.sys,l=t.Label,a=t.ScrollView,r=t.Slider,c=t.UITransform,d=t.js},function(t){h=t.ListItem},function(t){m=t.default},function(t){u=t.BaseView},function(t){C=t.ConfigGlobal},function(t){f=t.default},function(t){p=t.default},function(t){g=t.ParkingDataCache}],execute:function(){i._RF.push({},"0543fBW+EhOT470EAW39BNs","ParkingTaxSettingView",void 0);var v=[200274,201854,201855,201856],S=(t("default",function(t){function i(){var n;return(n=t.call(this)||this).select=void 0,n.normal=void 0,n.imgUp=void 0,n.imgDown=void 0,n.nodePop=void 0,n.txtSelect=void 0,n.conditionScroll=void 0,n.slider=void 0,n.selectNum=void 0,n.line=void 0,n.curNum=void 0,n.maxNum=void 0,n.minNum=void 0,n.minValue=C.park_management_cost[0],n.maxValue=C.park_management_cost[1],n.CurSelCondition=0,n.name="ParkingTaxSettingView",n.url="ui/module/parking/ParkingTaxSettingView",n.poolTime=3e3,n}n(i,t);var h=i.prototype;return h.onInit=function(){var t=this,n=this.findChild("imgMask");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.onMaskClick()}));var i=this.findChild("content/title/btnRule");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){var t=o.LEFT;s.uiMirror&&(t=o.RIGHT),f.showBoxTip({tip:GetLanguage(201356),title:GetLanguage(200048),btnCnt:1,horizontalAlign:t})}));var d=this.findChild("content/btnStart");this.addComponentCallbackListener(d,e.EventType.CLICK,(function(){IS(p).reqTaxSetting({is_open:t.select.active?1:0,protect_ratio:t.curNum,protect_type:t.CurSelCondition})})),this.select=this.findChild("content/Item/toggle/select"),this.normal=this.findChild("content/Item/toggle/normal");var h=this.findChild("content/Item/toggle");this.addComponentCallbackListener(h,e.EventType.CLICK,(function(){t.OnLevy()}));var m=this.findChild("content/Item-001/btnCondition");this.addComponentCallbackListener(m,e.EventType.CLICK,(function(){t.conditionScroll.datas=v,t.imgUp.active=!1,t.imgDown.active=!0,t.nodePop.active=!0})),this.imgUp=this.findChild("content/Item-001/btnCondition/imgUp"),this.imgDown=this.findChild("content/Item-001/btnCondition/imgDown"),this.txtSelect=this.findChildComponent("content/Item-001/btnCondition/txtSelect",l),this.nodePop=this.findChild("content/nodePop"),this.addComponentCallbackListener(this.nodePop,e.EventType.CLICK,(function(){t.OnClosePop()}));var u=this.findChildComponent("content/nodePop/scrollConditionList",a);this.conditionScroll=this.addUIList(u,S),this.conditionScroll.datas=v,this.slider=this.findChildComponent("content/Item-002/select/Slider",r),this.line=this.findChildComponent("content/Item-002/select/Slider/line",c),this.addComponentCallbackListener(this.slider.node,"slide",(function(){t.updateSlide()})),this.selectNum=this.findChildComponent("content/Item-002/select/Slider/Handle/num/Label",l),this.minNum=this.findChildComponent("content/Item-002/select/left",l),this.maxNum=this.findChildComponent("content/Item-002/select/right",l)},h.registerUpdateHandler=function(){},h.onMaskClick=function(){this.close()},h.onAfterOpen=function(){this.maxNum.string=this.maxValue+"%",this.minNum.string=this.minValue+"%";var t=IS(g).protect;this.CurSelCondition=t.protect_type,this.slider.progress=Math.min(Math.max((t.protect_ratio-this.minValue)/(this.maxValue-this.minValue),0),1),this.select.active=1==t.is_open,this.normal.active=1!=t.is_open,this.updateData(),this.refreshBuffInfo()},h.onBeforeClose=function(){},h.onDestroy=function(){},h.refreshBuffInfo=function(){var t,n,i,e=this.findChildComponent("content/content/item1/num",l),o=this.findChildComponent("content/content/item2/num",l),s=this.findChildComponent("content/content/item3/num",l),a=this.findChildComponent("content/content/item4/num",l),r=this.findChildComponent("content/content/item5/num",l),c=this.findChildComponent("content/content/item6/num",l),h=IS(g).getDecGainBuffInfo();h&&(e.string=d.formatStr("+%s%",(null!=(t=h.coin)?t:0)/100),o.string=d.formatStr("+%s%",(null!=(n=h.spec)?n:0)/100),s.string=d.formatStr("+%s%",(null!=(i=h.exp)?i:0)/100));var m,u,C,f=IS(g).getDecGainBattleBuffInfo();f&&(a.string=d.formatStr("+%s%",(null!=(m=f[1001])?m:0)/100),r.string=d.formatStr("+%s%",(null!=(u=f[1024])?u:0)/100),c.string=d.formatStr("+%s%",(null!=(C=f[1002])?C:0)/100))},h.updateSlide=function(){this.curNum=this.minValue+Math.floor((this.maxValue-this.minValue)*this.slider.progress),this.selectNum.string=this.curNum,this.line.width=240*this.slider.progress},h.OnLevy=function(){var t=this.select.active;t=!t,this.select.active=t,this.normal.active=!t},h.OnClosePop=function(){this.txtSelect.string=GetLanguage(v[this.CurSelCondition]),this.nodePop.active=!1,this.imgUp.active=!0,this.imgDown.active=!1},h.updateData=function(){this.updateSlide(),this.OnClosePop()},i}(u)),function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).imgSelect=void 0,n.txtName=void 0,n}n(i,t);var o=i.prototype;return o.onInit=function(){var t=this;this.imgSelect=m.findChild(this.node,"imgSelected"),this.txtName=m.findChildComponent(this.node,"txtName",l),this.view.addComponentCallbackListener(this.node,e.EventType.CLICK,(function(){var n=t.view;n.CurSelCondition=t.index,n.OnClosePop()}))},o.onRender=function(t,n){this.txtName.string=GetLanguage(t);var i=this.view;this.imgSelect.active=i.CurSelCondition==n},i}(h));i._RF.pop()}}}));

