System.register("chunks:///_virtual/WingDungeonBossView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./RoleDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,l,a,r,d,c,f,u,h,v,g,m;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.ScrollView,l=t.sys,a=t.js,r=t.Label,d=t.Sprite},function(t){c=t.V2},function(t){f=t.ListItem},function(t){u=t.default},function(t){h=t.default},null,function(t){v=t.ConfigGlobal},function(t){g=t.RoleDataCache},function(t){m=t.BaseView}],execute:function(){n._RF.push({},"cb057nous9JMJzHO61JkR5t","WingDungeonBossView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).stars=[],i.skills=[],i.attrList=void 0,i.nodeModel=void 0,i.model=void 0,i.name="WingDungeonBossView",i.url="ui/module/wing/WingDungeonBossView",i}i(n,t);var f=n.prototype;return f.onInit=function(){var t=this,i=this.findChild("btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChild("view/btn");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){uiMgr.openView("WingDungeonAttrView",t.openArgs[0])})),this.nodeModel=this.findChild("view/model");for(var n=1;n<=5;n++)this.stars[n]=this.findChild("view/stars/star"+n+"/light");var l=this.findChildComponent("view/scroll",s);this.attrList=this.addUIList(l,p);for(var c=function(i){var e=u.findChild(t.node,a.formatStr("view/skill/item%s",i+1)),n={node:e,frame:u.findChildComponent(e,"frame",d),icon:u.findChildComponent(e,"frame/icon",d),txtLev:u.findChildComponent(e,"lev",r),mask:u.findChild(e,"mask"),skillId:0,skillLev:0};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){if(0!=n.skillId){var t=configSkill_level.getDataByKeys("id",n.skillId,"level",n.skillLev);uiMgr.openView("JobSkillTipsView",h.formatStr.apply(h,[t.desc].concat(t.desc_parm)),n.node)}})),t.skills.push(n)},f=0;f<6;f++)c(f)},f.registerUpdateHandler=function(){},f.onAfterOpen=function(){var t=this.openArgs[0],i=configDark_trial_chapter.getDatas().find((function(i){return i.part_type==t.type&&i.level==t.cur_level})),n=configUnitModel.getDataByKey(i.bossModel);this.model&&this.removeUIEffect(this.model),this.model=this.addUIEffect(n.path,this.nodeModel,-1,new c(0,0),n.scale/100*1.5,(function(t){l.uiMirror&&(t.dir=-1)}));for(var o=1;o<this.stars.length;o++){this.stars[o].active=i.star>=o}for(var s,r=configUnit.getDataByKey(i.monster_refresh1[0][0]),d=[],f=e(v.back_trial_enemy_attribute_show);!(s=f()).done;){var u,h=s.value,g=null!=(u=r[configAttribute.getDataByKey(h).key])?u:0;d.push({id:h,value:g})}this.attrList.datas=d;for(var m=0;m<this.skills.length;m++){var p=this.skills[m],C=r.skills[m];if(C){p.skillId=C,p.skillLev=1,p.icon.node.active=!0;var k=configSkill.getDataByKey(p.skillId);this.loadIcon(p.frame,"icon_skill",a.formatStr("common_ICON_jinengkuang0%s",k.quality)),this.loadIcon(p.icon,"icon_skill",k.icon),p.txtLev.node.active=!0,p.txtLev.string=a.formatStr("Lv.%s",1)}else p.skillId=0,p.skillLev=0,this.loadIcon(p.frame,"icon_skill","common_ICON_jinengwenhao"),p.icon.node.active=!1,p.txtLev.node.active=!1}},f.onBeforeClose=function(){},f.onDestroy=function(){},n}(m));var p=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtName=void 0,i.txtValue=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.txtName=u.findChildComponent(this.node,"txtAttrName",r),this.txtValue=u.findChildComponent(this.node,"txtAttrValue",r)},n.onRender=function(t,i){var e=configAttribute.getDataByKey(t.id);this.txtName.string=e.name,this.txtValue.string=IS(g).getAttrValueShow(t.id,t.value,!0)},e}(f);n._RF.pop()}}}));

