System.register("chunks:///_virtual/EquipConditionListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./ConfigSeason_kv.ts","./ObjectUtil.ts","./ArtifactDataCache.ts","./MessageView.ts","./SeasonDataCache.ts","./SeasonShipModel.ts","./EquipDefine.ts","./EquipModel.ts","./BasePopupView.ts"],(function(t){"use strict";var i,e,s,o,l,h,n,r,a,c,u,d,S,p,f,w,g,v,m,y,N,L;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t.UITransform,o=t.ScrollView,l=t.Vec3,h=t.Label,n=t.Color,r=t.sys},function(t){a=t.SelectedType,c=t.ListItem},function(t){u=t.default},function(t){d=t.default},null,function(t){S=t.ConfigGlobal},function(t){p=t.ConfigSeason_kv},function(t){f=t.default},function(t){w=t.ArtifactDataCache},function(t){g=t.default},function(t){v=t.SeasonDataCache},function(t){m=t.SeasonShipModel},function(t){y=t.EquipEventDefine},function(t){N=t.EquipModel},function(t){L=t.BasePopupView}],execute:function(){e._RF.push({},"9f86dykYRdDpZDxCatg5MjF","EquipConditionListView",void 0);var C=S.high_attr,V=S.batch_auto_open_box,x=f.copyArray(V).reverse(),I=(t("default",function(t){function e(){var i;return(i=t.call(this)||this).scrollView=void 0,i.scrollConditionList=void 0,i.typeStr=void 0,i.utScroll=void 0,i.nodeScroll=void 0,i.selectValue=void 0,i.listIdx=void 0,i.idx=void 0,i.descStr=void 0,i.utNode=void 0,i.utView=void 0,i.name="EquipConditionListView",i.url="ui/module/equip/EquipConditionListView",i}i(e,t);var h=e.prototype;return h.onInit=function(){this.utNode=this.node.getComponent(s),this.scrollView=this.findChildComponent("scrollConditionList",o),this.scrollConditionList=this.addUIList(this.scrollView,I),this.scrollConditionList.selectedMode=a.SINGLE,this.nodeScroll=this.scrollView.node,this.utScroll=this.nodeScroll.getComponent(s),this.utView=this.findChildComponent("scrollConditionList/view",s)},h.registerUpdateHandler=function(){},h.onAfterOpen=function(){t.prototype.onAfterOpen.call(this);var i=this.openArgs[0];this.typeStr=i.typeStr,this.descStr=i.descStr,this.selectValue=i.selectValue;var e=i.onUp||!1;"quality"==this.typeStr?this.showQualityList():"attr"==this.typeStr?this.showAttrList(i.listIdx,i.idx):"multiNum"==this.typeStr?this.showNumList():"delay"==this.typeStr?(this.listIdx=i.listIdx,this.showDelayList()):"artifactattr"==this.typeStr?this.showArtifactAttrList():"artifactquality"==this.typeStr?this.showArtifactQualityList():"shipEquipAttr"==this.typeStr?this.showShipEquipAttrList(i.listIdx,i.idx):"shipEquipQuality"==this.typeStr?this.showShipEquipQualityList():"shipEquipMultiNum"==this.typeStr&&this.showShipEquipNumList();var o=i.targetNode;if(null!=o&&null!=o.parent){var h=o.parent.getComponent(s).convertToWorldSpaceAR(o.position),n=this.utNode.convertToNodeSpaceAR(h),r=o.getComponent(s).height;this.nodeScroll.position=new l(n.x,1==e?n.y+r/2+this.utScroll.height:n.y-r/2,n.z)}},h.showQualityList=function(){for(var t=[],i=1;i<=11;i++)t.push(i);this.scrollConditionList.datas=t,this.utView.width=350.634,this.utView.height=535,this.utScroll.width=369.365,this.utScroll.height=553,this.scrollView.vertical=!1},h.showArtifactQualityList=function(){var t=IS(w).getGenQualityList();this.scrollConditionList.datas=t,this.utView.width=200,this.utView.height=379,this.utScroll.width=200,this.utScroll.height=379,this.scrollView.vertical=!1},h.showAttrList=function(t,i){this.listIdx=t,this.idx=i;var e,s=0==i?1:0,o=IS(N).getAttrConditionByIdx(t,s),l=[];l.push(0);for(var h=0;h<C.length;h++)(e=C[h])!=o&&l.push(e);this.scrollConditionList.datas=l,this.utView.width=246.474,this.utView.height=473,this.utScroll.width=246.474,this.utScroll.height=491,this.scrollView.vertical=!0},h.showNumList=function(){this.scrollConditionList.datas=x,this.utView.width=246.474,this.utView.height=32+47*x.length,this.utScroll.width=246.474,this.utScroll.height=52+47*x.length,this.scrollView.vertical=!1},h.showDelayList=function(){this.scrollConditionList.datas=S.skill_delay,this.utView.width=246.474,this.utView.height=32+47*x.length,this.utScroll.width=246.474,this.utScroll.height=52+47*x.length,this.scrollView.vertical=!0},h.showArtifactAttrList=function(){this.scrollConditionList.datas=[0].concat(S.artifact_gem_attr),this.utView.width=246.474,this.utView.height=473,this.utScroll.width=246.474,this.utScroll.height=491,this.scrollView.vertical=!0},h.showShipEquipAttrList=function(t,i){this.listIdx=t,this.idx=i;var e,s=0==i?1:0,o=IS(m).getAttrConditionByIdx(t,s),l=[];l.push(0);for(var h=p.SEASON_FORGING_ATTR_LIST,n=0;n<h.length;n++)(e=h[n])!=o&&l.push(e);this.scrollConditionList.datas=l,this.utView.width=350.634,this.utView.height=32+47*l.length,this.utScroll.width=369.365,this.utScroll.height=32+47*l.length,this.scrollView.vertical=!1},h.showShipEquipQualityList=function(){for(var t=p.SEASON_FORGING_QUALITY_LIST,i=configSeason_treasure_level.getDataByKey(IS(v).equip_box_level).pro_quality||[],e=3,s=0;s<i.length;s++)if(i[i.length-1-s][1]>0){e=i[i.length-1-s][0];break}t=t.filter((function(t){return t<=e})),this.scrollConditionList.datas=t,this.utView.width=350.634,this.utView.height=32+47*t.length,this.utScroll.width=369.365,this.utScroll.height=32+47*t.length,this.scrollView.vertical=!1},h.showShipEquipNumList=function(){var t=f.copyArray(p.SEASON_FORGING_OPENTIME_LIMIT).reverse();this.scrollConditionList.datas=t,this.utView.width=246.474,this.utView.height=32+47*t.length,this.utScroll.width=246.474,this.utScroll.height=52+47*t.length,this.scrollView.vertical=!1},h.onBeforeClose=function(){normalEvent.emit("CONDITION_LIST_VIEW_CLOSE",{typeStr:this.typeStr,listIdx:this.listIdx,idx:this.idx}),t.prototype.onBeforeClose.call(this)},h.onDestroy=function(){},e}(L)),function(t){function e(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).utNode=void 0,i.txtName=void 0,i.nodeSelect=void 0,i.nodeLock=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){this.utNode=this.node.getComponent(s),this.txtName=u.findChildComponent(this.node,"txtName",h),this.nodeSelect=u.findChild(this.node,"imgSelected"),this.nodeLock=u.findChild(this.node,"imgLock")},o.onRender=function(t,i){var e=this.view;if("quality"==e.typeStr){this.utNode.width=346.252;var s=IS(N).getEquipQualityNameAndColor(t,!0);this.txtName.string=d.formatStrWithMirrorDeal(e.descStr,s.nameStr),this.txtName.color=s.nameColor,this.nodeLock.active=!1,this.nodeSelect.active=t==e.selectValue||!1}else if("attr"==e.typeStr){if(this.utNode.width=223.361,0==t)this.txtName.string=GetLanguage(200263);else{var o=configAttribute.getDataByKey(t);this.txtName.string=null==o?void 0:o.name}this.txtName.color=new n(255,249,229),this.nodeLock.active=!1,this.nodeSelect.active=t==e.selectValue||!1}else if("multiNum"==e.typeStr){this.utNode.width=223.361,this.txtName.string=IS(N).getMultiNumName(t[1]);var l=!IS(N).checkNumUnlock(t[1]);this.nodeLock.active=l,this.nodeSelect.active=t[1]==e.selectValue||!1,this.txtName.color=l?new n(127,124,114):new n(255,249,229)}else if("delay"==e.typeStr)this.utNode.width=223.361,this.nodeLock.active=!1,this.txtName.color=new n(255,249,229),this.nodeSelect.active=t==e.selectValue||!1,this.txtName.string=0==t?GetLanguage(700000307):d.formatStr(GetLanguage(700000308),t/1e3);else if("artifactattr"==e.typeStr){if(this.utNode.width=223.361,0==t)this.txtName.string=GetLanguage(200263);else{var h=configAttribute.getDataByKey(t);this.txtName.string=null==h?void 0:h.name}this.txtName.color=new n(255,249,229),this.nodeLock.active=!1,this.nodeSelect.active=t==e.selectValue||!1}else if("artifactquality"==e.typeStr){this.utNode.width=200;var a=IS(w).getGemQualityNameAndColor(t,!0);this.txtName.string=d.formatStr(r.uiMirror?"##2##1":"##1##2",a.nameStr,e.descStr),this.txtName.color=a.nameColor,this.nodeLock.active=!1,this.nodeSelect.active=t==e.selectValue||!1}else if("shipEquipAttr"==e.typeStr){if(this.utNode.width=346.252,0==t)this.txtName.string=GetLanguage(200263);else{var c=configAttribute.getDataByKey(t);this.txtName.string=null==c?void 0:c.name}this.txtName.color=new n(255,249,229),this.nodeLock.active=!1,this.nodeSelect.active=t==e.selectValue||!1}else if("shipEquipQuality"==e.typeStr){this.utNode.width=346.252;var u=IS(m).getEquipQualityNameAndColor(t,!0);this.txtName.string=d.formatStr(r.uiMirror?"##2##1":"##1##2",u.nameStr,e.descStr),this.txtName.color=u.nameColor,this.nodeLock.active=!1,this.nodeSelect.active=t==e.selectValue||!1}else if("shipEquipMultiNum"==e.typeStr){this.utNode.width=223.361,this.txtName.string=IS(N).getMultiNumName(t[1]);var S=!IS(m).checkNumUnlock(t[1]);this.nodeLock.active=S,this.nodeSelect.active=t[1]==e.selectValue||!1,this.txtName.color=S?new n(127,124,114):new n(255,249,229)}},o.onItemClick=function(){var t=this.view;if("multiNum"!=t.typeStr||IS(N).checkNumUnlock(this.data[1]))if("shipEquipMultiNum"!=t.typeStr||IS(m).checkNumUnlock(this.data[1])){var i=this.data;normalEvent.emit(y.AUTO_OPEN_CONDITION_CHANGE,{typeStr:t.typeStr,listIdx:t.listIdx,idx:t.idx,selectValue:i}),t.close()}else g.showFlyTip(d.formatStrWithMirrorDeal(GetLanguage(204936),this.data[0]));else g.showFlyTip(d.formatStrWithMirrorDeal(GetLanguage(200265),this.data[0]))},e}(c));e._RF.pop()}}}));

