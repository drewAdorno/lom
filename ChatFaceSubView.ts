System.register("chunks:///_virtual/ChatFaceSubView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./TimeUtil.ts","./index57.ts","./ChatDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var i,e,n,a,o,s,c,h,l,r,f;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,a=t.ScrollView,o=t.Sprite},function(t){s=t.ListItem},function(t){c=t.default},function(t){h=t.default},null,function(t){l=t.ChatEventDefine,r=t.ChatDefine},function(t){f=t.BaseSubView}],execute:function(){e._RF.push({},"e6b82JOwcRFCa+CRBfbSCua","ChatFaceSubView",void 0);t("ChatFaceSubView",function(t){function e(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this).closeBtn=void 0,i.scrollList=[],i.arrow=void 0,i.tabType=null,i.list=[],i.tabItemList=[],i.tabShowItemList=[],i.tabListDefine=[{faceNum:20,suffix:"_3",icon:"lt_ui_xiaohuangya",scroll:1,openTime:{year:2024,month:6,day:21,h:0,min:0,s:0},endTime:{year:2024,month:7,day:18,h:23,min:59,s:59}},{faceNum:24,suffix:"_1",icon:"lt_ICON_biaoqing02",scroll:0}],i}i(e,t);var s=e.prototype;return s.onInit=function(){for(var t=this,i=function(i){var e=t.tabListDefine[i],a=t.findChild("tabContent/face"+(i+1));if(e){var s={id:i,selected:t.findChild("tabContent/face"+(i+1)+"/selected"),item:a,line:t.findChild("tabContent/face"+(i+1)+"/line"),icon:t.findChildComponent("tabContent/face"+(i+1)+"/icon",o),info:t.tabListDefine[i]};t.loadIcon(s.icon,"chat",t.tabListDefine[i].icon),t.addComponentCallbackListener(s.item,n.EventType.CLICK,(function(){t.ChangeTab(i)})),t.tabShowItemList.push(s)}else a.active=!1},e=0;e<2;e++)i(e);this.closeBtn=this.findChild("mask"),this.addComponentCallbackListener(this.closeBtn,n.EventType.CLICK,(function(){t.setActive(!1)}));var s=this.findChildComponent("ScrollView",a);this.scrollList[0]=this.addUIList(s,d);var c=this.findChildComponent("ScrollViewBig",a);this.scrollList[1]=this.addUIList(c,d),this.scrollList[1].scrollView},s.registerUpdateHandler=function(){},s.onAfterOpen=function(){this.parentView.facePanelMask.active=!0,this.tabType=null,this.tabItemList=[];for(var t=0;t<this.tabShowItemList.length;t++){var i=this.tabListDefine[t],e=this.tabShowItemList[t];if(i){var n=!0;if(i.openTime){var a=i.openTime,o=h.getLocalTimeToUTC8(a.year,a.month,a.day,a.h,a.min,a.s);n=h.serverTime>=o}if(i.endTime){var s=i.endTime,c=h.getLocalTimeToUTC8(s.year,s.month,s.day,s.h,s.min,s.s);n=n&&h.serverTime<c}e.item.active=n,n&&this.tabItemList.push(e)}}this.ChangeTab(this.tabItemList[0].id)},s.ChangeTab=function(t){this.tabType!=t&&(this.tabType=t,this.RefreshFace())},s.RefreshFace=function(){for(var t,i=0,e=0,n=0;n<this.tabItemList.length;n++){var a=this.tabItemList[n].selected,o=this.tabItemList[n].line,s=this.tabItemList[n].info,c=this.tabItemList[n].id;if(a.active=this.tabType==c,o.active=c>this.tabType&&n!=this.tabItemList.length-1,this.tabType==c){for(var h in this.scrollList){var l=this.scrollList[h];parseInt(h)==s.scroll?(l.scrollView.node.active=!0,t=l):l.scrollView.node.active=!1}e=n,i=s.faceNum}}for(var r=[],f=0;f<i;f++)r.push(f+1+this.tabItemList[e].info.suffix);t.datas=r},s.onBeforeClose=function(){this.parentView.facePanelMask.active=!1},s.onDestroy=function(){},e}(f));var d=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this).btn=void 0,i.icon=void 0,i.poolInfo=void 0,i}i(e,t);var a=e.prototype;return a.onInit=function(){var t=this;this.btn=c.findChild(this.node,""),this.view.addComponentCallbackListener(this.btn,n.EventType.CLICK,(function(){normalEvent.emit(l.SendFace,t.poolInfo,r.ChatContentType.Face)})),this.icon=c.findChildComponent(this.node,"icon",o)},a.onRender=function(t,i){this.poolInfo=t,this.view.loadIcon(this.icon,"icon_chat",t)},e}(s);e._RF.pop()}}}));

