System.register("chunks:///_virtual/FloatADControl.ts",["cc","./TimeUtil.ts","./index57.ts","./ControlMgr.ts","./RoleDataCache.ts","./FloatADDataCache.ts","./MainViewModel.ts","./RoleDefine.ts","./AdDefine.ts","./AdModel.ts","./UIDefine.ts"],(function(e){"use strict";var n,t,o,i,c,r,a,s,l,u,f;return{setters:[function(e){n=e.cclegacy},function(e){t=e.default},null,function(e){o=e.controlMgr},function(e){i=e.RoleDataCache},function(e){c=e.FloatADDataCache},function(e){r=e.MainViewModel},function(e){a=e.RoleEventDefine},function(e){s=e.ADS_TYPE,l=e.AdEventDefine},function(e){u=e.AdModel},function(e){f=e.OpenFunction}],execute:function(){n._RF.push({},"ebd617EHYRP2YFpogM7uCl3","FloatADControl",void 0),e("default",function(){var e=n.prototype;function n(){normalEvent.on(a.ROLE_OPEN_FUNCTION_UPDATE,this.infoCheck),normalEvent.on(a.ROLE_INFO_INIT,n.startCheck),normalEvent.on(l.AD_INFO_UPDATE,this.checkRestartCheck),normalEvent.on(l.AD_WATCH_FINISH,this.onAdWatchFinish),o.addControl(this)}return e.clear=function(){printLog("FouatADControl")},e.onLogin=function(){IS(c).onlineTime=t.serverTime},e.onReconnect=function(){},n.startCheck=function(){IS(i).CheckFuncOpen(f.FUNC_FLOAT_AD)&&(n.checkTimer=normalTimer.start(1,-1,(function(){n.checkShow()})))},e.checkRestartCheck=function(e){e==s.AD_FLOAT&&(n.startCheck(),uiMgr.close("FloatADView"))},e.onAdWatchFinish=function(){IS(c).onlineTime=t.serverTime,IS(r).floatAD(!1),uiMgr.close("FloatADView"),n.startCheck()},e.infoCheck=function(e){e==f.FUNC_FLOAT_AD&&(IS(c).onlineTime=t.serverTime,n.checkShow(),n.startCheck())},n.checkShow=function(){IS(u).getAdInfo(s.AD_FLOAT)&&IS(u).getAdInfo(s.AD_FLOAT).count>=configAds.getDataByKey(s.AD_FLOAT).times?normalTimer.stop(this.checkTimer):t.serverTime-IS(c).onlineTime>=configAds.getDataByKey(s.AD_FLOAT).cd&&(IS(c).onlineTime=t.serverTime,IS(r).floatAD(!0))},n.stopCheck=function(){normalTimer.stop(this.checkTimer)},n}()).checkTimer=void 0,n._RF.pop()}}}));

