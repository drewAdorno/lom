System.register("chunks:///_virtual/ActivitySevenView2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./index57.ts","./PayDataCache.ts","./PayDefine.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivitySevenDataCache.ts","./BagDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,s,a,d,c,o,v,h,r,u,f,l,y,I,p;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,s=t.Button,a=t.js},function(t){d=t.default},null,function(t){c=t.default},function(t){o=t.PayEventDefine,v=t.GiftType},function(t){h=t.default},function(t){r=t.default},function(t){u=t.ActivityEventDefine,f=t.ActivityType,l=t.ActivityState},function(t){y=t.default},function(t){I=t.BagEventDefine},function(t){p=t.BaseView}],execute:function(){n._RF.push({},"29b54X96c9MpZqjAIsoLLDv","ActivitySevenView2",void 0);var A=t("tabType",{boss:1,game:2,task:3,pay:4});t("default",function(t){function n(){var e;return(e=t.call(this)||this).bossRed=void 0,e.payRed=void 0,e.taskRed=void 0,e.gameRed=void 0,e.curIndex=0,e.tabBtns=[],e.taskView=void 0,e.bossView=void 0,e.gameView=void 0,e.name="ActivitySevenView2",e.url="ui/module/activity/ActivitySevenView2",e}e(n,t);var p=n.prototype;return p.onInit=function(){var t=this,e=this.findChild("btnClose");this.addComponentCallbackListener(e,s.EventType.CLICK,(function(){t.close()})),this.taskView=this.addSubView("ActivitySevenTaskView",this.findChild("container/ActivitySevenTaskView")),this.bossView=this.addSubView("ActivitySevenBossView",this.findChild("container/ActivitySevenBossView")),this.gameView=this.addSubView("ActivitySevenGameMainView",this.findChild("container/ActivitySevenGameMainView")),this.bossRed=this.findChild("tab/scrollTab/view/content/item1/red"),this.gameRed=this.findChild("tab/scrollTab/view/content/item2/red"),this.taskRed=this.findChild("tab/scrollTab/view/content/item3/red"),this.payRed=this.findChild("tab/scrollTab/view/content/item4/red");for(var i=function(e){var i=d.findChild(t.node,a.formatStr("tab/scrollTab/view/content/item%s",e)),n={itemGo:i,normalGo:d.findChild(i,"normal"),selectedGo:d.findChild(i,"selected"),index:e};t.addComponentCallbackListener(i,s.EventType.CLICK,(function(){if(n.index==A.game){var e=IS(r).GetActivityInfo(f.SevenGame);if(!e||e.state!=l.Open)return}t.SetIndex(n.index)})),t.tabBtns[e]=n},n=1;n<=4;n++)i(n)},p.registerUpdateHandler=function(){this.addEvent(u.OnActivityInfoTaskUpdate,this.OnActivityInfoTaskUpdate,this),this.addEvent(u.OnActivityInfoUpdate,this.OnActivityInfoUpdate,this),this.addEvent(o.PAY_INFO_UPDATE,this.updatePayRed,this),this.addEvent(I.GOODS_INFO_UPDATE,this.updateBossRed,this),this.addEvent(u.OnActivitySevenInfoUpdate,this.updateTaskRed,this)},p.onAfterOpen=function(){this.updatePayRed(),this.updateTaskRed(),this.updateGameRed(),this.updateBossRed(),IS(h).send_24_104(),this.SetIndex(A.boss)},p.onBeforeClose=function(){this.curIndex>0&&(this.tabBtns[this.curIndex].normalGo.active=!0,this.tabBtns[this.curIndex].selectedGo.active=!1,this.curIndex=0)},p.onDestroy=function(){},p.SetIndex=function(t){this.curIndex!=t&&(this.curIndex>0&&(this.tabBtns[this.curIndex].selectedGo.active=!1,this.tabBtns[this.curIndex].normalGo.active=!0),this.curIndex=t,this.tabBtns[this.curIndex].normalGo.active=!1,this.tabBtns[this.curIndex].selectedGo.active=!0,this.curIndex==A.boss?(this.bossView.setActive(!0),this.taskView.setActive(!1),this.gameView.setActive(!1)):this.curIndex==A.game?(this.bossView.setActive(!1),this.taskView.setActive(!1),this.gameView.setActive(!0)):(this.curIndex==A.task||this.curIndex==A.pay)&&(this.bossView.setActive(!1),this.taskView.setActive(!0,this.curIndex),this.gameView.setActive(!1)))},p.updateTaskRed=function(){for(var t,e,i=((t={})[1]=84,t[2]=85,t[3]=86,t[4]=87,t[5]=88,t[6]=89,t[7]=90,t),n=1;n<=7;n++)e=IS(r).GetTaskRedNum(i[n])>0||e;this.taskRed.active=e||IS(y).canGetLastReward2()},p.updatePayRed=function(){for(var t,e=((t={})[1]=84,t[2]=85,t[3]=86,t[4]=87,t[5]=88,t[6]=89,t[7]=90,t),n=!1,s=1;s<=7;s++){var a=IS(r).GetActivityInfo(e[s]);if(a)for(var d,o=IS(c).GetAcivityGift(v.Activity,a.type,a.round),h=i(o);!(d=h()).done;){var u=d.value;if(0==u.price){var f=IS(c).GetPayGiftInfo(u.id);if(!f||2!=f.rewardState){n=!0;break}}}}this.payRed.active=n},p.updateBossRed=function(){this.bossRed.active=IS(y).getBossRed()},p.updateGameRed=function(){this.gameRed.active=IS(r).GetTaskRedNum(f.SevenGame)>0},p.OnActivityInfoTaskUpdate=function(){this.updateTaskRed(),this.updateGameRed()},p.OnActivityInfoUpdate=function(){if(this.updateTaskRed(),this.updateGameRed(),this.curIndex==A.game){var t=IS(r).GetActivityInfo(f.SevenGame);t&&t.state==l.Open||this.SetIndex(A.task)}},n}(p));n._RF.pop()}}}));

