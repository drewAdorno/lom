System.register("chunks:///_virtual/ParkingCrossRewardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./index57.ts","./RankControl.ts","./RankDefine.ts","./RankModel.ts","./ParkingDefine.ts","./BaseView.ts"],(function(t){"use strict";var n,i,e,o,r,a,s,d,c,l,h,f,u,m,v,k;return{setters:[function(t){n=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,o=t.Button,r=t.ScrollView,a=t.Label,s=t.Sprite,d=t.js},function(t){c=t.ItemGrid},function(t){l=t.ListItem},function(t){h=t.default},null,function(t){f=t.default},function(t){u=t.RankDefine},function(t){m=t.RankModel},function(t){v=t.tabToRankid},function(t){k=t.BaseView}],execute:function(){var I;e._RF.push({},"cb0f4QRSGhEN4T2Jbx9WzKE","ParkingCrossRewardView",void 0);var p=((I={})[1]=1,I[2]=2,I[3]=3,I),y=(t("default",function(t){function e(){var n;return(n=t.call(this)||this).tabBtns={},n.curIndex=0,n.rewardList=void 0,n.myRewardScroll=void 0,n.txtMyRank=void 0,n.myIcon=void 0,n.name="ParkingCrossRewardView",n.url="ui/module/parking/ParkingCrossRewardView",n.poolTime=3e3,n}n(e,t);var c=e.prototype;return c.onInit=function(){var t=this,n=this.findChild("btnClose");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.close()}));for(var i=function(n){var i=h.findChild(t.node,d.formatStr("root/bottom/bottomBtn/item%s",n)),e={itemGo:i,normalGo:h.findChild(i,"normal"),normalTxt:h.findChildComponent(i,"normal/Label",a),selectedGo:h.findChild(i,"selected"),selectTxt:h.findChildComponent(i,"selected/Label",a),index:n};t.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.SetIndex(e.index)})),t.tabBtns[n]=e},e=1;e<=3;e++)i(e);var c=this.findChildComponent("root/rankList",r);this.rewardList=this.addUIList(c,y,!0);var l=this.findChildComponent("root/myRank/rewardScroll",r);this.myRewardScroll=this.addUIList(l,C,!0),this.txtMyRank=this.findChildComponent("root/myRank/rankNum",a),this.myIcon=this.findChildComponent("root/myRank/rankIcon",s)},c.registerUpdateHandler=function(){this.addEvent(u.RankInfoBack,this.refreshRank,this)},c.onAfterOpen=function(){var t,n=null!=(t=this.openArgs[0])?t:1;this.SetIndex(n)},c.refreshRank=function(t){var n,e=IS(m).GetRankInfoByType(v[this.curIndex]),o=0;e&&e.my_info&&(o=e.my_info.rank);var r=configPark_cross_reward.getDataByList("type",this.curIndex);if(0==o)n=r[r.length-1];else for(var a,s=i(r);!(a=s()).done;){var d=a.value,c=d.rank[0],l=d.rank[1];if(o>=c){if(0==l){n=d;break}if(o<=l){n=d;break}}}if(this.myRewardScroll.datas=n.reward,0==o){this.myIcon.node.active=!1,this.txtMyRank.node.active=!0;var h=n.rank[0],f=n.rank[1],u=f+"+";0==f?u=h+"+":h==f&&(u=h),this.txtMyRank.string=u}else o>0&&o<=3?(this.myIcon.node.active=!0,this.txtMyRank.node.active=!1,this.loadIcon(this.myIcon,"common","common_ICON_paiming0"+o)):(this.myIcon.node.active=!1,this.txtMyRank.node.active=!0,this.txtMyRank.string=o+"")},c.onBeforeClose=function(){this.curIndex>0&&(this.tabBtns[this.curIndex].selectedGo.active=!1,this.tabBtns[this.curIndex].normalGo.active=!0),this.curIndex=null},c.onDestroy=function(){},c.SetIndex=function(t){if(this.curIndex!=t){for(var n in this.tabBtns){var i=this.tabBtns[n];i.selectedGo.active=Number(n)==t,i.normalGo.active=Number(n)!=t}this.curIndex=t;var e=new Array;e.push({type:v[this.curIndex],server:2,page:1}),IS(f).reqRankList(e);var o=configPark_cross_reward.getDataByList("type",p[this.curIndex]);this.rewardList.datas=o}},e}(k)),function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).rewardScroll=void 0,n.txtRank=void 0,n.rankIcon=void 0,n}n(i,t);var e=i.prototype;return e.onInit=function(){this.txtRank=h.findChildComponent(this.node,"rankNum",a),this.rankIcon=h.findChildComponent(this.node,"rankIcon",s);var t=h.findChildComponent(this.node,"rewardScroll",r);this.rewardScroll=this.view.addUIList(t,C),this.rewardScroll.virtual=!1},e.onRender=function(t,n){this.rewardScroll.datas=t.reward;var i=t.rank[0],e=t.rank[1];if(i==e&&i<=3)this.rankIcon.node.active=!0,this.txtRank.node.active=!1,this.view.loadIcon(this.rankIcon,"common","common_ICON_paiming0"+i);else{this.rankIcon.node.active=!1,this.txtRank.node.active=!0;var o="";o=0==e?i+"+":i==e?i:i+"-"+e,this.txtRank.string=o}},e.onItemClick=function(){},i}(l)),C=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).itemGridNode=void 0,n.itemGrid=void 0,n}n(i,t);var e=i.prototype;return e.onInit=function(){this.itemGridNode=h.findChild(this.node,"itemGrid"),this.itemGrid=new c(this.view,this.itemGridNode)},e.onRender=function(t,n){this.itemGrid.SetItemId(t[0],t[1])},i}(l);e._RF.pop()}}}));

