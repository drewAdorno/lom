System.register("chunks:///_virtual/UnitGroupCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Target.ts","./EnumDefine.ts","./V2.ts"],(function(t){"use strict";var e,n,i,o,s,r;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){i=t.TargetUnit},function(t){o=t.UnityType,s=t.StateType},function(t){r=t.V2}],execute:function(){n._RF.push({},"96577udXAFP1JhCHjUoUoQJ","UnitGroupCtr",void 0);var a={1:{1:new r(220,0),3:new r(240,60),2:new r(210,-60),6:new r(160,60),4:new r(140,0),5:new r(130,-60),7:new r(300,160)},2:{1:new r(180,0),3:new r(240,60),2:new r(210,-60),6:new r(180,60),4:new r(100,60),5:new r(130,-60),7:new r(300,160)}};t("UnitGroupCtr",function(){function t(t){void 0===t&&(t=1),this.playerData=void 0,this.units=void 0,this.player=void 0,this.offsetY=0,this.offsetX=0,this.type=0,this.idleType=1,this.units=[],this.idleType=t}var n=t.prototype;return n.onUpdate=function(t){},n.positionSelected=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=0),null!=this.player)for(var s=this.units,u=new r,l=a[this.idleType],f=0;f<s.length;++f){u.set(t,0);var c=l[s[f].data.idleIndex];0==this.type?u.add2f(c.x+this.offsetX,c.y+this.offsetY):u.add2f(-(c.x+this.offsetX),c.y+this.offsetY),1&n&&s[f]==this.player||(2&n&&s[f].config.type==o.Partner||4&n&&s[f].config.type==o.FlyPet||(e?(s[f].nextPoint=null,s[f].curTarget=null,s[f].wantTarget=null,s[f].position=u):s[f].wantTarget=i.toPos(u,i.TP_ManualPoint),s[f].battleMain.hitThrowDis&&(s[f].movectr.limitRangle=new r(this.offsetX,u.x))))}},n.isIdle=function(){for(var t,n=this.units,i=0,o=e(n);!(t=o()).done;){var r=t.value;r.isDead?i++:r.statectr.currentStateType==s.Idle&&i++}return i>=n.length},n.clear=function(){this.player=null,this.units.length=0},t}());n._RF.pop()}}}));

