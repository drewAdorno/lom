System.register("chunks:///_virtual/SeasonShipEquipAutoOpenView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./BaseView.ts","./EquipDefine.ts","./EquipModel.ts","./SeasonDefine.ts","./SeasonShipModel.ts"],(function(t){"use strict";var i,n,e,o,s,d,u,a,l,c,r,h,p;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,o=t.Label,s=t.sys,d=t.js},function(t){u=t.default},function(t){a=t.default},function(t){l=t.BaseView},function(t){c=t.EquipEventDefine},function(t){r=t.EquipModel},function(t){h=t.SeasonShipEventDefind},function(t){p=t.SeasonShipModel}],execute:function(){n._RF.push({},"4b86dDpvYtCsLjpWDlPXx0U","SeasonShipEquipAutoOpenView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).qualityItem=void 0,i.attrConditionItems=void 0,i.selectNumItem=void 0,i.name="SeasonShipEquipAutoOpenView",i.url="ui/module/season/SeasonShipEquipAutoOpenView",i}i(n,t);var l=n.prototype;return l.onInit=function(){var t=this;this.attrConditionItems=[];var i=this.findChild("imgMask");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()}));var n=this.findChild("content/btnStart");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.onStartClick()})),this.qualityItem={node:this.findChild("content/conditions/btnQuality"),txtCondition:this.findChildComponent("content/conditions/btnQuality/txtSelect",o),nodeUp:this.findChild("content/conditions/btnQuality/imgUp"),nodeDown:this.findChild("content/conditions/btnQuality/imgDown")},this.addComponentCallbackListener(this.qualityItem.node,e.EventType.CLICK,(function(){t.onQualityClick()}));for(var s=function(i){t.attrConditionItems[i]=[];for(var n=function(n){var s=t.findChild(d.formatStr("content/conditions/btnCondition%s%s",i+1,n+1));t.addComponentCallbackListener(s,e.EventType.CLICK,(function(){t.onAttrClick(i,n)})),t.attrConditionItems[i][n]={node:s,txtCondition:u.findChildComponent(s,"txtSelect",o),nodeUp:u.findChild(s,"imgUp"),nodeDown:u.findChild(s,"imgDown")}},s=0;s<2;s++)n(s)},a=0;a<1;a++)s(a);this.selectNumItem={node:this.findChild("content/conditions/btnMultiNum"),txtCondition:this.findChildComponent("content/conditions/btnMultiNum/txtSelect",o),nodeUp:this.findChild("content/conditions/btnMultiNum/imgUp"),nodeDown:this.findChild("content/conditions/btnMultiNum/imgDown")},this.addComponentCallbackListener(this.selectNumItem.node,e.EventType.CLICK,(function(){t.onSelectNumClick()}))},l.registerUpdateHandler=function(){this.addEvent(c.AUTO_OPEN_CONDITION_CHANGE,this.onConditionChange,this),this.addEvent(c.CONDITION_LIST_VIEW_CLOSE,this.onConditionListViewClose,this)},l.onAfterOpen=function(){IS(p).can_Send_server=!0,IS(p).setAutoOpen(!1),IS(p).tryLoadLocalInfo(),this.updateQualityConditionShow(),this.updateAttrConditionShow(),this.updateSelectNumShow(),this.qualityItem.nodeDown.active=!0,this.qualityItem.nodeUp.active=!1;for(var t=0;t<1;t++)for(var i=0;i<2;i++)this.attrConditionItems[t][i].nodeDown.active=!0,this.attrConditionItems[t][i].nodeUp.active=!1},l.updateQualityConditionShow=function(){var t=IS(p).getQualityCondition();t<=0&&(t=1);var i=IS(p).getEquipQualityNameAndColor(t,!0);this.qualityItem.txtCondition.string=(s.uiMirror?a:d).formatStr(GetLanguage(200262),i.nameStr),this.qualityItem.txtCondition.color=i.nameColor},l.updateAttrConditionShow=function(){for(var t=0;t<1;t++)for(var i=0;i<2;i++)this.updateSingleConditionShow(t,i)},l.updateSingleConditionShow=function(t,i){var n,e=IS(p).getAttrConditionByIdx(t,i);if(0==e)n=GetLanguage(200263);else{var o=configAttribute.getDataByKey(e);n=null==o?void 0:o.name}this.attrConditionItems[t][i].txtCondition.string=n,this.attrConditionItems[t][i].nodeUp.active=!0,this.attrConditionItems[t][i].nodeDown.active=!1},l.updateSelectNumShow=function(){var t=IS(p).getSelectAutoMultiNum()||1;this.selectNumItem.txtCondition.string=IS(r).getMultiNumName(t)},l.onBeforeClose=function(){},l.onDestroy=function(){},l.onConditionChange=function(t){"shipEquipQuality"==t.typeStr?(IS(p).setQualityCodition(t.selectValue),this.updateQualityConditionShow()):"shipEquipAttr"==t.typeStr?(IS(p).setAttrConditionDetail(t.listIdx,t.idx,t.selectValue),this.updateSingleConditionShow(t.listIdx,t.idx)):"shipEquipMultiNum"==t.typeStr&&(IS(p).setSelectAutoMultiNum(t.selectValue[1]),this.updateSelectNumShow())},l.onConditionListViewClose=function(t){"shipEquipQuality"==t.typeStr?(this.qualityItem.nodeUp.active=!1,this.qualityItem.nodeDown.active=!0):"shipEquipAttr"==t.typeStr?(this.attrConditionItems[t.listIdx][t.idx].nodeUp.active=!1,this.attrConditionItems[t.listIdx][t.idx].nodeDown.active=!0):"shipEquipMultiNum"==t.typeStr&&(this.selectNumItem.nodeUp.active=!1,this.selectNumItem.nodeDown.active=!0)},l.onStartClick=function(){IS(p).setAutoOpen(!0),normalEvent.emit(h.TYPE_SHIP_EQUIP_BUILD_START),this.close()},l.onQualityClick=function(){var t={typeStr:"shipEquipQuality",targetNode:this.qualityItem.node,descStr:GetLanguage(200264),selectValue:IS(p).getQualityCondition()};this.qualityItem.nodeDown.active=!1,this.qualityItem.nodeUp.active=!0,uiMgr.openView("EquipConditionListView",t)},l.onAttrClick=function(t,i){var n={typeStr:"shipEquipAttr",listIdx:t,idx:i,targetNode:this.attrConditionItems[t][i].node,selectValue:IS(p).getAttrConditionByIdx(t,i)};this.attrConditionItems[t][i].nodeDown.active=!1,this.attrConditionItems[t][i].nodeUp.active=!0,uiMgr.openView("EquipConditionListView",n)},l.onSelectNumClick=function(){var t={typeStr:"shipEquipMultiNum",targetNode:this.selectNumItem.node,descStr:"",selectValue:IS(p).getSelectAutoMultiNum()};this.selectNumItem.nodeDown.active=!1,this.selectNumItem.nodeUp.active=!0,uiMgr.openView("EquipConditionListView",t)},n}(l));n._RF.pop()}}}));

