System.register("chunks:///_virtual/BuffAddBuffToTarget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./Buff.ts","./EnumDefine.ts"],(function(t){"use strict";var e,r,n,f,o,i,u;return{setters:[function(t){e=t.inheritsLoose,r=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){f=t.ObjectPool},function(t){o=t.Buff},function(t){i=t.TargetFilter,u=t.SpBuffState}],execute:function(){n._RF.push({},"bb10ddyoWVKZoAMlbPG92Rf","BuffAddBuffToTarget",void 0);var a=t("BuffAddBuffToTarget",function(t){function n(){for(var e,r=arguments.length,n=new Array(r),f=0;f<r;f++)n[f]=arguments[f];return(e=t.call.apply(t,[this].concat(n))||this)._targettype=void 0,e._buffid=void 0,e._targetcount=void 0,e.buffList=[],e}e(n,t);var f=n.prototype;return f.onBegin=function(){this._targettype==i.CastPartner&&this.owner.data.AddBuffState(u.PetAddBuff,1),this._CheckTargets()},f._CheckTargets=function(){var t=this.runner.getTargets(this._targettype,100,this.owner.position,this._targetcount),e=this.runner;e.useSkill.config;if(t.length>0){this.buffList.length=0;for(var n,f=r(t);!(n=f()).done;){var o=n.value,i=e.addBuff(o,this._buffid,-1,this.skillPar);null!=i&&this.buffList.push(i)}}},f.checkTarget=function(t){t==this._targettype&&this._CheckTargets()},f.onDestroy=function(){this._targettype==i.CastPartner&&this.owner.data.AddBuffState(u.PetAddBuff,-1);for(var t,e=r(this.buffList);!(t=e()).done;){var f=t.value;null!=f&&f.runner==this.runner&&f.stop()}this.buffList.length=0,n._pool.free(this)},n.alloc=function(t){var e=n._pool.alloc();return e.config=t,e._targettype=t.param1,e._buffid=t.param2,e._targetcount=t.param3,e},n}(o));a._pool=new f(a,30),n._RF.pop()}}}));

