System.register("chunks:///_virtual/ActivityFlappyFrogView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StorageUtil.ts","./TimeUtil.ts","./index57.ts","./RoleDataCache.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivityFrogControl.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,a,s,d,r,c,h,f,l,u,p,v,m,g,y,T,C,w,I;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Label,a=t.ScrollView,s=t.js},function(t){d=t.audioMgr},function(t){r=t.ItemGrid},function(t){c=t.SelectedType,h=t.ListItem},function(t){f=t.default},function(t){l=t.default},function(t){u=t.default},null,function(t){p=t.RoleDataCache},function(t){v=t.default},function(t){m=t.default},function(t){g=t.ActivityType,y=t.ActivityEventDefine,T=t.ActivityState,C=t.ActivityTaskState},function(t){w=t.default},function(t){I=t.BaseView}],execute:function(){i._RF.push({},"233f7eYVGdANZnrkCNDoid9","ActivityFlappyFrogView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).txtTimeDesc=void 0,e.txtLeftTime=void 0,e.txtDesc=void 0,e.leftTime=0,e.deltaTime=0,e.canUpdate=!1,e.actType=void 0,e.txtTopScore=void 0,e.rewardList=void 0,e.received=void 0,e.undone=void 0,e.btnGet=void 0,e.curRewardInfo=void 0,e.name="ActivityFlappyFrogView",e.url="ui/module/activityFrog/ActivityFlappyFrogView",e.fullScreen=!0,e.actType=g.FrogFlappy,e}e(i,t);var r=i.prototype;return r.onInit=function(){var t=this,e=this.findChild("bottom/btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("content/btnStart");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){uiMgr.openView("ActivityFlappyFrogGameView")}));var s=this.findChild("bottom/btnGuide");this.addComponentCallbackListener(s,n.EventType.CLICK,(function(){uiMgr.openView("ActivityFrogGameGuideView",2)}));var d=this.findChild("bottom/btnRank");this.addComponentCallbackListener(d,n.EventType.CLICK,(function(){uiMgr.openView("ActivityFlappyFrogRankView")})),this.txtTimeDesc=this.findChildComponent("top/nodeTime/txtDesc",o),this.txtLeftTime=this.findChildComponent("top/nodeTime/txtTime",o),this.txtDesc=this.findChildComponent("content/nodeReward/txtDesc",o),this.txtTopScore=this.findChildComponent("content/nodeScore/txtTopScore",o);var r=this.findChildComponent("content/nodeReward/ScrollView",a);this.rewardList=this.addUIList(r,G,!0),this.rewardList.selectedMode=c.SINGLE,this.rewardList.lackCenter=!0,this.received=this.findChild("content/nodeReward/received"),this.undone=this.findChild("content/nodeReward/undone"),this.btnGet=this.findChild("content/nodeReward/btnGet"),this.addComponentCallbackListener(this.btnGet,n.EventType.CLICK,(function(){t.curRewardInfo&&IS(v).send_24_15(g.FrogFlappy,t.curRewardInfo.task_id,t.curRewardInfo.group_id)}))},r.registerUpdateHandler=function(){this.addEvent(y.OnFlappyFrogGameStart,this.GameStart,this),this.addEvent(y.OnActivityInfoUpdate,this.updateTimeInfo,this),this.addEvent(y.OnActivityInfoTaskUpdate,this.OnTaskUpdate,this),this.addEvent(y.OnFlappyFrogInfoUpdate,this.updateInfo,this)},r.onAfterOpen=function(){""==l.get("flappyfrog"+IS(p).GetRoleId())&&(this.addTimer(1,0,(function(){uiMgr.openView("ActivityFrogGameGuideView",2)})),l.set("flappyfrog"+IS(p).GetRoleId(),"1")),IS(v).send_24_14(g.FrogFlappy),IS(w).send_24_130(),this.updateTimeInfo(),d.playMusic("bgm_beishangwa")},r.onBeforeClose=function(){this.canUpdate=!1,d.playMusic("battle")},r.onDestroy=function(){},r.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=s.formatStr("%s",u.formatTimeStringForSecond(this.leftTime)):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},r.GameStart=function(){uiMgr.openView("ActivityFlappyFrogGameView")},r.updateTimeInfo=function(t){if(t||(t=IS(m).GetActivityInfo(g.FrogFlappy)),t){var e,i=null!=(e=t.state_time[t.state])?e:t.state_time[T.Open];if(this.leftTime=i.end_time-u.serverTime,this.leftTime>0){var n="";t.state==T.Preview?n=GetLanguage(200763):t.state==T.Open?n=GetLanguage(200764):t.state==T.EndShow&&(n=GetLanguage(200765)),this.txtTimeDesc.string=n,this.canUpdate=!0,this.txtLeftTime.string=s.formatStr("%s",u.formatTimeStringForSecond(this.leftTime))}else this.txtLeftTime.string=GetLanguage(200026)}},r.updateInfo=function(t){this.txtTopScore.string=t.toString()},r.OnTaskUpdate=function(){var t=IS(m).GetActivityInfo(g.FrogFlappy),e=[];for(var i in t.task_list)t.task_list.hasOwnProperty(i)&&e.push(t.task_list[i]);this.curRewardInfo=e[0],this.txtDesc.string=configActivity_task.getDataByKey(e[0].task_id).desc,this.curRewardInfo.state==C.CanGet?(this.received.active=!1,this.undone.active=!1,this.btnGet.active=!0):this.curRewardInfo.state==C.HadGet?(this.received.active=!0,this.undone.active=!1,this.btnGet.active=!1):(this.received.active=!1,this.undone.active=!0,this.btnGet.active=!1),this.rewardList.datas=this.curRewardInfo.cfg.reward},i}(I));var G=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.itemGridNode=f.findChild(this.node,"itemGrid"),this.itemGrid=new r(this.view,this.itemGridNode)},n.onRender=function(t,e){this.itemGrid.SetItemId(t[0],t[1])},i}(h);i._RF.pop()}}}));

