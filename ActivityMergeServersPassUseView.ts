System.register("chunks:///_virtual/ActivityMergeServersPassUseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./index57.ts","./BagControl.ts","./BagModel.ts","./MessageView.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,s,o,a,u,d,h,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,s=t.Label,o=t.EditBox},function(t){a=t.ItemGrid},null,function(t){u=t.default},function(t){d=t.BagModel},function(t){h=t.default},function(t){r=t.BaseView}],execute:function(){i._RF.push({},"ac741KDOMpMwqMb4Zwb/5pI","ActivityMergeServersPassUseView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).editBox=void 0,e.item=void 0,e.txtName=void 0,e.useNum=1,e.itemId=void 0,e.maxNum=void 0,e.callBack=void 0,e.name="ActivityMergeServersPassUseView",e.url="ui/module/activityMergeServers/ActivityMergeServersPassUseView",e}e(i,t);var r=i.prototype;return r.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var u=this.findChild("view/btnUse");this.addComponentCallbackListener(u,n.EventType.CLICK,(function(){t.UseClick()}));var d=this.findChild("view/btnAdd");this.addComponentCallbackListener(d,n.EventType.CLICK,(function(){t.changeNum(1)}));var h=this.findChild("view/btnMinus");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){t.changeNum(-1)}));var r=this.findChild("view/btnAddTen");this.addComponentCallbackListener(r,n.EventType.CLICK,(function(){t.changeNum(10)}));var c=this.findChild("view/btnMinusTen");this.addComponentCallbackListener(c,n.EventType.CLICK,(function(){t.changeNum(-10)})),this.item=new a(this,this.findChild("view/item")),this.txtName=this.findChildComponent("view/item/txtName",s),this.editBox=this.findChildComponent("view/EditBox",o),this.addComponentCallbackListener(this.editBox.node,o.EventType.EDITING_DID_ENDED,(function(){var e=Number(t.editBox.string);(isNaN(e)||e<=1)&&(e=1),t.useNum=Math.floor(e),t.changeNum()}))},r.registerUpdateHandler=function(){},r.onAfterOpen=function(){var t;this.itemId=this.openArgs[0],this.maxNum=null!=(t=this.openArgs[1])?t:IS(d).getGoodsCountByGoodsGtid(this.itemId),this.callBack=this.openArgs[2],this.useNum=this.openArgs[3]||1;var e=configGoods.getDataByKey(this.itemId);e.quality;this.txtName.string=e.name,this.item.SetItemId(this.itemId),this.changeNum()},r.onBeforeClose=function(){},r.onDestroy=function(){},r.UseClick=function(){0!=this.useNum&&(IS(d).getGoodsCountByGoodsGtid(this.itemId)<this.useNum?h.showFlyTip(GetLanguage(200069)):(this.callBack?this.callBack(this.itemId,this.useNum):IS(u).reqUseGoods(this.itemId,this.useNum),this.close()))},r.changeNum=function(t){null!=t&&(this.useNum=this.useNum+t),this.useNum=Math.min(this.maxNum,Math.max(this.useNum,1)),this.editBox.string=String(this.useNum)},i}(r));i._RF.pop()}}}));

