System.register("chunks:///_virtual/GameClubModel.ts",["cc","./RedPointMgr.ts","./GameSetting.ts","./RoleDataCache.ts","./RoleDefine.ts","./SdkControl.ts","./LoginDefine.ts","./GameClubControl.ts","./GameClubDefine.ts"],(function(e){"use strict";var t,a,i,n,c,l,s,r,h,u,o;return{setters:[function(e){t=e.cclegacy},function(e){a=e.RedPointMgr},function(e){i=e.GameSettingKey,n=e.default},function(e){c=e.RoleDataCache},function(e){l=e.PlayerAttr,s=e.RoleEventDefine},function(e){r=e.default},function(e){h=e.LoginEventDefine},function(e){u=e.default},function(e){o=e.GameClubDefine}],execute:function(){t._RF.push({},"132b2vUyTNHsZpMKuFAgd2h","GameClubModel",void 0);e("GameClubModel",function(){var e=t.prototype;function t(){this.cache_list=void 0,this.cache_award_list={},this.cache_task_list={},this.cache_red_list={},this.xcxOpenTag=!1,this.cache_red_key={1:i.GAMECLUMB_RED_1,2:i.GAMECLUMB_RED_2,3:i.GAMECLUMB_RED_3,4:i.GAMECLUMB_RED_4,5:i.GAMECLUMB_RED_5,6:i.GAMECLUMB_RED_6},normalEvent.on(h.LOGIN_SUCCESS,this.onLoginCallback,this),normalEvent.on(h.RECONNECT_NET_LINK,this.onReConnectNetLink,this)}return e.clear=function(){},e.onLoginCallback=function(){IS(c).GetRoleAttr(l.ROLE_ATTR_LVL)>=15&&IS(r).getGameClubData(),IS(u).reqGameClubRed(),IS(u).reqGameClubInfo()},e.onReConnectNetLink=function(){IS(c).GetRoleAttr(l.ROLE_ATTR_LVL)>=15&&IS(r).getGameClubData(),IS(u).reqGameClubRed(),IS(u).reqGameClubInfo()},e.updateGameClubInfo=function(e){if(null!=e)for(var t=0;t<e.length;t++){var a=e[t].type+"_"+e[t].config_id;this.cache_award_list[a]=e[t]}this.GetXcxRed(),this.GetRed(),normalEvent.emit(s.ROLE_Menu_Red)},e.GetGameClubInfoByConfigId=function(e,t){var a=e+"_"+t;if(null!=this.cache_award_list[a])return this.cache_award_list[a]},e.updateGameClubTaskInfo=function(e){if(null!=e)for(var t=0;t<e.length;t++)this.cache_task_list[e[t].k]=e[t]},e.updateGameClubRedInfo=function(e){for(var t=0;t<e.length;t++)this.cache_red_list[e[t].k]=e[t];this.GetRed(),this.GetXcxRed(),normalEvent.emit(s.ROLE_Menu_Red)},e.UpdateGameSettingCache=function(e){var t=this.cache_red_key[e]||i.GAMECLUMB_RED_1;null!=this.cache_red_list[e]&&(IS(n).set(t,this.cache_red_list[e].v),this.GetRed(),this.GetXcxRed(),normalEvent.emit(s.ROLE_Menu_Red))},e.CheckShowGameClubRed=function(e){var t=this.cache_red_key[e]||i.GAMECLUMB_RED_1,a=IS(n).Get(t);return null!=this.cache_red_list[e]&&a!=this.cache_red_list[e].v?1:0},e.GetGameClubTaskByCondition=function(e){if(null!=this.cache_task_list[e])return this.cache_task_list[e]},e.InitWXGameClubInfo=function(e){for(var t=[],a=0;a<e.length;a++)if(null!=e[a].dataType){var i={k:e[a].dataType.type,v:e[a].value};t.push(i)}this.cache_list=t,IS(u).reqGameClubTriggerInfo(t),normalEvent.emit(o.GameClubInfoBack)},e.GetJoinGameClubTime=function(){if(null==this.cache_list)return 0;for(var e=0;e<this.cache_list.length;e++)if(1==this.cache_list[e].k)return this.cache_list[e].v;return 0},e.IsJoinGameClub=function(){return this.GetJoinGameClubTime()>0},e.GetValueByType=function(e){if(null==this.cache_list)return 0;for(var t=0;t<this.cache_list.length;t++)if(this.cache_list[t].k==e)return this.cache_list[t].v;return 0},e.GetRed=function(){var e=0;for(var t in this.cache_award_list)if(3==this.cache_award_list[t].type){var i=configForum_task.getDataByKey(this.cache_award_list[t].config_id);null!=i&&1==i.view&&1==this.cache_award_list[t].status&&e++}else 1==this.cache_award_list[t].status&&e++;for(var n=1;n<=5;n++)e+=this.CheckShowGameClubRed(n);return IS(a).changeValue("GameClub_Redpoint",e),e},e.GetXcxRed=function(){var e=this.CheckShowGameClubRed(6);IS(a).changeValue("GameShare_Redpoint",e)},e.GetRedBySelectType=function(e){var t=0;for(var a in this.cache_award_list)if(1==this.cache_award_list[a].status&&this.cache_award_list[a].type==e)if(3==this.cache_award_list[a].type){var i=configForum_task.getDataByKey(this.cache_award_list[a].config_id);null!=i&&1==i.view&&t++}else t++;return t},e.SetxcxOpenTag=function(e){this.xcxOpenTag=e},e.GetxcxOpenTag=function(){return this.xcxOpenTag},t}());t._RF.pop()}}}));

