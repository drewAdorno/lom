System.register("chunks:///_virtual/MallDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MallDefine.ts"],(function(t){"use strict";var n,e,i;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){i=t.MallEventDefine}],execute:function(){e._RF.push({},"26b3707ufJLY6a7Lyma5T75","MallDataCache",void 0);t("default",function(){function t(){this.buyInfo={},this.limitInfo={}}var e=t.prototype;return e.clear=function(){},e.UpdateInfo=function(t){this.buyInfo[t.shop_type]={};for(var e,o=n(null!=(r=t.buy_info)?r:[]);!(e=o()).done;){var r,u=e.value;this.buyInfo[t.shop_type][u.k]=u.v}normalEvent.emit(i.MAll_INFO_UPDATE,t.shop_type)},e.GetBuyInfoByType=function(t){var n;return null!=(n=this.buyInfo[t])?n:{}},e.getBuyInfoById=function(t,n){return this.GetBuyInfoByType(t)[n]||0},e.UpdateLimitInfo=function(t){this.limitInfo[t.shop_type]={};for(var e,o=n(null!=(r=t.shop_list)?r:[]);!(e=o()).done;){var r,u=e.value;this.limitInfo[t.shop_type][u.sid]=u}normalEvent.emit(i.MAll_LIMIT_INFO_UPDATE,t.shop_type)},e.GetLimitInfoByType=function(t){var n;return null!=(n=this.limitInfo[t])?n:{}},e.getLimitInfoById=function(t,n){return this.GetLimitInfoByType(t)[n]},e.getFactPrice=function(n,e){var i=configMall.getDataByKey(n),o=i.price[1],r=i.add_price;if(!r)return o;if(r.length<=0)return o;var u=IS(t).getBuyInfoById(i.type,n);e&&e>0&&(u+=e);var l=u+1;return o+(l>=r.length?r[r.length-1]:r[l-1])},t}());e._RF.pop()}}}));

