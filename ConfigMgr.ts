System.register("chunks:///_virtual/ConfigMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index37.ts","./FilePack.ts"],(function(e){"use strict";var n,t,r,i,a,o;return{setters:[function(e){n=e.regeneratorRuntime},function(e){t=e.cclegacy,r=e.BufferAsset},function(e){i=e.configsSplit,a=e.configs},function(e){o=e.FilePack}],execute:function(){t._RF.push({},"f0fbaG7iFFLK6f+xkzFvPdM","ConfigMgr",void 0);e("ConfigMgr",function(){function e(){this.isLoad=!1}var t=e.prototype;return t.loadConfig=function(){1==GlobalDefine.CONFIG_READ_MODE?coroutine.start(this.loadBuffer()):coroutine.start(this.loadJson())},t.loadBuffer=n().mark((function e(){var t,c,s,u,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,resourceMgr.loadFirstLoadRes("config/datas",r,(function(e){null!=e.item&&null!=e.item.asset&&(t=e.item.asset.buffer())}));case 2:if(null!=t){e.next=7;break}return e.next=5,coroutine.wait(.1);case 5:e.next=2;break;case 7:for(f in c=new o(t),resourceMgr.releaseResRef("config/datas"),s={},_G("getConfig",(function(e,n){var t=s[e];null==t&&(t={},s[e]=t);var r=t[n];return null==r&&(r=new i[e],t[n]=r,r.loadBufferData(c.getBuffer(e+n)),Object.freeze(r)),r})),u=function(e){Object.defineProperty(_global,e,{configurable:!0,get:function(){return c.get(e)}})},a)u(f);this.isLoad=!0;case 14:case"end":return e.stop()}}),e,this)})),t.loadJson=n().mark((function e(){var t,r,o,c,s,u,f,l,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t=0,r=[],a)r.push([o,a[o]]);for(c in i)r.push([c,i[c]]);_G("getConfig",(function(e,n){return _global[e]})),s=n().mark((function e(){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f[u],i=new r[1],_G(r[0],i),resourceMgr.loadConfigJson(i.name,(function(e){if(e.error)return printLogErr("load err!"+i.name),void t++;if(null!=e.item&&null!=e.item.asset){var n=e.item.asset.json;i.loadData(n),Object.freeze(i),t++}else t++})),void(e.next=6);case 6:case"end":return e.stop()}}),e)})),u=0,f=r;case 7:if(!(u<f.length)){e.next=12;break}return e.delegateYield(s(),"t0",9);case 9:u++,e.next=7;break;case 12:l=r.length,g=0;case 14:if(!(t<l)){e.next=25;break}return e.next=17,coroutine.wait(.1);case 17:if(!((g+=.1)>10)){e.next=23;break}return printLogErr("cccccccccccccccccc"),mainGame.exitApp(),e.next=23,"break";case 23:e.next=14;break;case 25:this.isLoad=!0;case 26:case"end":return e.stop()}}),e,this)})),t.clear=function(){this.isLoad=!1},e}());t._RF.pop()}}}));

