System.register("chunks:///_virtual/ActivityValentineInviteView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./MessageView.ts","./RoleDataCache.ts","./ActivityControl.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,s,o,a,l,d,r,c,h,u,f,v,I,m;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,s=t.ScrollView,o=t.Sprite,a=t.Label,l=t.js},function(t){d=t.ListItem},function(t){r=t.default},function(t){c=t.default},function(t){h=t.default},null,function(t){u=t.default},function(t){f=t.RoleDataCache},function(t){v=t.default},function(t){I=t.ActivityEventDefine},function(t){m=t.BaseView}],execute:function(){e._RF.push({},"5134diO1F1BB6W3ABRVv05/","ActivityValentineInviteView",void 0);var p=1,C=3,x=(t("default",function(t){function e(){var i;return(i=t.call(this)||this).tabBtns=[],i.curIndex=0,i.scroll=void 0,i.noList=void 0,i.list=[],i.name="ActivityValentineInviteView",i.url="ui/module/valentine/ActivityValentineInviteView",i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this,i=this.findChild("view/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));for(var e=function(i){var e=r.findChild(t.node,l.formatStr("view/tabBtn/item%s",i)),s={itemGo:e,normalGo:r.findChild(e,"normal"),selectedGo:r.findChild(e,"selected"),index:i};t.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.SetIndex(s.index)})),t.tabBtns[i]=s},o=1;o<=3;o++)e(o);this.noList=this.findChild("view/noList");var a=this.findChildComponent("view/list",s);this.scroll=this.addUIList(a,x)},o.registerUpdateHandler=function(){this.addEvent(I.OnActivityQixiInviteList,this.updateInfo,this),this.addEvent(I.OnActivityQixiInvite,this.updateInvite,this)},o.onAfterOpen=function(){this.SetIndex(p)},o.onBeforeClose=function(){this.curIndex>0&&(this.tabBtns[this.curIndex].normalGo.active=!0,this.tabBtns[this.curIndex].selectedGo.active=!1,this.curIndex=0)},o.onDestroy=function(){},o.SetIndex=function(t){this.curIndex!=t&&(this.curIndex>0&&(this.tabBtns[this.curIndex].selectedGo.active=!1,this.tabBtns[this.curIndex].normalGo.active=!0),this.curIndex=t,this.tabBtns[this.curIndex].normalGo.active=!1,this.tabBtns[this.curIndex].selectedGo.active=!0,IS(v).send_24_25(this.curIndex))},o.updateInfo=function(t){var i;if(this.list=null!=(i=t.teammate_list)?i:[],this.curIndex==C)for(var e=IS(f).GetRoleId(),n=0;n<this.list.length;n++)if(this.list[n].role_id==e){this.list.splice(n,1);break}t.type==this.curIndex&&(0==this.list.length?(this.noList.active=!0,this.scroll.node.active=!1):(this.noList.active=!1,this.scroll.node.active=!0,this.list.sort((function(t,i){return t.status!=i.status?1!=t.offline_time&&1!=i.offline_time&&t.offline_time!=i.offline_time?i.offline_time-t.offline_time:1==t.offline_time&&1==i.offline_time?t.power!=i.power?i.power-t.power:t.role_id-i.role_id:1==t.offline_time?-1:1:0==t.status?-1:1})),this.scroll.datas=this.list))},o.updateInvite=function(t){for(var i=0;i<this.list.length;i++)if(this.list[i].role_id==t.role_id){this.list[i].status=2;break}this.scroll.updateAll()},e}(m)),function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).imgFrame=void 0,i.imgIcon=void 0,i.txtName=void 0,i.txtPower=void 0,i.txtState=void 0,i.btnInvite=void 0,i.nodeNot=void 0,i.nodeIsInvite=void 0,i}i(e,t);var s=e.prototype;return s.onInit=function(){var t=this;this.imgFrame=r.findChildComponent(this.node,"imgFrame",o),this.imgIcon=r.findChildComponent(this.node,"imgFrame/imgIcon",o),this.txtName=r.findChildComponent(this.node,"name",a),this.txtPower=r.findChildComponent(this.node,"power",a),this.txtState=r.findChildComponent(this.node,"state",a),this.btnInvite=r.findChild(this.node,"btnInvite"),this.view.addComponentCallbackListener(this.btnInvite,n.EventType.CLICK,(function(){u.showBoxTip({tip:GetLanguage(200052),title:GetLanguage(200048),ensure:GetLanguage(200053),cancel:GetLanguage(200054),func:function(i){"type_yes"==i&&IS(v).send_24_26(t.data.role_id)}})})),this.nodeIsInvite=r.findChild(this.node,"IsInvite"),this.nodeNot=r.findChild(this.node,"Not")},s.onRender=function(t,i){this.txtName.string=t.name,this.txtPower.string=c.GetNumString(t.power),1==t.offline_time?this.txtState.string=GetLanguage(200057):this.txtState.string=h.getDateDiff(t.offline_time),this.view.loadRemoteIcon(t.head.url,this.imgIcon),this.btnInvite.active=0==t.status,this.nodeNot.active=3==t.status,this.nodeIsInvite.active=2==t.status},e}(d));e._RF.pop()}}}));

