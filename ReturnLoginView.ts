System.register("chunks:///_virtual/ReturnLoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ConfigGlobal.ts","./ReturnControl.ts","./ReturnDataCache.ts","./ReturnDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var i,e,n,r,o,a,s,d,h,c,l,u,f,m,v,g,p;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Label,r=t.ScrollView,o=t.sys,a=t.Sprite,s=t.Button},function(t){d=t.ItemGrid},function(t){h=t.ListItem},function(t){c=t.default},function(t){l=t.default},function(t){u=t.default},null,function(t){f=t.ConfigGlobal},function(t){m=t.default},function(t){v=t.ReturnDataCache},function(t){g=t.ReturnEventDefine},function(t){p=t.BaseSubView}],execute:function(){e._RF.push({},"62e7e/QfVlAEYQ1bAi3SuYH","ReturnLoginView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).taskList=void 0,i.getDay={},i.limitReward={},i.loginInfo=void 0,i.txtLeftTime=void 0,i.timer=void 0,i.name="ReturnLoginView",i.url="ui/module/return/ReturnLoginView",i.poolTime=3e3,i}i(e,t);var a=e.prototype;return a.onInit=function(){for(var t=0;t<f.back_rare2.length;t++)this.limitReward[f.back_rare2[t]]=!0;this.txtLeftTime=this.findChildComponent("root/banner/time",n),this.taskList=this.addUIList(this.findChildComponent("root/taskList",r),y)},a.onAfterOpen=function(){IS(m).send_return_checkin_info_c2s(),this.UpdateCheckinInfo(),this.UpdateTime()},a.UpdateTime=function(){var t=this;this.timer&&(this.removeTimer(this.timer),this.timer=null);var i=IS(v).GetReturnInfo();if(i&&i.end_time-u.serverTime>0){var e=l.formatStrWithMirrorDeal(GetLanguage(200043),u.formatTimeStringForSecond(Math.max(0,i.end_time-u.serverTime)));o.uiMirror&&(e=u.formatTimeStringForSecond(Math.max(0,i.end_time-u.serverTime))),this.txtLeftTime.string=e,this.timer=this.addTimer(1,i.end_time-u.serverTime,(function(){if(i.end_time-u.serverTime>0){var e=l.formatStrWithMirrorDeal(GetLanguage(200043),u.formatTimeStringForSecond(Math.max(0,i.end_time-u.serverTime)));o.uiMirror&&(e=u.formatTimeStringForSecond(Math.max(0,i.end_time-u.serverTime))),t.txtLeftTime.string=e}else t.removeTimer(t.timer),t.timer=null,t.txtLeftTime.string=GetLanguage(200026)}))}else this.txtLeftTime.string=GetLanguage(200026)},a.registerUpdateHandler=function(){this.addEvent(g.UpdatReturnCheckinInfo,this.UpdateCheckinInfo)},a.UpdateCheckinInfo=function(){this.loginInfo=IS(v).GetReturnCheckinInfo();for(var t=[],i=0;i<this.loginInfo.day_conf.length;i++){var e=configBack_checkin.getDataByKey(this.loginInfo.day_conf[i]);e&&t.push(e)}if(this.taskList.datas=t,this.getDay={},this.loginInfo)for(var n=0;n<this.loginInfo.get_day.length;n++)this.getDay[this.loginInfo.get_day[n]]=!0},a.onBeforeClose=function(){this.timer&&(this.removeTimer(this.timer),this.timer=null)},a.onDestroy=function(){},e}(p));var y=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).txtDesc=void 0,i.btnGet=void 0,i.received=void 0,i.undone=void 0,i.imgBg=void 0,i.rewardScroll=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this,i=this.view;this.imgBg=c.findChildComponent(this.node,"imgBg",a),this.txtDesc=c.findChildComponent(this.node,"title/txtDesc",n),this.received=c.findChild(this.node,"received"),this.btnGet=c.findChild(this.node,"btnGet"),this.view.addComponentCallbackListener(this.btnGet,s.EventType.CLICK,(function(){IS(m).send_return_checkin_reward_c2s(t.data.day)})),this.undone=c.findChildComponent(this.node,"undone",n);var e=c.findChildComponent(this.node,"rewardScroll",r);this.rewardScroll=i.addUIList(e,C,!1),this.rewardScroll.virtual=!1},o.onRender=function(t,i){this.txtDesc.string=l.formatStrWithMirrorDeal(GetLanguage(200319),t.day),this.view.loadIcon(this.imgBg,"return_activity",1==t.special?"lwj_bd_01":"lwj_bd_02"),this.rewardScroll.datas=t.reward;var e=this.view.loginInfo;t.day<=e.day&&!this.view.getDay[t.day]?(this.received.active=!1,this.undone.node.active=!1,this.btnGet.active=!0):this.view.getDay[t.day]?(this.received.active=!0,this.undone.node.active=!1,this.btnGet.active=!1):t.day==e.day+1?(this.received.active=!1,this.undone.node.active=!0,this.undone.string=GetLanguage(204736),this.btnGet.active=!1):(this.received.active=!1,this.undone.node.active=!0,this.undone.string=GetLanguage(204737),this.btnGet.active=!1)},e}(h),C=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,i.itemGrid=void 0,i.limit=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.itemGridNode=c.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode),this.limit=c.findChild(this.node,"limit")},n.onRender=function(t,i){var e;this.itemGrid.SetItemId(t[0],t[1]),this.limit.active=null!=(e=this.view.limitReward[t[0]])&&e},e}(h);e._RF.pop()}}}));

