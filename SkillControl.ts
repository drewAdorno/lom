System.register("chunks:///_virtual/SkillControl.ts",["cc","./SkillDataCache.ts","./SkillDefine.ts"],(function(l){"use strict";var t,e,i;return{setters:[function(l){t=l.cclegacy},function(l){e=l.SkillDataCache},function(l){i=l.SKILLEventDefine}],execute:function(){t._RF.push({},"e6adevYfhZDj4qjywLjtTYV","SkillControl",void 0);l("default",function(){var l=t.prototype;function t(){netManager.addEventListener("skill.skill_list_s2c",this.on_skill_list_s2c,this),netManager.addEventListener("skill.skill_active_update_s2c",this.on_skill_active_update_s2c,this),netManager.addEventListener("skill.skill_passive_update_s2c",this.on_skill_passive_update_s2c,this),netManager.addEventListener("skill.skill_system_info_s2c",this.on_skill_system_info_s2c,this),netManager.addEventListener("skill.skill_system_update_s2c",this.on_skill_system_update_s2c,this),netManager.addEventListener("skill.skill_tab_info_s2c",this.on_skill_tab_info_s2c,this),netManager.addEventListener("skill.skill_tab_info_update_s2c",this.on_skill_tab_info_update_s2c,this),netManager.addEventListener("skill.skill_choose_tab_s2c",this.on_skill_choose_tab_s2c,this),netManager.addEventListener("skill.skill_change_tab_name_s2c",this.on_skill_change_tab_name_s2c,this),netManager.addEventListener("skill.skill_set_delay_time_s2c",this.on_skill_set_delay_time_s2c,this)}return l.clear=function(){console.log("清理SkillControl")},l.reqSkillList=function(){netManager.send("skill.skill_list_c2s",{})},l.on_skill_list_s2c=function(l){IS(e).updateActiveSkillList(l.active_skills,!0),IS(e).initPassiveSkillList(l.passive_skills),IS(e).updateAllSkillEquipRedPoint()},l.on_skill_active_update_s2c=function(l){IS(e).updateActiveSkillList(l.active_skills),IS(e).updateAllSkillEquipRedPoint()},l.on_skill_passive_update_s2c=function(l){IS(e).updatePassiveSkillList(l.update_list),IS(e).deletePassiveSkillList(l.delete_list),normalEvent.emit(i.PASSIVE_SKILL_LIST_UPDATE)},l.reqSkillSystemInfo=function(){netManager.send("skill.skill_system_info_c2s",{})},l.on_skill_system_info_s2c=function(l){IS(e).updateSystemSkills(l.skills,!0),IS(e).updateAllUpgradeRedPoint(),IS(e).updateAllComposeRedPoint()},l.on_skill_system_update_s2c=function(l){IS(e).updateSystemSkills(l.skills,!1,l.type),IS(e).updateAllUpgradeRedPoint(),IS(e).updateAllComposeRedPoint()},l.reqSkillLv=function(l){netManager.send("skill.skill_lv_c2s",{skill_ids:l})},l.reqWearSkill=function(l){netManager.send("skill.skill_equip_c2s",{pos_info:l})},l.reqSkillTabInfo=function(){netManager.send("skill.skill_tab_info_c2s",{})},l.reqSetSkillDelay=function(l,t){var i,s=[];null==IS(e).tabToInfo[l]&&(IS(e).tabToInfo[l]={tab:l,name:"",pos_info:[],delay_time_list:[]});var n=IS(e).tabToInfo[l],a=null!=(i=n.delay_time_list)?i:[];n.delay_time_list=a;for(var _=0;_<t.length;_++){var o={k:_+1,v:t[_]};s.push(o),a[_]=o}netManager.send("skill.skill_set_delay_time_c2s",{tab:l,set_delay_time:s})},l.on_skill_tab_info_s2c=function(l){var t=l.tab;if(null!=t){IS(e).curTab=t;var i=l.tab_list;if(null!=i)for(var s=0;s<i.length;s++)IS(e).tabToInfo[i[s].tab]=i[s]}},l.on_skill_tab_info_update_s2c=function(l){var t=l.tab;null!=t&&(null==IS(e).tabToInfo[t]&&(IS(e).tabToInfo[t]={tab:t,name:"",pos_info:[],delay_time_list:[]}),IS(e).tabToInfo[t].pos_info=l.pos_info,normalEvent.emit(i.SKILL_TAB_INFO_UPDATE,t))},l.reqSkillChooseTab=function(l){netManager.send("skill.skill_choose_tab_c2s",{tab:l})},l.on_skill_choose_tab_s2c=function(l){var t=l.new_tab;null!=t&&(IS(e).curTab=t,normalEvent.emit(i.SKILL_CUR_TAB_CHANGE))},l.reqSkillChangeTabName=function(l,t){netManager.send("skill.skill_change_tab_name_c2s",{tab:l,name:t})},l.on_skill_change_tab_name_s2c=function(l){var t=l.tab;null!=t&&(null==IS(e).tabToInfo[t]&&(IS(e).tabToInfo[t]={tab:t,name:"",pos_info:[],delay_time_list:[]}),IS(e).tabToInfo[t].name=l.name,uiMgr.close("TabRenameView"),normalEvent.emit(i.SKILL_TAB_INFO_UPDATE,t))},l.on_skill_set_delay_time_s2c=function(l){var t=l.tab;null!=t&&(null==IS(e).tabToInfo[t]&&(IS(e).tabToInfo[t]={tab:t,name:"",pos_info:[],delay_time_list:[]}),IS(e).tabToInfo[t].delay_time_list=l.delay_time_list)},t}());t._RF.pop()}}}));

