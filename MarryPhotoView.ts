System.register("chunks:///_virtual/MarryPhotoView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeUtil.ts","./index57.ts","./RoleDefine.ts","./MarryControl.ts","./MarryDataCache.ts","./MarryDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,h,l,d,f,c,u;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,n=t.Button,a=t.Label,r=t.Sprite,s=t.js},function(t){h=t.default},null,function(t){l=t.PlayerAttr},function(t){d=t.default},function(t){f=t.default},function(t){c=t.MarryEventDefine},function(t){u=t.BaseView}],execute:function(){o._RF.push({},"2e7daKpqJxFvIs+u44JipAb","MarryPhotoView",void 0);t("default",function(t){function o(){var e;return(e=t.call(this)||this).show=void 0,e.titleName=void 0,e.titleTime=void 0,e.icon=void 0,e.des=void 0,e.empty=void 0,e.arrowLeft=void 0,e.arrowRight=void 0,e.selfPage=void 0,e.maxPage=void 0,e.curPage=void 0,e.name="MarryPhotoView",e.url="ui/module/marry/MarryPhotoView",e}e(o,t);var u=o.prototype;return u.onInit=function(){var t=this,e=this.findChild("root/imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()})),this.show=this.findChild("root/show"),this.empty=this.findChild("root/empty"),this.titleName=this.findChildComponent("root/show/title/name",a),this.titleTime=this.findChildComponent("root/show/title/time",a),this.des=this.findChildComponent("root/show/des",a),this.icon=this.findChildComponent("root/show/img/iconMask/icon",r),this.arrowLeft=this.findChild("root/show/arrowLeft"),this.addComponentCallbackListener(this.arrowLeft,n.EventType.CLICK,(function(){1!=t.curPage&&IS(d).send_marry_photo_album_c2s(t.curPage-1)})),this.arrowRight=this.findChild("root/show/arrowRight"),this.addComponentCallbackListener(this.arrowRight,n.EventType.CLICK,(function(){t.curPage!=t.maxPage&&IS(d).send_marry_photo_album_c2s(t.curPage+1)})),this.addComponentCallbackListener(this.findChild("root/tab/firstPage"),n.EventType.CLICK,(function(){IS(d).send_marry_photo_album_c2s(1)})),this.selfPage=this.findChild("root/tab/selfPage"),this.addComponentCallbackListener(this.selfPage,n.EventType.CLICK,(function(){IS(d).send_marry_photo_album_c2s(0)})),this.addComponentCallbackListener(this.findChild("root/tab/endPage"),n.EventType.CLICK,(function(){t.maxPage&&IS(d).send_marry_photo_album_c2s(t.maxPage)}))},u.registerUpdateHandler=function(){this.addEvent(c.MARRY_PHOTO_PAGE_UPDATE,this.UpdateInfo,this)},u.onAfterOpen=function(){IS(d).send_marry_photo_album_c2s(1),this.UpdateInfo()},u.UpdateInfo=function(){var t=IS(f).GetPhotoInfo();if(t&&""!=t.photo){this.selfPage.active=1==t.haveMy,this.show.active=!0,this.empty.active=!1,this.maxPage=t.max_page,this.curPage=t.page,this.arrowLeft.active=this.curPage>1,this.arrowRight.active=this.curPage<this.maxPage,t.bride_list.sort((function(t,e){return t.figure.gender<e.figure.gender?-1:1}));for(var e="",o=0;o<t.bride_list.length;o++){var n=t.bride_list[o],a=n.info_list.kv,r=n.info_list.ks,d={};if(null!=a)for(var c,u=i(a);!(c=u()).done;){var m=c.value;d[m.k]=m.v}if(null!=r)for(var v,p=i(r);!(v=p()).done;){var g=v.value;d[g.k]=g.s}e=e+d[l.ROLE_ATTR_NAME]+(0==o?"&":"")}this.titleName.string=e;var C=h.ServerDate(1e3*t.start_time);this.titleTime.string=s.formatStr("%s-%s-%s",C.getFullYear(),C.getMonth()+1,C.getDate()),this.des.string=t.word,this.loadRemoteIcon(t.photo,this.icon)}else this.show.active=!1,this.empty.active=!0,this.selfPage.active=!!t&&1==t.haveMy},u.onBeforeClose=function(){},u.onDestroy=function(){},o}(u));o._RF.pop()}}}));

