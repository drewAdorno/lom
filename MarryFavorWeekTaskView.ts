System.register("chunks:///_virtual/MarryFavorWeekTaskView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./ObjectUtil.ts","./BagModel.ts","./GuideModel.ts","./MessageView.ts","./RoleDataCache.ts","./TaskControl.ts","./TaskDataCache.ts","./TaskDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,r,c,d,h,u,l,f,p,v,C,m,g,k,I,y;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.ScrollView,s=t.Sprite,a=t.Label,r=t.ProgressBar,c=t.js},function(t){d=t.ListItem},function(t){h=t.default},null,function(t){u=t.default},function(t){l=t.BagModel},function(t){f=t.GuideModel},function(t){p=t.default},function(t){v=t.RoleDataCache},function(t){C=t.default},function(t){m=t.TaskDataCache},function(t){g=t.TaskEventDefine,k=t.TaskType,I=t.TaskState},function(t){y=t.BaseView}],execute:function(){e._RF.push({},"0ee6bIlRRtGI61o+obpDPvC","MarryFavorWeekTaskView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).taskList=void 0,i.name="MarryFavorWeekTaskView",i.url="ui/module/marry/MarryFavorWeekTaskView",i}i(e,t);var s=e.prototype;return s.onInit=function(){var t=this,i=this.findChild("root/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChildComponent("root/taskList",o);this.taskList=this.addUIList(e,G)},s.registerUpdateHandler=function(){this.addEvent(g.TASK_INFO_UPDATE,this.updateTaskInfo,this)},s.onAfterOpen=function(){this.updateTaskInfo()},s.updateTaskInfo=function(){var t=configMarry_task.getDatas();console.log(t),t&&((t=u.copyArray(t)).sort((function(t,i){var e=IS(m).GetTaskItem(k.Marry,t.id),n=IS(m).GetTaskItem(k.Marry,i.id),o=e?e.state:I.Normal,s=n?n.state:I.Normal;return o==I.Complete&&s!=I.Complete?-1:o!=I.Complete&&s==I.Complete?1:o!=s?o<s?-1:1:t.id-i.id})),this.taskList.datas=t)},s.onBeforeClose=function(){},s.onDestroy=function(){},e}(y));var G=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtDesc=void 0,i.pb=void 0,i.txtSchedule=void 0,i.btnGet=void 0,i.nofinish=void 0,i.isGet=void 0,i.imgIcon=void 0,i.txtNum=void 0,i.open_func=0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.imgIcon=h.findChildComponent(this.node,"imgIcon",s),this.txtNum=h.findChildComponent(this.node,"txtNum",a),this.txtDesc=h.findChildComponent(this.node,"txtDesc",a),this.pb=h.findChildComponent(this.node,"ProgressBar",r),this.txtSchedule=h.findChildComponent(this.node,"ProgressBar/schedule",a),this.isGet=h.findChild(this.node,"isGet"),this.nofinish=h.findChild(this.node,"nofinish"),this.btnGet=h.findChild(this.node,"btnGet"),this.view.addComponentCallbackListener(this.btnGet,n.EventType.CLICK,(function(){IS(C).send_10_2(k.Marry,t.data.id)})),this.view.addComponentCallbackListener(this.imgIcon.node,n.EventType.CLICK,(function(){IS(l).OpenItemTips(t.data.reward[0][0],t.imgIcon.node)}))},o.onBtnGotoClick=function(){!this.open_func||IS(v).CheckFuncOpen(this.open_func)?(IS(f).openGuide(this.data.guide),this.view.parentView.close()):p.showFlyTip(GetLanguage(200114))},o.onRender=function(t,i){this.open_func=t.open_func,this.txtDesc.string=t.desc,this.txtNum.string=t.reward[0][1];var e,n=t.reward[0][0],o=configGoods.getDataByKey(n);e=3==o.type?"icon_skill":4==o.type?"icon_pet":"icon_item",this.view.loadIcon(this.imgIcon,e,o.icon);var s=IS(m).GetTaskItem(k.Marry,t.id);if(null==s)this.pb.progress=0,this.txtSchedule.string=c.formatStr("%s/%s",0,t.condition[2]),this.isGet.active=!1,this.btnGet.active=!1,this.nofinish.active=!0;else if(s.state==I.Normal){var a=s.count<=t.condition[2]?s.count:t.condition[2];this.pb.progress=a/t.condition[2],this.txtSchedule.string=c.formatStr("%s/%s",a,t.condition[2]),this.isGet.active=!1,this.btnGet.active=!1,this.nofinish.active=!0}else s.state==I.Complete?(this.pb.progress=1,this.txtSchedule.string=c.formatStr("%s/%s",t.condition[2],t.condition[2]),this.isGet.active=!1,this.btnGet.active=!0,this.nofinish.active=!1):(this.pb.progress=1,this.txtSchedule.string=c.formatStr("%s/%s",t.condition[2],t.condition[2]),this.isGet.active=!0,this.btnGet.active=!1,this.nofinish.active=!1)},e}(d);e._RF.pop()}}}));

