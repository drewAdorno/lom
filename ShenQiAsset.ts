System.register("chunks:///_virtual/ShenQiAsset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./AssetPool.ts","./BaseAsset.ts","./SpineSkeleton.ts"],(function(t){"use strict";var e,n,i,s,o,a,c,l,r,h,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,s=t.isValid,o=t.sp,a=t.Layers},function(t){c=t.V2},function(t){l=t.AssetPoolState},function(t){r=t.BaseAsset},function(t){h=t.SpineSkeleton,u=t.AnimationType}],execute:function(){var p;i._RF.push({},"ae258ZgwsJFIo0KenlyIeVl","ShenQiAsset",void 0),function(t){t[t.Not=0]="Not",t[t.Ani=128]="Ani"}(p||(p={}));t("ShenQiAsset",function(t){function i(){var e;return(e=t.call(this)||this).id=0,e._bind=void 0,e._spine=void 0,e._animator=void 0,e._ani="wuqi",e._socket=void 0,e.isUI=!0,e}e(i,t),i.alloc=function(t,e,n,i){var s=shengqiPool.alloc(e,3);return s._bind=n,s.parent=i,s.layer=a.Enum.DEFAULT,s._spine=t,s.loadSync(),s.scale=1,s.position=c.ZERO,s.aniName="wuqi",s},i.free=function(t){t.free()};var r=i.prototype;return r.onLoadComplete=function(){var t=this._node.getComponent(h);t.animationType=u.UI,t.__preload(),this._animator=t},r.onAfterCacheFree=function(){t.prototype.onAfterCacheFree.call(this);var e=this._spine;if(this._spine=null,s(e)&&this._socket){var n=e.sockets.indexOf(this._socket);e.sockets.splice(n,1),this._socket=null,e.sockets=e.sockets}},r.onUpdate=function(e){if(t.prototype.onUpdate.call(this,e),!(this.poolState>l.Useing)){var n=this._spine;s(this.node)&&s(n)&&n._skeleton&&(this._socket||(this._socket=new o.SpineSocket(this._bind,this.node),n.sockets.push(this._socket),n.sockets=n.sockets))}},r.onApply=function(t){this._changeValue&p.Ani&&this._animator.setAnimation(0,this._ani,!0)},n(i,[{key:"aniName",set:function(t){this._ani!=t&&(this._ani=t,this._changeValue=this._changeValue|p.Ani)}}]),i}(r));i._RF.pop()}}}));

