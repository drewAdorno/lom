System.register("chunks:///_virtual/PrivilegeADView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index57.ts","./ItemIcon.ts","./ConfigGlobal.ts","./PayDataCache.ts","./PrivilegeDataCache.ts","./PrivilegeDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,o,i,n,s,r,c,a,d,h,u,l,f,C,m,v;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t.Button,n=t.Sprite,s=t.Label,r=t.sys,c=t.UITransform,a=t.Layout,d=t.Overflow},null,function(t){h=t.IconAseetType},function(t){u=t.ConfigGlobal},function(t){l=t.default},function(t){f=t.PrivilegeDataCache},function(t){C=t.PrivilegeEventDefine,m=t.Privilege},function(t){v=t.BaseView}],execute:function(){o._RF.push({},"b0288uJq0tGUrVHL5faBgKF","PrivilegeADView",void 0);t("default",function(t){function o(){var e;return(e=t.call(this)||this).txtRebateNum=void 0,e.txtState=void 0,e.txtBuyPrice=void 0,e.nodeHasBuy=void 0,e.nodeBtnBuy=void 0,e.txtDesc1=void 0,e.txtDesc2=void 0,e.utDesc1=void 0,e.utDesc2=void 0,e.name="PrivilegeADView",e.url="ui/module/recharge/PrivilegeADView",e}e(o,t);var v=o.prototype;return v.onInit=function(){var t=this,e=this.findChild("root/imgMask");this.addComponentCallbackListener(e,i.EventType.CLICK,(function(){t.close()}));var o=this.findChild("root/content/btnClose");this.addComponentCallbackListener(o,i.EventType.CLICK,(function(){t.close()}));var a=this.findChildComponent("root/content/top/imgBg",n);this.loadIcon(a,"icon_privilege_card","tqk_img_mianguanggaoka",null,h.ICON_SPRITE),this.txtRebateNum=this.findChildComponent("root/content/top/rebate/txtRebateNum",s),this.findChild("root/content/top/title").setPosition(r.uiMirror?30:-304.023,-26.037,0),this.findChild("root/content/top/desc").setPosition(r.uiMirror?30:-304.023,-17.181,0),this.txtState=this.findChildComponent("root/content/bottom/txtState",s),this.nodeHasBuy=this.findChild("root/content/bottom/btnHasBuy"),this.txtBuyPrice=this.findChildComponent("root/content/bottom/btnBuy/Label",s),this.nodeBtnBuy=this.findChild("root/content/bottom/btnBuy"),this.addComponentCallbackListener(this.nodeBtnBuy,i.EventType.CLICK,(function(){IS(l).Pay(10401)})),this.txtDesc1=this.findChildComponent("root/content/top/effect/item/txtDesc",s),this.txtDesc2=this.findChildComponent("root/content/top/effect/item-001/txtDesc",s),this.utDesc1=this.txtDesc1.node.getComponent(c),this.utDesc2=this.txtDesc2.node.getComponent(c),this.dealMirrorShow()},v.dealMirrorShow=function(){r.uiMirror&&(this.dealMirrorLayout(this.findChildComponent("root/content/top/effect/item",a)),this.dealMirrorLayout(this.findChildComponent("root/content/top/effect/item-001",a)),this.dealMirrorLayout(this.findChildComponent("root/content/bottom/effect/item/Node",a)),this.dealMirrorLayout(this.findChildComponent("root/content/bottom/effect/item/Node-001",a)),this.dealMirrorLayout(this.findChildComponent("root/content/bottom/effect/item-001/Node",a)),this.dealMirrorLayout(this.findChildComponent("root/content/bottom/effect/item-001/Node-001",a)))},v.registerUpdateHandler=function(){this.addEvent(C.ROLE_PRIVILEGE_UPDATE,this.updateInfo,this)},v.onAfterOpen=function(){var t=this,e=configPay_mall.getDataByKey(10401);this.txtRebateNum.string=e.ratio+"%",this.txtBuyPrice.string=IS(l).GetPriceString(e.cost_level),this.updateInfo(),this.txtDesc1.schedule((function(){t.utDesc1.width>=423?(t.txtDesc1.overflow=d.SHRINK,t.utDesc1.width=423):t.txtDesc1.overflow=d.NONE}),0),this.txtDesc2.schedule((function(){t.utDesc2.width>=423?(t.txtDesc2.overflow=d.SHRINK,t.utDesc2.width=423):t.txtDesc2.overflow=d.NONE}),0)},v.onBeforeClose=function(){},v.onDestroy=function(){},v.updateInfo=function(){IS(f).checkPrivilegeUnlock(m.NO_ADS)||0==u.ads_icon_is_show?(this.nodeHasBuy.active=!0,this.nodeBtnBuy.active=!1,this.txtState.string=GetLanguage(200027)):(this.nodeHasBuy.active=!1,this.nodeBtnBuy.active=!0,this.txtState.string=GetLanguage(200556))},o}(v));o._RF.pop()}}}));

