System.register("chunks:///_virtual/FarmHelpShareDetailView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./TimeUtil.ts","./BaseView.ts","./MessageView.ts","./FriendControl.ts","./RoleDataCache.ts","./PlantControl.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,l,h,d,c,p,f;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Sprite,s=t.Label,a=t.ProgressBar},function(t){r=t.default},function(t){l=t.default},function(t){h=t.BaseView},function(t){d=t.default},function(t){c=t.default},function(t){p=t.RoleDataCache},function(t){f=t.default}],execute:function(){i._RF.push({},"8acc05at9hLs7Psj9pPwD8q","FarmHelpShareDetailView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).imgHead=void 0,e.info=void 0,e.txtName=void 0,e.txtLevel=void 0,e.pbTime=void 0,e.txtTime=void 0,e.thiefRoleId=void 0,e.crop=void 0,e.dt=0,e.name="FarmHelpShareDetailView",e.url="ui/module/plant/FarmHelpShareDetailView",e}e(i,t);var h=i.prototype;return h.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("content/head");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.pbTime.progress<=0?d.showFlyTip("帮助信息已过期"):t.thiefRoleId&&IS(c).reqOtherRoleNotice(t.thiefRoleId,1)})),this.imgHead=r.findChildComponent(i,"image",o),this.txtName=this.findChildComponent("content/imgName/txtName",s),this.txtLevel=this.findChildComponent("content/imgLevel/txtLevel",s),this.pbTime=this.findChildComponent("content/pbTime",a),this.txtTime=this.findChildComponent("content/txtTime",s);var l=this.findChild("content/btnGreen");this.addComponentCallbackListener(l,n.EventType.CLICK,(function(){t.onGotoHelp()}))},h.registerUpdateHandler=function(){},h.onAfterOpen=function(){var t=this.openArgs,e=t[0],i=t[1];this.crop=i.landIdToInfo[e].crop;var n=this.crop.robber;this.thiefRoleId=n.id,this.loadRemoteIcon(n.head.url,this.imgHead),this.txtName.string=n.name,this.txtLevel.string=n.level,this.updateTime()},h.onUpdate=function(t){this.dt+=t,this.dt>=1&&(this.dt=0,this.updateTime())},h.onBeforeClose=function(){},h.onDestroy=function(){},h.updateTime=function(){var t=this.crop.end_time-this.crop.start_time,e=Math.max(0,this.crop.end_time-l.serverTime);this.pbTime.progress=e/t,this.txtTime.string=l.formatTimeForSecond(e)},h.onGotoHelp=function(){if(this.openArgs&&0!=this.openArgs.length){var t=this.crop.battle_list,e=IS(p).GetRoleId();if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i]==e)return void d.showFlyTip(GetLanguage(200492));IS(f).reqHomeFarmBattleBegin(this.crop.id,this.thiefRoleId,this.openArgs[1],this.openArgs[0]),battleMain.enterChapter(0),this.close()}},i}(h));i._RF.pop()}}}));

