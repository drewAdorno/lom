System.register("chunks:///_virtual/ParkingSpaceView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./TimeUtil.ts","./index57.ts","./MessageView.ts","./RoleDefine.ts","./ParkingControl.ts","./ParkingDataCache.ts","./ParkingDefine.ts","./UIDefine.ts","./BaseTabView.ts"],(function(e){"use strict";var t,i,n,o,a,r,s,c,u,h,l,f,d,p;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){o=e.default},function(e){a=e.default},null,function(e){r=e.default},function(e){s=e.RoleEventDefine,c=e.RoleRedPointSystemEnum},function(e){u=e.default},function(e){h=e.ParkingDataCache},function(e){l=e.ParkingEventDefine},function(e){f=e.PanelTabType},function(e){d=e.BaseTabView,p=e.ItemTabBtn}],execute:function(){n._RF.push({},"42b96JD3cBIbIWk3fbInaQ1","ParkingSpaceView",void 0);e("default",function(e){t(o,e);var n=o.prototype;function o(){var t;return(t=e.call(this)||this).isActive=!1,t.parentView=void 0,t.nodeSubRoot=void 0,t.name="ParkingSpaceView",t.url="ui/module/parking/ParkingSpaceView",t.tabTypes=[f.Parking_FriendSpace,f.Parking_SearchSpace,f.Parking_PublicSpace,f.Parking_CrossSpace],t.poolTime=2e4,t.defaultMaker=g,t}return n.setActive=function(e){this.isActive!=e&&(this.isActive=e,e?this.open(null):this.close())},n.onInit=function(){e.prototype.onInit.call(this),this.nodeSubRoot=this.findChild("container/content/nodeSubRoot")},n.registerUpdateHandler=function(){this.addEvent(s.ROLE_RED_POINT_LIST_UPDATE,this.UpdateTabRed,this),this.addEvent(s.ROLE_RED_DETAIL_UPDATE,this.onRoleRedDetailUpdate,this),this.addEvent(l.PARKING_CROSS_MERGE_INFO,this.refreshLock,this)},n.onTabSelected=function(e,t){if(e==f.Parking_CrossSpace&&a.getServerOpenTimeToUTC8(21,0,0,0)-a.lastServerTime>0)return void r.showFlyTip(GetLanguage(202260));this.setIndex(e)},n.UpdateTabRed=function(){},n.onRoleRedDetailUpdate=function(e){e==c.System_Parking&&this.UpdateTabRed()},n.onAfterOpenTab=function(){IS(u).reqCrossMergeTime(),this.trySetParent(),this.refreshLock()},n.refreshLock=function(){for(var e,t=i(this.btnList);!(e=t()).done;){var n=e.value;null==n||n.refreshLock()}},n.trySetParent=function(){var e=uiMgr.getOpenView("ParkingMainView");e&&e.nodeSubRoot&&this.node.setParent(e.nodeSubRoot)},o}(d));var g=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).imgLock=void 0,t}t(i,e);var n=i.prototype;return n.init=function(t,i,n){e.prototype.init.call(this,t,i,n),this.imgLock=o.findChild(i,"lock"),this.imgLock.active=!1},n.setData=function(t,i){e.prototype.setData.call(this,t,i),this.refreshLock()},n.refreshLock=function(){this.type==f.Parking_CrossSpace?this.imgLock.active=IS(h).checkMergeLock():this.imgLock.active=!1},n.onClickHandler=function(){var e=this.data.openFuncId;e&&!this.view.checkFunctionOpen(e)||(this.type==f.Parking_CrossSpace&&IS(h).checkMergeLock()?r.showFlyTip(GetLanguage(303280)):this.view.onTabSelected(this.type,this.index))},i}(p);n._RF.pop()}}}));

