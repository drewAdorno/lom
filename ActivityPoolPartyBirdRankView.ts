System.register("chunks:///_virtual/ActivityPoolPartyBirdRankView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./FriendControl.ts","./FrameDataCache.ts","./RankControl.ts","./RankDefine.ts","./RankModel.ts","./RoleDataCache.ts","./RoleDefine.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,n,e,o,a,r,s,d,h,c,m,f,l,v,k,u,y,R,g;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Button,o=t.Label,a=t.Sprite,r=t.ScrollView},function(t){s=t.ListItem},function(t){d=t.default},function(t){h=t.default},null,function(t){c=t.default},function(t){m=t.FrameDataCache},function(t){f=t.default},function(t){l=t.RankDefine},function(t){v=t.RankModel},function(t){k=t.RoleDataCache},function(t){u=t.PlayerAttr},function(t){y=t.default},function(t){R=t.ActivityType},function(t){g=t.BaseView}],execute:function(){var I;n._RF.push({},"c8fcbrwFspNrYIvkjt2tl4t","ActivityPoolPartyBirdRankView",void 0);var C="",p=((I={})[R.PoolPartyEndBirdGame]=!0,I),x=(t("default",function(t){function n(){var i;return(i=t.call(this)||this).tabBtns=[],i.actType=void 0,i.curIndex=0,i.nodeReward=void 0,i.nodeRank=void 0,i.nodeTopRank=void 0,i.nodeMyRank=void 0,i.rankList=void 0,i.txtMyRank=void 0,i.txtMyScore=void 0,i.myFrame=void 0,i.myIcon=void 0,i.txtMyName=void 0,i.txtServer=void 0,i.actInfo=void 0,i.rankId=void 0,i.rankInfo=void 0,i.curRankPage=void 0,i.name="ActivityPoolPartyBirdRankView",i.url="ui/module/activityPoolParty/ActivityPoolPartyBirdRankView",i}i(n,t);var s=n.prototype;return s.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()}));var n=this.findChild("btnClose");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.close()})),this.nodeReward=this.findChild("root/nodeReward"),this.nodeRank=this.findChild("root/nodeRank"),this.nodeTopRank=this.findChild("root/nodeTopRank"),this.nodeMyRank=this.findChild("root/myRank"),this.txtMyRank=this.findChildComponent("root/myRank/rankNum",o),this.txtMyScore=this.findChildComponent("root/myRank/score",o),this.txtMyName=this.findChildComponent("root/myRank/name",o),this.txtServer=this.findChildComponent("root/myRank/txtServer",o),this.myFrame=this.findChildComponent("root/myRank/imgFrame/frame/imgHeadFrame",a),this.myIcon=this.findChildComponent("root/myRank/imgFrame/frame/imgIcon",a);var s=this.findChildComponent("root/nodeRank/rankList",r);this.rankList=this.addUIList(s,x),this.addComponentCallbackListener(s.node,r.EventType.SCROLL_TO_BOTTOM,(function(){if(t.curRankPage<t.rankInfo.max_page){t.curRankPage++;var i=new Array;i.push({type:t.rankId,server:1,page:t.curRankPage}),IS(f).reqRankList(i)}}))},s.registerUpdateHandler=function(){this.addEvent(l.RankInfoBack,this.UpdateRankInfo,this)},s.onAfterOpen=function(){this.actType=R.PoolPartyEndBirdGame,this.txtMyName.string=IS(k).GetRoleAttr(u.ROLE_ATTR_NAME),p[this.actType]?(this.txtMyName.node.setPosition(this.txtMyName.node.getPosition().x,0),this.txtServer.node.active=!1):(this.txtMyName.node.setPosition(this.txtMyName.node.getPosition().x,15),this.txtServer.node.active=!0,this.txtServer.string=h.formatStrWithMirrorDeal(GetLanguage(700030193),IS(k).GetRoleAttr(u.ROLE_ATTR_SERVER))),this.loadRemoteIcon(IS(k).GetRoleAttr(u.ROLE_ATTR_HEAD_URL),this.myIcon);var t=IS(m).curFrameId;if(t>0){var i=configAvatar_frame.getDataByKey(t);this.loadIcon(this.myFrame,"icon_frame",i.icon),this.myFrame.node.active=!0}else this.myFrame.node.active=!1;this.actInfo=IS(y).GetActivityInfo(this.actType),this.rankId=this.actInfo.roundCfg.rank_id;var n=configRanktype.getDataByKey(this.rankId);C=n.prefix;var e=new Array;e.push({type:this.rankId,server:1,page:1}),this.curRankPage=1,IS(f).reqRankList(e)},s.onBeforeClose=function(){this.rankId=0,this.rankList.clearData(),this.curIndex>0&&(this.tabBtns[this.curIndex].normalGo.active=!0,this.tabBtns[this.curIndex].selectedGo.active=!1,this.curIndex=0)},s.onDestroy=function(){},s.UpdateRankInfo=function(){if(this.rankInfo=IS(v).GetRankInfoByType(this.rankId),this.rankInfo){var t;this.txtMyRank.string=0!=this.rankInfo.my_info.rank?this.rankInfo.my_info.rank:GetLanguage(200037),this.txtMyScore.string=C+h.GetNumString(null!=(t=this.rankInfo.my_info.score)?t:0);for(var i=[],n=0;n<this.rankInfo.rank_list.length;n++)i.push(this.rankInfo.rank_list[n]);this.rankList.datas=i}},n}(g)),function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).imgFrame=void 0,i.imgIcon=void 0,i.txtRank=void 0,i.txtName=void 0,i.txtServer=void 0,i.txtScore=void 0,i.imgHeadFrame=void 0,i}i(n,t);var r=n.prototype;return r.onInit=function(){var t=this;this.imgFrame=d.findChildComponent(this.node,"imgFrame",a),this.imgIcon=d.findChildComponent(this.node,"imgFrame/frame/imgIcon",a),this.txtRank=d.findChildComponent(this.node,"rankNum",o),this.txtName=d.findChildComponent(this.node,"name",o),this.txtServer=d.findChildComponent(this.node,"txtServer",o),this.txtScore=d.findChildComponent(this.node,"score",o),this.imgHeadFrame=d.findChildComponent(this.node,"imgFrame/frame/imgHeadFrame",a),this.view.addComponentCallbackListener(this.imgFrame.node,e.EventType.CLICK,(function(){IS(c).reqOtherRoleNotice(t.data.belong_id)}))},r.onRender=function(t,i){this.view.loadRemoteIcon(t.head.url,this.imgIcon);var n=t.head.frame_id;if(n>0){this.imgHeadFrame.node.active=!0;var e=configAvatar_frame.getDataByKey(n);this.view.loadIcon(this.imgHeadFrame,"icon_frame",e.icon)}else this.imgHeadFrame.node.active=!1;this.txtName.string=t.name,p[R.PoolPartyEndBirdGame]?(this.txtName.node.setPosition(this.txtName.node.getPosition().x,-55),this.txtServer.node.active=!1):(this.txtName.node.setPosition(this.txtName.node.getPosition().x,-40),this.txtServer.node.active=!0,this.txtServer.string=h.formatStrWithMirrorDeal(GetLanguage(700030193),t.serv_id)),this.txtScore.string=C+h.GetNumString(t.score),this.txtRank.node.active=!0,this.txtRank.string=t.rank},r.onItemClick=function(){IS(c).reqOtherRoleNotice(this.data.info.belong_id)},n}(s));n._RF.pop()}}}));

