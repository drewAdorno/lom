System.register("chunks:///_virtual/ReturnNewServerView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./PlatformUtil.ts","./StorageUtil.ts","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./MessageView.ts","./PayDataCache.ts","./RoleDataCache.ts","./ReturnControl.ts","./ReturnDataCache.ts","./ReturnDefine.ts","./BaseSubView.ts"],(function(e){"use strict";var t,n,r,i,o,a,s,d,u,l,c,f,h,w,v,m,y,R,S,C,p;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.ScrollView,i=e.Button,o=e.Label,a=e.RichText,s=e.js},function(e){d=e.ItemGrid},function(e){u=e.ListItem},function(e){l=e.default},function(e){c=e.PlatformUtil},function(e){f=e.default},function(e){h=e.default},null,function(e){w=e.ConfigGlobal},function(e){v=e.default},function(e){m=e.default},function(e){y=e.RoleDataCache},function(e){R=e.default},function(e){S=e.ReturnDataCache},function(e){C=e.ReturnEventDefine},function(e){p=e.BaseSubView}],execute:function(){n._RF.push({},"dbe47sbE+5JGJyU5NjrIhaY","ReturnNewServerView",void 0);e("default",function(e){function n(){var t;return(t=e.call(this)||this).rewardList=void 0,t.btnReward=void 0,t.money=void 0,t.notRewardMoney=void 0,t.rewardMoney=void 0,t.name="ReturnNewServerView",t.url="ui/module/return/ReturnNewServerView",t.poolTime=3e3,t}t(n,e);var d=n.prototype;return d.onInit=function(){this.rewardList=this.addUIList(this.findChildComponent("root/rewardScroll",r),b),this.rewardList.lackCenter=!0,this.btnReward=this.findChild("root/btnReward"),this.addComponentCallbackListener(this.btnReward,i.EventType.CLICK,(function(){var e=IS(S).GetReturnNewServPush();e&&e>0?(f.set("newServerOldId",String(IS(y).GetRoleId())),f.set("chooseServerId",String(e)),c.restartGame()):v.showFlyTip(GetLanguage(104400))})),this.money=this.findChildComponent("root/rewardDes/rewardMoney/num",o),this.notRewardMoney=this.findChildComponent("root/rewardDes/notRewardMoney",a),this.rewardMoney=this.findChild("root/rewardDes/rewardMoney")},d.onAfterOpen=function(){IS(R).send_return_new_serv_push_c2s(),this.rewardList.datas=w.back_showredawrd2,this.refreshMoney()},d.registerUpdateHandler=function(){this.addEvent(C.UpdatReturnNewServPush,this.refreshMoney)},d.refreshMoney=function(){var e=IS(S).GetReturnNewMaxMoney(),t=IS(m).GetRechargeInfo();if(t.total_money>=w.rebate_back3/100)this.rewardMoney.active=!0,this.money.string="X"+e/100,this.notRewardMoney.string="";else{this.rewardMoney.active=!1;var n=s.formatStr("<color=#229113>%s</color>",t.total_money);this.notRewardMoney.string=h.formatStrWithMirrorDeal(s.formatStr("<b><color=#00000>%s</color></b>",GetLanguage(104401)),w.rebate_back3/100,n)}},d.onBeforeClose=function(){},d.onDestroy=function(){},n}(p));var b=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).itemGridNode=void 0,t.itemGrid=void 0,t}t(n,e);var r=n.prototype;return r.onInit=function(){this.itemGridNode=l.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode)},r.onRender=function(e,t){this.itemGrid.SetItemId(e,0)},n}(u);n._RF.pop()}}}));

