System.register("chunks:///_virtual/ActivityMergeServersLoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./TimeUtil.ts","./index57.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./StringUtil.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,r,a,d,c,h,l,f,u,v,m,g,p,y;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.Layout,r=t.Label,a=t.ScrollView},function(t){d=t.ItemGrid},function(t){c=t.ListItem},function(t){h=t.default},function(t){l=t.default},null,function(t){f=t.default},function(t){u=t.default},function(t){v=t.ActivityEventDefine,m=t.ActivityType,g=t.ActivityState},function(t){p=t.default},function(t){y=t.BaseView}],execute:function(){n._RF.push({},"1b55256G75Mv5QKl/mC/baS","ActivityMergeServersLoginView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).txtLeftTime=void 0,e.taskList=void 0,e.deltaTime=0,e.leftTime=0,e.canUpdate=!1,e.name="ActivityMergeServersLoginView",e.url="ui/module/activityMergeServers/ActivityMergeServersLoginView",e}e(n,t);var d=n.prototype;return d.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()})),this.dealMirrorLayout(this.findChildComponent("view/nodeTime",s)),this.txtLeftTime=this.findChildComponent("view/nodeTime/txtLeftTime",r);var n=this.findChildComponent("view/taskList",a);this.taskList=this.addUIList(n,L)},d.registerUpdateHandler=function(){this.addEvent(v.OnLoginSignUpdate,this.updateInfo,this)},d.onAfterOpen=function(){var t,e=IS(u).GetActivityInfo(m.MergeServersLogin),i=null!=(t=e.state_time[e.state])?t:e.state_time[g.Open];this.leftTime=i.end_time-l.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=l.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026),this.updateInfo()},d.onBeforeClose=function(){this.canUpdate=!1},d.onDestroy=function(){},d.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=l.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},d.updateInfo=function(){for(var t,e,n=IS(u).GetActivityInfo(m.MergeServersLogin),o=configAct_login.getDatas(),s=[],r=i(o);!(e=r()).done;){var a=e.value;a.act_type==n.type&&a.group_id==n.roundCfg.group_id&&s.push(a)}var d=IS(u).GetSignInfo(m.MergeServersLogin),c=null!=(t=d.get_day)?t:[];s.sort((function(t,e){var i=2,n=2;return d.day>=t.day&&(i=c.includes(t.id)?3:1),d.day>=e.day&&(n=c.includes(e.id)?3:1),i!=n?i-n:t.day-e.day})),this.taskList.datas=s},n}(y));var L=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtTitle=void 0,e.rewardScroll=void 0,e.mask=void 0,e.btnGet=void 0,e.received=void 0,e.undone=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this;this.txtTitle=h.findChildComponent(this.node,"title/Label",r),this.mask=h.findChild(this.node,"mask"),this.received=h.findChild(this.node,"received"),this.undone=h.findChild(this.node,"undone"),this.btnGet=h.findChild(this.node,"btnGet"),this.view.addComponentCallbackListener(this.btnGet,o.EventType.CLICK,(function(){IS(f).send_24_23(m.MergeServersLogin,t.data.id)})),this.rewardScroll=this.view.addUIList(h.findChildComponent(this.node,"rewardScroll",a),C)},n.onRender=function(t,e){this.txtTitle.string=p.formatStrWithMirrorDeal(GetLanguage(200319),t.day),this.rewardScroll.datas=t.reward;var i,n=IS(u).GetSignInfo(m.MergeServersLogin);n.day>=t.day?(null!=(i=n.get_day)?i:[]).includes(t.id)?(this.btnGet.active=!1,this.received.active=!0,this.mask.active=!0,this.undone.active=!1):(this.btnGet.active=!0,this.received.active=!1,this.mask.active=!1,this.undone.active=!1):(this.btnGet.active=!1,this.received.active=!1,this.mask.active=!1,this.undone.active=!0)},i}(c),C=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.itemGridNode=h.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode)},n.onRender=function(t,e){this.itemGrid.SetItemId(t[0],t[1])},i}(c);n._RF.pop()}}}));

