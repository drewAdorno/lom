System.register("chunks:///_virtual/FarmPvpResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigGlobal.ts","./NodeUtil.ts","./index57.ts","./ItemGrid.ts","./BattleData.ts","./MessageView.ts","./ChatDefine.ts","./PvpControl.ts","./ChatDataCache.ts","./PvpDataCache.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,a,s,d,r,h,l,c,f,u,p,v,C,m;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.Button,a=e.Label,s=e.Sprite},function(e){d=e.ConfigGlobal},function(e){r=e.default},null,function(e){h=e.ItemGrid},function(e){l=e.ChapterType},function(e){c=e.default},function(e){f=e.ChatDefine},function(e){u=e.default},function(e){p=e.ChatDataCache,v=e.EPvpShareType},function(e){C=e.PvpDataCache},function(e){m=e.BaseView}],execute:function(){n._RF.push({},"a0359s7RupDIoHIDGNwd85T","FarmPvpResultView",void 0);e("FarmPvpResultView",function(e){function n(){var t;return(t=e.call(this)||this).heads=void 0,t.txtTime=void 0,t.nodeWin=void 0,t.nodeDefeat=void 0,t.chapterType=void 0,t.nodeFarmWin=void 0,t.nodeFarmLose=void 0,t.nodeBtnShare=void 0,t.nodeBtnReplay=void 0,t.soloData=void 0,t.name="FarmPvpResultView",t.url="ui/module/plant/FarmPvpResultView",t}t(n,e);var s=n.prototype;return s.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,o.EventType.CLICK,(function(){e.close()})),this.txtTime=this.findChildComponent("title/txtTime",a),this.nodeWin=this.findChild("nodeWin"),this.nodeDefeat=this.findChild("nodeDefeat"),this.nodeFarmWin=this.findChild("nodeWin/zy_txt_quganchenggong"),this.nodeFarmLose=this.findChild("nodeDefeat/zy_txt_quganshibai"),this.nodeBtnShare=this.findChild("btnShare"),this.addComponentCallbackListener(this.nodeBtnShare,o.EventType.CLICK,(function(){IS(p).IsOpenInput()?e.soloData.atk_role&&e.soloData.def_role&&(e.soloData.atk_role.sex=e.soloData.atk_role.figure.gender,e.soloData.def_role.sex=e.soloData.def_role.figure.gender,IS(p).SendShareData(f.ChatLinkType.PvpShare,e.soloData,void 0,void 0,v.roleSolo),IS(u).reqSoloVideoShare(e.soloData.vid)):c.showFlyTip("玩家等级达到"+d.chat_level+"级后开启分享")})),this.nodeBtnReplay=this.findChild("btnReplay"),this.addComponentCallbackListener(this.nodeBtnReplay,o.EventType.CLICK,(function(){IS(u).reqSoloVideo(e.soloData.vid),battleMain.enterChapter(0),uiMgr.closeAllView(["MainView","MessageView","GuideView","BattleHubView"]),uiMgr.getOpenView("MainView").setIndex(0)})),this.heads=[];for(var i=1;i<=2;i++){var n=this.findChild("head"+i);this.heads[i-1]=new D(n,this)}},s.registerUpdateHandler=function(){},s.onAfterOpen=function(){this.chapterType=this.openArgs[0];var e=IS(C).result;if(e){this.soloData=IS(C).cacheSoloData||{},this.nodeFarmWin.active=this.chapterType==l.Farm,this.nodeFarmLose.active=this.chapterType==l.Farm,this.nodeWin.active=e.isWin,this.nodeDefeat.active=!e.isWin,this.nodeBtnShare.active=this.chapterType==l.RoleSolo,this.nodeBtnReplay.active=this.chapterType==l.RoleSolo;for(var t=0;t<2;t++)this.heads[t].onRender(e.objs[t],t)}},s.refreshReward=function(){var e=d.pvp_win_reward,t=this.findChild("nodeWin/nodeReward/Layout"),n=this.findChild("nodeWin/nodeReward/item");t.removeAllChildren();for(var o,a=i(e);!(o=a()).done;){var s=o.value,r=nodeInstantiate.instantiate(n);r.active=!0,new h(this,r).SetItemId(s[0],s[1]),r.setParent(t)}},s.onBeforeClose=function(){},s.onDestroy=function(){},n}(m));var D=function(){function e(e,t){this.node=void 0,this.txtName=void 0,this.imgHeadIcon=void 0,this.view=void 0,this.node=e,this.view=t,this.txtName=r.findChildComponent(this.node,"txtName",a),this.imgHeadIcon=r.findChildComponent(this.node,"imgHeadIcon",s)}return e.prototype.onRender=function(e,t){this.txtName.string=e.name,this.view.loadRemoteIcon(e.head,this.imgHeadIcon)},e}();n._RF.pop()}}}));

