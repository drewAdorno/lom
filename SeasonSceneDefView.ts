System.register("chunks:///_virtual/SeasonSceneDefView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./RoleDataCache.ts","./SeasonDefine.ts","./SeasonSceneControl.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,r,d,a,h,f,l,c,u,v,m,C,p,w,S;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.Label,r=t.ScrollView,d=t.sys,a=t.Color,h=t.Vec2,f=t.Sprite},function(t){l=t.ItemGrid},function(t){c=t.ListItem},function(t){u=t.default},function(t){v=t.default},function(t){m=t.default},null,function(t){C=t.RoleDataCache},function(t){p=t.SeasonEventDefine},function(t){w=t.default},function(t){S=t.BaseView}],execute:function(){n._RF.push({},"10960OAB1tC8pizUryDU027","SeasonSceneDefView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).txtName=void 0,e.txtTime=void 0,e.txtNum=void 0,e.nodeMyInfo=void 0,e.rewardList=void 0,e.txRewardState=void 0,e.leftNode=void 0,e.rightNode=void 0,e.pos=new h,e.name="SeasonSceneDefView",e.url="ui/module/season/scene-view/SeasonSceneDefView",e}e(n,t);var f=n.prototype;return f.onInit=function(){var t=this,e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("content/btnMove");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close();var e=t.pos;IS(w).reqMove(2,{x:e.x,y:e.y})}));var n=this.findChild("imgMask");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.close()}));var d=this.findChild("content/info");this.txtName=u.findChildComponent(d,"txtName",s),this.txtTime=u.findChildComponent(d,"txtTime",s),this.txtNum=u.findChildComponent(d,"txtNum",s),this.nodeMyInfo=this.findChild("content/info/info");var a=u.findChildComponent(d,"rewardScroll",r);this.rewardList=this.addUIList(a,y,!1),this.rewardList.lackCenter=!0,this.txRewardState=u.findChildComponent(d,"txRewardState",s);var h=this.findChild("content/info/info/left");this.leftNode=new I(this,h);var f=this.findChild("content/info/info/right");this.rightNode=new I(this,f)},f.registerUpdateHandler=function(){this.addEvent(p.SEASON_SCENE_DEF_INFO,this.onDefInfo,this)},f.onAfterOpen=function(){var t=this.openArgs[0],e=this.openArgs[1],i=configSeason_building_plot.getDataByKey(t);this.txtName.string=v.formatStr(d.uiMirror?"[##2,##3] ##1":"##1 [##2,##3]",i.name,e.x,e.y),this.pos.set(e),IS(w).reqDefInfo({x:e.x,y:e.y}),7==i.type?(this.rewardList.node.active=!0,this.nodeMyInfo.active=!1,this.txRewardState.node.active=!0,this.onRewardInfo(i.event_reward_id)):(this.rewardList.node.active=!1,this.nodeMyInfo.active=!0,this.txRewardState.node.active=!1)},f.onBeforeClose=function(){},f.onDestroy=function(){},f.onRewardInfo=function(t){for(var e,n=configSeason_mapevent_reward.getDataByKey(t[0]).reward,o=[],s=i(n);!(e=s()).done;){var r=e.value;o.push([r[0],r[1]])}this.rewardList.datas=o},f.onDefInfo=function(t){this.txtNum.string=v.formatStr(GetLanguage(204620),t.num,t.total),this.txtNum.color=t.num<t.total?new a("#49361A"):new a("#B91717"),this.txtTime.string=m.formatTimeForSecond(t.move_time),this.leftNode.show(t.atk_queue),this.rightNode.show(t.def_queue)},n}(S));var y=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).itemGridNode=void 0,e.itemGrid=void 0,e.rate=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.itemGridNode=u.findChild(this.node,"itemGrid"),this.itemGrid=new l(this.view,this.itemGridNode),this.rate=u.findChildComponent(this.node,"rateTxt",s)},n.onRender=function(t,e){this.rate.string=v.formatStr(d.uiMirror?"m/##1":"##1/m",t[1]),this.itemGrid.SetItemId(t[0])},i}(c),I=function(){function t(t,e){this.view=void 0,this.scroll=void 0,this.nodeNone=void 0,this.view=t;var i=u.findChildComponent(e,"ScrollView",r);this.scroll=this.view.addUIList(i,g),this.nodeNone=u.findChild(e,"none")}return t.prototype.show=function(t){!t||t.length<=0?(this.scroll.node.active=!1,this.nodeNone.active=!0):(this.scroll.node.active=!0,this.scroll.datas=t,this.nodeNone.active=!1)},t}(),g=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).head=void 0,e.nodeSelf=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.head=u.findChildComponent(this.node,"icon",f),this.nodeSelf=u.findChild(this.node,"self")},n.onRender=function(t,e){this.view.loadRemoteIcon(t.head.url,this.head),this.nodeSelf.active=!1,t.role_id==IS(C).GetRoleId()&&(this.nodeSelf.active=!0)},i}(c);n._RF.pop()}}}));

