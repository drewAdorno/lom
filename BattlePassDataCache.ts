System.register("chunks:///_virtual/BattlePassDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattlePassDefine.ts"],(function(e){"use strict";var t,a,s;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy},function(e){s=e.BattlePassDefine}],execute:function(){a._RF.push({},"59bbbPgCSdNgYh+Rm0UOv66","BattlePassDataCache",void 0);e("BattlePassDataCache",function(){function e(){this.if_buy=void 0,this.id=void 0,this.end_time=void 0,this.lev=void 0,this.max_lev=void 0,this.exp=void 0,this.need_exp=void 0,this.extra_times=void 0,this.extra_max_times=void 0,this.extra_need_exp=void 0,this.bundle_id=void 0,this.extra_reward=void 0,this.free_reward=[],this.high_reward=[],this.task_list=[],this.add_exp=void 0,this.passInfo=[]}var a=e.prototype;return a.clear=function(){},a.updateInfo=function(e){var a,i,r,_,n,d,l={};l.if_buy=e.if_buy,l.if_buy_2=e.if_buy_2,l.id=e.id,l.end_time=e.end_time,l.lev=e.lev,l.max_lev=e.max_lev,l.exp=e.exp,l.need_exp=e.need_exp,l.extra_times=e.extra_times,l.extra_max_times=e.extra_max_times,l.extra_need_exp=e.extra_need_exp,l.bundle_id=e.bundle_id,l.total_exp=null!=(a=e.total_exp)?a:0,l.extra_reward=null!=(i=e.extra_reward)?i:[],l.free_reward=null!=(r=e.free_reward)?r:[],l.high_reward=null!=(_=e.high_reward)?_:[],l.high_reward_2=null!=(n=e.high_reward_2)?n:[],l.task_list=null!=(d=e.task_list)?d:[],l.specialReward={};for(var o,h=t(null!=(u=e.special_reward_list)?u:[]);!(o=h()).done;){var u,p=o.value;l.specialReward[p]=!0}this.passInfo[e.id]=l,normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.updateClose=function(e){delete this.passInfo[e.id],normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE),uiMgr.close("BattlePassView")},a.updateTask=function(e){var t,a=null!=(t=e.id)?t:1,i=this.passInfo[a];i||(this.passInfo[a]={},(i=this.passInfo[a]).id=a);for(var r=0;r<i.task_list.length;r++)if(i.task_list[r].task_id==e.task_list[0].task_id){i.task_list[r]=e.task_list[0];break}normalEvent.emit(s.BATTLE_PASS_TASK_INFO_UPDATE),normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.updateTaskReward=function(e){var t,a=null!=(t=e.id)?t:1,i=this.passInfo[a];i||(this.passInfo[a]={},(i=this.passInfo[a]).id=a);for(var r=0;r<i.task_list.length;r++)if(i.task_list[r].task_id==e.task_id){i.task_list[r].state=2;break}i.add_exp=e.add_exp,i.lev=e.lev,i.exp=e.exp;for(var _=0;_<e.lev;_++)0==i.free_reward[_].status&&(i.free_reward[_].status=1),0==i.high_reward[_].status&&(i.high_reward[_].status=1),i.high_reward_2.length>0&&0==i.high_reward_2[_].status&&(i.high_reward_2[_].status=1);normalEvent.emit(s.BATTLE_PASS_TASK_REWARD_UPDATE),normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.updateLevReward=function(e){var t,a=null!=(t=e.id)?t:1,i=this.passInfo[a];i||(this.passInfo[a]={},(i=this.passInfo[a]).id=a);var r=[];1==e.type?r=i.free_reward:2==e.type?r=i.high_reward:4==e.type&&(r=i.high_reward_2),r[e.take_lev-1]={status:2},normalEvent.emit(s.BATTLE_PASS_TAKE_REWARD),normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.updateAddReward=function(e){var t,a=null!=(t=e.id)?t:1,i=this.passInfo[a];i||(this.passInfo[a]={},(i=this.passInfo[a]).id=a),i.exp=e.exp,i.extra_times=e.extra_times,normalEvent.emit(s.BATTLE_PASS_TAKE_REWARD),normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.updateExp=function(e){var t,a,i=null!=(t=e.id)?t:1,r=this.passInfo[i];r||(this.passInfo[i]={},(r=this.passInfo[i]).id=i),r.lev=e.lev,r.exp=e.exp,r.total_exp=null!=(a=e.total_exp)?a:0;for(var _=0;_<e.lev;_++)0==r.free_reward[_].status&&(r.free_reward[_].status=1),0==r.high_reward[_].status&&(r.high_reward[_].status=1),r.high_reward_2.length>0&&0==r.high_reward_2[_].status&&(r.high_reward_2[_].status=1);normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.updateSpecialReward=function(e){var a,i=null!=(a=e.id)?a:1,r=this.passInfo[i];r||(this.passInfo[i]={},(r=this.passInfo[i]).id=i),r.specialReward={};for(var _,n=t(null!=(d=e.special_reward_list)?d:[]);!(_=n()).done;){var d,l=_.value;r.specialReward[l]=!0}normalEvent.emit(s.BATTLE_PASS_INFO_UPDATE)},a.getPassInfoList=function(){return this.passInfo},a.getPassInfo=function(e){return this.passInfo[e]},e}());a._RF.pop()}}}));

