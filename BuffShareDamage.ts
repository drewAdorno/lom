System.register("chunks:///_virtual/BuffShareDamage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./FixMath.ts","./Buff.ts","./EnumDefine.ts"],(function(t){"use strict";var e,r,n,a,o,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.ObjectPool},function(t){a=t.FixMath},function(t){o=t.Buff},function(t){i=t.TargetFilter,c=t.HealthType}],execute:function(){r._RF.push({},"fc725cwvDtDi4c4z15+toca","BuffShareDamage",void 0);var u=t("BuffShareDamage",function(t){function r(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._calType=void 0,e._calPercent=void 0,e}e(r,t);var n=r.prototype;return n.onBegin=function(){},n.onShareDamageAction=function(t,e,r){if(!this.runner)return 0;var n=this.config.param5,o=this.runner.getTargets(i.Enemy,n[1],e.position,n[0]),u=t;u=0==this._calType?a.roundInt(t):a.roundInt(u*this._calPercent*this.skillPar);var l=c.Hurt_Share_Damage;r!=c.Hurt_Crit&&r!=c.Hurt_Double_Crit||(l=c.Hurt_Share_Damage_Crit);for(var s=0;s<o.length;s++){var f=o[s];1!=this._calType||e!=f?this.runner.healthTarget(f,u,l):this.runner.healthTarget(f,a.roundInt(t+u),l)}return 0},n.onDestroy=function(){r._pool.free(this)},r.alloc=function(t){var e=r._pool.alloc();return e.config=t,e._calType=t.param1,e._calPercent=a.round(t.param2/1e4),e},r}(o));u._pool=new n(u,30),r._RF.pop()}}}));

