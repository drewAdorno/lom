System.register("chunks:///_virtual/ComplainView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./TimeUtil.ts","./BaseView.ts","./ChatDataCache.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./CommonDefine.ts","./MessageView.ts"],(function(t){"use strict";var e,i,n,s,o,a,r,h,l,d,u,p,c,C,f,m,g;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,s=t.EditBox,o=t.Label,a=t.UITransform,r=t.NodeEventType,h=t.HorizontalTextAlignment},function(t){l=t.default},function(t){d=t.default},function(t){u=t.BaseView},function(t){p=t.ChatDataCache},function(t){c=t.default},function(t){C=t.RoleDataCache},function(t){f=t.PlayerAttr},function(t){m=t.CommonEventDefine},function(t){g=t.default}],execute:function(){i._RF.push({},"2c21c2D9GFLVodh22DUB0hY","ComplainView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).inputMessage=void 0,e.warnTip=void 0,e.endNode=void 0,e.warnText=void 0,e.editBox=void 0,e.timer=void 0,e.type=void 0,e.isSend=!1,e.appealNum=0,e.name="ComplainView",e.url="ui/module/common/ComplainView",e}e(i,t);var u=i.prototype;return u.registerUpdateHandler=function(){this.addEvent(m.UPDATE_APPEAL_RESULT,this.showEnd)},u.onInit=function(){var t=this;this.addComponentCallbackListener(this.findChild("imgMask"),n.EventType.CLICK,(function(){t.close()})),this.InitInputMessage(),this.InitWarnTip(),this.InitEndNode()},u.InitInputMessage=function(){var t=this;this.inputMessage=this.findChild("inputMessage"),this.editBox=this.findChildComponent("inputMessage/content/EditBox",s),this.editBox.placeholder=GetLanguage_UI(100923);var e=this.findChild("inputMessage/content/buttons/btnEnsure");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.appealNum>0?g.showFlyTip(GetLanguage(200201)):0!=t.editBox.string.length?t.editBox.string.length>50?g.showFlyTip(GetLanguage(200203)):(IS(c).send_role_appeal_c2s(1,t.editBox.string),t.isSend=!0):g.showFlyTip(GetLanguage(200202))}));var i=this.findChild("inputMessage/content/buttons/btnCancel");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}))},u.InitWarnTip=function(){var t=this;this.warnTip=this.findChild("warnTip"),this.warnText=this.findChildComponent("warnTip/txtContent",o);var e=this.findChildComponent("warnTip/txtContent",a),i=e.height;this.addComponentCallbackListener(this.warnText.node,r.SIZE_CHANGED,(function(){e.height>i&&16!=t.type?t.warnText.horizontalAlign=h.LEFT:t.warnText.horizontalAlign=h.CENTER}));var s=this.findChild("warnTip/buttons/btnEnsure");this.addComponentCallbackListener(s,n.EventType.CLICK,(function(){t.close()}));var l=this.findChild("warnTip/buttons/btnGo");this.addComponentCallbackListener(l,n.EventType.CLICK,(function(){t.appealNum>0?g.showFlyTip(GetLanguage(200201)):(t.warnTip.active=!1,t.inputMessage.active=!0)}))},u.InitEndNode=function(){var t=this;this.endNode=this.findChild("endNode");var e=this.findChild("endNode/buttons/btnEnsure");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}))},u.showEnd=function(t){1==t.type&&this.isSend&&(this.inputMessage.active=!1,this.endNode.active=!0),this.appealNum=t.num},u.onAfterOpen=function(){var t,e=this;if(this.timer&&(this.removeTimer(this.timer),this.timer=null),IS(c).send_role_appeal_c2s(0),this.isSend=!1,this.appealNum=0,this.type=null!=(t=this.openArgs[0])?t:16,this.warnTip.active=!0,this.warnText.horizontalAlign=h.CENTER,16==this.type){var i=IS(C).GetRoleAttr(f.ROLE_ATTR_ID),n=IS(p).GetIsBanRole(i),s=d.formatTimeStringForSecond(n-d.serverTime);this.warnText.string=l.formatStrWithMirrorDeal(GetLanguage(200204),s),n?this.timer=this.addTimer(1,n-d.serverTime,(function(){n-d.serverTime<=0&&(e.timer=null),s=d.formatTimeStringForSecond(n-d.serverTime),e.warnText.string=l.formatStrWithMirrorDeal(GetLanguage(200204),s)})):this.close()}else 18==this.type&&(this.warnText.string=GetLanguage(200205));this.inputMessage.active=!1,this.endNode.active=!1},u.onBeforeClose=function(){this.timer&&(this.removeTimer(this.timer),this.timer=null)},u.onDestroy=function(){},i}(u));i._RF.pop()}}}));

