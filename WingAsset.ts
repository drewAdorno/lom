System.register("chunks:///_virtual/WingAsset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./AssetPool.ts","./BaseAsset.ts","./SpineSkeleton.ts"],(function(t){"use strict";var e,i,n,s,o,a,c,r,l,u,h;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,s=t.isValid,o=t.sp,a=t.Layers},function(t){c=t.V2},function(t){r=t.AssetPoolState},function(t){l=t.BaseAsset},function(t){u=t.SpineSkeleton,h=t.AnimationType}],execute:function(){var p;n._RF.push({},"4f2b3AUeKFPDrRUGBYSpVef","WingAsset",void 0),function(t){t[t.Not=0]="Not",t[t.Ani=128]="Ani"}(p||(p={}));t("WingAsset",function(t){function n(){var e;return(e=t.call(this)||this).id=0,e._bind=void 0,e._spine=void 0,e._animator=void 0,e._ani="idel",e._bindPos=1,e._socket=void 0,e.isUI=!0,e}e(n,t),n.alloc=function(t,e,i,n,s){void 0===s&&(s=1);var o=wingPool.alloc(e,3);return o._bind=i,o.parent=n,o.layer=a.Enum.DEFAULT,o._spine=t,o.loadSync(),o.scale=1,o.position=c.ZERO,o.aniName="idel"+s,o._bindPos=s,o},n.free=function(t){t.free()};var l=n.prototype;return l.onLoadComplete=function(){var t=this._node.getComponent(u);t.animationType=h.UI,t.__preload(),this._animator=t},l.onAfterCacheFree=function(){t.prototype.onAfterCacheFree.call(this);var e=this._spine;if(this._spine=null,s(e)&&this._socket){var i=e.sockets.indexOf(this._socket);e.sockets.splice(i,1),this._socket=null,e.sockets=e.sockets}},l.onUpdate=function(e){if(t.prototype.onUpdate.call(this,e),!(this.poolState>r.Useing)){var i=this._spine;s(this.node)&&s(i)&&i._skeleton&&(this._socket||(this._socket=new o.SpineSocket(this._bind,this.node),i.sockets.push(this._socket),i.sockets=i.sockets))}},l.onApply=function(t){this._changeValue&p.Ani&&this._animator.setAnimation(0,this._ani,!0)},i(n,[{key:"aniName",set:function(t){this._ani!=t&&(this._ani=t,this._changeValue=this._changeValue|p.Ani)}}]),n}(l));n._RF.pop()}}}));

