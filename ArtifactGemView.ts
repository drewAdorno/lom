System.register("chunks:///_virtual/ArtifactGemView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./ObjectUtil.ts","./ChatDefine.ts","./EquipDefine.ts","./ArtifactControl.ts","./ArtifactDataCache.ts","./ArtifactDefine.ts","./ArtifactRefinedView.ts","./BaseView.ts"],(function(t){"use strict";var e,o,n,i,s,d,h,a,r,l,c,f,v,u,m,g,S,p,C,I,y,w,T,b,L,_,A,B;return{setters:[function(t){e=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t.Button,s=t.Node,d=t.UITransform,h=t.math,a=t.ScrollView,r=t.Label,l=t.Sprite,c=t.Vec3,f=t.Color,v=t.js,u=t.RichText},function(t){m=t.ListItem},function(t){g=t.default},function(t){S=t.default},null,function(t){p=t.ConfigGlobal},function(t){C=t.default},function(t){I=t.ChatDefine},function(t){y=t.EquipEventDefine},function(t){w=t.default},function(t){T=t.ArtifactDataCache},function(t){b=t.ArtifactEvent,L=t.posToRotation,_=t.numToRoman},function(t){A=t.ArtifactGemAttrItem},function(t){B=t.BaseView}],execute:function(){n._RF.push({},"e1621M84VlGjJ37mk1vTf6j","ArtifactGemView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).tarStone=void 0,e.curFiltePos=1,e.curFilteType=0,e.curFilteAttr=0,e.type=1,e.selList=[],e.GemShowList=[],e.max=!1,e.Rightmax=!1,e.posToStone=void 0,e.gemScroll=void 0,e.attrScroll=void 0,e.posScroll=void 0,e.tabScroll=void 0,e.listLeft=void 0,e.listRight=void 0,e.btnType=void 0,e.btnPos=void 0,e.btnAttr=void 0,e.nodePosScroll=void 0,e.nodeType=void 0,e.nodeTypeNone=void 0,e.nodePosNone=void 0,e.txtTypeTitle=void 0,e.nodeDown=void 0,e.nodeUp=void 0,e.txtAttr=void 0,e.nodeLeft=void 0,e.nodeRight=void 0,e.nodeInfoBlock=void 0,e.attrNone=void 0,e.btnShare=void 0,e.btnWear=void 0,e.btnReplace=void 0,e.btnTake=void 0,e.btnGen=void 0,e.name="ArtifactGemView",e.url="ui/module/artifact/ArtifactGemView",e.poolTime=3e3,e.fullScreen=!0,e}e(n,t);var v=n.prototype;return v.onInit=function(){var t=this,e=this.findChild("btnClose");this.addComponentCallbackListener(e,i.EventType.CLICK,(function(){t.close()}));var o=this.findChild("root/nodeShow/nodeInfoShow/nodeRight/imgBg/nodeInfo");o.on(s.EventType.SIZE_CHANGED,(function(){var e=o.getComponent(d).contentSize;t.findChildComponent("root/nodeShow/nodeInfoShow/nodeRight/imgBg",d).contentSize=new h.Size(e.x,e.y+20),t.findChildComponent("root/nodeShow/nodeInfoShow/nodeRight/imgBg/imgArr",d).contentSize=new h.Size(e.x,e.y+20)}));var n=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/nodeInfo");n.on(s.EventType.SIZE_CHANGED,(function(){var e=n.getComponent(d).contentSize;t.findChildComponent("root/nodeShow/nodeInfoShow/nodeLeft/imgBg",d).contentSize=new h.Size(e.x,e.y+20),t.findChildComponent("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/imgArr",d).contentSize=new h.Size(e.x,e.y+20)}));var l=this.findChildComponent("root/nodeShow/scrollGoodsList",a);this.gemScroll=this.addUIList(l,E);var c=this.findChildComponent("root/nodeShowAttr/ScrollView",a);this.attrScroll=this.addUIList(c,N);var f=this.findChildComponent("root/nodeShow/scrollPos/ScrollView-001",a);this.posScroll=this.addUIList(f,F);var v=this.findChildComponent("root/nodeShow/tabScroll",a);this.tabScroll=this.addUIList(v,G),this.adjustMirrorNode(this.findChild("root/nodeShow/nodeFeilt/btnType/sel"),0,!0),this.btnType=this.findChild("root/nodeShow/nodeFeilt/btnType"),this.addComponentCallbackListener(this.btnType,i.EventType.CLICK,(function(){t.curFilteType=0,t.curFiltePos=0,t.switchFilteType(2)})),this.adjustMirrorNode(this.findChild("root/nodeShow/nodeFeilt/btnPos/sel"),0,!0),this.btnPos=this.findChild("root/nodeShow/nodeFeilt/btnPos"),this.addComponentCallbackListener(this.btnPos,i.EventType.CLICK,(function(){t.curFiltePos=1,t.switchFilteType(1)})),this.btnAttr=this.findChild("root/nodeShow/nodeFeilt/btnAttr"),this.addComponentCallbackListener(this.btnAttr,i.EventType.CLICK,(function(){var e={typeStr:"artifactattr",listIdx:t.curFilteAttr,targetNode:t.btnAttr,selectValue:p.artifact_gem_attr};uiMgr.openView("EquipConditionListView",e),t.nodeDown.active=!1,t.nodeUp.active=!0}));var u=this.findChild("root/nodeShow/nodeType/btn");this.addComponentCallbackListener(u,i.EventType.CLICK,(function(){t.curFilteType=0,t.switchFilteType(2)})),this.nodePosScroll=this.findChild("root/nodeShow/scrollPos"),this.nodeType=this.findChild("root/nodeShow/nodeType"),this.nodeTypeNone=this.findChild("root/nodeShow/nodeNone/type1"),this.nodePosNone=this.findChild("root/nodeShow/nodeNone/type2"),this.txtTypeTitle=this.findChildComponent("root/nodeShow/nodeType/title/Label",r),this.nodeDown=this.findChild("root/nodeShow/nodeFeilt/btnAttr/imgDown"),this.nodeUp=this.findChild("root/nodeShow/nodeFeilt/btnAttr/imgUp"),this.txtAttr=this.findChildComponent("root/nodeShow/nodeFeilt/btnAttr/txtSelect",r),this.nodeInfoBlock=this.findChild("root/nodeShow/nodeInfoShow"),this.addComponentCallbackListener(this.nodeInfoBlock,i.EventType.CLICK,(function(){t.nodeInfoBlock.active=!1,t.tarStone=0}));var m=this.findChild("root/nodeShow/scrollGoodsList/view/nodeTouch");this.addComponentCallbackListener(m,i.EventType.CLICK,(function(){t.nodeInfoBlock.active=!1,t.tarStone=0})),this.nodeLeft=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft"),this.nodeRight=this.findChild("root/nodeShow/nodeInfoShow/nodeRight"),this.attrNone=this.findChild("root/nodeShowAttr/nodeNone");var S=g.findChildComponent(this.nodeLeft,"imgBg/nodeInfo/ScrollView",a);this.listLeft=this.addUIList(S,A);var C=g.findChildComponent(this.nodeRight,"imgBg/nodeInfo/ScrollView",a);this.listRight=this.addUIList(C,A),this.initStoneShow(),this.initLeftBtnCallBack()},v.initLeftBtnCallBack=function(){var t=this;this.btnWear=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/nodeInfo/nodeBtn/btnWear"),this.addComponentCallbackListener(this.btnWear,i.EventType.CLICK,(function(){var e=IS(T).getStoneInfoByID(t.tarStone);IS(w).reqGemWearInfo(e.pos,t.tarStone),t.nodeInfoBlock.active=!1,t.tarStone=0})),this.btnShare=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/nodeInfo/nodeBtn/btnShare"),this.addComponentCallbackListener(this.btnShare,i.EventType.CLICK,(function(){uiMgr.openView("ChatView",null,null,{contentType:I.ChatContentType.Share,linkType:I.ChatLinkType.ArtifactGemInfo,cacheData:{gemInfoStr:JSON.stringify(IS(T).getStoneInfoByID(t.tarStone).toObject())},showString:GetLanguage(201673)}),t.nodeInfoBlock.active=!1,t.tarStone=0})),this.btnReplace=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/nodeInfo/nodeBtn/btnReplace"),this.addComponentCallbackListener(this.btnReplace,i.EventType.CLICK,(function(){var e=IS(T).getStoneInfoByID(t.tarStone);IS(w).reqGemWearInfo(e.pos,t.tarStone),t.nodeInfoBlock.active=!1,t.tarStone=0})),this.btnTake=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/nodeInfo/nodeBtn/btnTake"),this.addComponentCallbackListener(this.btnTake,i.EventType.CLICK,(function(){var e=IS(T).getStoneInfoByID(t.tarStone);IS(w).reqGemWearInfo(e.pos,0),t.nodeInfoBlock.active=!1,t.tarStone=0})),this.btnGen=this.findChild("root/nodeShow/nodeInfoShow/nodeLeft/imgBg/nodeInfo/nodeBtn/btnGen"),this.addComponentCallbackListener(this.btnGen,i.EventType.CLICK,(function(){uiMgr.openView("ArtifactGemUpgradeView",t.tarStone),t.nodeInfoBlock.active=!1,t.tarStone=0}))},v.initStoneShow=function(){var t=this;this.posToStone=[];for(var e=function(e){var o=t.findChild("root/nodeShowStone/nodeStone/stone"+e);t.posToStone[e]={imgIcon:g.findChildComponent(o,"icon",l),imgFrame:g.findChildComponent(o,"frame",l),sel:g.findChild(o,"sel"),red:g.findChild(o,"red"),txtNum:g.findChildComponent(o,"bg/num",r),bgNum:g.findChild(o,"bg"),index:e},t.addComponentCallbackListener(o,i.EventType.CLICK,(function(){var o=IS(T).pos_list[e];o&&0!=o&&(t.tarStone=o,t.refreshStoneInfo()),t.curFiltePos=e,t.switchFilteType(1)}))},o=1;o<7;o++)e(o)},v.onAfterOpen=function(){var t;this.curFiltePos=null!=(t=this.openArgs[0])?t:1,this.posScroll.datas=[1,2,3,4,5,6],this.tabScroll.datas=[].concat(configArtifact_gemsets.getDatas()),this.nodeInfoBlock.active=!1,this.refreshGemShow(),this.refreshAttrShow(),this.refreshStoneShow(),this.switchFilteType(1)},v.registerUpdateHandler=function(){this.addEvent(b.TYPE_ARTIFACT_GEM_INFO_UPDATE,this.refreshUsingStoneShow,this),this.addEvent(b.TYPE_ARTIFACT_GEM_INFO_UPDATE_RED,this.refreshGemScrollShow,this),this.addEvent(b.TYPE_ARTIFACT_GEM_POS_FILTE_SEL,this.refreshGemShow,this),this.addEvent(b.TYPE_ARTIFACT_GEM_TYPE_FILTE_SEL,this.refreshTypeGemShow,this),this.addEvent(b.TYPE_ARTIFACT_GEM_REFRESH_SEL,this.refreshStoneInfo,this),this.addEvent(y.AUTO_OPEN_CONDITION_CHANGE,this.onConditionChange,this)},v.refreshGemScrollShow=function(){this.gemScroll.updateAll()},v.refreshUsingStoneShow=function(){this.refreshAttrShow(),this.refreshStoneShow(),this.gemScroll.updateAll(),1==this.nodeInfoBlock.active&&this.refreshStoneInfo(),0!=this.curFiltePos?this.switchFilteType(1):0!=this.curFilteType?this.refreshTypeGemShow():this.switchFilteType(2),this.refreshAttrGemShow()},v.onConditionChange=function(t){this.nodeDown.active=!0,this.nodeUp.active=!1,"artifactattr"==t.typeStr&&(this.curFilteAttr=t.selectValue,this.refreshAttrGemShow())},v.refreshStoneShow=function(){for(var t in this.posToStone){var e=this.posToStone[t],n=IS(T).pos_list[t],i=IS(T).getStoneInfoByID(n);if(e.red.active=!1,i){var s=configArtifact_gemquality.getDataByKey(i.quality);this.loadIcon(e.imgFrame,"icon_gem",s.frame);var d=configArtifact_gemsets.getDataByKey(i.suit);this.loadIcon(e.imgIcon,"icon_gem",d.icon),i.lv>0?(e.bgNum.active=!0,e.txtNum.string="Lv."+i.lv):e.bgNum.active=!1}else{this.loadIcon(e.imgFrame,"icon_gem",""),this.loadIcon(e.imgIcon,"icon_gem",""),e.txtNum.string="";for(var h,a=o(IS(T).gem_list);!(h=a()).done;){if(h.value.pos==Number(t)){e.red.active=!0;break}}}}},v.refreshAttrShow=function(){var t=IS(T).getStoneSuitInfo(),e=[],n=[];for(var i in t)t[i]>=2&&n.push({key:Number(i),count:t[i],type:1});if(n.sort((function(t,e){return t.count>e.count?-1:1})),C.isEmpty(t))this.attrNone.active=!0;else{if(e.push({type:3}),e.push({type:2}),e.push({type:4}),0!=n.length)for(var s,d=o(n);!(s=d()).done;){var h=s.value;e.push(h)}else e.push({type:5});this.attrNone.active=!1}this.attrScroll.datas=e},v.refreshGemShow=function(){var t=this;this.posScroll.updateAll();var e=IS(T).getSortedGemList();if(e=e.filter((function(e){return e.pos==t.curFiltePos})),this.nodePosScroll.active=!0,this.nodePosNone.active=!1,!e||0==e.length)return this.nodePosNone.active=!0,this.nodeTypeNone.active=!1,void(this.gemScroll.datas=[]);this.gemScroll.datas=e,this.GemShowList=e},v.refreshTypeGemShow=function(){var t=this;this.tabScroll.node.active=!1,this.txtTypeTitle.string=configArtifact_gemsets.getDataByKey(this.curFilteType).name;var e=IS(T).getSortedGemList();if(e=e.filter((function(e){return e.suit==t.curFilteType})),this.nodeType.active=!0,this.nodeTypeNone.active=!1,!e||0==e.length)return this.nodePosNone.active=!1,this.nodeTypeNone.active=!0,void(this.gemScroll.datas=[]);this.gemScroll.datas=e,this.GemShowList=e,this.gemScroll.node.active=!0,this.nodeType.active=!0,this.btnAttr.active=!0},v.refreshAttrGemShow=function(){0==this.curFilteAttr?this.txtAttr.string=GetLanguage(200263):this.txtAttr.string=configAttribute.getDataByKey(this.curFilteAttr).name;var t=[];if(0!=this.curFilteAttr){for(var e,n=o(this.GemShowList);!(e=n()).done;){var i=e.value;i.base_attr[0].k!=this.curFilteAttr||t.push(i)}this.gemScroll.datas=t}else this.gemScroll.datas=this.GemShowList},v.refreshStoneInfo=function(){this.nodeInfoBlock.active=!0,this.nodeRight.active=!1;var t=IS(T).getStoneInfoByID(this.tarStone),e=IS(T).pos_list[t.pos];e&&0!=e&&this.tarStone!=e&&(this.nodeRight.active=!0,this.refreshCompareNode(e,this.nodeRight,!1)),this.nodeLeft.active=!0,this.refreshCompareNode(this.tarStone,this.nodeLeft,!0),this.refreshLeftBtn()},v.refreshCompareNode=function(t,e,n){void 0===n&&(n=!0);var s=IS(T).getStoneInfoByID(t);if(s){var h=g.findChildComponent(e,"imgBg/nodeInfo/nodeName/imgFrame",l),a=g.findChildComponent(e,"imgBg/nodeInfo/nodeName/imgFrame/imgIcon",l),v=g.findChildComponent(e,"imgBg/nodeInfo/nodeName/name",r),u=g.findChildComponent(e,"imgBg/nodeInfo/nodeName/level",r),m=g.findChildComponent(e,"imgBg/nodeInfo/nodeSuit/suit1",r),S=g.findChildComponent(e,"imgBg/nodeInfo/nodeSuit/suit2",r),p=g.findChild(e,"imgBg/nodeInfo/nodeName/lock/lock"),C=g.findChild(e,"imgBg/nodeInfo/nodeName/lock/unlock"),I=g.findChild(e,"imgBg/nodeInfo/nodeName/lock");this.addComponentCallbackListener(I,i.EventType.CLICK,(function(){IS(w).reqGemLock(t)}));var y=configArtifact_gemquality.getDataByKey(s.quality).frame;this.loadIcon(h,"icon_gem",y);var b=configArtifact_gemsets.getDataByKey(s.suit);this.loadIcon(a,"icon_gem",b.icon),h.node.eulerAngles=new c(0,0,L[s.pos]);var A=configArtifact_gemsets.getDataByKey(s.suit);v.string=A.name+"Â·"+_[s.pos],u.string="Lv."+s.lv;var B=[];B.push({info:s.base_attr[0],type:1});for(var E,F=o(s.rand_attr);!(E=F()).done;){var N=E.value;B.push({info:N,type:2})}var G=n?this.listLeft:this.listRight;G.datas=B,G.node.getComponent(d).height=50*B.length,m.string=GetLanguage(201495)+A.bonus2_desc,S.string=GetLanguage(201496)+A.bonus4_desc;var k=IS(T).getStoneSuitInfo();m.color=new f(134,123,114),S.color=new f(134,123,114),k[s.suit]&&k[s.suit]>=2&&(m.color=new f(49,95,20)),k[s.suit]&&k[s.suit]>=4&&(S.color=new f(49,95,20)),p.active=1==s.is_lock,C.active=1!=s.is_lock}},v.refreshLeftBtn=function(){var t=IS(T).getStoneInfoByID(this.tarStone);this.btnShare.active=!1,this.btnWear.active=!1,this.btnReplace.active=!1,this.btnTake.active=!1,this.btnGen.active=!1;var e=configArtifact_gemquality.getDataByKey(t.quality).max_level;t.lv<e?this.btnGen.active=!0:this.btnShare.active=!0;var o=IS(T).pos_list[t.pos];o&&0!=o?this.btnReplace.active=!0:this.btnWear.active=!0,o==this.tarStone&&(this.btnWear.active=!1,this.btnReplace.active=!1,this.btnTake.active=!0)},v.switchFilteType=function(t){this.tabScroll.node.active=!1,this.nodePosScroll.active=!1,this.nodeType.active=!1,this.nodePosNone.active=!1,this.nodeTypeNone.active=!1,g.findChild(this.btnPos,"sel").active=!1,g.findChild(this.btnType,"sel").active=!1,1==t?(this.nodePosScroll.active=!0,g.findChild(this.btnPos,"sel").active=!0,this.gemScroll.node.active=!0,this.btnAttr.active=!0,this.refreshGemShow()):2==t&&(this.curFilteType=0,this.tabScroll.scrollTo(0),this.tabScroll.updateAll(),this.tabScroll.node.active=!0,g.findChild(this.btnType,"sel").active=!0,this.gemScroll.node.active=!1,this.btnAttr.active=!1)},v.onBeforeClose=function(){this.selList=[],this.tarStone=0},v.onDestroy=function(){},n}(B));var E=t("GemItem",function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).imgFrame=void 0,e.imgIcon=void 0,e.imgSel=void 0,e.imgUsing=void 0,e.new=void 0,e.lock=void 0,e.txtNum=void 0,e}e(o,t);var n=o.prototype;return n.onInit=function(){var t=this;this.imgFrame=g.findChildComponent(this.node,"imgFrame",l),this.imgIcon=g.findChildComponent(this.node,"imgFrame/imgIcon",l),this.imgSel=g.findChild(this.node,"sel"),this.imgUsing=g.findChild(this.node,"using"),this.lock=g.findChild(this.node,"lock"),this.txtNum=g.findChildComponent(this.node,"num",r),this.new=g.findChild(this.node,"new"),this.view.loadIcon(this.new.getComponent(l),"fate","mg_ui_new"),this.view.addComponentCallbackListener(this.node,i.EventType.CLICK,(function(){t.data.is_red>0&&IS(w).reqRedRead(t.data.id);var e=t.view;e.tarStone!=t.data.id&&(e.tarStone=t.data.id,normalEvent.emit(b.TYPE_ARTIFACT_GEM_REFRESH_SEL))}))},n.onRender=function(t,e){var o=configArtifact_gemquality.getDataByKey(t.quality).frame;this.view.loadIcon(this.imgFrame,"icon_gem",o);var n=configArtifact_gemsets.getDataByKey(t.suit);for(var i in this.view.loadIcon(this.imgIcon,"icon_gem",n.icon),this.imgFrame.node.eulerAngles=new c(0,0,L[t.pos]),this.txtNum.string=t.lv>0?"Lv."+t.lv:"",this.imgUsing.active=!1,IS(T).pos_list)if(IS(T).pos_list[i]==t.id){this.imgUsing.active=!0;break}this.new.active=1==IS(T).getStoneInfoByID(this.data.id).is_red,this.lock.active=1==IS(T).getStoneInfoByID(this.data.id).is_lock},o}(m)),F=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).sel=void 0,e.normal=void 0,e.iconSel=void 0,e.normalSel=void 0,e.red=void 0,e}e(o,t);var n=o.prototype;return n.onInit=function(){var t=this;this.sel=g.findChild(this.node,"sel"),this.normal=g.findChild(this.node,"normal"),this.red=g.findChild(this.node,"rp"),this.iconSel=g.findChildComponent(this.node,"sel/num",l),this.normalSel=g.findChildComponent(this.node,"normal/num",l),this.view.addComponentCallbackListener(this.node,i.EventType.CLICK,(function(){t.view.curFiltePos=t.data,normalEvent.emit(b.TYPE_ARTIFACT_GEM_POS_FILTE_SEL)}))},n.onRender=function(t,e){var o=this.view;this.sel.active=o.curFiltePos==t,this.normal.active=o.curFiltePos!=t,o.loadIcon(this.iconSel,"sq","sq_ui_luoma0"+t),o.loadIcon(this.normalSel,"sq","sq_ui_an_luoma0"+t),this.red.active=!1;var n=IS(T).pos_list[t];if(!n||0==n){var i=IS(T).getSortedGemList();(i=i.filter((function(e){return e.pos==t})))&&i.length>0&&(this.red.active=!0)}},o}(m),N=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).txtName=void 0,e.txtBouns2=void 0,e.txtBouns4=void 0,e.node1=void 0,e.node2=void 0,e.node3=void 0,e.node4=void 0,e.node5=void 0,e}e(n,t);var i=n.prototype;return i.onInit=function(){var t=this;this.adaptiveSize=!0,this.node1=g.findChild(this.node,"node1"),this.node2=g.findChild(this.node,"node2"),this.node3=g.findChild(this.node,"node3"),this.node4=g.findChild(this.node,"node4"),this.node5=g.findChild(this.node,"node5"),this.txtName=g.findChildComponent(this.node1,"Label",r),this.txtBouns2=g.findChildComponent(this.node1,"eff1",r),this.txtBouns4=g.findChildComponent(this.node1,"eff2",r),this.view.addComponentCallbackListener(this.txtBouns4.node,s.EventType.SIZE_CHANGED,(function(){t.data.count>=4&&(t.node.getComponent(d).height=t.txtBouns4.getComponent(d).height+t.txtBouns2.getComponent(d).height,t._onSizeChange())})),this.view.addComponentCallbackListener(this.txtBouns2.node,s.EventType.SIZE_CHANGED,(function(){t.data.count>=2&&t.data.count<4&&(t.node.getComponent(d).height=t.txtBouns2.getComponent(d).height,t._onSizeChange())}))},i.onRender=function(t,e){this.node1.active=!1,this.node2.active=!1,this.node3.active=!1,this.node4.active=!1,this.node5.active=!1,1==t.type?(this.node1.active=!0,this.refreshStatue1()):2==t.type?(this.node2.active=!0,this.refreshStatus2()):4==t.type?(this.node4.active=!0,this.node.getComponent(d).height=50):3==t.type?(this.node3.active=!0,this.node.getComponent(d).height=50):5==t.type&&(this.node5.active=!0,this.node.getComponent(d).height=40)},i.refreshStatue1=function(){var t=configArtifact_gemsets.getDataByKey(this.data.key);this.txtName.string=t.name,this.txtBouns2.string=GetLanguage(201495)+"\n"+t.bonus2_desc,this.txtBouns4.string=GetLanguage(201496)+"\n"+t.bonus4_desc,this.txtBouns2.color=new f(134,123,114),this.txtBouns4.color=new f(134,123,114),this.txtBouns2.node.active=!1,this.txtBouns4.node.active=!1,this.data.count>=4?(this.txtBouns2.node.active=!0,this.txtBouns4.node.active=!0,this.txtBouns2.color=new f(49,95,20),this.txtBouns4.color=new f(49,95,20)):this.data.count>=2&&(this.txtBouns2.node.active=!0,this.txtBouns2.color=new f(49,95,20))},i.refreshStatus2=function(){var t=IS(T).getAllGemAttr(),e=0,n=g.findChild(this.node2,"layout");n.removeAllChildren();for(var i,s=o(t);!(i=s()).done;){var h=i.value;e+=1,this.addAttrIn(h.attr,h.value,n)}var a=20+30*e;this.node.getComponent(d).height=a,g.findChildComponent(this.node2,"bg",d).height=a},i.addAttrIn=function(t,e,o){var n=g.findChild(this.node2,"item"),i=nodeInstantiate.instantiate(n);i.setParent(o);var s=configAttribute.getDataByKey(t);g.findChildComponent(i,"Label",r).string=s.name;var d=g.findChildComponent(i,"eff1",r);2==s.show_type?d.string=v.formatStr("%s%",S.GetNumString(e/100)):3==s.show_type?d.string=S.GetNumString(Math.floor(e/100)/100):d.string=S.GetNumString(e)},n}(m),G=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).txtName=void 0,e.icon=void 0,e.redNode=void 0,e.txtDesc=void 0,e}e(n,t);var s=n.prototype;return s.onInit=function(){var t=this;this.redNode=g.findChild(this.node,"red"),this.txtName=g.findChildComponent(this.node,"txtName",r),this.txtDesc=g.findChildComponent(this.node,"txtDesc",u),this.icon=g.findChildComponent(this.node,"icon",l),this.view.addComponentCallbackListener(this.node,i.EventType.CLICK,(function(){t.view.curFilteType=t.data.id,normalEvent.emit(b.TYPE_ARTIFACT_GEM_TYPE_FILTE_SEL)}))},s.onRender=function(t,e){var n=this;this.txtName.string=t.name,this.view.loadIcon(this.icon,"icon_gem",t.icon);var i="<b><color=a26940>"+GetLanguage(201495)+":</color><color=544231>"+t.bonus2_desc+"</color></b>\n",s="<b><color=a26940>"+GetLanguage(201496)+":</color><color=544231>"+t.bonus4_desc+"</color></b>";this.txtDesc.string=i+s;for(var d=[],h=1;h<7;h++){var a=IS(T).pos_list[h];a&&0!=a||d.push(Number(h))}this.redNode.active=!1;var r=IS(T).getSortedGemList();r=r.filter((function(t){return t.suit==n.data.id}));for(var l,c=o(r);!(l=c()).done;){var f=l.value;if(d.includes(f.pos)){this.redNode.active=!0;break}}},n}(m);n._RF.pop()}}}));

