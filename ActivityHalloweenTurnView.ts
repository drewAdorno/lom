System.register("chunks:///_virtual/ActivityHalloweenTurnView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./index3.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StorageUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./SpineSkeleton.ts","./ConfigGlobal.ts","./MulLanguageUtil.ts","./BagDefine.ts","./BagModel.ts","./MessageView.ts","./RoleDefine.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./ActivityHalloweenDataCache.ts","./BaseView.ts","./EaseMethod.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,d,l,c,h,f,u,p,m,v,w,g,C,y,T,I,_,S,L,R,k,G,x,V,D,b,E,N,A;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,r=t.HorizontalTextAlignment,s=t.Sprite,a=t.Label,d=t.ScrollView,l=t.RichText,c=t.Toggle,h=t.js},function(t){f=t.V2},null,function(t){u=t.ItemGrid},function(t){p=t.ListItem},function(t){m=t.default},function(t){v=t.default},function(t){w=t.default},function(t){g=t.default},null,function(t){C=t.SpineSkeleton},function(t){y=t.ConfigGlobal},function(t){T=t.default},function(t){I=t.BagEventDefine},function(t){_=t.BagModel},function(t){S=t.default},function(t){L=t.RoleEventDefine},function(t){R=t.default},function(t){k=t.ActivityType,G=t.ActivityEventDefine,x=t.ActivityState},function(t){V=t.default},function(t){D=t.HorseCarnivalDataCache},function(t){b=t.default},function(t){E=t.ViewEvent,N=t.BaseView},function(t){A=t.EasingMethod}],execute:function(){var M,O,j;n._RF.push({},"6ecf51yIHZPwoUqqTQ/Yzqf","ActivityHalloweenTurnView",void 0);var B=((M={})[1]="wsj_ui_zhaunpan00",M[2]="wsj_ui_zhaunpan01",M[3]="wsj_ui_zhaunpan02",M),K=((O={})[1]=700,O[2]=1e3,O[3]=500,O),H=((j={})[3]=1062,j),U=["ArtifactGetView","HorseGetView","PlayerSkinGetView","FateNewView","GoodsGetView2"],P=(t("default",function(t){function n(){var e;return(e=t.call(this)||this).actType=void 0,e.nodeResParent=void 0,e.nodeResItem=void 0,e.nodeRolling=void 0,e.rollEff=void 0,e.bgEff=void 0,e.turnEff=void 0,e.resItems=void 0,e.redSelect=void 0,e.btnGift=void 0,e.btnStore=void 0,e.togSkip=void 0,e.skipAnim=void 0,e.iconTen=void 0,e.iconOne=void 0,e.txtOne=void 0,e.txtTen=void 0,e.redOne=void 0,e.redTen=void 0,e.txtNumReward=void 0,e.numScroll=void 0,e.tipsGo=void 0,e.tipsScroll=void 0,e.imgPreview=void 0,e.preDescNum=void 0,e.preDescGet=void 0,e.onlyRewardNum=0,e.iconRewardOne=void 0,e.iconRewardTen=void 0,e.txtRewardOne=void 0,e.txtRewardTen=void 0,e.preViewCount=0,e.refreshTimer=void 0,e.curTips=0,e.tipsTimer=0,e.txtLeftTime=void 0,e.deltaTime=0,e.leftTime=0,e.canUpdate=!1,e.jackpot=0,e.jackpotType=0,e.curIndex=0,e.finalIndex=0,e.reward_list=[],e.actionTime=2,e.moveTween=void 0,e.rerwardList=[],e.waitRewardList=[],e.rewardNum=12,e.extraReward=void 0,e.name="ActivityHalloweenTurnView",e.url="ui/module/halloween/ActivityHalloweenTurnView",e.poolTime=3e3,e.fullScreen=!0,e.actType=k.HalloweenTurn,e}e(n,t);var u=n.prototype;return u.onInit=function(){var t=this;this.initResShow(),this.btnStore=this.findChild("root/bottomBtn/btnStore"),this.addComponentCallbackListener(this.btnStore,o.EventType.CLICK,(function(){uiMgr.openView("ActivityHalloweenStoreView",k.Halloween)})),this.btnGift=this.findChild("root/bottomBtn/btnGift"),this.addComponentCallbackListener(this.btnGift,o.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalGiftView",k.HalloweenTurn)}));var e=this.findChild("root/btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var i=this.findChild("root/btnShow/btnShow");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){uiMgr.openView("ActivityHalloweenTurnPreView",t.actType)}));var n=this.findChild("root/btnSelect");this.redSelect=this.findChild("root/btnSelect/red"),this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){uiMgr.openView("ActivityHalloweenTurnTipsView")}));var h=this.findChild("root/turn/img/nodeTips/btnTips");this.addComponentCallbackListener(h,o.EventType.CLICK,(function(){for(var e=y.LIMITED_RANK_SYSTEM_DETAILS,i="",n=0;n<e.length;n++)e[n][0]==t.actType&&(i=T.GetconfigLanguage_Text(e[n][1]).text);""!=i&&S.showBoxTip({tip:i,btnCnt:1,horizontalAlign:r.LEFT})})),this.nodeRolling=this.findChild("root/turn/img/nodeRolling"),this.imgPreview=this.findChildComponent("root/turn/img/imgPreview",s),this.preDescNum=this.findChild("root/turn/img/preDesc/num"),this.preDescGet=this.findChild("root/turn/img/preDesc/get"),this.addComponentCallbackListener(this.imgPreview.node,o.EventType.CLICK,(function(){t.onClickPreview()})),this.txtLeftTime=this.findChildComponent("root/top/nodeTime/txtTime",a),this.txtNumReward=this.findChildComponent("root/numReward/num",a);var f=this.findChildComponent("root/numReward/ScrollView",d);this.numScroll=this.addUIList(f,P),this.tipsGo=this.findChild("root/top/tips");var u=this.findChildComponent("root/top/tips/ScrollView",d);this.tipsScroll=this.addUIList(u,F),this.iconOne=this.findChildComponent("root/btnOne/icon",s),this.iconTen=this.findChildComponent("root/btnTen/icon",s),this.txtOne=this.findChildComponent("root/btnOne/num",l),this.txtTen=this.findChildComponent("root/btnTen/num",l),this.redOne=this.findChild("root/btnOne/red"),this.redTen=this.findChild("root/btnTen/red"),this.iconRewardOne=this.findChildComponent("root/btnOne/iconBack",s),this.iconRewardTen=this.findChildComponent("root/btnTen/iconBack",s),this.txtRewardOne=this.findChildComponent("root/btnOne/numBack",a),this.txtRewardTen=this.findChildComponent("root/btnTen/numBack",a);var p=this.findChild("root/btnOne");this.addComponentCallbackListener(p,o.EventType.CLICK,(function(){t.onLottery(1)}));var w=this.findChild("root/btnTen");this.addComponentCallbackListener(w,o.EventType.CLICK,(function(){t.onLottery(2)})),this.togSkip=this.findChildComponent("root/toggleSkip",c),this.addComponentCallbackListener(this.togSkip.node,c.EventType.TOGGLE,(function(){t.togSkip.isChecked?v.set("SkipHCAnim",1):v.set("SkipHCAnim",0)})),this.skipAnim=this.findChild("skipAnim"),this.addComponentCallbackListener(this.skipAnim,o.EventType.CLICK,(function(){t.SkipAnim()}));for(var g=function(){var e=t.findChild("root/turn/itemRoll/itemGrid"+C),i={node:e,index:C,item_id:0,cfg_id:0,imgFram:m.findChildComponent(e,"imgFrame",s),imgIcon:m.findChildComponent(e,"imgIcon",s),num:m.findChildComponent(e,"num",a),select:m.findChild(e,"select"),light:m.findChild(e,"light"),limit:m.findChild(e,"nodeLimit"),only:m.findChild(e,"nodeOnly")};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){0!=i.item_id&&IS(_).OpenItemTips(i.item_id,e)})),t.rerwardList.push(i)},C=0;C<this.rewardNum;C++)g()},u.initResShow=function(){var t=this;this.nodeResParent=this.findChild("resRoot"),this.nodeResItem=this.findChild("resRoot/resItem"),this.nodeResItem.active=!1;var e=[IS(D).GetCost(this.actType)[0]];this.resItems=new Array;for(var i=function(i){var n=nodeInstantiate.instantiate(t.nodeResItem),r=e[i];t.addComponentCallbackListener(n,o.EventType.CLICK,(function(){IS(_).OpenItemTips(r,m.findChild(n,"txtNum"))})),n.parent=t.nodeResParent,n.active=!0;var d=m.findChildComponent(n,"imgIcon",s),l=configGoods.getDataByKey(r);t.loadIcon(d,"icon_item",l.icon),t.resItems.push({node:n,txtNum:m.findChildComponent(n,"txtNum",a),goodsGtid:r})},n=0;n<e.length;n++)i(n)},u.registerUpdateHandler=function(){this.addEvent(G.OnHorseCarnivalUpdate,this.updateInfo,this),this.addEvent(G.OnHorseCarnivalReward,this.updateReward,this),this.addEvent(G.OnHorseCarnivalLottery,this.updateLotteryResult,this),this.addEvent(I.GOODS_INFO_UPDATE,this.updateResShow,this),this.addEvent(L.ROLE_RES_UPDATE,this.updateResShow,this),this.addEvent(E.ViewClose,this.onViewClose,this)},u.onAfterOpen=function(){var t,e=this;this.rollEff=null,this.bgEff=null,this.turnEff=null,this.updateResShow(),IS(V).send_24_16(this.actType),this.togSkip.isChecked=1==v.get("SkipHCAnim"),this.skipAnim.active=!1,this.nodeRolling.active=!1;var i=IS(R).GetActivityInfo(this.actType),n=null!=(t=i.state_time[i.state])?t:i.state_time[x.Open];this.leftTime=n.end_time-g.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=g.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026);var o=IS(D).GetCost(this.actType),r=configGoods.getDataByKey(o[0]);this.loadIcon(this.iconOne,r.icon_group,r.icon),this.loadIcon(this.iconTen,r.icon_group,r.icon);var s=IS(D).GetDrawReward(this.actType),d=configGoods.getDataByKey(s[0]);this.loadIcon(this.iconRewardOne,d.icon_group,d.icon),this.loadIcon(this.iconRewardTen,d.icon_group,d.icon),this.txtRewardOne.string=h.formatStr("x%s",s[1]),this.txtRewardTen.string=h.formatStr("x%s",10*s[1]);var l=configMount_draw_cumulative_times.getDatas(),c=[];for(var u in l)if(l.hasOwnProperty(u)){var p=l[u];p.type==i.type&&p.group_id==i.roundCfg.group_id&&c.push(p)}this.numScroll.datas=c;var m=configMount_draw.getDatas(),w=[];for(var y in m)if(m.hasOwnProperty(y)){var T=m[y];T.type==i.type&&T.group_id==i.roundCfg.group_id&&w.push(T)}w.sort((function(t,e){return t.id-e.id}));for(var I=0;I<w.length;I++){var _=w[I],S=this.rerwardList[_.order-1];S.item_id=_.reward[0],S.num.string=_.reward[1],S.cfg_id=_.id;var L=configGoods.getDataByKey(S.item_id);this.loadIcon(S.imgIcon,L.icon_group,L.icon);var k=configColor.getDataByKey(L.quality);this.loadIcon(S.imgFram,"icon_equip",k.path),S.limit&&(S.limit.active=!1),S.only&&(S.only.active=!1),S.select.active=!1,S.light.active=!1}this.clearTimer();var G=function(){e.preViewCount=3==e.preViewCount?1:e.preViewCount+1;var t=B[e.preViewCount];if(e.loadIcon(e.imgPreview,"halloween_turn",t),1!=e.preViewCount){var i=K[e.preViewCount];e.preDescNum.active=!0,e.preDescGet.active=!1,e.findChildComponent("root/turn/img/preDesc/num/num",a).string=String(i)}else e.onlyRewardNum>0?(e.preDescNum.active=!0,e.preDescGet.active=!1,e.findChildComponent("root/turn/img/preDesc/num/num",a).string=String(e.onlyRewardNum)):(e.preDescNum.active=!1,e.preDescGet.active=!0)};if(G(),this.refreshTimer=this.addTimer(5,-1,G),null==this.turnEff){this.turnEff=this.addUIEffect("prefab/ui-effect/MX_tx_tongnianshiguang",this.findChild("root/turn/img"),-1,new f(0,0),1.1,(function(t){t.node.getComponent(C).needAnimation="deng1"}))}},u.clearTimer=function(){null!=this.refreshTimer&&(this.removeTimer(this.refreshTimer),this.refreshTimer=null)},u.onBeforeClose=function(){this.canUpdate=!1,this.curIndex=0,this.tipsTimer=0;for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.jackpot=0,this.jackpotType=0,this.waitRewardList=[],this.extraReward=null,this.clearTimer()},u.onDestroy=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].node.destroy();this.resItems={}},u.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=g.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},u.updateResShow=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].txtNum.string=w.GetNumString(IS(_).getGoodsCountByGoodsGtid(this.resItems[t].goodsGtid));var e,i,n=IS(D).GetCost(this.actType),o=IS(_).getGoodsCountByGoodsGtid(n[0]);this.redOne.active=o>=n[1],this.redTen.active=o>=10*n[1],o>=n[1]?(i="#5aff42",e="#27720d"):(i="#ff1f1f",e="#891000"),this.txtOne.string=h.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",e,i,n[1]),o>=10*n[1]?(i="#5aff42",e="#27720d"):(i="#ff1f1f",e="#891000"),this.txtTen.string=h.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",e,i,10*n[1])},u.updateInfo=function(){var t=this,e=IS(D).getInfo(this.actType);this.tipsGo.active=e.lucky_list.length>0,0!=this.tipsTimer&&this.removeTimer(this.tipsTimer),this.tipsGo.active&&(this.tipsScroll.datas=e.lucky_list,this.curTips=0,this.tipsTimer=this.addTimer(1,-1,(function(){t.curTips=t.curTips+1,t.curTips==e.lucky_list.length&&(t.curTips=0);var i=0==t.curTips?.2:1;t.tipsScroll.scrollTo(t.curTips,i)}))),this.redSelect.active=IS(b).GetTurnSelectRed()>0,this.updateReward()},u.updateReward=function(){var t=IS(D).getInfo(this.actType);this.txtNumReward.string=t.count+"",this.numScroll.updateAll(),this.findChildComponent("root/turn/img/nodeTips/drawNum",a).string=IS(D).getInfo(this.actType).remain_draw+"";for(var e,n=i(this.rerwardList);!(e=n()).done;){var o=e.value,r=configMount_draw.getDataByKey(o.cfg_id);if(r.num){o.limit.active=!0;var s=IS(D).getInfo(this.actType),d=m.findChildComponent(o.limit,"Node",a);if(d.string="限量 "+r.num,s.get_drop.length>0)for(var l,c=i(s.get_drop);!(l=c()).done;){var h=l.value,f=h.k,u=h.v;f==o.cfg_id&&(d.string="限量 "+(r.num-u))}}if(5==r.quality){o.only.active=!0;var p=r.guaranteed-t.count;this.onlyRewardNum=p}if(r.reward_replace.length>0){var v,w,g=null!=(v=null==(w=t.choose_list[o.cfg_id])?void 0:w[1])?v:0;if(g>0){5==r.quality&&(o.only.active=!1,this.onlyRewardNum=0);for(var C,y=i(r.reward_replace);!(C=y()).done;){var T=C.value;if(T[0]==g){o.num.string=T[1][1],o.item_id=T[1][0];var I=configGoods.getDataByKey(o.item_id);this.loadIcon(o.imgIcon,I.icon_group,I.icon);var _=configColor.getDataByKey(I.quality);this.loadIcon(o.imgFram,"icon_equip",_.path)}}}}1==this.preViewCount&&(this.onlyRewardNum>0?(this.preDescNum.active=!0,this.preDescGet.active=!1,this.findChildComponent("root/turn/img/preDesc/num/num",a).string=String(this.onlyRewardNum)):(this.preDescNum.active=!1,this.preDescGet.active=!0))}},u.onClickPreview=function(){var t=H[this.preViewCount];null!=t&&uiMgr.openView("PlayerSkinLookView",t,!0)},u.onLottery=function(t){var e=IS(D).GetCost(this.actType),i=e[0],n=e[1];2==t&&(n*=10),IS(_).getGoodsCountByGoodsGtid(i)>=n?IS(V).send_24_17(this.actType,t):uiMgr.openView("HorseCarnivalGiftView",this.actType)},u.updateLotteryResult=function(t){var e=this;if(t.act_type==this.actType){this.nodeRolling.active=!1;var i=IS(D).GetDrawReward(this.actType),n=1==t.type?i[1]:10*i[1];if(this.extraReward=[i[0],n],this.checkJackpot(t.drop_id_list),this.togSkip.isChecked)0!=this.jackpot?(this.openTypeView(this.jackpot,this.jackpotType),this.waitRewardList=t.reward_list,this.jackpot=0,this.jackpotType=0):(uiMgr.openView("GoodsGetView",t.reward_list,this.extraReward),this.extraReward=null);else{var o=t.drop_id_list[t.drop_id_list.length-1];if(this.finalIndex=configMount_draw.getDataByKey(o).order-1,this.reward_list=t.reward_list,this.skipAnim.active=!0,this.nodeRolling.active=!0,null==this.rollEff){this.rollEff=this.addUIEffect("prefab/ui-effect/MX_tx_tongnianshiguang",this.nodeRolling,-1,new f(0,0),1.1,(function(t){t.node.getComponent(C).needAnimation="deng2"}))}1==t.drop_id_list.length?this.doLotteryTween(this.finalIndex,(function(){for(var i=0;i<e.rerwardList.length;i++)e.rerwardList[i].select.active=!1,e.rerwardList[i].light.active=!1;e.rerwardList[e.finalIndex].select.active=!0,e.rerwardList[e.finalIndex].light.active=!0,e.curIndex=e.finalIndex,0!=e.jackpot?(e.waitRewardList=t.reward_list,e.openTypeView(e.jackpot,e.jackpotType),e.jackpot=0,e.jackpotType=0):(uiMgr.openView("GoodsGetView",t.reward_list,e.extraReward),e.extraReward=null),e.skipAnim.active=!1,e.nodeRolling.active=!1})):this.lotteryNext(0,t)}}},u.lotteryNext=function(t,e){var i,n=this,o=configMount_draw.getDataByKey(e.drop_id_list[t]).order-1;i=t<e.drop_id_list.length-1?function(){n.curIndex=o,n.lotteryNext(t+1,e)}:function(){for(var t=0;t<n.rerwardList.length;t++)n.rerwardList[t].select.active=!1,n.rerwardList[t].light.active=!1;n.rerwardList[o].select.active=!0,n.rerwardList[o].light.active=!0,n.curIndex=o,0!=n.jackpot?(n.waitRewardList=e.reward_list,n.openTypeView(n.jackpot,n.jackpotType),n.jackpot=0,n.jackpotType=0):(uiMgr.openView("GoodsGetView",e.reward_list,n.extraReward),n.extraReward=null),n.skipAnim.active=!1,n.nodeRolling.active=!1},this.doLotteryTween(o,i)},u.doLotteryTween=function(t,e){var i=this;null!=this.moveTween&&this.moveTween.stop();var n=4*this.rewardNum+t-this.curIndex;this.moveTween=this.addTween(0,1,this.actionTime,(function(t,e){for(var o=n*e,r=Math.floor((o+i.curIndex)%i.rewardNum),s=0;s<i.rerwardList.length;s++)i.rerwardList[s].select.active=!1,i.rerwardList[s].light.active=!1;i.rerwardList[r].select.active=!0})).easing(A.SINE_OUT).call((function(){e()}),.5).start()},u.SkipAnim=function(){null!=this.moveTween&&this.moveTween.stop();for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.rerwardList[this.finalIndex].select.active=!0,this.rerwardList[this.finalIndex].light.active=!0,this.curIndex=this.finalIndex,0!=this.jackpot?(this.waitRewardList=this.reward_list,this.openTypeView(this.jackpot,this.jackpotType),this.jackpot=0,this.jackpotType=0):(uiMgr.openView("GoodsGetView",this.reward_list,this.extraReward),this.extraReward=null),this.skipAnim.active=!1,this.nodeRolling.active=!1},u.checkJackpot=function(t){this.jackpot=0,this.jackpotType=0;for(var e,n=i(t);!(e=n()).done;){var o=e.value,r=configMount_draw.getDataByKey(o);if(r.goods_type)if(r.reward_replace.length>0){var s,a,d=null!=(s=null==(a=IS(D).getInfo(this.actType).choose_list[r.id])?void 0:a[1])?s:0;if(d>0)for(var l,c=i(r.reward_replace);!(l=c()).done;){var h=l.value;if(h[0]==d&&r.goods_type)return this.jackpot=h[1][0],this.jackpotType=r.goods_type,!0}else if(r.goods_type)return this.jackpot=r.reward[0],this.jackpotType=r.goods_type,!0}else if(r.goods_type)return this.jackpot=r.reward[0],this.jackpotType=r.goods_type,!0}return!1},u.onViewClose=function(t){this.waitRewardList.length<=0||U.includes(t)&&(uiMgr.openView("GoodsGetView",this.waitRewardList,this.extraReward),this.extraReward=null,this.waitRewardList=[])},u.openTypeView=function(t,e){if(1062!=t)switch(e){case 1:return void uiMgr.openView("ArtifactGetView",configGoods.getDataByKey(t).effect[0],!0);case 2:return void uiMgr.openView("HorseGetView",configGoods.getDataByKey(t).effect[0],!0);case 3:return void uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0);case 4:return void uiMgr.openView("FateNewView",configGoods.getDataByKey(t).effect[0]);case 5:return void uiMgr.openView("GoodsGetView2",t)}else uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0)},n}(N)),function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtDesc=void 0,e.itemGridNode=void 0,e.effNode=void 0,e.itemGrid=void 0,e.isReward=void 0,e.eff=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this;this.txtDesc=m.findChildComponent(this.node,"desc",l),this.itemGridNode=m.findChild(this.node,"itemGrid"),this.effNode=m.findChild(this.node,"eff"),this.itemGrid=new u(this.view,this.itemGridNode,(function(){var e=t.view,i=IS(D).getInfo(e.actType);!t.isReward&&i.count>=t.data.cumulative_times?IS(V).send_24_18(e.actType,t.data.id):IS(_).OpenItemTips(t.data.reward[0],t.itemGridNode)}))},n.onRender=function(t,e){this.itemGrid.SetItemId(t.reward[0],t.reward[1]);var i=this.view,n=IS(D).getInfo(i.actType);this.isReward=n.gotReward[t.id],this.view.removeUIEffect(this.eff),this.isReward?this.txtDesc.string=w.formatStrWithMirrorDeal(GetLanguage(200033)):n.count>=t.cumulative_times?(this.txtDesc.string=w.formatStrWithMirrorDeal(GetLanguage(200034)),this.eff=this.view.addUIEffect("prefab/ui-effect/MX_tx_tongyong_daojulingqu",this.effNode,-1)):this.txtDesc.string=h.formatStr("<b><color=#ff1c1c>%s</color><color=#80342e>/%s</color></b>",n.count,t.cumulative_times)},i}(p)),F=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txt=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.txt=m.findChildComponent(this.node,"txt",l)},n.onRender=function(t,e){var i,n=null==(i=configGoods.getDataByKey(t.k))?void 0:i.name;this.txt.string=w.formatStrWithMirrorDeal(GetLanguage(200050),t.s,n)},i}(p);n._RF.pop()}}}));

