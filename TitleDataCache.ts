System.register("chunks:///_virtual/TitleDataCache.ts",["cc","./TimeUtil.ts","./ObjectUtil.ts","./TitleDefine.ts"],(function(t){"use strict";var i,e,s,n;return{setters:[function(t){i=t.cclegacy},function(t){e=t.default},function(t){s=t.default},function(t){n=t.TitleEventDefine}],execute:function(){i._RF.push({},"eb1f8Wm05lJ7qnpWGxUv2IG","TitleDataCache",void 0);t("TitleDataCache",function(){function t(){this.hasTitleList={},this.curTitleId=0,this.timerList={}}var i=t.prototype;return i.clear=function(){throw new Error("Method not implemented.")},i.setTitleInfo=function(t){this.hasTitleList={};for(var i=0;i<t.title_list.length;i++){var e=t.title_list[i];this.hasTitleList[e.cfg_id]=e}this.curTitleId=t.current_title,this.updateTitleTime(),normalEvent.emit(n.Title_INFO_UPDATE)},i.updateTitleTime=function(){var t=this;for(var i in this.timerList)normalTimer.stop(this.timerList[i]);this.timerList={};var s=function(i){var s=t.hasTitleList[i].end_time;s>0&&s>e.serverTime&&(t.timerList[i]=normalTimer.start(1,s-e.serverTime,(function(){if(!t.hasTitleList[i]&&t.timerList[i])return delete t.timerList[i],void normalTimer.stop(t.timerList[i]);var s=t.hasTitleList[i].end_time;(0==s||s<=e.serverTime)&&(t.curTitleId==Number(i)&&(t.curTitleId=0),normalTimer.stop(t.timerList[i]),delete t.timerList[i],delete t.hasTitleList[i],normalEvent.emit(n.Title_INFO_UPDATE))})))};for(var r in this.hasTitleList)s(r)},i.setCurTitleId=function(t){this.curTitleId=t,normalEvent.emit(n.Title_INFO_UPDATE)},i.checkHasTitle=function(t){var i;return null!=(i=this.hasTitleList[t])&&i},i.checkTitleCanShow=function(t){var i=configTitle.getDataByKey(t);if(null==i)return!1;var n=i.open_time;if(s.isEmpty(n))return!0;n[0];return e.checkOpenTime(n)},i.checkHasTime=function(t){return!!this.hasTitleList[t]&&this.hasTitleList[t].end_time>0},i.getTitleTime=function(t){return this.hasTitleList[t]?this.hasTitleList[t].end_time:0},i.checkIsNew=function(t){return!!this.hasTitleList[t]&&1==this.hasTitleList[t].red_point},i.updateRedState=function(t){this.hasTitleList[t]&&(this.hasTitleList[t].red_point=0),normalEvent.emit(n.Title_INFO_UPDATE)},i.CanUnLockTitle=function(){var t=0;for(var i in this.hasTitleList)1==this.hasTitleList[i].red_point&&(t+=1);return t},t}());i._RF.pop()}}}));

