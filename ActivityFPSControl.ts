System.register("chunks:///_virtual/ActivityFPSControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageUtil.ts","./ControlMgr.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivityFPSDataCache.ts","./ActivityFPSDefine.ts"],(function(e){"use strict";var t,n,a,o,c,i,l,_,s,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){a=e.default},function(e){o=e.controlMgr},function(e){c=e.RoleDataCache},function(e){i=e.default},function(e){l=e.ActivityType,_=e.ActivityEventDefine},function(e){s=e.default},function(e){r=e.ActivityFPSEvent}],execute:function(){n._RF.push({},"f8ebeZEm6JDYoI45lWFBm6I","ActivityFPSControl",void 0);e("default",function(){var e=n.prototype;function n(){netManager.addEventListener("act.act_tang_mole_info_s2c",this.update_24_126,this),netManager.addEventListener("act.act_tang_mole_choose_hammer_s2c",this.update_24_127,this),netManager.addEventListener("act.act_tang_mole_start_s2c",this.update_24_128,this),netManager.addEventListener("act.act_tang_mole_result_s2c",this.update_24_129,this),o.addControl(this)}return e.clear=function(){},e.onLogin=function(){this.send_24_126()},e.onReconnect=function(){},e.send_24_126=function(){netManager.send("act.act_tang_mole_info_c2s",{act_type:l.FPSGame})},e.update_24_126=function(e){IS(s).openLevelList=[],IS(s).levelTopScore=[];for(var n,o=t(e.chapter_id_list);!(n=o()).done;){var u=n.value;IS(s).openLevelList.push(u.k),u.k==IS(s).challengeLevelId&&u.v,IS(s).levelTopScore[u.k]=u.v}IS(s).openLevelList.sort((function(e,t){return e-t})),parseInt(a.get("FPSGame_LatestLevel_"+IS(c).GetRoleId()))!=IS(s).openLevelList[IS(s).openLevelList.length-2]&&(a.set("FPSGame_NewLevel_"+IS(c).GetRoleId(),"1"),a.set("FPSGame_LatestLevel_"+IS(c).GetRoleId(),IS(s).openLevelList[IS(s).openLevelList.length-2].toString()),IS(i).UpdateMainRedByActType(l.FPS),normalEvent.emit(r.OnFPSGameNewLevelUpdate)),IS(s).curMoleHammer=e.choose_hammer,IS(s).openHammerList=e.hammer_id_list,IS(s).openLevelID=e.act_day>IS(s).challengeLevelId-1?IS(s).challengeLevelId-1:e.act_day,IS(s).act_day=e.act_day,normalEvent.emit(_.OnTangMoleInfoBack)},e.send_24_127=function(e){netManager.send("act.act_tang_mole_choose_hammer_c2s",{act_type:l.FPSGame,choose_hammer:e})},e.update_24_127=function(e){IS(s).curMoleHammer=e.choose_hammer,normalEvent.emit(_.OnTangMoleHammerUpdate)},e.send_24_128=function(e){netManager.send("act.act_tang_mole_start_c2s",{act_type:l.FPSGame,chapter_id:e})},e.update_24_128=function(e){normalEvent.emit(_.OnTangMoleGameStart)},e.send_24_129=function(){for(var e=[],t=1;t<=5;t++){var n={k:t,v:IS(s).levelKillInfo[t-1]};e.push(n)}netManager.send("act.act_tang_mole_result_c2s",{act_type:l.FPSGame,chapter_id:IS(s).curMoleLevelId,result:IS(s).levelResult,hp:IS(s).leftHP,kill_list:e,ultimate_cnt:IS(s).skillCount})},e.update_24_129=function(e){normalEvent.emit(_.OnTangMoleGameResult,e.score,e.history_score,e.is_new_high)},n}());n._RF.pop()}}}));

