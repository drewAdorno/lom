System.register("chunks:///_virtual/UnitData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FixMath.ts","./ObjectUtil.ts","./MetaAttrib.ts"],(function(t){"use strict";var i,e,n,s,o,r;return{setters:[function(t){i=t.createForOfIteratorHelperLoose,e=t.createClass},function(t){n=t.cclegacy},function(t){s=t.FixMath},function(t){o=t.default},function(t){r=t.AttribDefine}],execute:function(){n._RF.push({},"22c7aNfvs9L+L6sHpuE8O76","UnitData",void 0);t("UnitData",function(){function t(){this.unitId=void 0,this.roleId=0,this.name=void 0,this.head=void 0,this._config=void 0,this._modelConfig=void 0,this._unitType=void 0,this.dressId=void 0,this.gender=void 0,this._skin=void 0,this.skinChange=!1,this.idleIndex=1,this.intScaleSize=void 0,this.petId=0,this.level=0,this.currenHp=0,this.initHp=0,this.maxHp=0,this.shieldHp=0,this.buffs=[],this.totalDamage=0,this.immuneDeath=!1,this._buffStateCounter=void 0,this.attribs=void 0,this.attack=void 0,this.counterAttack=void 0,this.ativeSkills=void 0,this.skillList=void 0,this.passiveSkillList=void 0,this.petPassiveSkillList=void 0,this.flyPetPassiveSkillList=void 0,this.skillAttrInfo=void 0,this.mount=0,this.weaponId=0,this.attribs={},this._buffStateCounter={}}var n=t.prototype;return n.AddBuffState=function(t,i){this._buffStateCounter[t]||(this._buffStateCounter[t]=0),this._buffStateCounter[t]=this._buffStateCounter[t]+i},n.getBuffState=function(t){return this._buffStateCounter[t]?this._buffStateCounter[t]:0},n.getSkill=function(t){for(var e,n=i(this.skillList);!(e=n()).done;){var s=e.value;if(s.config.id==t)return s}},n.getAttrib=function(t){return this.attribs[t].value},n.getAttribMeta=function(t){return this.attribs[t]},n.getAttribByInt=function(t){return Math.floor(this.attribs[t].value)},n.getSkillAttrInfoByCfgId=function(t){if(!o.isEmpty(this.skillAttrInfo))return this.skillAttrInfo[t]},n.getSkillAttrByAttrId=function(t,i){var e=this.getSkillAttrInfoByCfgId(t);return o.isEmpty(e)?0:e[i]||0},n.getSkillFactAttrValue=function(t,i,e){if(-1==t&&1041==e)return t;var n=t,o=s.round(this.getSkillAttrByAttrId(i,e)+this.getSkillAttrByAttrId(0,e));n=s.round(n+o);var u,f=configAttribute.getDataByList("group",e);if(null==f||f.length<=0)return n;for(var a=0;a<f.length;a++)u=s.roundInt(this.getSkillAttrByAttrId(i,f[a].id)+this.getSkillAttrByAttrId(0,f[a].id)),n=s.round(n*s.round(1+s.round(u/1e4)));return 1041==e&&(n+=s.round(t*this.getAttrib(r.skillbuff_time_all))),n},n.setDress=function(t,e,n){void 0===n&&(n=1);var s=configJobs.getDataByKey(t);if(this.dressId=e,e>0){n=n||1,this.gender=n;for(var o,r=i(s.fashion);!(o=r()).done;){var u=o.value;if(u[0]==e){var f=u[1][n-1];return void(this._modelConfig=configUnitModel.getDataByKey(f))}}}this._modelConfig=configUnitModel.getDataByKey(this.config.model)},e(t,[{key:"warningRange",get:function(){return this.attribs[r.detection_range].value}},{key:"config",get:function(){return this._config},set:function(t){this._config!=t&&(this._config=t,this._unitType=configUnitType.getDataByKey(t.type),this._modelConfig=configUnitModel.getDataByKey(t.model))}},{key:"unitType",get:function(){return this._unitType}},{key:"modelConfig",get:function(){return this._modelConfig},set:function(t){this._modelConfig=t}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin=t,this.skinChange=!0}}]),t}());n._RF.pop()}}}));

