System.register("chunks:///_virtual/MainView_AttrInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./BaseSubView.ts","./RoleAttrDataCache.ts","./RoleDataCache.ts","./RoleDefine.ts","./ConfigGlobal.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,h,f,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Label,o=t.js,a=t.Button},function(t){r=t.default},function(t){s=t.BaseSubView},function(t){h=t.RoleAttrDataCache},function(t){f=t.RoleDataCache},function(t){l=t.RoleEventDefine},function(t){u=t.ConfigGlobal}],execute:function(){n._RF.push({},"a64d3oJYsVJ7q6Pn4F3QyUS","MainView_AttrInfo",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).txtFightPower=void 0,e.attrItems=void 0,e.name="MainView_AttrInfo",e}e(n,t);var s=n.prototype;return s.onInit=function(){var t=this;this.txtFightPower=this.findChildComponent("fightPowerRoot/txtFightPower",i),this.attrItems=[];for(var e,n,s=u.main_attr,h=0;h<s.length;h++){e=o.formatStr("attrParent/attrItem%s",h+1);var f=this.findChild(e);n=s[h];var l=configAttribute.getDataByKey(n),d={txtName:r.findChildComponent(f,"txtAttrName",i),txtValue:r.findChildComponent(f,"txtAttrValue",i),attrId:n,config:l};d.txtName.string=l.name,this.attrItems.push(d)}var c=this.findChild("btnAttrDetail");this.addComponentCallbackListener(c,a.EventType.CLICK,(function(){t.onAttrDetailClick()}))},s.registerUpdateHandler=function(){this.addEvent(l.ROLE_INFO_INIT,this.onRoleInfoUpdate,this),this.addEvent(l.ROLE_INFO_UPDATE,this.onRoleInfoUpdate,this),this.addEvent(l.ROLE_ATTR_POWER,this.onRoleInfoUpdate,this),this.addEvent(l.ROLE_ATTR_UPDATE,this.onRoleAttrUpdate,this),this.addEvent(l.ROLE_ATTR_LIST_UPDATE,this.onRoleAttrListUpdate,this)},s.onAfterOpen=function(){this.updateAttrInfo(),this.updateFightPower()},s.updateAttrInfo=function(){for(var t=0;t<this.attrItems.length;t++)this.attrItems[t].txtValue.string=String(this.getAttrValueById(this.attrItems[t].attrId))},s.getAttrValueById=function(t){var e=IS(h).getRoleAttrById(t),n=configAttribute.getDataByKey(t);return 2==n.show_type?o.formatStr("%s%",e/100):3==n.show_type?String(Math.floor(e/100)/100):String(e)},s.updateFightPower=function(){var t=IS(f).GetPowerInfoByID(0);this.txtFightPower.string=String(t)},s.onRoleAttrUpdate=function(t){for(var e=0;e<this.attrItems.length;e++){var n=this.attrItems[e];n.attrId==t&&(n.txtValue.string=this.getAttrValueById(t))}},s.onRoleAttrListUpdate=function(){this.updateAttrInfo()},s.onBeforeClose=function(){},s.onDestroy=function(){},s.onRoleInfoUpdate=function(){this.updateFightPower()},s.onAttrDetailClick=function(){uiMgr.openView("RoleAttrDetailView")},n}(s));n._RF.pop()}}}));

