System.register("chunks:///_virtual/ParkingDecorateView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./BaseView.ts","./BagDefine.ts","./BagModel.ts","./ParkingDataCache.ts","./ParkingDefine.ts"],(function(t){"use strict";var e,i,n,o,a,d,s,r,l,h,c,u,v,f,p,m,g;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.ScrollView,a=t.Label,d=t.Button,s=t.Sprite},function(t){r=t.ListItem},function(t){l=t.default},function(t){h=t.BaseView},function(t){c=t.BagEventDefine},function(t){u=t.BagModel},function(t){v=t.ParkingDataCache},function(t){f=t.ParkingEventDefine,p=t.DEC_TYPE,m=t.DEC_SEL_ITEM_ID,g=t.TYPE_TO_TEXT}],execute:function(){n._RF.push({},"396afQMs05MoZzalVZxop7b","ParkingDecorateView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).scrollType=void 0,e.scrollItem=void 0,e.curSelType=1,e.curSelItem=0,e.name="ParkingDecorateView",e.url="ui/module/parking/ParkingDecorateView",e.poolTime=2e4,e}e(n,t);var a=n.prototype;return a.onInit=function(){var t=this.findChildComponent("root/ScrollView-001",o);this.scrollType=this.addUIList(t,C);var e=this.findChildComponent("root/ScrollView",o);this.scrollItem=this.addUIList(e,I)},a.registerUpdateHandler=function(){this.addEvent(f.PARKING_CHANGE_CUR_SEL_DECORATE,this.updateItemShow,this),this.addEvent(f.PARKING_SKIN_INFO_CHANGE,this.updateItemShow,this),this.addEvent(c.GOODS_INFO_UPDATE,this.onGoodsInfoUpdate,this)},a.onAfterOpen=function(){this.updateItemShow()},a.onGoodsInfoUpdate=function(t,e){this.updateItemShow()},a.updateItemShow=function(){for(var t,e=IS(v).skin_list,n={},o=i(e);!(t=o()).done;){var a=t.value;n[a.skin_id]=a.skin_lev}for(var d,s=configParking_design.getDataByList("level",0),r=[],l=i(s);!(d=l()).done;){var h,c=d.value,f=!1,g=configParking_design.getDataByKeys("id",c.id,"level",null!=(h=n[c.id])?h:0);if(g.expend&&g.expend.length>0)IS(u).getGoodsCountByGoodsGtid(c.expend[0][0])>=g.expend[0][1]&&(f=!0);c.position==this.curSelType&&r.push({redPoint:f,itemData:g})}if(0==this.curSelItem&&r.length>0&&(this.curSelItem=r[0].id),r.sort((function(t,e){for(var n,o,a,d=1,s=1,r=i(IS(v).skin_list);!(n=r()).done;){var l=n.value;l.skin_id==t.itemData.id?d=0:l.skin_id==e.itemData.id&&(s=0)}return t.itemData.expend&&0!=t.itemData.expend.length?((o=IS(u).getGoodsCountByGoodsGtid(t.itemData.expend[0][0]))>=t.itemData.expend[0][1]&&(d=-1),o>0&&0==t.itemData.level&&(d=-2)):o=0,e.itemData.expend&&0!=e.itemData.expend.length?((a=IS(u).getGoodsCountByGoodsGtid(e.itemData.expend[0][0]))>=e.itemData.expend[0][1]&&(s=-1),a>0&&0==e.itemData.level&&(s=-2)):a=0,d<s?-1:1})),this.curSelType==p.TYPE_DEC)for(var C=IS(u).getGoodsCountByGoodsGtid(m),I=0;I<C;I++)r.unshift({redPoint:1,itemData:configGoods.getDataByKey(m)});this.scrollItem.datas=r;for(var D=[],S=1;S<6;S++){var _={redPoint:IS(v).skinRedPointList[S],itemData:S};D.push(_)}this.scrollType.datas=D},a.onBeforeClose=function(){},a.onDestroy=function(){},n}(h));var C=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).nodeNormal=void 0,e.nodeSel=void 0,e.red=void 0,e.txt1=void 0,e.txt2=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this;this.nodeNormal=l.findChild(this.node,"normal"),this.nodeSel=l.findChild(this.node,"sel"),this.red=l.findChild(this.node,"rp"),this.txt1=l.findChildComponent(this.node,"normal/Label",a),this.txt2=l.findChildComponent(this.node,"sel/Label",a),this.view.addComponentCallbackListener(this.node,d.EventType.CLICK,(function(){var e=t.view;e.curSelType=t.data,e.curSelItem=0,normalEvent.emit(f.PARKING_CHANGE_CUR_SEL_DECORATE)}))},n.onRender=function(t,e){this.data=t.itemData,this.txt1.string=GetLanguage(g[this.data]),this.txt2.string=GetLanguage(g[this.data]);var i=this.view;this.nodeSel.active=i.curSelType==this.data,this.nodeNormal.active=i.curSelType!=this.data,this.red.active=t.redPoint},i}(r),I=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).icon=void 0,e.nodeLock=void 0,e.nodeSel=void 0,e.red=void 0,e}e(n,t);var o=n.prototype;return o.onInit=function(){var t=this;this.icon=l.findChildComponent(this.node,"icon",s),this.nodeLock=l.findChild(this.node,"lock"),this.nodeSel=l.findChild(this.node,"sel"),this.red=l.findChild(this.node,"rp"),this.view.addComponentCallbackListener(this.node,d.EventType.CLICK,(function(){t.data.id!=m?(t.view.curSelItem=t.data.id,normalEvent.emit(f.PARKING_CHANGE_CUR_SEL_DECORATE),uiMgr.openView("ParkingDecorateDetailView",t.data.id)):uiMgr.openView("ParkingDecorateSelectView")}))},o.onRender=function(t,e){this.data=t.itemData,this.view.loadIcon(this.icon,"icon_item",this.data.icon);var n=this.view;this.nodeSel.active=n.curSelItem==this.data.id;for(var o,a=!1,d=i(IS(v).skin_list);!(o=d()).done;){o.value.skin_id==this.data.id&&(a=!0)}this.data.id==m&&(a=!0),this.nodeLock.active=!a,this.icon.grayscale=!a&&!t.redPoint,this.red.active=t.redPoint},n}(r);n._RF.pop()}}}));

