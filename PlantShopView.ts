System.register("chunks:///_virtual/PlantShopView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UILabel.ts","./UIList.ts","./NodeUtil.ts","./index57.ts","./ResItems.ts","./MessageView.ts","./MainViewModel.ts","./MallControl.ts","./MallDataCache.ts","./MallDefine.ts","./RoleDefine.ts","./UIDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,a,l,r,h,d,c,u,f,p,m,g,v,I,L,w,y;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.ScrollView,s=t.UITransform,a=t.Sprite,l=t.Label},function(t){r=t.UILabel},function(t){h=t.ListItem},function(t){d=t.default},null,function(t){c=t.ResItems},function(t){u=t.default},function(t){f=t.MainViewModel},function(t){p=t.default},function(t){m=t.default},function(t){g=t.MallEventDefine,v=t.MallType},function(t){I=t.PlayerAttr,L=t.RoleEventDefine},function(t){w=t.PanelTabType},function(t){y=t.BaseView}],execute:function(){var C;t("EOpenType",void 0),i._RF.push({},"5bef9j/+AZJdKRGEIA1907G","PlantShopView",void 0),function(t){t[t.Seed=0]="Seed",t[t.Fertilizer=1]="Fertilizer"}(C||(C=t("EOpenType",{})));t("PlantShopView",function(t){function i(){var e;return(e=t.call(this)||this).itemList=void 0,e.resItems=void 0,e.name="PlantShopView",e.url="ui/module/plant/PlantShopView",e}e(i,t);var s=i.prototype;return s.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){}));var i=this.findChildComponent("content/ScrollView",o);this.itemList=this.addUIList(i,M),this.resItems=new c(this,"content/resRoot"),this.resItems.init([{id:I.ROLE_ATTR_DIAMOND,showAdd:!0,jump:function(){IS(f).TryJumpToMainViewPanel(w.Main_Shop,w.Shop_Gem,[0]),t.close(),uiMgr.close("PlantMainView")}}])},s.registerUpdateHandler=function(){this.addEvent(L.ROLE_RES_UPDATE,this.onRoleResUpdate,this),this.addEvent(g.MAll_INFO_UPDATE,this.onMallInfoUpdate,this),this.addEvent(L.HIDE_LIST_UPDATE,this.showItemList,this)},s.onAfterOpen=function(){IS(p).send_27_1(v.Farm),this.trySetParent(),this.showItemList()},s.showItemList=function(){this.itemList.datas=[C.Seed],this.itemList.scrollTo(this.openArgs[0])},s.trySetParent=function(){var t=uiMgr.getOpenView("PlantMainView");t&&t.nodeSubRoot&&this.node.setParent(t.nodeSubRoot)},s.onBeforeClose=function(){},s.onDestroy=function(){},s.onRoleResUpdate=function(t){t==I.ROLE_ATTR_DIAMOND&&this.resItems.update()},s.onMallInfoUpdate=function(t){t==v.Farm&&this.itemList.updateAll()},i}(y));var M=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).scroll=void 0,e.utBg=void 0,e.utNode=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){this.adaptiveSize=!0;var t=d.findChildComponent(this.node,"ScrollView",o);this.utBg=d.findChildComponent(this.node,"bg/imgBg",s),this.utNode=this.node.getComponent(s),this.scroll=this.view.addUIList(t,S,!1,0),this.scroll.touchEvent=!1},n.onRender=function(t,e){var i;switch(t){case C.Seed:var n,o=(null==(n=configMall.getDataByList("type",v.Farm))?void 0:n.filter((function(t){return 3==t.goods_type})))||[],s=Math.ceil(o.length/2);i=300*s+20*(s-1)+100,this.scroll.height=i,this.utBg.height=i+25,this.scroll.datas=o;break;case C.Fertilizer:var a,l=(null==(a=configMall.getDataByList("type",v.Farm))?void 0:a.filter((function(t){return 4==t.goods_type})))||[],r=Math.ceil(l.length/2);i=300*r+20*(r-1)+100,this.scroll.height=i,this.utBg.height=i+25,this.scroll.datas=l}this.ut.height=i+50},i}(h),S=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).txtName=void 0,e.txtBtnLabel=void 0,e.imgIcon=void 0,e.txtDesc=void 0,e}e(i,t);var o=i.prototype;return o.onInit=function(){var t=this;this.txtName=d.findChildComponent(this.node,"txtName",r);var e=d.findChildComponent(this.node,"btnBuy",n);this.txtBtnLabel=d.findChildComponent(e.node,"Layout/Label",r),this.view.addComponentCallbackListener(e.node,n.EventType.CLICK,(function(){t.data?uiMgr.openView("MallTipsView",t.data,5):u.showFlyTip("参数错误")})),this.imgIcon=d.findChildComponent(this.node,"imgIcon",a),this.txtDesc=d.findChildComponent(this.node,"desc/txtDesc",l)},o.onRender=function(t,e){this.txtName.string=t.name,this.txtBtnLabel.string=IS(m).getFactPrice(this.data.id).toString(),this.view.loadIcon(this.imgIcon,"icon_farm_shop",t.icon),this.txtDesc.string=String(t.goods[1])},i}(h);i._RF.pop()}}}));

