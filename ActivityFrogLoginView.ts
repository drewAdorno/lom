System.register("chunks:///_virtual/ActivityFrogLoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./BagModel.ts","./ActivityControl.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,a,r,d,c,s,f,l,u,g,h,m,v;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.Label},function(t){r=t.ItemGrid},function(t){d=t.default},function(t){c=t.default},function(t){s=t.default},null,function(t){f=t.BagModel},function(t){l=t.default},function(t){u=t.default},function(t){g=t.ActivityEventDefine,h=t.ActivityType,m=t.ActivityState},function(t){v=t.BaseView}],execute:function(){n._RF.push({},"f28c5QFvWpEUI7TudTmKA44","ActivityFrogLoginView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).rewardList=[],e.txtLeftTime=void 0,e.deltaTime=0,e.leftTime=0,e.canUpdate=!1,e.name="ActivityFrogLoginView",e.url="ui/module/activityFrog/ActivityFrogLoginView",e}e(n,t);var v=n.prototype;return v.onInit=function(){var t=this,e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));for(var i=1;i<11;i++){var n=d.findChild(this.node,"content/reward/node"+i),r={baseNode:n,check:d.findChild(n,"check"),itemgrid:d.findChild(n,"itemGrid"),canGet:d.findChild(n,"canget"),label:d.findChildComponent(n,"label",a)};this.rewardList.push(r)}this.txtLeftTime=this.findChildComponent("content/txtLeftTime",a)},v.registerUpdateHandler=function(){this.addEvent(g.OnLoginSignUpdate,this.updateInfo,this)},v.onAfterOpen=function(){var t,e=IS(u).GetActivityInfo(h.FrogLogin),i=null!=(t=e.state_time[e.state])?t:e.state_time[m.Open];this.leftTime=i.end_time-s.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=s.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026),this.updateInfo()},v.updateInfo=function(){for(var t,e=IS(u).GetActivityInfo(h.FrogLogin),n=configAct_login.getDatas(),o=[],a=i(n);!(t=a()).done;){var r=t.value;r.act_type==e.type&&r.group_id==e.roundCfg.group_id&&o.push(r)}o.sort((function(t,e){return t.day-e.day})),this.refreshReward(o)},v.refreshReward=function(t){for(var e,n,o=this,a=IS(u).GetSignInfo(h.FrogLogin),d=null!=(e=a.get_day)?e:[],s=function(){var t,e=n.value,i=e[0],s=e[1],g=o.rewardList[i];(g.check.active=d.includes(s.id),g.label.string=c.formatStrWithMirrorDeal(GetLanguage(200319),s.day),a.day>=s.day)?(null!=(t=a.get_day)?t:[]).includes(s.id)?(g.canGet.active=!1,g.check.active=!0):(g.canGet.active=!0,g.check.active=!1):(g.canGet.active=!1,g.check.active=!1);new r(o,g.itemgrid,(function(){var t,e=IS(u).GetSignInfo(h.FrogLogin);e.day>=s.day?(null!=(t=e.get_day)?t:[]).includes(s.id)?17!=s.id&&IS(f).OpenItemTips(s.reward[0][0],g.itemgrid):IS(l).send_24_23(h.FrogLogin,s.id):17!=s.id&&IS(f).OpenItemTips(s.reward[0][0],g.itemgrid)})).SetItemId(s.reward[0][0],s.reward[0][1])},g=i(t.entries());!(n=g()).done;)s()},v.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=s.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},v.onBeforeClose=function(){},v.onDestroy=function(){},n}(v));n._RF.pop()}}}));

