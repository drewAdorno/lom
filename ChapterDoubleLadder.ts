System.register("chunks:///_virtual/ChapterDoubleLadder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./index83.ts","./MetaAttrib.ts","./EnumDefine.ts","./EventDefine.ts","./V2.ts","./ChapterNormal.ts","./UnitGroupCtr.ts"],(function(t){"use strict";var e,a,r,n,i,o,l,u,s,p,d;return{setters:[function(t){e=t.inheritsLoose,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy},function(t){n=t.ChapterType},null,function(t){i=t.MetaAttrib,o=t.AttribDefine},function(t){l=t.UnityType},function(t){u=t.EventDefine},function(t){s=t.V2},function(t){p=t.ChapterNormal},function(t){d=t.UnitGroupCtr}],execute:function(){r._RF.push({},"738a0wGZExOgKr7D7cwPJlp","ChapterDoubleLadder",void 0);t("ChapterDoubleLadder",function(t){function r(){for(var e,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).playerDeadNum=0,e}e(r,t);var p=r.prototype;return p.init=function(){this.battleMain.on(u.UnitDead,this.onUnitDead,this)},p.destroy=function(){},p.getConfig=function(t){return configDouble_ladder_chapter.getDataByKey(t)},p.loadData=function(t){var e,r=this.battleMain;for(var o in r.data.playerList)this.addPlayer(r.data.playerList[o],t);r.mainCtr=null!=(e=r.mainCtr)?e:r.playerCtrs[0],r.showMainCtr=r.mainCtr;var l=r.data.dummy;if(l){for(var u,p=configChapter_type.getDataByKey(n.DoubleLadder).player_points,d=configAttribute.getDataByList("module",1),y=a(d);!(u=y()).done;){var f=u.value,c=new i(f);c.baseValue=l.config[f.key],l.attribs[f.id]=c}var h=r.unitMgr.addShamPlayer(l);h.position=new s(t+p[0][0],p[0][1]),h.shamUnit=!0}},p.addPlayer=function(t,e){var a=this.battleMain,r=configChapter_type.getDataByKey(n.DoubleLadder).player_points,i=new d;null!=r[t.pos]&&(i.offsetY=r[t.pos][1],i.offsetX=-r[t.pos][0]),i.playerData=t;for(var u=t.units,s=0;s<u.length;s++){var p=void 0;u[s].config.type==l.Player?(p=a.unitMgr.addDLPlayer(u[s]),i.player=p):p=a.unitMgr.addPlayer(u[s]),1!=t.pos&&3!=t.pos||(p.skillAutoDis=130,p.data.getAttribMeta(o.att_range).addValue(130),p.data.getAttribMeta(o.detection_range).addValue(130)),p.config.type==l.FlyPet&&(i.player.flyPet=p),i.units.push(p)}return i.positionSelected(e,!0),a.playerCtrs.push(i),i},p.onUnitDead=function(t){var e=this.battleMain;if(!t.isCallType&&t.config.type==l.Player){this.playerDeadNum++;for(var r,n=a(e.playerCtrs);!(r=n()).done;){if(r.value.playerData.id==t.data.roleId){e.unitMgr.playerGroupDead(t.data.roleId);break}}}},p.checkPlayerDead=function(){var t=this.battleMain.playerCtrs;return this.playerDeadNum>=t.length},p.toResult=function(t,e){return!1},r}(p));r._RF.pop()}}}));

