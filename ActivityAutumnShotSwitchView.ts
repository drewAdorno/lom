System.register("chunks:///_virtual/ActivityAutumnShotSwitchView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./index57.ts","./BagModel.ts","./MessageView.ts","./ActivityDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,u,c,s,a,d,l,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.js,u=t.Label,c=t.Sprite},function(t){s=t.default},null,function(t){a=t.BagModel},function(t){d=t.default},function(t){l=t.ActivityEventDefine},function(t){r=t.BaseView}],execute:function(){e._RF.push({},"c5958SvbRRMxIORBouNlZu2","ActivityAutumnShotSwitchView",void 0);var h=[1,2,3];t("default",function(t){function e(){var i;return(i=t.call(this)||this).idToItem={},i.curSelectId=0,i.name="ActivityAutumnShotSwitchView",i.url="ui/module/autumn/ActivityAutumnShotSwitchView",i}i(e,t);var r=e.prototype;return r.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("content/btnClose");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));for(var a=function(i){var e=t.findChild(o.formatStr("content/SelectContent/selectItem%s",i+1)),a=h[i],d=configMoonfestival_bullet.getDataByKey(a);s.findChildComponent(e,"txtDesc",u).string=d.des;var l=s.findChildComponent(e,"btn/imgIcon",c);t.loadIcon(l,"autumn_shot",d.picture);var r=s.findChild(e,"btn");t.addComponentCallbackListener(r,n.EventType.CLICK,(function(){t.onItemClick(a)})),s.findChildComponent(e,"txtDamage",u).string=StringUtil.formatStrWithMirrorDeal(GetLanguage(200685),d.demage_num),t.idToItem[a]={txtNum:s.findChildComponent(e,"btn/txtCount",u),imgBottom:s.findChildComponent(e,"btn/imgBottom",c),nodeSelect:s.findChild(e,"imgSelect"),id:a,cfg:d}},d=0;d<3;d++)a(d)},r.onItemClick=function(t){if(t!=this.curSelectId){var i=this.idToItem[t].cfg.item_cost;IS(a).getGoodsCountByGoodsGtid(i[0])<i[1]?1==t||2==t?d.showFlyTip(GetLanguage(200981)):d.showFlyTip(GetLanguage(200802)):(this.curSelectId=t,this.updateStatus(),normalEvent.emit(l.OnAutumnShotSwitch,t),d.showFlyTip(GetLanguage(200801)))}},r.registerUpdateHandler=function(){},r.updateStatus=function(){for(var t in this.idToItem){var i=this.idToItem[t];i.nodeSelect.active=i.id==this.curSelectId,this.loadIcon(i.imgBottom,"autumn_shot",i.id==this.curSelectId?"zq_icon_yuebing02":"zq_icon_yuebing01")}},r.onAfterOpen=function(){this.curSelectId=this.openArgs[0]||1,this.updateCount(),this.updateStatus()},r.updateCount=function(){var t=this.idToItem[3].cfg.item_cost[0];this.idToItem[3].txtNum.string=StringUtil.formatStrWithMirrorDeal(GetLanguage(200800),IS(a).getGoodsCountByGoodsGtid(t))},r.onBeforeClose=function(){},r.onDestroy=function(){},e}(r));e._RF.pop()}}}));

