System.register("chunks:///_virtual/SlaveRankingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./FriendControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./SlaveControl.ts","./SlaveDefine.ts","./SlaveModel.ts","./BaseSubView.ts"],(function(t){"use strict";var e,i,n,o,a,s,r,d,l,h,c,u,m,f,v,g,C,S,I;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.ScrollView,o=t.Button,a=t.Sprite,s=t.Label,r=t.Layout,d=t.js},function(t){l=t.ListItem},function(t){h=t.default},function(t){c=t.default},function(t){u=t.default},null,function(t){m=t.default},function(t){f=t.RoleDataCache},function(t){v=t.PlayerAttr},function(t){g=t.default},function(t){C=t.SlaveEventDefine},function(t){S=t.SlaveModel},function(t){I=t.BaseSubView}],execute:function(){i._RF.push({},"48e30vUZbZCrJDKk8Z+rKBo","SlaveRankingView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).scrollList=void 0,e.time=void 0,e.name="SlaveRankingView",e.url="ui/module/slave/SlaveRankingView",e}e(i,t);var o=i.prototype;return o.onInit=function(){var t=this.findChildComponent("scroll",n);this.scrollList=this.addUIList(t,p)},o.registerUpdateHandler=function(){this.addEvent(C.SLAVE_SEARCH_INFO_BACK,this.onSlaveSearchInfoBack,this)},o.onAfterOpen=function(){this.time=0,this.trySetParent(),IS(g).reqCaptureSlaveSearch(2)},o.onBeforeClose=function(){this.time=0},o.onUpdate=function(t){null!=this.time&&(this.time=this.time+t,this.time>=1&&(this.time=0,this.scrollList.items.forEach((function(t,e,i){t.updateTimeShow()}))))},o.onDestroy=function(){},o.onUpdateLogList=function(t){t.sort((function(t,e){return IS(S).getExtValue(t,3)-IS(S).getExtValue(e,3)})),this.scrollList.datas=t},o.trySetParent=function(){var t=uiMgr.getOpenView("SlaveFindView");t&&t.nodeSubRoot&&this.node.setParent(t.nodeSubRoot)},o.onSlaveSearchInfoBack=function(t){2==t.type&&this.onUpdateLogList(t.null_list)},i}(I));var p=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).btnRoleInfo=void 0,e.imgIcon=void 0,e.imgHeadFrame=void 0,e.txtName=void 0,e.txtChapter=void 0,e.txtFightPower=void 0,e.imgRankIcon=void 0,e.txtRank=void 0,e.btnCheck=void 0,e.nodeCD=void 0,e}e(i,t);var n=i.prototype;return n.onInit=function(){var t=this;this.btnRoleInfo=h.findChild(this.node,"imgFrame"),this.view.addComponentCallbackListener(this.btnRoleInfo,o.EventType.CLICK,(function(){t.data.role_id&&IS(m).reqOtherRoleNotice(t.data.role_id,1)})),this.imgIcon=h.findChildComponent(this.node,"imgFrame/imgIcon",a),this.imgHeadFrame=h.findChildComponent(this.node,"imgFrame/imgHeadFrame",a),this.txtName=h.findChildComponent(this.node,"nameInfo/txtName",s),this.btnCheck=h.findChild(this.node,"btnCheck"),this.view.addComponentCallbackListener(this.btnCheck,o.EventType.CLICK,(function(){uiMgr.openView("SlaveMasterView",t.data.role_id)})),this.txtChapter=h.findChildComponent(this.node,"txtChapter",s),this.txtFightPower=h.findChildComponent(this.node,"txtFightPower",s),this.imgRankIcon=h.findChildComponent(this.node,"rankIcon",a),this.txtRank=h.findChildComponent(this.node,"txtRank",s),this.nodeCD=h.findChild(this.node,"nameInfo/imgCD"),this.view.dealMirrorLayout(h.findChildComponent(this.node,"nameInfo",r))},n.onRender=function(t,e){if(null!=t){this.btnCheck.active=t.role_id!=IS(f).GetRoleId();var i=IS(S).getExtValue(t,3);i<=3?(this.imgRankIcon.node.active=!0,this.txtRank.node.active=!1,this.view.loadIcon(this.imgRankIcon,"common",d.formatStr("common_ICON_paiming0%s",i))):(this.imgRankIcon.node.active=!1,this.txtRank.node.active=!0,this.txtRank.string=String(i)),this.view.loadRemoteIcon(IS(S).getAttrStrById(t,v.ROLE_ATTR_HEAD_URL),this.imgIcon),this.txtName.string=IS(S).getRoleName(t);var n=IS(S).getAttrNumById(t,v.ROLE_ATTR_HEAD_FRAME_ID);if(n>0){this.imgHeadFrame.node.active=!0;var o=configAvatar_frame.getDataByKey(n);this.view.loadIcon(this.imgHeadFrame,"icon_frame",o.icon)}else this.imgHeadFrame.node.active=!1;this.txtFightPower.string=c.GetNumString(IS(S).getAttrNumById(t,v.ROLE_ATTR_POWER_SHOW)),this.txtChapter.string=IS(S).getExtValue(t,1),this.updateTimeShow()}},n.updateTimeShow=function(){var t=IS(S).getExtValue(this.data,4);this.nodeCD.active=null!=t&&0!=t&&u.serverTime<t},i}(l);i._RF.pop()}}}));

