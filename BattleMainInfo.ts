System.register("chunks:///_virtual/BattleMainInfo.ts",["cc","./BattleData.ts","./EnumDefine.ts","./index3.ts","./NodeUtil.ts","./index57.ts","./ConfigGlobal.ts","./ChapterDataCache.ts","./ChapterDefine.ts","./MessageView.ts","./RoleDataCache.ts","./IBattleChapterPanel.ts","./EaseMethod.ts","./UIDefine.ts"],(function(t){"use strict";var e,n,i,o,a,s,d,l,h,p,c,u,f,m,S,r,v;return{setters:[function(t){e=t.cclegacy,n=t.Button,i=t.Toggle,o=t.sys,a=t.Sprite,s=t.Vec3},function(t){d=t.ChapterType},function(t){l=t.BattleFlag},null,function(t){h=t.default},null,function(t){p=t.ConfigGlobal},function(t){c=t.ChapterDataCache},function(t){u=t.ChapterEventDefine},function(t){f=t.default},function(t){m=t.RoleDataCache},function(t){S=t.BattleInfoType},function(t){r=t.EasingMethod},function(t){v=t.OpenFunction}],execute:function(){e._RF.push({},"2d7682Qg4VOxo6QiyKt4gMk","BattleMainInfo",void 0);t("BattleMainInfo",function(){function t(t,e){this.view=void 0,this.node=void 0,this.type=void 0,this.nodeSimp=void 0,this.moveTween=void 0,this.simpState=0,this.nodeOpenState1=void 0,this.nodeOpenState2=void 0,this.toggle=void 0,this.view=t,this.node=e,this.type=S.Main,this.onInit()}var e=t.prototype;return e.onInit=function(){var t=this;this.nodeSimp=h.findChild(this.node,"simp");var e=h.findChildComponent(this.nodeSimp,"btnOpen",n);this.view.addComponentCallbackListener(e.node,n.EventType.CLICK,(function(){0==t.simpState?(t.simpState=1,t.resetExitButton(!0)):(t.simpState=0,t.resetExitButton(!1))})),this.nodeOpenState1=h.findChild(e.node,"state1"),this.nodeOpenState2=h.findChild(e.node,"state2");var s=h.findChildComponent(this.nodeSimp,"toggle",i);this.view.addComponentCallbackListener(s.node,i.EventType.TOGGLE,(function(){s.isChecked!=IS(c).openSimpModel&&(IS(c).openSimpModel=s.isChecked,battleMain.data.chapterType==d.Main&&(s.isChecked?battleMain.battleFlag=battleMain.battleFlag|l.SIMP_MODEL:battleMain.battleFlag=battleMain.battleFlag&~l.SIMP_MODEL,battleMain.battleFlag&l.SIMP_MODEL?f.showFlyTip(GetLanguage(200130)):f.showFlyTip(GetLanguage(200131)),!(battleMain.battleFlag&l.SIMP_MODEL)&&o.now()-IS(c).autoStartSimpTime<1e3*p.auto_simp_mode_disable_time&&IS(c).closeSimpNum++))})),this.toggle=s;var m=h.findChildComponent(s.node,"Checkmark",a);this.view.loadIcon(m,"main","zjm_ui_gou"),this.view.addEvent(u.CHAPTER_SIMP_MODE,this.onSimpMode,this)},e.onUpdate=function(t){},e.onSimpMode=function(){0==this.simpState&&(this.simpState=1,this.toggle.isChecked=!0,this.resetExitButton(!0))},e.resetExitButton=function(t){var e=this;void 0===t&&(t=!0),this.nodeOpenState1.active=t,this.nodeOpenState2.active=!t,null!=this.moveTween&&this.moveTween.stop();var n=new s,i=this.nodeSimp.position,o=new s(i.x,i.y),a=new s(t?-360:-520,i.y),d=s.subtract(new s,a,i);this.moveTween=normalTween.to(0,1,.5,(function(t,i){n.set(o).add3f(d.x*i,0,0),e.nodeSimp.position=n})).easing(r.LINEAR).call((function(){e.moveTween=null})).start()},e.reset=function(){var t=IS(m).CheckFuncOpen(v.FUNC_SIMPLIFIED_MODE);IS(c).simpModel=t,this.nodeSimp.active=t,t&&(this.toggle.isChecked=IS(c).openSimpModel)},e.onLoad=function(){this.nodeSimp.active=!1},t}());e._RF.pop()}}}));

