System.register("chunks:///_virtual/ActivityRechargeDataCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActivityDefine.ts","./ActivityDataCache.ts","./PayDataCache.ts"],(function(t){"use strict";var e,o,r,n,a,i;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy},function(t){r=t.ActivityEventDefine,n=t.ActivityState},function(t){a=t.default},function(t){i=t.default}],execute:function(){o._RF.push({},"5b8f4v8RfxOvrCaeSAZTttW","ActivityRechargeDataCache",void 0);t("default",function(){function t(){this.actInfo=[],this.boxInfo={}}var o=t.prototype;return o.clear=function(){},o.updateInfo=function(t){var e,o=null!=(e=this.actInfo[t.act_type])?e:{};o.act_type=t.act_type,o.last_count=t.last_count,o.use_count=t.use_count,o.need_process=t.need_process,this.actInfo[t.act_type]=o,normalEvent.emit(r.OnActivityRebateInfoUpdate)},o.updateReport=function(t){if(this.actInfo[t.act_type]||(this.actInfo[t.act_type]={}),1==t.type)this.actInfo[t.act_type].report_list=t.report_list;else if(2==t.type){for(var o,n,a=null!=(o=this.actInfo[t.act_type].report_list)?o:[],i=e(t.report_list);!(n=i()).done;){var c=n.value;a.push(c)}this.actInfo[t.act_type].report_list=a}normalEvent.emit(r.OnActivityRebateInfoUpdate)},o.getInfo=function(t){var e;return null!=(e=this.actInfo[t])?e:[]},o.updateBoxInfo=function(t){this.boxInfo.got_reward=[];for(var o,n=e(t.got_reward);!(o=n()).done;){var a=o.value;this.boxInfo.got_reward[a]=!0}this.boxInfo.process=t.process,normalEvent.emit(r.OnActivityRebateBox)},o.getBoxInfo=function(){return this.boxInfo},o.getBoxdRed=function(){var t=IS(a).GetActivityInfo(2002);if(!t||t.state!=n.Open)return 0;var o=IS(i).GetPayGiftInfo(303003);if(o&&o.rewardState<2)return 1;var r=this.boxInfo;if(!r.got_reward)return 0;for(var c,f,u=configPay_rebate_reward.getDatas(),s=[],p=e(u);!(c=p()).done;){var v=c.value;v.act_group==t.roundCfg.group_id&&s.push(v)}s.sort((function(t,e){return t.order-e.order}));for(var l=0;l<s.length;l++){var _=s[l];if(!r.got_reward[_.id]){f=r.process>=_.limit;break}}return f?1:0},t}());o._RF.pop()}}}));

