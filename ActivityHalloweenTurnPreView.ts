System.register("chunks:///_virtual/ActivityHalloweenTurnPreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ActivityDataCache.ts","./HorseCarnivalDataCache.ts","./BasePopupView.ts"],(function(t){"use strict";var i,e,o,n,s,l,r,c,a,d,h,u;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t.Button,n=t.ScrollView,s=t.Label},function(t){l=t.ItemGrid},function(t){r=t.ListItem},function(t){c=t.default},function(t){a=t.default},null,function(t){d=t.default},function(t){h=t.HorseCarnivalDataCache},function(t){u=t.BasePopupView}],execute:function(){var f;e._RF.push({},"fccfbu3vxNPAahjIt4P4yEl","ActivityHalloweenTurnPreView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).scrollNode0=void 0,i.scroll0=void 0,i.scroll1=void 0,i.scroll2=void 0,i.scroll3=void 0,i.txtTitle1=void 0,i.txtDesc1=void 0,i.txtWeight1=void 0,i.txtWeight2=void 0,i.txtWeight3=void 0,i.txtWeight4=void 0,i.actType=void 0,i.name="ActivityHalloweenTurnPreView",i.url="ui/module/halloween/ActivityHalloweenTurnPreView",i}i(e,t);var l=e.prototype;return l.onInit=function(){var t=this,i=this.findChild("root/content/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()}));var l=this.findChildComponent("root/ScrollView/view/content/nodeDesc0/ScrollView",n);this.scrollNode0=this.findChild("root/ScrollView/view/content/nodeDesc0"),this.scroll0=this.addUIList(l,v);var r=this.findChildComponent("root/ScrollView/view/content/nodeDesc1/ScrollView",n);this.scroll1=this.addUIList(r,v);var c=this.findChildComponent("root/ScrollView/view/content/nodeDesc2/ScrollView",n);this.scroll2=this.addUIList(c,v);var a=this.findChildComponent("root/ScrollView/view/content/nodeDesc3/ScrollView",n);this.scroll3=this.addUIList(a,v),this.txtTitle1=this.findChildComponent("root/ScrollView/view/content/nodeDesc0/txtTitle",s),this.txtDesc1=this.findChildComponent("root/ScrollView/view/content/nodeDesc0/txtDesc",s),this.txtWeight1=this.findChildComponent("root/ScrollView/view/content/nodeDesc0/txtTitle-002",s),this.txtWeight2=this.findChildComponent("root/ScrollView/view/content/nodeDesc1/txtTitle-002",s),this.txtWeight3=this.findChildComponent("root/ScrollView/view/content/nodeDesc2/txtTitle-002",s),this.txtWeight4=this.findChildComponent("root/ScrollView/view/content/nodeDesc3/txtTitle-002",s)},l.registerUpdateHandler=function(){},l.onAfterOpen=function(){t.prototype.onAfterOpen.call(this),this.actType=this.openArgs[0];var i=IS(d).GetActivityInfo(this.actType),e=configMount_draw.getDatas();f=0;var o=0,n=0,s=0,l=0,r=[],c=[],u=[],v=[];for(var g in e)if(e.hasOwnProperty(g)){var w=e[g];if(w.type==i.type&&w.group_id==i.roundCfg.group_id){if(1==w.quality||4==w.quality)c.push(w),n+=w.weight;else if(2==w.quality)u.push(w),s+=w.weight;else if(3==w.quality)v.push(w),l+=w.weight;else if(5==w.quality){var p,C,x=null!=(p=null==(C=IS(h).getInfo(this.actType).choose_list[w.id])?void 0:C[1])?p:0;if(this.txtDesc1.string=a.formatStrWithMirrorDeal(GetLanguage(201177),configGoods.getDataByKey(w.reward_replace[0][1][0]).name),x>0){var m={quality:5,reward:w.reward_replace[0][1]};r.push(m),this.txtTitle1.string=GetLanguage(201178)}else r.push(w),this.txtTitle1.string=GetLanguage(201179);o+=w.weight}f+=w.weight}}this.txtWeight1.string=(o/f*100).toFixed(2)+"%",this.txtWeight2.string=(n/f*100).toFixed(2)+"%",this.txtWeight3.string=(s/f*100).toFixed(2)+"%",this.txtWeight4.string=(l/f*100).toFixed(2)+"%",this.scrollNode0.active=r.length>0,this.scroll0.datas=r,this.scroll1.datas=c,this.scroll2.datas=u,this.scroll3.datas=v},l.onBeforeClose=function(){},l.onDestroy=function(){},e}(u));var v=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).nodeItem=void 0,i.txtLimit=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){this.nodeItem=c.findChild(this.node,"itemGrid"),this.txtLimit=c.findChildComponent(this.node,"txtLimit",s),this.txtLimit.node.active=!1},o.onRender=function(t,i){1==t.quality?(this.txtLimit.node.active=!0,this.txtLimit.string=GetLanguage(201180)):4==t.quality&&(this.txtLimit.node.active=!0,this.txtLimit.string=GetLanguage(201181)),new l(this.view,this.nodeItem).SetItemId(t.reward[0],t.reward[1])},e}(r);e._RF.pop()}}}));

