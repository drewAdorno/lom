System.register("chunks:///_virtual/PlayerSkinLookView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./EquipModel.ts","./RoleDataCache.ts","./RoleDefine.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,s,o,l,a,c,d,h,r,_,u,f;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Button,s=e.Vec3,o=e.Label,l=e.ScrollView,a=e.sys},function(e){c=e.SelectedType,d=e.ListItem},function(e){h=e.default},null,function(e){r=e.EquipModel},function(e){_=e.RoleDataCache},function(e){u=e.PlayerAttr},function(e){f=e.BaseView}],execute:function(){i._RF.push({},"1239bvok9dFeIlcvw2KzUJN","PlayerSkinLookView",void 0);e("default",function(e){function i(){var t;return(t=e.call(this)||this).item_id=void 0,t.roleModel=void 0,t.role=void 0,t.select_btn=void 0,t.select_btn_name=void 0,t.select_btn_nan=void 0,t.select_btn_nv=void 0,t.select_btn_arrow=void 0,t.select_panel=void 0,t.btn_list=void 0,t.select_skin=void 0,t.select_sex=void 0,t.select_job=void 0,t.const_skin_id=void 0,t.name="PlayerSkinLookView",t.url="ui/module/player/PlayerSkinLookView",t}t(i,e);var d=i.prototype;return d.onInit=function(){var e=this;this.role=this.findChild("container/role");var t=this.findChild("imgMask");this.addComponentCallbackListener(t,n.EventType.CLICK,(function(){e.onCloseClick()})),this.select_btn=this.findChild("container/select_btn"),this.addComponentCallbackListener(this.select_btn,n.EventType.CLICK,(function(){e.select_panel.active=!e.select_panel.active,e.select_btn_arrow.scale=new s(1,e.select_panel.active?-1:1,1)})),this.select_btn_name=this.findChildComponent("container/select_btn/Label",o),this.select_btn_nan=this.findChild("container/select_btn/sex_nan"),this.select_btn_nv=this.findChild("container/select_btn/sex_nv"),this.select_btn_arrow=this.findChild("container/select_btn/arrow"),this.select_btn_arrow.scale=new s(1,1,1),this.select_panel=this.findChild("container/select_panel"),this.select_panel.active=!1;var i=this.findChildComponent("container/select_panel/btn_list",l);this.btn_list=this.addUIList(i,v),this.btn_list.selectedMode=c.SINGLE},d.onCloseClick=function(){this.close()},d.registerUpdateHandler=function(){},d.onAfterOpen=function(){this.item_id=this.openArgs[0],this.select_btn_arrow.scale=new s(1,1,1),this.select_panel.active=!1;var e=configGoods.getDataByKey(this.item_id).effect[0];this.select_job=1411,this.select_skin=e,this.const_skin_id=e,this.select_sex=IS(_).GetRoleAttr(u.ROLE_ATTR_GENDER),this.updateModel();for(var t=configJobs.getDatas(),i=[],n=0;n<t.length;n++)if(t[n].fashion.length>0)for(var o=0;o<t[n].fashion.length;o++){var l=t[n].fashion[o];if(this.const_skin_id==l[0])if(l[1][0]!=l[1][1]){var a={id:t[n].id,job_name:t[n].name,sex:1,skin_model:l[1][0]};i.push(a);var c={id:t[n].id,job_name:t[n].name,sex:2,skin_model:l[1][1]};i.push(c)}else{var d={id:t[n].id,job_name:t[n].name,sex:0,skin_model:0};i.push(d)}}this.btn_list.datas=i},d.updateModel=function(){null!=this.roleModel&&(this.removeUnitModel(this.roleModel),this.roleModel=null);IS(r).getShowEquipCfgIdByLocation(1),IS(r).getShowEquipCfgIdByLocation(2),IS(r).getShowEquipCfgIdByLocation(3),IS(_).GetTypeUsedSkin(1);this.roleModel=this.addUnitModel({job:this.select_job,dressId:this.select_skin,gender:this.select_sex,weapon:0,ornaments:0,face:0,color:8,parent:this.role,shenqi:0},null,1.95),a.uiMirror&&(this.getUnitModel(this.roleModel).dir=-1);var e=configJobs.getDataByKey(this.select_job);this.select_btn_name.string=e.name,this.select_btn_nan.active=1==this.select_sex,this.select_btn_nv.active=2==this.select_sex},d.updateSelect=function(e,t){this.select_job=e,this.select_sex=t,this.updateModel(),this.btn_list.updateAll()},d.onBeforeClose=function(){},d.onDestroy=function(){},i}(f));var v=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).txtName=void 0,t.sex_nan=void 0,t.sex_nv=void 0,t.select=void 0,t}t(i,e);var n=i.prototype;return n.onInit=function(){this.txtName=h.findChildComponent(this.node,"Label",o),this.sex_nan=h.findChild(this.node,"sex_nan"),this.sex_nv=h.findChild(this.node,"sex_nv"),this.select=h.findChild(this.node,"select")},n.onRender=function(e,t){this.txtName.string=e.job_name,this.sex_nan.active=1==e.sex,this.sex_nv.active=2==e.sex,this.select.active=e.id==this.view.select_job&&e.sex==this.view.select_sex},n.onItemClick=function(){this.view.updateSelect(this.data.id,this.data.sex)},i}(d);i._RF.pop()}}}));

