System.register("chunks:///_virtual/WingTalentUpgradeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedPoint.ts","./RedPointMgr.ts","./StringUtil.ts","./index57.ts","./WingControl.ts","./WingDataCache.ts","./WingDefine.ts","./BaseView.ts"],(function(t){"use strict";var n,i,e,o,s,a,l,c,r,d,h,u,g,p,f;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.Button,o=t.Sprite,s=t.Label,a=t.Vec2,l=t.Color},function(t){c=t.RedPointType},function(t){r=t.RedPointNode},function(t){d=t.default},null,function(t){h=t.default},function(t){u=t.WingDataCache},function(t){g=t.WingColorIcon,p=t.WingEvent},function(t){f=t.BaseView}],execute:function(){i._RF.push({},"2970caiuelJw69kZAMoWQ46","WingTalentUpgradeView",void 0);t("default",function(t){function i(){var n;return(n=t.call(this)||this).talentId=void 0,n.isEnough=void 0,n.colorBg=void 0,n.icon=void 0,n.skillName=void 0,n.skillLevel=void 0,n.twoAttr=void 0,n.curNode=void 0,n.curOneContent=void 0,n.curTwoContent=void 0,n.nextTwoContent=void 0,n.costNum=void 0,n.curNum=void 0,n.unlockDes=void 0,n.upBtn=void 0,n.upBtnRed=void 0,n.tabId=void 0,n.name="WingTalentUpgradeView",n.url="ui/module/wing/WingTalentUpgradeView",n.poolTime=3e3,n}n(i,t);var f=i.prototype;return f.onInit=function(){var t=this;this.addComponentCallbackListener(this.findChild("imgMask"),e.EventType.CLICK,(function(){t.close()})),this.addComponentCallbackListener(this.findChild("root/closeBtn"),e.EventType.CLICK,(function(){t.close()})),this.colorBg=this.findChildComponent("root/skillItem/colorBg",o),this.icon=this.findChildComponent("root/skillItem/icon",o),this.skillName=this.findChildComponent("root/name",s),this.skillLevel=this.findChildComponent("root/level",s),this.curOneContent=this.findChildComponent("root/cur/content",s),this.twoAttr=this.findChild("root/TwoAttr"),this.curNode=this.findChild("root/cur"),this.curTwoContent=this.findChildComponent("root/TwoAttr/cur/content",s),this.nextTwoContent=this.findChildComponent("root/TwoAttr/next/content",s),this.curNum=this.findChildComponent("root/item/num",s),this.costNum=this.findChildComponent("root/btn/txtNum",s),this.unlockDes=this.findChildComponent("root/unlockDes",s),this.upBtn=this.findChildComponent("root/btn",o),this.addComponentCallbackListener(this.upBtn.node,e.EventType.CLICK,(function(){if(t.isEnough){var n=configBack_talent.getDataByKeys("id",t.talentId,"level",1);IS(h).send_wing_talent_lev_up_c2s(n.job_type,t.talentId,t.tabId)}})),this.upBtnRed=new r,this.upBtnRed.addRedPoint(this.upBtn.node,new a(120,35),c.Dot);var n=this.findChildComponent("root/item/icon",o);this.loadIcon(n,"back","bs_icon_yumao2")},f.onAfterOpen=function(){var t;this.talentId=this.openArgs[0],this.tabId=null!=(t=this.openArgs[1])?t:IS(u).curTalentTab,this.UpdateInfo()},f.UpdateInfo=function(){var t=IS(u).GetTalentInfo(this.talentId,this.tabId),n=configBack_talent.getDataByKeys("id",this.talentId,"level",t);n||(n=configBack_talent.getDataByKeys("id",this.talentId,"level",1));var i=configBack_talent.getDataListByMainKey("id");this.skillName.string=n.name,this.skillLevel.string="LV."+t+"/"+i[this.talentId].length;var e=configBack_talent.getDataByKeys("id",this.talentId,"level",t+1);this.loadIcon(this.colorBg,"back",g[n.color_type]),this.loadIcon(this.icon,"back",n.icon);var o=IS(u).GetTalentTabItemCount(this.tabId);if(e){if(this.unlockDes.string="",this.curNode.active=!1,this.twoAttr.active=!0,this.upBtn.node.active=!0,0==t){var s=IS(u).GetTalentIsActive(this.talentId,this.tabId);this.upBtn.node.active=s,s?this.unlockDes.string="":(this.unlockDes.color=new l("#ca1414"),0==n.condition_1.length?this.unlockDes.string=GetLanguage(202020):IS(u).GetTalentlevIsFull(this.talentId,this.tabId)?this.unlockDes.string=d.formatStr(GetLanguage(201818),n.condition_1[0][1]):this.unlockDes.string=GetLanguage(204786));for(var a=[],c=0;c<n.desc_parm.length;c++)a.push(0);this.curTwoContent.string=d.formatStr.apply(d,[n.describe].concat(a))}else this.curTwoContent.string=d.formatStr.apply(d,[n.describe].concat(n.desc_parm));this.nextTwoContent.string=d.formatStr.apply(d,[e.describe].concat(e.desc_parm)),this.isEnough=o>=e.cost[0][1],this.costNum.string=e.cost[0][1],this.costNum.color=this.isEnough?new l("#00a100"):new l("#ca1414"),this.upBtn.grayscale=!this.isEnough,this.upBtnRed.notifyNum=this.isEnough?1:0}else this.upBtn.node.active=!1,this.unlockDes.color=new l("#00a100"),this.unlockDes.string=GetLanguage(201819),this.curNode.active=!0,this.twoAttr.active=!1,this.curOneContent.string=d.formatStr.apply(d,[n.describe].concat(n.desc_parm));this.curNum.string=o},f.registerUpdateHandler=function(){this.addEvent(p.TYPE_WING_TALENT_CHANGE,this.UpdateInfo,this)},f.onBeforeClose=function(){},f.onDestroy=function(){},i}(f));i._RF.pop()}}}));

