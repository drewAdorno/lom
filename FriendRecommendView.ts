System.register("chunks:///_virtual/FriendRecommendView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./index57.ts","./UIList.ts","./PlatformUtil.ts","./TimeUtil.ts","./MessageView.ts","./FriendControl.ts","./FriendDefine.ts","./FriendModel.ts","./UIDefine.ts","./BaseSubView.ts"],(function(e){"use strict";var t,i,n,o,d,a,s,r,h,l,c,f,m,u,p,C,g,v,L,F;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.ScrollView,o=e.Label,d=e.Button,a=e.EditBox,s=e.Sprite},function(e){r=e.default},null,function(e){h=e.SelectedType,l=e.ListItem},function(e){c=e.PlatformUtil},function(e){f=e.default},function(e){m=e.default},function(e){u=e.default},function(e){p=e.FriendDefine,C=e.FriendListType,g=e.FriendDealType},function(e){v=e.FriendModel},function(e){L=e.PanelTabType},function(e){F=e.BaseSubView}],execute:function(){i._RF.push({},"abb75TNC85NU6P0vSNDuOcl","FriendRecommendView",void 0);e("default",function(e){function i(){var t;return(t=e.call(this)||this).friendList=void 0,t.refreshTime=void 0,t.refreshBtn=void 0,t.btnClean=void 0,t.btnSearch=void 0,t.editBox=void 0,t.name="FriendRecommendView",t.url="ui/module/friend/FriendRecommendView",t}t(i,e);var s=i.prototype;return s.onInit=function(){var e=this,t=this.findChildComponent("list",n);this.friendList=this.addUIList(t,I),this.friendList.selectedMode=h.SINGLE,this.refreshTime=this.findChildComponent("free_time",o),this.refreshBtn=this.findChild("refresh_btn"),this.addComponentCallbackListener(this.refreshBtn,d.EventType.CLICK,(function(){var e=IS(v).GetLessTime();if(e>f.serverTime){var t=f.formatTimeForSecond(e-f.serverTime)+GetLanguage(200299);m.showFlyTip(t)}else IS(u).reqRefreshRecommendList()})),this.editBox=this.findChildComponent("nodeSearch/EditBox",a),this.editBox.placeholder=GetLanguage_UI(999000533),this.addComponentCallbackListener(this.editBox.node,a.EventType.EDITING_DID_BEGAN,(function(){c.UpdateCurrentEditBox(e.editBox)})),this.btnClean=this.findChild("nodeSearch/btnClean"),this.addComponentCallbackListener(this.btnClean,d.EventType.CLICK,(function(){e.editBox.string="",IS(v).searchList=null,e.updateInfo()})),this.btnSearch=this.findChild("nodeSearch/btnSearch"),this.addComponentCallbackListener(this.btnSearch,d.EventType.CLICK,(function(){IS(u).reqFriendSearch(e.editBox.string)}))},s.registerUpdateHandler=function(){this.addEvent(p.FriendInfoBack,this.updateInfo,this)},s.onAfterOpen=function(){IS(u).reqFriendList(C.FriendRecommend,1)},s.onBeforeClose=function(){c.ClearCurrentEditBox(this.editBox),this.editBox.string="",IS(v).searchList=null,this.updateInfo()},s.onDestroy=function(){},s.updateInfo=function(){var e=[];(e=IS(v).searchList?IS(v).searchList:IS(v).GetListByType(C.FriendRecommend))?this.friendList.datas=e:(this.friendList.clearData(),this.friendList.datas=[]),this.parentView.curType==L.Friend_Recommend&&this.parentView.UpdateEmpty(e.length<=0)},i}(F));var I=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).imgFrame=void 0,t.imgIcon=void 0,t.imgHeadFrame=void 0,t.txtName=void 0,t.txtLev=void 0,t.txtPower=void 0,t.txtTime=void 0,t.btnLabel=void 0,t.ok_btn=void 0,t.look_btn=void 0,t}t(i,e);var n=i.prototype;return n.onInit=function(){var e=this;this.imgFrame=r.findChildComponent(this.node,"imgFrame",s),this.imgIcon=r.findChildComponent(this.node,"imgFrame/imgIcon",s),this.imgHeadFrame=r.findChildComponent(this.node,"imgFrame/imgHeadFrame",s),this.txtName=r.findChildComponent(this.node,"name",o),this.txtLev=r.findChildComponent(this.node,"lev",o),this.txtPower=r.findChildComponent(this.node,"power",o),this.txtTime=r.findChildComponent(this.node,"time",o),this.btnLabel=r.findChildComponent(this.node,"ok_btn/Label",o),this.ok_btn=r.findChild(this.node,"ok_btn"),this.view.addComponentCallbackListener(this.ok_btn,d.EventType.CLICK,(function(){e.onBtnClick()})),this.look_btn=r.findChild(this.node,"imgFrame"),this.view.addComponentCallbackListener(this.look_btn,d.EventType.CLICK,(function(){IS(u).reqOtherRoleNotice(e.data.role_id)}))},n.onRender=function(e,t){this.view.loadRemoteIcon(e.head.url,this.imgIcon),this.txtName.string=e.name+" Lv."+e.lv,this.txtLev.string="",this.txtPower.string=GetLanguage(200295)+e.cur_power;var i=GetLanguage(200057);0==e.is_online&&(i=f.getDateDiff(e.offline_time)),this.txtTime.string=i;var n=e.head.frame_id;if(n>0){this.imgHeadFrame.node.active=!0;var o=configAvatar_frame.getDataByKey(n);this.view.loadIcon(this.imgHeadFrame,"icon_frame",o.icon)}else this.imgHeadFrame.node.active=!1;var d=GetLanguage(200301);1==e.type?d=GetLanguage(200302):4==e.type?d=GetLanguage(200303):5==e.type&&(d=GetLanguage(200304)),this.btnLabel.string=d},n.onBtnClick=function(){1!=this.data.type?4!=this.data.type?5!=this.data.type?IS(u).reqDealFriend(g.AddFriend,this.data.role_id):m.showFlyTip(GetLanguage(200307)):m.showFlyTip(GetLanguage(200306)):m.showFlyTip(GetLanguage(200305))},i}(l);i._RF.pop()}}}));

