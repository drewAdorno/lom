System.register("chunks:///_virtual/MapCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumDefine.ts","./CameraMgr.ts","./FixMath.ts","./GameSetting.ts"],(function(t){"use strict";var e,a,i,s,r,n,h;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy},function(t){i=t.StateType},function(t){s=t.cameraMgr},function(t){r=t.FixMath},function(t){n=t.default,h=t.GameSettingKey}],execute:function(){a._RF.push({},"3c50bqVJL9E45gLjP9qdxcB","MapCamera",void 0);t("MapCamera",function(){function t(){this.offsetY=0,this.curPart=1,this._curPartX=0,this._destPartX=0,this._isMove=!1,this._shakeTime=0,this._shakeFrequency=0,this._shakeRange=0}var a=t.prototype;return a.onUpdate=function(t){if(battleMain.mainCtr&&battleMain.mainCtr.player){var e=this._destPartX;if(this._isMove){if(battleMain.mainCtr.player.position.x<this._curPartX)return;this._curPartX=battleMain.mainCtr.player.position.x,battleMain.mainCtr.player.statectr.currentStateType!=i.Move&&(this._isMove=!1)}!this._isMove&&Math.abs(e-this._curPartX)>10&&(this._curPartX+=200*t,this._curPartX=Math.min(this._curPartX,e));var a=this._shakeUpdate(t);s.battleCamera.node.setPosition(this._curPartX+a,640+this.offsetY+a,10)}},a.nextPart=function(t){void 0===t&&(t=0),this._destPartX=r.round(360+720*t)},a.startPartMove=function(t){this._isMove=t>0,0==t&&(this._curPartX=this._destPartX)},a.stopMove=function(){this._isMove=!1},a.startShake=function(t,e,a){IS(n).Get(h.BATTLE_SHAKE)&&(this._shakeTime=a,this._shakeFrequency=e,this._shakeRange=t)},a._shakeUpdate=function(t){if(this._shakeTime>0){var e=Math.cos(this._shakeTime*this._shakeFrequency)*this._shakeRange;return this._shakeTime-=t,e}return 0},e(t,[{key:"offsetX",get:function(){return this._destPartX-360}},{key:"curOffsetPartX",get:function(){return this._curPartX-360}}]),t}());a._RF.pop()}}}));

