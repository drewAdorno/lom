System.register("chunks:///_virtual/BattleChapterTowerDefPanel.ts",["cc","./BattleData.ts","./EventDefine.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./ChapterDefine.ts","./TeamControl.ts","./IBattleChapterPanel.ts"],(function(t){"use strict";var e,i,n,a,o,h,r,s,f,p,c,d,l;return{setters:[function(t){e=t.cclegacy,i=t.ProgressBar,n=t.Label,a=t.Sprite,o=t.isValid},function(t){h=t.ChapterType},function(t){r=t.EventDefine},function(t){s=t.default},function(t){f=t.default},function(t){p=t.default},function(t){c=t.ChapterEventDefine},function(t){d=t.default},function(t){l=t.BattleInfoType}],execute:function(){e._RF.push({},"b33bczxQkBCW6XVfpAGUcKb","BattleChapterTowerDefPanel",void 0);t("BattleChapterTowerDefPanel",function(){function t(t,e){this.view=void 0,this.node=void 0,this.bottomY=350,this.infoType=l.TowerDef,this.nodeTime=void 0,this.pbTime=void 0,this.txtTime=void 0,this.txtChapter=void 0,this.txtDef=void 0,this.chapterTime=0,this.node=e,this.view=t,this.onInit()}var e=t.prototype;return e.reset=function(){var t=configLegacy_team_chapter.getDataByKey(battleMain.data.chapterId);this.txtChapter.string=GetLanguage_UI(999000550)+" "+t.level,this.updatePart()},e.onInit=function(){this.nodeTime=s.findChild(this.node,"time"),this.pbTime=s.findChildComponent(this.nodeTime,"pbTime",i),this.txtTime=s.findChildComponent(this.nodeTime,"txtTime",n);var t=s.findChildComponent(this.nodeTime,"Sprite",a);this.view.loadIcon(t,"battle","zxgq_ui_shijian"),this.txtChapter=s.findChildComponent(this.node,"txtChapter",n),this.txtDef=s.findChildComponent(this.node,"txtDef",n)},e.initBattleEvent=function(){battleEvent.on(r.TFDefChange,this.onDefChange,this),this.onDefChange(3)},e.onDefChange=function(t){o(this.txtDef)&&(this.txtDef.string=f.formatStr(GetLanguage_UI(999000499),t,3))},e.updateTime=function(){this.chapterTime!=Math.floor(battleMain.chapter.chapterTime)&&(this.chapterTime=Math.floor(battleMain.chapter.chapterTime),this.txtTime.string=p.formatTimeForSecond(this.chapterTime)),this.pbTime.progress=battleMain.chapter.chapterTime/battleMain.chapter.maxChapterTime},e.updatePart=function(){battleMain.chapter.timeModel?(this.nodeTime.active=!0,this.updateTime()):this.nodeTime.active=!1},e.exitBattle=function(){battleMain.enterChapter(),IS(d).reqTeamExit(),battleMain.toResult(battleMain.data.chapterId,h.Team3,1,!1),normalEvent.emit(c.BATTLE_STATE,h.Team3,!1)},e.onUpdate=function(t){battleMain.chapter.timeModel&&this.updateTime()},t}());e._RF.pop()}}}));

