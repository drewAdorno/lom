System.register("chunks:///_virtual/PetControl.ts",["cc","./PetDataCache.ts","./PetDefine.ts"],(function(t){"use strict";var e,n,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.PetDataCache},function(t){a=t.PetEventDefine}],execute:function(){e._RF.push({},"d01a9z2oLhHGa6svXTsHREo","PetControl",void 0);t("default",function(){var t=e.prototype;function e(){netManager.addEventListener("pet.pet_list_s2c",this.on_pet_list_s2c,this),netManager.addEventListener("pet.pet_update_s2c",this.on_pet_update_s2c,this),netManager.addEventListener("pet.pet_unlock_s2c",this.on_pet_unlock_s2c,this),netManager.addEventListener("pet.pet_update_part_s2c",this.on_pet_update_part_s2c,this),netManager.addEventListener("pet.pet_set_pos_s2c",this.on_pet_set_pos_s2c,this),netManager.addEventListener("pet.pet_unlock_pos_s2c",this.on_pet_unlock_pos_s2c,this),netManager.addEventListener("pet.pet_tab_info_s2c",this.on_pet_tab_info_s2c,this),netManager.addEventListener("pet.pet_tab_info_update_s2c",this.on_pet_tab_info_update_s2c,this),netManager.addEventListener("pet.pet_choose_tab_s2c",this.on_pet_choose_tab_s2c,this),netManager.addEventListener("pet.pet_change_tab_name_s2c",this.on_pet_change_tab_name_s2c,this)}return t.clear=function(){console.log("清理PetControl")},t.reqPetList=function(){netManager.send("pet.pet_list_c2s",{})},t.on_pet_list_s2c=function(t){IS(n).updatePosUnlock(t.pos_list),IS(n).updatePetInfo(t.pet_list),IS(n).updateAllPetEquipRedPoint(),IS(n).updateAllUpgradeRedPoint(),IS(n).updateAllComposeRedPoint()},t.on_pet_update_s2c=function(t){IS(n).updatePetInfo(t.pet_list),IS(n).updateAllPetEquipRedPoint(),IS(n).updateAllUpgradeRedPoint(),IS(n).updateAllComposeRedPoint()},t.on_pet_unlock_s2c=function(t){var e=t.pet_id;IS(n).updatePetInfo([{pet_id:e,level:1,pos:0}],!0),IS(n).updateAllPetEquipRedPoint(),IS(n).updateAllUpgradeRedPoint(),IS(n).updateAllComposeRedPoint()},t.reqPetLevUp=function(t){netManager.send("pet.pet_levup_c2s",{pet_id:t})},t.on_pet_update_part_s2c=function(t){IS(n).updatePetPartData(t.pet_id,t.update_list),IS(n).updateAllPetEquipRedPoint(),IS(n).updateAllUpgradeRedPoint(),IS(n).updateAllComposeRedPoint()},t.reqPetSetPos=function(t,e){netManager.send("pet.pet_set_pos_c2s",{pet_id:t,pos:e})},t.on_pet_set_pos_s2c=function(t){},t.on_pet_unlock_pos_s2c=function(t){IS(n).updatePosUnlock(t.pos_list,!0),IS(n).updateAllPetEquipRedPoint()},t.reqOnKeySetPos=function(t){netManager.send("pet.pet_set_all_pos_c2s",{pos_list:t})},t.reqPetTabInfo=function(){netManager.send("pet.pet_tab_info_c2s",{})},t.on_pet_tab_info_s2c=function(t){var e=t.tab;if(null!=e){IS(n).curTab=e;var a=t.tab_list;if(null!=a)for(var _=0;_<a.length;_++)IS(n).tabToInfo[a[_].tab]=a[_]}},t.on_pet_tab_info_update_s2c=function(t){var e=t.tab;null!=e&&(null==IS(n).tabToInfo[e]&&(IS(n).tabToInfo[e]={tab:e,name:"",pos_info:[]}),IS(n).tabToInfo[e].pos_info=t.pos_info,normalEvent.emit(a.PET_TAB_INFO_UPDATE,e))},t.reqPetChooseTab=function(t){netManager.send("pet.pet_choose_tab_c2s",{tab:t})},t.on_pet_choose_tab_s2c=function(t){var e=t.new_tab;null!=e&&(IS(n).curTab=e,normalEvent.emit(a.PET_CUR_TAB_CHANGE))},t.reqPetChangeTabName=function(t,e){netManager.send("pet.pet_change_tab_name_c2s",{tab:t,name:e})},t.on_pet_change_tab_name_s2c=function(t){var e=t.tab;null!=e&&(null==IS(n).tabToInfo[e]&&(IS(n).tabToInfo[e]={tab:e,name:"",pos_info:[]}),IS(n).tabToInfo[e].name=t.name,uiMgr.close("TabRenameView"),normalEvent.emit(a.PET_TAB_INFO_UPDATE,e))},e}());e._RF.pop()}}}));

