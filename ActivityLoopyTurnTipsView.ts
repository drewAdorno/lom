System.register("chunks:///_virtual/ActivityLoopyTurnTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StorageUtil.ts","./index57.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,a,c,s,r,l,d,u,f,v,p,h,y;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.js,c=t.Sprite,s=t.Label},function(t){r=t.default},function(t){l=t.default},null,function(t){d=t.RoleDataCache},function(t){u=t.default},function(t){f=t.ActivityEventDefine,v=t.ActivityType},function(t){p=t.default},function(t){h=t.HorseCarnivalDataCache},function(t){y=t.BaseView}],execute:function(){n._RF.push({},"d10c0Az6eNDaJ4oRnkr9SgS","ActivityLoopyTurnTipsView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).itemList=[],i.lockNode=void 0,i.unlockNode=void 0,i.cfg=void 0,i.name="ActivityLoopyTurnTipsView",i.url="ui/module/activityLoopy/ActivityLoopyTurnTipsView",i}i(n,t);var y=n.prototype;return y.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChild("btnClose");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()})),this.lockNode=this.findChild("view/lock"),this.unlockNode=this.findChild("view/unlock");for(var n=function(i){var e=r.findChild(t.node,a.formatStr("view/item/item%s",i)),n={itemGo:e,select:r.findChild(e,"select"),icon:r.findChildComponent(e,"imgIcon",c),name:r.findChildComponent(e,"name",s),index:i};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.setSelect(i)})),t.itemList[i]=n},l=1;l<=3;l++)n(l)},y.registerUpdateHandler=function(){this.addEvent(f.OnHorseCarnivalUpdate,this.updateInfo,this)},y.onAfterOpen=function(){var t=IS(u).GetActivityInfo(v.LoopyTurn),i=configMount_draw.getDatas();for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o.type==t.type&&o.group_id==t.roundCfg.group_id&&4==o.quality){this.cfg=o;break}}for(var a,c=e(this.cfg.reward_replace);!(a=c()).done;){var s=a.value,r=this.itemList[s[0]],p=configGoods.getDataByKey(s[1][0]);r.name.string=p.name,this.loadIcon(r.icon,p.icon_group,p.icon),r.select.active=!1}if(this.updateInfo(),this.unlockNode.active){var h,y=String(t.id)+"#"+String(t.round),C="ActivityLoopySelectRed"+IS(d).GetRoleId();(null!=(h=l.get(C))?h:"")!=y&&(l.set(C,y),IS(u).UpdateMainRedByActType(t.type),normalEvent.emit(f.OnHorseCarnivalUpdate))}},y.onBeforeClose=function(){},y.onDestroy=function(){},y.setSelect=function(t){this.lockNode.active||IS(p).send_24_66(v.LoopyTurn,this.cfg.id,t)},y.updateInfo=function(){var t,i,e=null!=(t=null==(i=IS(h).getInfo(v.LoopyTurn).choose_list[this.cfg.id])?void 0:i[1])?t:0;for(var n in this.lockNode.active=0==e,this.unlockNode.active=e>0,this.itemList)if(this.itemList.hasOwnProperty(n)){var o=this.itemList[n];o.select.active=e==o.index}},n}(y));n._RF.pop()}}}));

