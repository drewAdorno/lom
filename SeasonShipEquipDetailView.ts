System.register("chunks:///_virtual/SeasonShipEquipDetailView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./BaseView.ts","./ItemIcon.ts","./ObjectUtil.ts","./EquipDefine.ts","./SeasonShipModel.ts","./SeasonShipEquipEditView.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,u,p,h,l,d,f,m,c,I;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.UITransform,o=t.Button,s=t.Sprite,a=t.Label,r=t.js,u=t.sys},function(t){p=t.default},function(t){h=t.default},function(t){l=t.BaseView},function(t){d=t.IconAseetType},function(t){f=t.default},function(t){m=t.EquipEventDefine},function(t){c=t.SeasonShipModel},function(t){I=t.attrToIndex}],execute:function(){i._RF.push({},"f79e9fB9bpOKKiWdwhLFCgY","SeasonShipEquipDetailView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).equipItem=void 0,e.nodeContent=void 0,e.utContent=void 0,e.nodeSpeAttr=void 0,e.utSpeAttr=void 0,e.equipId=void 0,e.name="SeasonShipEquipDetailView",e.url="ui/module/season/SeasonShipEquipDetailView",e}e(i,t);var l=i.prototype;return l.onInit=function(){var t=this;this.nodeContent=this.findChild("content"),this.utContent=this.nodeContent.getComponent(n);var e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()})),this.nodeSpeAttr=this.findChild("content/info/detail/speAttr"),this.utSpeAttr=this.nodeSpeAttr.getComponent(n),this.equipItem={imgFrame:this.findChildComponent("content/info/head/imgFrame",s),imgIcon:this.findChildComponent("content/info/head/imgIcon",s),txtLevel:this.findChildComponent("content/info/txtLevel",a),txtName:this.findChildComponent("content/info/txtName",a),AttrItems:{normalAttrItems:[],speAttrItems:[]}};for(var i=0;i<4;i++){var u=this.findChild(r.formatStr("content/info/detail/attr/baseAttrItem%s",i+1)),h={txtName:p.findChildComponent(u,"txtName",a),txtValue:p.findChildComponent(u,"txtValue",a),imgFlag:null,node:u};if(this.equipItem.AttrItems.normalAttrItems.push(h),i<=1){var l=this.findChild(r.formatStr("content/info/detail/speAttr/speAttrItem%s",i+1)),d={txtName:p.findChildComponent(l,"txtName",a),txtValue:p.findChildComponent(l,"txtValue",a),imgFlag:null,node:l};this.equipItem.AttrItems.speAttrItems.push(d)}}},l.registerUpdateHandler=function(){this.addEvent(m.EQUIP_FIGURE_UPDATE,this.onEquipFigureUpdate,this)},l.onAfterOpen=function(){this.equipId=this.openArgs[0]||0,this.showEquipInfo()},l.showEquipInfo=function(){if(0!=this.equipId){var t=IS(c).getEquipInfoByEquipId(this.equipId);if(null!=t){var e=IS(c).getEquipNameShowByEquipConfigId(t.config_id,!0);this.equipItem.txtName.string=e.name,this.equipItem.txtName.color=e.color;var i=configSeason_equipment.getDataByKey(t.config_id);this.loadIcon(this.equipItem.imgIcon,i.atlas,i.icon,null,d.ICON_SPRITE),this.loadIcon(this.equipItem.imgFrame,"icon_equip",configColor.getDataByKey(i.quality).path),this.equipItem.txtLevel.string=h.formatStr(u.uiMirror?"##1.Lv":"Lv.##1",t.equip_lv);var n,o,s=t.base_attr;s.sort((function(t,e){return I[t.k]<I[e.k]?-1:1}));for(var a=0;a<4;a++){var r=this.equipItem.AttrItems.normalAttrItems[a],p=s[a];if(f.isEmpty(p))r.node.active=!1;else{r.node.active=!0,n=p.k,o=p.v;var l=configAttribute.getDataByKey(n);r.txtName.string=l.name,r.txtValue.string=3==l.show_type?String(Math.floor(o/100)/100):String(o)}}for(var m=t.rand_attr||[],g=0;g<2;g++){var v=this.equipItem.AttrItems.speAttrItems[g],C=m[g];if(f.isEmpty(C))v.node.active=!1;else{v.node.active=!0,n=C.k,o=C.v;var q=configAttribute.getDataByKey(n);v.txtName.string=q.name,v.txtValue.string=h.formatStr(u.uiMirror?"%##1":"##1%",100*o/1e4)}}this.nodeSpeAttr.active=m.length>0||!1;var S=m.length>0?52*m.length+26:0;this.utSpeAttr.height=52*m.length+26,this.utContent.height=280+S}}else self.close()},l.onBeforeClose=function(){this.equipId=0},l.onDestroy=function(){},l.onEquipFigureUpdate=function(){this.showEquipInfo()},i}(l));i._RF.pop()}}}));

