System.register("chunks:///_virtual/PlanPresetView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./ConfigGlobal.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var n,i,e,o,s,d,a,r,l,h,c,u,f,p;return{setters:[function(t){n=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,o=t.ScrollView,s=t.Button,d=t.Sprite,a=t.Label},function(t){r=t.ListItem},function(t){l=t.default},null,function(t){h=t.ConfigGlobal},function(t){c=t.default},function(t){u=t.RoleDataCache},function(t){f=t.RoleEventDefine},function(t){p=t.BaseSubView}],execute:function(){e._RF.push({},"d444bTWycpJ+ahLY9uqRl19","PlanPresetView",void 0);h.suit_tab_limit.length,t("default",function(t){function e(){var n;return(n=t.call(this)||this).nodePlanList=void 0,n.planList=[],n.presetList=void 0,n.nodeRoot=void 0,n.curPlanList=[],n.name="PlanPresetView",n.url="ui/module/role/PlanPresetView",n}n(e,t);var d=e.prototype;return d.onInit=function(){var t=this,n=this.findChildComponent("scroll",o);this.presetList=this.addUIList(n,v),this.nodePlanList=this.findChild("scroll/nodeRoot/PlanList");for(var i=1;i<=4;i++)this.planList[i]=new P(this.findChild("scroll/nodeRoot/PlanList/item"+i),this);this.nodeRoot=this.findChild("scroll/nodeRoot"),this.addComponentCallbackListener(this.nodeRoot,s.EventType.CLICK,(function(){t.nodeRoot.active=!1}));var e=this.findChild("btnConfirm");this.addComponentCallbackListener(e,s.EventType.CLICK,(function(){IS(u).judgeIsChanged()&&uiMgr.openView("PlanConfirmView",1)}))},d.registerUpdateHandler=function(){this.addEvent(f.PLAN_PRESET_UPDATE,this.updatePresetList,this),this.addEvent(f.PLAN_PRESET_CLICK,this.updatePlanList,this)},d.onAfterOpen=function(){IS(c).send_role_default_plan_info_c2s(),this.nodeRoot.active=!1},d.onBeforeClose=function(){IS(u).judgeIsChanged()&&uiMgr.openView("PlanConfirmView",2)},d.onDestroy=function(){},d.updatePresetList=function(){for(var t,n=configProgram_reset,e=0,o=[],s=i(n.getDatas());!(t=s()).done;){var d=t.value;if(e++,0==d.show_descition){var a={id:d.id,icon:d.icon,desc:d.desc,isOpen:this.nodeRoot.active,planId:IS(u).curPresetList[e]};o.push(a)}}this.presetList.datas=o},d.updatePlanList=function(t,n){this.nodeRoot.active=!0;for(var i=configProgram_reset.getDatas().length,e=1,o=1;o<=i;o++)o!=t&&(this.planList[e].update(IS(u).getPlanName(o),!IS(u).checkPlanUnlock(o),IS(u).curPreset,o),e++);this.nodePlanList.setPosition(200,-200-140*n)},e}(p));var v=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).imgIcon=void 0,n.txtDesc=void 0,n.txtCurPlan=void 0,n.nodeArrowUp=void 0,n.nodeArrowDown=void 0,n.nodePlan=void 0,n.id=void 0,n.planId=void 0,n}n(i,t);var e=i.prototype;return e.onInit=function(){var t=this;this.imgIcon=l.findChildComponent(this.node,"imgIcon",d),this.txtDesc=l.findChildComponent(this.node,"txtDesc",a),this.txtCurPlan=l.findChildComponent(this.node,"btnPlan/txtCurPlan",a),this.nodeArrowUp=l.findChild(this.node,"btnPlan/ArrowUp"),this.nodeArrowDown=l.findChild(this.node,"btnPlan/ArrowDown"),this.nodePlan=l.findChild(this.node,"nodePlan");var n=l.findChild(this.node,"btnPlan");this.view.addComponentCallbackListener(n,s.EventType.CLICK,(function(){IS(u).curPreset=t.id,normalEvent.emit(f.PLAN_PRESET_CLICK,t.planId,t.index)}))},e.onRender=function(t,n){this.view.loadIcon(this.imgIcon,"tzqh",t.icon),this.txtDesc.string=t.desc,this.id=t.id,this.planId=t.planId,this.txtCurPlan.string=IS(u).getPlanName(t.planId),this.nodeArrowUp.active=t.isOpen,this.nodeArrowDown.active=!t.isOpen},e.updateArrow=function(t){this.nodeArrowUp.active=!t,this.nodeArrowDown.active=t},i}(r),P=function(){function t(t,n){var i=this;this.node=void 0,this.txtPlan=void 0,this.nodeLock=void 0,this.view=void 0,this.presetId=void 0,this.planId=void 0,this.value=void 0,this.node=t,this.view=n,this.txtPlan=l.findChildComponent(this.node,"txtPlan",a),this.nodeLock=l.findChild(this.node,"nodeLock"),this.view.addComponentCallbackListener(this.node,s.EventType.CLICK,(function(){i.nodeLock.active||(i.view.nodeRoot.active=!1,IS(u).curPresetList[i.planId]=i.value,normalEvent.emit(f.PLAN_PRESET_UPDATE,i.planId))}))}return t.prototype.update=function(t,n,i,e){this.txtPlan.string=t,this.nodeLock.active=n,this.planId=i,this.value=e},t}();e._RF.pop()}}}));

