System.register("chunks:///_virtual/MountAsset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./AssetPool.ts","./BaseAsset.ts","./SpineSkeleton.ts"],(function(t){"use strict";var e,n,o,i,s,a,c,r,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,i=t.isValid,s=t.sp},function(t){a=t.V2},function(t){c=t.AssetPoolState},function(t){r=t.BaseAsset},function(t){u=t.SpineSkeleton}],execute:function(){o._RF.push({},"64ec1K3y8tHVrHjKedPv26x","MountAsset",void 0);var l,h={1:"root/zong/juese1",2:"root/zong/juese2",3:"root/zong/juese3",4:"root/zong/juese4"};!function(t){t[t.Not=0]="Not",t[t.Ani=128]="Ani"}(l||(l={}));t("MountAsset",function(t){function o(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this)._animator=void 0,e._mountId=void 0,e._ani="idle",e._unit=void 0,e._bindPos=1,e}e(o,t),o.alloc=function(t,e,n,o){void 0===o&&(o=1);var i=configMount.getDataByKey(t),s=mountPool.alloc(i.path,i.maxNum,i.maxTime);return s._mountId=t,s.parent=e,s.loadSync(),s.scale=1,s._unit=n,s._bindPos=o,s.aniName="idle",s.position=a.ZERO,s},o.free=function(t){t.free()};var r=o.prototype;return r.onLoadComplete=function(){var t=this._node.getComponent(u);this._animator=t,t.__preload()},r.onAfterCacheFree=function(){t.prototype.onAfterCacheFree.call(this);var e=this._animator;i(e)&&(this.node.removeFromParent(),e.sockets.length=0,e.sockets=e.sockets)},r.cacheReset=function(){t.prototype.cacheReset.call(this),this._unit=null,this._parentObj=null},r.onUpdate=function(e){if(t.prototype.onUpdate.call(this,e),!(this.poolState>c.Useing)&&null!=this._unit){var n=this._animator;i(n)&&n._skeleton&&0==n.sockets.length&&(n.sockets.push(new s.SpineSocket(h[this._bindPos],this._unit)),n.sockets=n.sockets)}},r.onApply=function(t){this._changeValue&l.Ani&&this._animator.setAnimation(0,this._ani,!0)},n(o,[{key:"aniName",set:function(t){this._ani!=t&&(this._ani=t,this._changeValue=this._changeValue|l.Ani)}}]),o}(r));o._RF.pop()}}}));

