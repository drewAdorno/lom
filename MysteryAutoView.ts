System.register("chunks:///_virtual/MysteryAutoView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./AdDefine.ts","./AdModel.ts","./BagModel.ts","./MessageView.ts","./PrivilegeDataCache.ts","./PrivilegeDefine.ts","./MysteryControl.ts","./MysteryModel.ts","./BaseView.ts"],(function(t){"use strict";var e,n,o,i,d,s,c,u,a,l,h,r,f,p,A,C,g,y,v;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Button,i=t.Label,d=t.Vec3,s=t.Sprite,c=t.js},function(t){u=t.default},null,function(t){a=t.ConfigGlobal},function(t){l=t.ADS_TYPE,h=t.AdEventDefine},function(t){r=t.AdModel},function(t){f=t.BagModel},function(t){p=t.default},function(t){A=t.PrivilegeDataCache},function(t){C=t.PrivilegeCardEffect},function(t){g=t.default},function(t){y=t.MysteryModel},function(t){v=t.BaseView}],execute:function(){n._RF.push({},"4ea90fpiS5HMofT2Bq3Ch9h","MysteryAutoView",void 0);var S=a.mine_auto_min_num;t("default",function(t){function n(){var e;return(e=t.call(this)||this).btnAuto=void 0,e.btnAd=void 0,e.txtAdDesc=void 0,e.txtAdCount=void 0,e.nodeAdIcon=void 0,e.txtAdCD=void 0,e.curType=void 0,e.nodeSelectBg1=void 0,e.nodeSelectBg2=void 0,e.nodeSelect1=void 0,e.nodeSelect2=void 0,e.name="MysteryAutoView",e.url="ui/module/mystery/MysteryAutoView",e}e(n,t);var v=n.prototype;return v.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.onMaskClick()})),this.btnAuto=this.findChild("content/btnUpgrade"),this.btnAd=this.findChild("content/btnAd"),this.txtAdDesc=this.findChildComponent("content/btnAd/txtAdDesc",i),this.txtAdCount=this.findChildComponent("content/btnAd/txtAdNum",i),this.nodeAdIcon=this.findChild("content/btnAd/imgAd"),this.nodeAdIcon.active=1==a.ads_icon_is_show,this.txtAdCount.node.position=1==a.ads_icon_is_show?new d(19.7,-7.7,0):new d(0,-7.7,0),this.addComponentCallbackListener(this.btnAuto,o.EventType.CLICK,(function(){IS(f).getGoodsCountByGoodsGtid(4001)<S?p.showFlyTip(u.formatStrWithMirrorDeal(GetLanguage(201350),S)):p.showBoxTip({tip:GetLanguage(1==t.curType?201351:201352),func:function(e){"type_yes"==e&&(IS(g).reqHomeMineAutoUseGoods(t.curType),t.close())}})})),this.addComponentCallbackListener(this.btnAd,o.EventType.CLICK,(function(){IS(f).getGoodsCountByGoodsGtid(4001)<S?p.showFlyTip(u.formatStrWithMirrorDeal(GetLanguage(201350),S)):p.showBoxTip({tip:GetLanguage(1==t.curType?201351:201352),func:function(e){"type_yes"==e&&(IS(r).tryWatchAd(l.AD_MINE_AUTO,t.curType),t.close())}})}));var n=this.findChild("content/method/1/btnChoose");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){t.curType=1,IS(y).setDefalutSelectAutoType(1),t.updateSelect()})),this.nodeSelectBg1=this.findChild("content/method/1/imgBgSelect"),this.nodeSelect1=this.findChild("content/method/1/btnChoose/imgSelect");var c=this.nodeSelect1.getComponent(s);this.loadIcon(c,"common","common_ui_dagou");var h=this.findChild("content/method/2/btnChoose");this.addComponentCallbackListener(h,o.EventType.CLICK,(function(){t.curType=2,IS(y).setDefalutSelectAutoType(2),t.updateSelect()})),this.nodeSelectBg2=this.findChild("content/method/2/imgBgSelect"),this.nodeSelect2=this.findChild("content/method/2/btnChoose/imgSelect");var A=this.nodeSelect2.getComponent(s);this.loadIcon(A,"common","common_ui_dagou")},v.registerUpdateHandler=function(){this.addEvent(h.AD_INFO_UPDATE,this.onAdInfoUpdate,this)},v.onMaskClick=function(){this.close()},v.onAfterOpen=function(){this.curType=IS(y).getDefaultSelectAutoType(),this.updateSelect(),this.updateBtnStatus(),this.updateAdInfo()},v.updateSelect=function(){this.nodeSelect1.active=1==this.curType,this.nodeSelect2.active=2==this.curType,this.nodeSelectBg1.active=1==this.curType,this.nodeSelectBg2.active=2==this.curType},v.updateBtnStatus=function(){var t=IS(A).getPrivilegeCardValue(C.AUTO_MINE);this.btnAuto.active=t>0,this.btnAd.active=t<=0},v.updateAdInfo=function(){var t=configAds.getDataByKey(l.AD_MINE_AUTO);this.txtAdDesc.string=t.desc;var e=IS(r).getAdWatchCount(l.AD_MINE_AUTO);this.txtAdCount.string=c.formatStr("(%s/%s)",t.times-e,t.times)},v.onBeforeClose=function(){},v.onDestroy=function(){},v.onAdInfoUpdate=function(t){t==l.AD_MINE_AUTO&&this.updateAdInfo()},n}(v));n._RF.pop()}}}));

