System.register("chunks:///_virtual/WelfareControl.ts",["cc","./GameSetting.ts","./ControlMgr.ts","./LoginDataCache.ts","./WelfareDataCache.ts","./WelfareDefine.ts"],(function(e){"use strict";var n,a,t,r,o,i,_;return{setters:[function(e){n=e.cclegacy},function(e){a=e.default,t=e.GameSettingKey},function(e){r=e.controlMgr},function(e){o=e.LoginDataCache},function(e){i=e.WelfareDataCache},function(e){_=e.WelfareEvent}],execute:function(){n._RF.push({},"e748c7Ush9LVqwzFDV6m8wA","WelfareControl",void 0);e("default",function(){var e=n.prototype;function n(){netManager.addEventListener("operate.operate_acc_bind_info_s2c",this.on_operate_acc_bind_info_s2c,this),netManager.addEventListener("operate.operate_acc_bind_reward_s2c",this.on_operate_acc_bind_reward_s2c,this),netManager.addEventListener("operate.operate_facebook_info_s2c",this.on_operate_facebook_info_s2c,this),netManager.addEventListener("operate.operate_facebook_share_reward_s2c",this.on_operate_facebook_share_reward_s2c,this),netManager.addEventListener("operate.operate_facebook_like_reward_s2c",this.on_operate_facebook_like_reward_s2c,this),r.addControl(this)}return e.clear=function(){},e.onLogin=function(){IS(n).reqFbRewardInfo(),IS(n).reqBindInfo(),IS(i).updateRedPoint()},e.onReconnect=function(){},e.reqFbRewardInfo=function(){netManager.send("operate.operate_facebook_info_c2s",{})},e.on_operate_facebook_info_s2c=function(e){var n,r=IS(i);r.share_info={},r.shareRedPoint=0;var o=null!=(n=e.share_reward)?n:{};for(var c in o)r.share_info[o[c].k]=o[c].v,1==o[c].v&&r.shareRedPoint++;r.fbLikeReward=e.like_reward,1==e.like_reward&&(r.likeRedPoint=1),0==IS(a).Get(t.FACEBOOK_SHARE)&&IS(i).shareRedPoint++,IS(i).updateRedPoint(),normalEvent.emit(_.FB_REWARD_UPDATE)},e.sendFbShareReward=function(e,n){netManager.send("operate.operate_facebook_share_reward_c2s",{id:e,type:n})},e.on_operate_facebook_share_reward_s2c=function(e){var n,a=IS(i);a.share_info={},a.shareRedPoint=0;var t=null!=(n=e.share_reward)?n:{};for(var r in t)a.share_info[t[r].k]=t[r].v,1==t[r].v&&a.shareRedPoint++;IS(i).updateRedPoint(),normalEvent.emit(_.FB_REWARD_UPDATE)},e.sendFbLikeReward=function(e){netManager.send("operate.operate_facebook_like_reward_c2s",{type:e})},e.on_operate_facebook_like_reward_s2c=function(e){var n=IS(i);n.fbLikeReward=e.like_reward,1==e.like_reward&&(n.likeRedPoint=1),IS(i).updateRedPoint(),normalEvent.emit(_.FB_REWARD_UPDATE)},e.reqBindInfo=function(){var e={client_id:IS(o).fngid};netManager.send("operate.operate_acc_bind_info_c2s",e)},e.on_operate_acc_bind_info_s2c=function(e){var n=IS(i);n.bindState=e.bind_state,n.rewardState=e.reward_state,0==e.reward_state&&(n.bindRedPoint=1),IS(i).updateRedPoint(),normalEvent.emit(_.BIND_INFO_UPDATE)},e.reqBindReward=function(){netManager.send("operate.operate_acc_bind_reward_c2s",{})},e.on_operate_acc_bind_reward_s2c=function(e){this.reqBindInfo()},n}());n._RF.pop()}}}));

