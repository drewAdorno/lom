System.register("chunks:///_virtual/ActivityHalloweenTurnTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StorageUtil.ts","./index57.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,a,c,l,s,r,d,u,f,v,h,p,C;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.js,c=t.Sprite,l=t.Label},function(t){s=t.default},function(t){r=t.default},null,function(t){d=t.RoleDataCache},function(t){u=t.default},function(t){f=t.ActivityEventDefine,v=t.ActivityType},function(t){h=t.default},function(t){p=t.HorseCarnivalDataCache},function(t){C=t.BaseView}],execute:function(){n._RF.push({},"bcacdQblsBJ97odXFwHKbb+","ActivityHalloweenTurnTipsView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).itemList=[],e.lockNode=void 0,e.unlockNode=void 0,e.cfg=void 0,e.name="ActivityHalloweenTurnTipsView",e.url="ui/module/halloween/ActivityHalloweenTurnTipsView",e}e(n,t);var C=n.prototype;return C.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.close()})),this.lockNode=this.findChild("view/lock"),this.unlockNode=this.findChild("view/unlock");for(var i=function(e){var i=s.findChild(t.node,a.formatStr("view/item/item%s",e)),n={itemGo:i,select:s.findChild(i,"select"),icon:s.findChildComponent(i,"imgIcon",c),name:s.findChildComponent(i,"name",l),index:e};t.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.setSelect(e)})),t.itemList[e]=n},n=1;n<=3;n++)i(n)},C.registerUpdateHandler=function(){this.addEvent(f.OnHorseCarnivalUpdate,this.updateInfo,this)},C.onAfterOpen=function(){var t=IS(u).GetActivityInfo(v.HalloweenTurn),e=configMount_draw.getDatas();for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if(o.type==t.type&&o.group_id==t.roundCfg.group_id&&1==o.goods_type){this.cfg=o;break}}for(var a,c=i(this.cfg.reward_replace);!(a=c()).done;){var l=a.value,s=this.itemList[l[0]],h=configGoods.getDataByKey(l[1][0]);s.name.string=h.name,this.loadIcon(s.icon,h.icon_group,h.icon),s.select.active=!1}if(this.updateInfo(),this.unlockNode.active){var p,C=String(t.id)+"#"+String(t.round),y="ActivityHalloweenSelectRed"+IS(d).GetRoleId();(null!=(p=r.get(y))?p:"")!=C&&(r.set(y,C),IS(u).UpdateMainRedByActType(t.type),normalEvent.emit(f.OnHorseCarnivalUpdate))}},C.onBeforeClose=function(){},C.onDestroy=function(){},C.setSelect=function(t){this.lockNode.active||IS(h).send_24_66(v.HalloweenTurn,this.cfg.id,t)},C.updateInfo=function(){var t,e,i=null!=(t=null==(e=IS(p).getInfo(v.HalloweenTurn).choose_list[this.cfg.id])?void 0:e[1])?t:0;for(var n in this.lockNode.active=0==i,this.unlockNode.active=i>0,this.itemList)if(this.itemList.hasOwnProperty(n)){var o=this.itemList[n];o.select.active=i==o.index}},n}(C));n._RF.pop()}}}));

