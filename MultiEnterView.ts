System.register("chunks:///_virtual/MultiEnterView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ChapterDefine.ts","./MessageView.ts","./GuildWarControl.ts","./GuildWarDataCache.ts","./GuildWarDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,a,d,h,r,l,c,u,C,f,g,v,p;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.HorizontalTextAlignment,s=t.sys,a=t.Label,d=t.Layout,h=t.Sprite},function(t){r=t.default},function(t){l=t.default},function(t){c=t.default},null,function(t){u=t.DungeonDefine},function(t){C=t.default},function(t){f=t.default},function(t){g=t.GuildWarDataCache},function(t){v=t.GuildBossEventDefine},function(t){p=t.BaseView}],execute:function(){i._RF.push({},"fbd5d2CX29NGb1/zJMFtE8K","MultiEnterView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).curLevel=void 0,e.btnGo=void 0,e.btnTips=void 0,e.txtLevel=void 0,e.txtNum=void 0,e.txtNext=void 0,e.nodeNext=void 0,e.nodeFighting=void 0,e.txtGetNum=void 0,e.nodeGot=void 0,e.nodeActive=void 0,e.timeCount=5,e.waiting=!1,e.name="MultiEnterView",e.url="ui/module/guildwar/MultiEnterView",e.poolTime=3e3,e}e(i,t);var p=i.prototype;return p.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.waiting||t.close()}));var i=this.findChild("content/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.waiting||t.close()}));var h=this.findChild("content/title/btnTip");this.addComponentCallbackListener(h,n.EventType.CLICK,(function(){var t=configChapter_type.getDataByKey(u.CHAPTER_TYPE_LEAGUE_GVE).desc,e=configChapter_type.getDataByKey(u.CHAPTER_TYPE_LEAGUE_GVE).name,i=o.LEFT;s.uiMirror&&(i=o.RIGHT),C.showBoxTip({title:e,tip:t,btnCnt:1,horizontalAlign:i})})),this.btnGo=this.findChild("content/btnGo"),this.addComponentCallbackListener(this.btnGo,n.EventType.CLICK,(function(){1==IS(g).is_join?C.showFlyTip(GetLanguage(200377)):IS(f).reqGuildBossSignUp()}));var r=this.findChild("content/imgBg/btnReward");this.addComponentCallbackListener(r,n.EventType.CLICK,(function(){uiMgr.openView("MultiRuleTips")}));var l=this.findChild("content/imgBg/btnRecord");this.addComponentCallbackListener(l,n.EventType.CLICK,(function(){})),this.txtLevel=this.findChildComponent("content/txtBG/txtLevel",a),this.txtNum=this.findChildComponent("content/txtBG/txtNum",a),this.txtNext=this.findChildComponent("content/next/txtNext",a),this.nodeNext=this.findChild("content/next/txtNext1"),this.nodeFighting=this.findChild("content/next/txtNext2"),this.dealMirrorLayout(this.findChildComponent("content/Node",d)),this.txtGetNum=this.findChildComponent("content/Node/txtNum",a),this.nodeGot=this.findChild("content/nodeGot"),this.nodeActive=this.findChild("content/nodeActive")},p.onAfterOpen=function(){this.timeCount=5,this.curLevel=IS(g).level,this.txtLevel.string=this.curLevel,this.refreshBaseInfo(),this.waiting=!1},p.refreshBaseInfo=function(){var t=this;this.txtNum.string=IS(g).num,this.txtNext.string=c.formatDate(c.ServerDate(1e3*IS(g).end_time),"MM/dd hh:mm"+c.GetServerTimeZoneStr()),2!=IS(g).stage?(this.txtNext.node.active=!0,this.nodeNext.active=!0,this.nodeFighting.active=!1):(this.txtNext.node.active=!1,this.nodeNext.active=!1,this.nodeFighting.active=!0);var e=IS(g).is_join;this.btnGo.getComponent(h).grayscale=1==e,r.findChild(this.btnGo,"txtDone").active=1==e,r.findChild(this.btnGo,"nodeSign").active=1!=e;var i=this.findChild("content/btnEnter");i.active=!1,this.btnGo.active=!0;var o=this.findChildComponent("content/btnEnter/Node",a);0!=IS(g).stage&&1==IS(g).is_join&&(i.active=!0,i.getComponent(n).enabled=!0,o.string=GetLanguage(300113),this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){i.getComponent(n).enabled=!1,t.btnGo.active=!1,t.updateTime(),t.addTimer(1,5,(function(){t.updateTime()}))}))),2==IS(g).is_join&&(i.active=!0,i.getComponent(n).enabled=!0,o.string=GetLanguage(300112),this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){C.showFlyTip(GetLanguage(200378))})));var s=configLeague_gve_chapter.getDataByKey(this.curLevel);this.txtGetNum.string=s.reward_enroll[0][1],this.nodeGot.active=1==IS(g).is_today,this.nodeActive.active=0==IS(g).is_today},p.updateTime=function(){this.findChildComponent("content/btnEnter/Node",a).string=l.formatStrWithMirrorDeal(GetLanguage(300097),this.timeCount),this.timeCount-=1,this.waiting=!0,this.timeCount<=0&&(this.waiting=!1,IS(f).reqGuildBossEnter(),this.close())},p.openSingUpTips=function(){1==IS(g).is_today&&C.showBoxTip({title:GetLanguage(200154),tip:GetLanguage(200379),btnCnt:1})},p.registerUpdateHandler=function(){this.addEvent(v.TYPE_GUILD_WAR_SINGUP_SUCCESS,this.refreshBaseInfo),this.addEvent(v.TYPE_GUILD_WAR_SINGUP_SUCCESS,this.openSingUpTips)},p.onBeforeClose=function(){this.waiting=!1},p.onDestroy=function(){},i}(p));i._RF.pop()}}}));

