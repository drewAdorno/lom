System.register("chunks:///_virtual/SeasonFaceView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ConfigSeason_kv.ts","./SeasonSceneControl.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,s,o,a,c,l,h,r,f,d,u;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Sprite,s=t.Button,o=t.ScrollView,a=t.Label},function(t){c=t.ListItem},function(t){l=t.default},function(t){h=t.default},function(t){r=t.default},null,function(t){f=t.ConfigSeason_kv},function(t){d=t.default},function(t){u=t.BaseView}],execute:function(){e._RF.push({},"9d7a88vPDdHZqeYBgkjMk0y","SeasonFaceView",void 0);t("SeasonFaceView",function(t){function e(){var i;return(i=t.call(this)||this).closeBtn=void 0,i.scrollList=[],i.tabType=null,i.tabItemList=[],i.tabShowItemList=[],i.tabListDefine=[{faceNum:24,suffix:"_1",icon:"lt_ICON_biaoqing02",scroll:0},{faceNum:20,suffix:"_2",icon:"lt_ui_beishangwa",scroll:1,openTime:{year:2024,month:3,day:15,h:0,min:0,s:0},endTime:{year:2024,month:3,day:31,h:23,min:59,s:59}}],i.name="SeasonFaceView",i.url="ui/module/season/scene-view/SeasonFaceView",i}i(e,t);var c=e.prototype;return c.onInit=function(){for(var t=this,i=0;i<2;i++){var e=this.tabListDefine[i],a=this.findChild("tabContent/face"+(i+1));e?function(){var e={selected:t.findChild("tabContent/face"+(i+1)+"/selected"),item:a,line:t.findChild("tabContent/face"+(i+1)+"/line"),icon:t.findChildComponent("tabContent/face"+(i+1)+"/icon",n),info:t.tabListDefine[i],index:i};t.loadIcon(e.icon,"chat",t.tabListDefine[i].icon),t.addComponentCallbackListener(e.item,s.EventType.CLICK,(function(){t.ChangeTab(e.index)})),t.tabShowItemList.push(e)}():a.active=!1}this.closeBtn=this.findChild("mask"),this.addComponentCallbackListener(this.closeBtn,s.EventType.CLICK,(function(){t.close()}));var c=this.findChildComponent("ScrollView",o);this.scrollList[0]=this.addUIList(c,m);var l=this.findChildComponent("ScrollViewBig",o);this.scrollList[1]=this.addUIList(l,m),this.scrollList[1].scrollView},c.registerUpdateHandler=function(){},c.onAfterOpen=function(){this.tabType=null,this.tabItemList=[];for(var t=0;t<this.tabShowItemList.length;t++){var i=this.tabListDefine[t],e=this.tabShowItemList[t];if(i){var n=!0;if(i.openTime){var s=i.openTime,o=r.getLocalTimeToUTC8(s.year,s.month,s.day,s.h,s.min,s.s);n=r.serverTime>=o}if(i.endTime){var c=i.endTime,l=r.getLocalTimeToUTC8(c.year,c.month,c.day,c.h,c.min,c.s);n=n&&r.serverTime<l}e.item.active=n,n&&this.tabItemList.push(e)}}this.ChangeTab(0),this.findChildComponent("label",a).string=h.formatStr(GetLanguage(205223),f.SEASON_EMOJI_CD)},c.ChangeTab=function(t){this.tabType!=t&&(this.tabType=t,this.RefreshFace())},c.RefreshFace=function(){for(var t,i=0,e=0;e<this.tabItemList.length;e++){var n=this.tabItemList[e].selected,s=this.tabItemList[e].line,o=this.tabItemList[e].info;n.active=this.tabType==e,s.active=e>this.tabType&&e!=this.tabItemList.length-1;var a=this.scrollList[o.scroll];if(a.scrollView.node.active=this.tabType==e,this.tabType==e){t=a,i=o.faceNum;break}}for(var c=[],l=0;l<i;l++)c.push(l+1+this.tabItemList[this.tabType].info.suffix);t.datas=c},c.onBeforeClose=function(){},c.onDestroy=function(){},e}(u));var m=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).btn=void 0,i.icon=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.btn=l.findChild(this.node,""),this.view.addComponentCallbackListener(this.btn,s.EventType.CLICK,(function(){IS(d).reqEmojiSend(t.data),t.view.close()})),this.icon=l.findChildComponent(this.node,"icon",n)},o.onRender=function(t,i){this.view.loadIcon(this.icon,"icon_chat",t)},e}(c);e._RF.pop()}}}));

