System.register("chunks:///_virtual/BuffCheck.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./Buff.ts"],(function(e){"use strict";var i,t,r,o,f;return{setters:[function(e){i=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){o=e.ObjectPool},function(e){f=e.Buff}],execute:function(){r._RF.push({},"9b2eaEvviBNdb5HpU0JUvCi","BuffCheck",void 0);var n=e("BuffCheck",function(e){function r(){for(var i,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(i=e.call.apply(e,[this].concat(r))||this).checkbuffid=void 0,i._perTriggerLayers=void 0,i._maxTime=void 0,i._buffList=void 0,i.triggeredTimes=0,i}i(r,e);var o=r.prototype;return o.onBegin=function(){},o.onDestroy=function(){r._pool.free(this)},o.onAddBuffCheck=function(){if(this.triggeredTimes>=this._maxTime)this.stop();else{var e=this.owner.buffCtr.getBuffListById(this.checkbuffid),i=this._perTriggerLayers;if(i&&i>0&&e.length>=i&&this.triggeredTimes<this._maxTime){++this.triggeredTimes;for(var r,o=t(this._buffList);!(r=o()).done;){var f=r.value;this.runner.addBuff(this.owner,f[0],f[2],f[1])}}}},o.onUpdate=function(e){this.triggeredTimes<this._maxTime&&this.onAddBuffCheck()},r.alloc=function(e){var i=r._pool.alloc();return i.config=e,i.checkbuffid=e.param1,i._perTriggerLayers=e.param2,i._maxTime=e.param3,i._buffList=e.param5,i.triggeredTimes=0,i},r}(f));n._pool=new o(n,10),r._RF.pop()}}}));

