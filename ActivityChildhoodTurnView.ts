System.register("chunks:///_virtual/ActivityChildhoodTurnView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./index3.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StorageUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./SpineSkeleton.ts","./ConfigGlobal.ts","./BagDefine.ts","./BagModel.ts","./MessageView.ts","./RoleDefine.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./ActivityChildhoodDataCache.ts","./BaseView.ts","./EaseMethod.ts"],(function(t){"use strict";var i,e,n,o,r,a,s,d,c,h,l,f,u,p,g,m,v,w,C,y,T,I,_,S,L,k,G,R,b,x,V,D,E,A;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,r=t.HorizontalTextAlignment,a=t.Sprite,s=t.Label,d=t.ScrollView,c=t.RichText,h=t.Toggle,l=t.js},function(t){f=t.V2},null,function(t){u=t.ItemGrid},function(t){p=t.ListItem},function(t){g=t.default},function(t){m=t.default},function(t){v=t.default},function(t){w=t.default},null,function(t){C=t.SpineSkeleton},function(t){y=t.ConfigGlobal},function(t){T=t.BagEventDefine},function(t){I=t.BagModel},function(t){_=t.default},function(t){S=t.RoleEventDefine},function(t){L=t.default},function(t){k=t.ActivityType,G=t.ActivityEventDefine,R=t.ActivityState},function(t){b=t.default},function(t){x=t.HorseCarnivalDataCache},function(t){V=t.default},function(t){D=t.ViewEvent,E=t.BaseView},function(t){A=t.EasingMethod}],execute:function(){var M,B,N;n._RF.push({},"8646bLPAw5LrJ6g+aoz4+S4","ActivityChildhoodTurnView",void 0);var O=((M={})[1]="sgtn_ui_zhaunpan02",M[2]="sgtn_ui_zhaunpan03",M[3]="sgtn_ui_zhaunpan04",M),j=((B={})[1]=500,B[2]=1e3,B[3]=350,B),K={},F=((N={})[1]=6,N[2]=0,N[3]=10,N),P=["ArtifactGetView","HorseGetView","PlayerSkinGetView","FateNewView","GoodsGetView2","WingGetView"],U=(t("default",function(t){function n(){var i;return(i=t.call(this)||this).actType=void 0,i.nodeResParent=void 0,i.nodeResItem=void 0,i.nodeRolling=void 0,i.rollEff=void 0,i.bgEff=void 0,i.turnEff=void 0,i.resItems=void 0,i.redSelect=void 0,i.btnGift=void 0,i.btnStore=void 0,i.togSkip=void 0,i.skipAnim=void 0,i.iconTen=void 0,i.iconOne=void 0,i.txtOne=void 0,i.txtTen=void 0,i.redOne=void 0,i.redTen=void 0,i.txtNumReward=void 0,i.numScroll=void 0,i.tipsGo=void 0,i.tipsScroll=void 0,i.imgPreview=void 0,i.preDescNum=void 0,i.preDescGet=void 0,i.onlyRewardNum=0,i.iconRewardOne=void 0,i.iconRewardTen=void 0,i.txtRewardOne=void 0,i.txtRewardTen=void 0,i.preViewCount=0,i.refreshTimer=void 0,i.curTips=0,i.tipsTimer=0,i.txtLeftTime=void 0,i.deltaTime=0,i.leftTime=0,i.canUpdate=!1,i.jackpot=0,i.jackpotType=0,i.curIndex=0,i.finalIndex=0,i.reward_list=[],i.actionTime=2,i.moveTween=void 0,i.rerwardList=[],i.waitRewardList=[],i.rewardNum=12,i.extraReward=void 0,i.name="ActivityChildhoodTurnView",i.url="ui/module/childhood/ActivityChildhoodTurnView",i.poolTime=3e3,i.fullScreen=!0,i.actType=k.ChildhoodTurn,i}i(n,t);var u=n.prototype;return u.onInit=function(){var t=this;this.initResShow(),this.btnStore=this.findChild("root/bottomBtn/btnStore"),this.addComponentCallbackListener(this.btnStore,o.EventType.CLICK,(function(){uiMgr.openView("ActivityChildhoodStoreView",k.Childhood)})),this.btnGift=this.findChild("root/bottomBtn/btnGift"),this.addComponentCallbackListener(this.btnGift,o.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalGiftView",k.ChildhoodTurn)}));var i=this.findChild("root/btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()}));var e=this.findChild("root/btnShow/btnShow");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){uiMgr.openView("SlumberPartyTipsView",e,t.actType)}));var n=this.findChild("root/turn/img/nodeTips2/tips");this.addComponentCallbackListener(n,o.EventType.CLICK,(function(){uiMgr.openView("CommonPopTipsView",GetLanguage(400204),n)}));var l=this.findChild("root/btnSelect");l.active=!1,this.redSelect=this.findChild("root/btnSelect/red"),this.addComponentCallbackListener(l,o.EventType.CLICK,(function(){uiMgr.openView("ActivityChildhoodTurnTipsView")}));var f=this.findChild("root/turn/img/nodeTips/btnTips");this.addComponentCallbackListener(f,o.EventType.CLICK,(function(){for(var i=y.LIMITED_RANK_SYSTEM_DETAILS,e="",n=0;n<i.length;n++)i[n][0]==t.actType&&(e=GetLanguage(i[n][1]));""!=e&&_.showBoxTip({tip:e,btnCnt:1,horizontalAlign:r.LEFT})})),this.nodeRolling=this.findChild("root/turn/img/nodeRolling"),this.imgPreview=this.findChildComponent("root/turn/img/imgPreview",a),this.preDescNum=this.findChild("root/turn/img/preDesc/num"),this.preDescGet=this.findChild("root/turn/img/preDesc/get"),this.addComponentCallbackListener(this.imgPreview.node,o.EventType.CLICK,(function(){t.onClickPreview()})),this.txtLeftTime=this.findChildComponent("root/top/nodeTime/txtTime",s),this.txtNumReward=this.findChildComponent("root/numReward/num",s);var u=this.findChildComponent("root/numReward/ScrollView",d);this.numScroll=this.addUIList(u,U),this.tipsGo=this.findChild("root/top/tips");var p=this.findChildComponent("root/top/tips/ScrollView",d);this.tipsScroll=this.addUIList(p,H),this.iconOne=this.findChildComponent("root/btnOne/icon",a),this.iconTen=this.findChildComponent("root/btnTen/icon",a),this.txtOne=this.findChildComponent("root/btnOne/num",c),this.txtTen=this.findChildComponent("root/btnTen/num",c),this.redOne=this.findChild("root/btnOne/red"),this.redTen=this.findChild("root/btnTen/red"),this.iconRewardOne=this.findChildComponent("root/btnOne/back/iconBack",a),this.iconRewardTen=this.findChildComponent("root/btnTen/back/iconBack",a),this.txtRewardOne=this.findChildComponent("root/btnOne/back/numBack",s),this.txtRewardTen=this.findChildComponent("root/btnTen/back/numBack",s);var v=this.findChild("root/btnOne");this.addComponentCallbackListener(v,o.EventType.CLICK,(function(){t.onLottery(1)}));var w=this.findChild("root/btnTen");this.addComponentCallbackListener(w,o.EventType.CLICK,(function(){t.onLottery(2)})),this.togSkip=this.findChildComponent("root/toggleSkip",h),this.addComponentCallbackListener(this.togSkip.node,h.EventType.TOGGLE,(function(){t.togSkip.isChecked?m.set("SkipHCAnim","1"):m.set("SkipHCAnim","0")})),this.skipAnim=this.findChild("skipAnim"),this.addComponentCallbackListener(this.skipAnim,o.EventType.CLICK,(function(){t.SkipAnim()}));for(var C=function(){var i=t.findChild("root/turn/itemRoll/itemGrid"+T),e={node:i,index:T,item_id:0,cfg_id:0,imgFram:g.findChildComponent(i,"imgFrame",a),imgIcon:g.findChildComponent(i,"imgIcon",a),num:g.findChildComponent(i,"num",s),select:g.findChild(i,"select"),light:g.findChild(i,"light"),limit:g.findChild(i,"nodeLimit"),only:g.findChild(i,"nodeOnly")};t.addComponentCallbackListener(i,o.EventType.CLICK,(function(){0!=e.item_id&&IS(I).OpenItemTips(e.item_id,i)})),t.rerwardList.push(e)},T=0;T<this.rewardNum;T++)C()},u.initResShow=function(){var t=this;this.nodeResParent=this.findChild("resRoot"),this.nodeResItem=this.findChild("resRoot/resItem"),this.nodeResItem.active=!1;var i=[IS(x).GetCost(this.actType)[0]];this.resItems=new Array;for(var e=function(e){var n=nodeInstantiate.instantiate(t.nodeResItem),r=i[e];t.addComponentCallbackListener(n,o.EventType.CLICK,(function(){IS(I).OpenItemTips(r,g.findChild(n,"txtNum"))})),n.parent=t.nodeResParent,n.active=!0;var d=g.findChildComponent(n,"imgIcon",a),c=configGoods.getDataByKey(r);t.loadIcon(d,"icon_item",c.icon),t.resItems.push({node:n,txtNum:g.findChildComponent(n,"txtNum",s),goodsGtid:r})},n=0;n<i.length;n++)e(n)},u.registerUpdateHandler=function(){this.addEvent(G.OnHorseCarnivalUpdate,this.updateInfo,this),this.addEvent(G.OnHorseCarnivalReward,this.updateReward,this),this.addEvent(G.OnHorseCarnivalLottery,this.updateLotteryResult,this),this.addEvent(T.GOODS_INFO_UPDATE,this.updateResShow,this),this.addEvent(S.ROLE_RES_UPDATE,this.updateResShow,this),this.addEvent(D.ViewClose,this.onViewClose,this)},u.onAfterOpen=function(){var t,i=this;this.rollEff=null,this.bgEff=null,this.turnEff=null,this.updateResShow(),IS(b).send_24_16(this.actType),this.togSkip.isChecked="1"==m.get("SkipHCAnim"),this.skipAnim.active=!1,this.nodeRolling.active=!1;var e=IS(L).GetActivityInfo(this.actType),n=null!=(t=e.state_time[e.state])?t:e.state_time[R.Open];this.leftTime=n.end_time-w.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=w.formatTimeStringForSecond(this.leftTime)):this.txtLeftTime.string=GetLanguage(200026);var o=IS(x).GetCost(this.actType),r=configGoods.getDataByKey(o[0]);this.loadIcon(this.iconOne,r.icon_group,r.icon),this.loadIcon(this.iconTen,r.icon_group,r.icon);var a=IS(x).GetDrawReward(this.actType),s=configGoods.getDataByKey(a[0]);this.loadIcon(this.iconRewardOne,s.icon_group,s.icon),this.loadIcon(this.iconRewardTen,s.icon_group,s.icon),this.txtRewardOne.string=l.formatStr("x%s",a[1]),this.txtRewardTen.string=l.formatStr("x%s",10*a[1]);var d=configMount_draw_cumulative_times.getDatas(),h=[];for(var u in d)if(d.hasOwnProperty(u)){var p=d[u];p.type==e.type&&p.group_id==e.roundCfg.group_id&&h.push(p)}this.numScroll.datas=h;var g=configMount_draw.getDatas(),y=[];for(var T in g)if(g.hasOwnProperty(T)){var I=g[T];I.type==e.type&&I.group_id==e.roundCfg.group_id&&y.push(I)}y.sort((function(t,i){return t.id-i.id}));for(var _=0;_<y.length;_++){var S=y[_],k=this.rerwardList[S.order-1];k.item_id=S.reward[0],k.num.string=S.reward[1],k.cfg_id=S.id;var G=configGoods.getDataByKey(k.item_id);this.loadIcon(k.imgIcon,G.icon_group,G.icon);var V=configColor.getDataByKey(G.quality);this.loadIcon(k.imgFram,"icon_equip",V.path),k.limit&&(k.limit.active=!1),k.only&&(k.only.active=!1),k.select.active=!1,k.light.active=!1}this.clearTimer();var D=function(){var t;i.preViewCount=3==i.preViewCount?1:i.preViewCount+1;var e=O[i.preViewCount];i.loadIcon(i.imgPreview,"childhood_turn",e);var n=j[i.preViewCount];i.preDescNum.active=!0,i.preDescGet.active=!1;var o=l.formatStr("<b><outline width = 2 color=#943b30><color=#fffeea>%s</color></outline></b>",GetLanguage(400187));i.findChildComponent("root/turn/img/preDesc/num/num",c).string=v.formatStr(o,l.formatStr("<color=#fff71e>%s</color>",n));var r=IS(x).getInfo(i.actType),a=i.findChildComponent("root/turn/img/nodeTips2/jackPotNum",c),s=F[i.preViewCount],d=null!=(t=r.guaranteed_list[i.rerwardList[s].cfg_id])?t:0;if(d>0){a.node.active=!0;var h=l.formatStr("<b><outline color=#5C2E1A width=2><color=#FFF8C6>%s</color></outline></b>",GetLanguage(400202));a.string=v.formatStr(h,l.formatStr("<b><outline color=#943B30 width=2><color=#FFF71E>%s</color></outline></b>",d))}else a.node.active=!1};if(D(),this.refreshTimer=this.addTimer(5,-1,D),null==this.bgEff){this.bgEff=this.addUIEffect("prefab/ui-effect/MX_tx_tongnianshiguang",this.findChild("root/turn/itemRoll/bg"),-1,new f(0,-78),1,(function(t){t.node.getComponent(C).needAnimation="ren"}))}if(null==this.turnEff){this.turnEff=this.addUIEffect("prefab/ui-effect/MX_tx_tongnianshiguang",this.findChild("root/turn/img"),-1,new f(0,0),1,(function(t){t.node.getComponent(C).needAnimation="deng1"}))}},u.clearTimer=function(){null!=this.refreshTimer&&(this.removeTimer(this.refreshTimer),this.refreshTimer=null)},u.onBeforeClose=function(){this.canUpdate=!1,this.curIndex=0,this.tipsTimer=0;for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.jackpot=0,this.jackpotType=0,this.waitRewardList=[],this.extraReward=null,this.clearTimer()},u.onDestroy=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].node.destroy();this.resItems={}},u.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=w.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))},u.updateResShow=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].txtNum.string=v.GetNumString(IS(I).getGoodsCountByGoodsGtid(this.resItems[t].goodsGtid));var i,e,n=IS(x).GetCost(this.actType),o=IS(I).getGoodsCountByGoodsGtid(n[0]);this.redOne.active=o>=n[1],this.redTen.active=o>=10*n[1],o>=n[1]?(e="#5aff42",i="#27720d"):(e="#ff1f1f",i="#891000"),this.txtOne.string=l.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",i,e,n[1]),o>=10*n[1]?(e="#5aff42",i="#27720d"):(e="#ff1f1f",i="#891000"),this.txtTen.string=l.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",i,e,10*n[1])},u.updateInfo=function(){var t=this,i=IS(x).getInfo(this.actType);this.tipsGo.active=i.lucky_list.length>0,0!=this.tipsTimer&&this.removeTimer(this.tipsTimer),this.tipsGo.active&&(this.tipsScroll.datas=i.lucky_list,this.curTips=0,this.tipsTimer=this.addTimer(1,-1,(function(){t.curTips=t.curTips+1,t.curTips==i.lucky_list.length&&(t.curTips=0);var e=0==t.curTips?.2:1;t.tipsScroll.scrollTo(t.curTips,e)}))),this.redSelect.active=IS(V).GetTurnSelectRed()>0,this.updateReward()},u.updateReward=function(){var t,i=IS(x).getInfo(this.actType);this.txtNumReward.string=i.count+"",this.numScroll.updateAll(),this.findChildComponent("root/turn/img/nodeTips/drawNum",s).string=v.formatStr(GetLanguage_UI(899000013),IS(x).getInfo(this.actType).remain_draw);for(var n,o=e(this.rerwardList);!(n=o()).done;){var r=n.value,a=configMount_draw.getDataByKey(r.cfg_id);if(a.num){r.limit.active=!0;var d=IS(x).getInfo(this.actType),h=g.findChildComponent(r.limit,"Node",s);if(h.string=v.formatStrWithMirrorDeal(GetLanguage(400014),a.num),d.get_drop.length>0)for(var f,u=e(d.get_drop);!(f=u()).done;){var p=f.value,m=p.k,w=p.v;m==r.cfg_id&&(h.string=v.formatStrWithMirrorDeal(GetLanguage(400014),a.num-w))}}if(5==a.quality){r.only.active=!0;var C=a.guaranteed-i.count;this.onlyRewardNum=C}if(a.reward_replace.length>0){var y,T,I=null!=(y=null==(T=i.choose_list[r.cfg_id])?void 0:T[1])?y:0;if(I>0){5==a.quality&&(r.only.active=!1,this.onlyRewardNum=0);for(var _,S=e(a.reward_replace);!(_=S()).done;){var L=_.value;if(L[0]==I){r.num.string=L[1][1],r.item_id=L[1][0];var k=configGoods.getDataByKey(r.item_id);this.loadIcon(r.imgIcon,k.icon_group,k.icon);var G=configColor.getDataByKey(k.quality);this.loadIcon(r.imgFram,"icon_equip",G.path)}}}}}var R=this.findChildComponent("root/turn/img/nodeTips2/jackPotNum",c),b=F[this.preViewCount],V=null!=(t=i.guaranteed_list[this.rerwardList[b].cfg_id])?t:0;if(V>0){R.node.active=!0;var D=l.formatStr("<b><outline color=#5C2E1A width=2><color=#FFF8C6>%s</color></outline></b>",GetLanguage(400202));R.string=v.formatStr(D,l.formatStr("<b><outline color=#943B30 width=2><color=#FFF71E>%s</color></outline></b>",V))}else R.node.active=!1},u.onClickPreview=function(){var t=K[this.preViewCount];null!=t&&uiMgr.openView("PlayerSkinLookView",t,!0)},u.onLottery=function(t){var i=IS(x).GetCost(this.actType),e=i[0],n=i[1];2==t&&(n*=10),IS(I).getGoodsCountByGoodsGtid(e)>=n?IS(b).send_24_17(this.actType,t):uiMgr.openView("HorseCarnivalGiftView",this.actType)},u.updateLotteryResult=function(t){var i=this;if(t.act_type==this.actType){this.nodeRolling.active=!1;var e=IS(x).GetDrawReward(this.actType),n=1==t.type?e[1]:10*e[1];if(this.extraReward=[e[0],n],this.checkJackpot(t.drop_id_list),this.togSkip.isChecked)0!=this.jackpot?(this.openTypeView(this.jackpot,this.jackpotType),this.waitRewardList=t.reward_list,this.jackpot=0,this.jackpotType=0):(uiMgr.openView("GoodsGetView",t.reward_list,this.extraReward),this.extraReward=null);else{var o=t.drop_id_list[t.drop_id_list.length-1];if(this.finalIndex=configMount_draw.getDataByKey(o).order-1,this.reward_list=t.reward_list,this.skipAnim.active=!0,this.nodeRolling.active=!0,null==this.rollEff){this.rollEff=this.addUIEffect("prefab/ui-effect/MX_tx_tongnianshiguang",this.nodeRolling,-1,new f(0,0),1,(function(t){t.node.getComponent(C).needAnimation="deng2"}))}1==t.drop_id_list.length?this.doLotteryTween(this.finalIndex,(function(){for(var e=0;e<i.rerwardList.length;e++)i.rerwardList[e].select.active=!1,i.rerwardList[e].light.active=!1;i.rerwardList[i.finalIndex].select.active=!0,i.rerwardList[i.finalIndex].light.active=!0,i.curIndex=i.finalIndex,0!=i.jackpot?(i.waitRewardList=t.reward_list,i.openTypeView(i.jackpot,i.jackpotType),i.jackpot=0,i.jackpotType=0):(uiMgr.openView("GoodsGetView",t.reward_list,i.extraReward),i.extraReward=null),i.skipAnim.active=!1,i.nodeRolling.active=!1})):this.lotteryNext(0,t)}}},u.lotteryNext=function(t,i){var e,n=this,o=configMount_draw.getDataByKey(i.drop_id_list[t]).order-1;e=t<i.drop_id_list.length-1?function(){n.curIndex=o,n.lotteryNext(t+1,i)}:function(){for(var t=0;t<n.rerwardList.length;t++)n.rerwardList[t].select.active=!1,n.rerwardList[t].light.active=!1;n.rerwardList[o].select.active=!0,n.rerwardList[o].light.active=!0,n.curIndex=o,0!=n.jackpot?(n.waitRewardList=i.reward_list,n.openTypeView(n.jackpot,n.jackpotType),n.jackpot=0,n.jackpotType=0):(uiMgr.openView("GoodsGetView",i.reward_list,n.extraReward),n.extraReward=null),n.skipAnim.active=!1,n.nodeRolling.active=!1},this.doLotteryTween(o,e)},u.doLotteryTween=function(t,i){var e=this;null!=this.moveTween&&this.moveTween.stop();var n=4*this.rewardNum+t-this.curIndex;this.moveTween=this.addTween(0,1,this.actionTime,(function(t,i){for(var o=n*i,r=Math.floor((o+e.curIndex)%e.rewardNum),a=0;a<e.rerwardList.length;a++)e.rerwardList[a].select.active=!1,e.rerwardList[a].light.active=!1;e.rerwardList[r].select.active=!0})).easing(A.SINE_OUT).call((function(){i()}),.5).start()},u.SkipAnim=function(){null!=this.moveTween&&this.moveTween.stop();for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.rerwardList[this.finalIndex].select.active=!0,this.rerwardList[this.finalIndex].light.active=!0,this.curIndex=this.finalIndex,0!=this.jackpot?(this.waitRewardList=this.reward_list,this.openTypeView(this.jackpot,this.jackpotType),this.jackpot=0,this.jackpotType=0):(uiMgr.openView("GoodsGetView",this.reward_list,this.extraReward),this.extraReward=null),this.skipAnim.active=!1,this.nodeRolling.active=!1},u.checkJackpot=function(t){this.jackpot=0,this.jackpotType=0;for(var i,n=e(t);!(i=n()).done;){var o=i.value,r=configMount_draw.getDataByKey(o);if(r.goods_type)if(r.reward_replace.length>0){var a,s,d=null!=(a=null==(s=IS(x).getInfo(this.actType).choose_list[r.id])?void 0:s[1])?a:0;if(d>0)for(var c,h=e(r.reward_replace);!(c=h()).done;){var l=c.value;if(l[0]==d&&r.goods_type)return this.jackpot=l[1][0],this.jackpotType=r.goods_type,!0}else if(r.goods_type)return this.jackpot=r.reward[0],this.jackpotType=r.goods_type,!0}else if(r.goods_type)return this.jackpot=r.reward[0],this.jackpotType=r.goods_type,!0}return!1},u.onViewClose=function(t){this.waitRewardList.length<=0||P.includes(t)&&(uiMgr.openView("GoodsGetView",this.waitRewardList,this.extraReward),this.extraReward=null,this.waitRewardList=[])},u.openTypeView=function(t,i){switch(i){case 1:return void uiMgr.openView("ArtifactGetView",configGoods.getDataByKey(t).effect[0],!0);case 2:return void uiMgr.openView("HorseGetView",configGoods.getDataByKey(t).effect[0],!0);case 3:return void uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0);case 4:return void uiMgr.openView("FateNewView",configGoods.getDataByKey(t).effect[0]);case 5:switch(configGoods.getDataByKey(t).type){case 28:uiMgr.openView("ArtifactGetView",configGoods.getDataByKey(t).effect[0],!0);break;case 27:uiMgr.openView("HorseGetView",configGoods.getDataByKey(t).effect[0],!0);break;case 11:uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0);break;case 12:uiMgr.openView("FateNewView",configGoods.getDataByKey(t).effect[0]);break;case 32:uiMgr.openView("WingGetView",configGoods.getDataByKey(t).effect[0],!0);break;default:uiMgr.openView("GoodsGetView2",t)}}},n}(E)),function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txtDesc=void 0,i.itemGridNode=void 0,i.effNode=void 0,i.itemGrid=void 0,i.isReward=void 0,i.eff=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){var t=this;this.txtDesc=g.findChildComponent(this.node,"desc",c),this.itemGridNode=g.findChild(this.node,"itemGrid"),this.effNode=g.findChild(this.node,"eff"),this.itemGrid=new u(this.view,this.itemGridNode,(function(){var i=t.view,e=IS(x).getInfo(i.actType);!t.isReward&&e.count>=t.data.cumulative_times?IS(b).send_24_18(i.actType,t.data.id):IS(I).OpenItemTips(t.data.reward[0],t.itemGridNode)}))},n.onRender=function(t,i){this.itemGrid.SetItemId(t.reward[0],t.reward[1]);var e=this.view,n=IS(x).getInfo(e.actType);this.isReward=n.gotReward[t.id],this.view.removeUIEffect(this.eff),this.isReward?this.txtDesc.string=v.formatStrWithMirrorDeal(GetLanguage(200033)):n.count>=t.cumulative_times?(this.txtDesc.string=v.formatStrWithMirrorDeal(GetLanguage(200034)),this.eff=this.view.addUIEffect("prefab/ui-effect/MX_tx_tongyong_daojulingqu",this.effNode,-1)):this.txtDesc.string=l.formatStr("<b><color=#ff1c1c>%s</color><color=#80342e>/%s</color></b>",n.count,t.cumulative_times)},e}(p)),H=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).txt=void 0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.txt=g.findChildComponent(this.node,"txt",c)},n.onRender=function(t,i){var e,n=null==(e=configGoods.getDataByKey(t.k))?void 0:e.name;this.txt.string=v.formatStrWithMirrorDeal(GetLanguage(200050),t.s,n)},e}(p);n._RF.pop()}}}));

