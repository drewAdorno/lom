System.register("chunks:///_virtual/BattleMainServer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./BattleMain.ts","./Record.ts","./EnumDefine.ts","./EventInvoker.ts","./ChapterArtifactGemCC.ts","./index73.ts","./ChapterCrossPvpServer.ts","./ChapterCrossWarMonsterServer.ts","./ChapterCrossWarServer.ts","./ChapterGvgServer.ts","./ChapterHalloweenPvpServer.ts","./ChapterRoleSoloServer.ts","./ChapterSlavePvpServer.ts","./ChapterStrategyActivityServer.ts","./ChapterWorldBossServer.ts","./MapCamera2.ts","./RenderMgrServer.ts","./ChapterMainServer.ts","./ChapterArenaServer.ts","./ChapterSoloServer.ts","./ChapterCoinServer.ts","./ChapterDiamondServer.ts","./ChapterTeam3Server.ts","./ChapterFarmServer.ts","./ChapterFateServer.ts","./ChapterParkPvpServer.ts"],(function(t){"use strict";var e,r,a,n,i,s,o,h,p,v,c,u,C,l,S,f,d,m,M,g,P,y,R,b,D,w,E,A,B;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){a=t.ChapterType},function(t){n=t.BattleMain},function(t){i=t.Record},function(t){s=t.RunMode,o=t.RunState},function(t){h=t.EventInvoker},function(t){p=t.ChapterArtifactGemCC},null,function(t){v=t.ChapterCrossPvpServer},function(t){c=t.ChapterCrossWarMonsterServer},function(t){u=t.ChapterCrossWarServer},function(t){C=t.ChapterGvgServer},function(t){l=t.ChapterHalloweenPvpServer},function(t){S=t.ChapterRoleSoloServer},function(t){f=t.ChapterSlavePvpServer},function(t){d=t.ChapterStrategyActivityServer},function(t){m=t.ChapterWorldBossServer},function(t){M=t.MapCamera},function(t){g=t.RenderMgrServer},function(t){P=t.ChapterMainServer},function(t){y=t.ChapterArenaServer},function(t){R=t.ChapterSoloServer},function(t){b=t.ChapterCoinServer},function(t){D=t.ChapterDiamondServer},function(t){w=t.ChapterTeam3Server},function(t){E=t.ChapterFarmServer},function(t){A=t.ChapterFateServer},function(t){B=t.ChapterParkPvpServer}],execute:function(){var W;r._RF.push({},"8b530VD1TNHvqpz6HP9IbNO","BattleMainServer",void 0);var F=((W={})[a.Main]=P,W[a.Arena]=y,W[a.Solo]=R,W[a.Coin]=b,W[a.Diamond]=D,W[a.Team3]=w,W[a.Farm]=E,W[a.RoleSolo]=S,W[a.Fate]=A,W[a.WorldBoss]=m,W[a.Gvg]=C,W[a.CrossPvp]=v,W[a.StrategyActivity]=d,W[a.CrossWarPvp]=u,W[a.CrossWarMonster]=c,W[a.ParkPvp]=B,W[a.HalloweenPvp]=l,W[a.ArtifactGem]=p,W[a.Slave]=f,W);t("BattleMainServer",function(t){function r(e){var r;return(r=t.call(this,e)||this).result=0,r.battleEvent=void 0,r.mapCamera=new M,r.renderMgr=new g,r}e(r,t);var a=r.prototype;return a.start2=function(t,e,r){this.data.chapterId=t.chapterId,this.data.chapterType=t.chapterType,this.data.chapterMode=0,this.chapter=new F[this.data.chapterType](this),this.chapter.setChapter(this.data.chapterId,!0);var a=this.chapter.config;this.mapCamera.nextPart(a.part?a.part-1:0),this.mapCamera.startPartMove(0),this.playerAuto=1!=e,1==e&&null!=r&&(this.runMode=s.Check,this.curRecord=new i(this),this.curRecord.fillCommand(r)),this.data.playerList=t.playerList,this.data.openServerDay=t.openServerDay,this.data.buffs=t.buffs,this.data.monster=t.monster,this.data.playerImage=t.playerImage,this.frameCount=0,this.runState=o.Running,this.chapter.init(),this.chapter.loadData(this.mapCamera.offsetX),this.chapter.start(),this.unitMgr.updateDepth()},a.start=function(t,e){this.start2(t,0)},a.update=function(t){this.runState!=o.Stop&&this.gameLogic(t)},a.toResult=function(t,e){if(this.runState!=o.Running)return!1;this.unitMgr.battleOver(),this.mapCamera.nextPart(0),this.mapCamera.startPartMove(0),this.unitMgr.clear(),this.renderMgr.clear(),this.runState=o.Pause,this.result=t,this.battleEvent&&this.battleEvent.clear()},a.now=function(){return Date.now?Date.now():+new Date},a.gc=function(){},a.playSound=function(t){},a.on=function(t,e,r,a){var n;this.battleEvent=null!=(n=this.battleEvent)?n:new h,this.battleEvent.on(t,e,r,a)},a.emit=function(t,e,r,a,n,i){this.battleEvent&&this.battleEvent.emit(t,e,r,a,n,i)},r}(n));r._RF.pop()}}}));

