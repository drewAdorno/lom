System.register("chunks:///_virtual/SnakeVo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts"],(function(t){"use strict";var e,i,r,s,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,r=t.Rect,s=t.Prefab},function(t){n=t.default}],execute:function(){var h,c;t({EBoth:void 0,EDire:void 0}),i._RF.push({},"081b9O5ysFAFLRZcuD8y70z","SnakeVo",void 0),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(h||(h=t("EDire",{}))),function(t){t[t.Top=0]="Top",t[t.Bot=1]="Bot"}(c||(c=t("EBoth",{})));t("SnakeVo",function(){function t(t,e){var i=this;this._node=void 0,this._parant=void 0,this.id=0,this.dire=0,this.both=0,this._rect=new r(0,0,50,50),resourceMgr.loadRes("ui/module/jumping/SnakeCell",s,(function(r){var s=r.item.asset,n=nodeInstantiate.instantiate(s);n.name="SnakeCell",n.parent=t,i.node=n,e.call(i)}))}var i=t.prototype;return i.init=function(t,e){this.id=t,this._parant=e,this.updatePose()},i.updatePose=function(){if(this.node){var t;if(this.hideAll(),this.prve)if(this.next){if(this.prve.rect.x!=this.next.rect.x&&this.prve.rect.y!=this.next.rect.y){var e=n.findChild(this.node,"back"),i=n.findChild(this.node,"tripe");return e.active=i.active=!1,void(this.prve.rect.x>this.next.rect.x&&this.prve.rect.y>this.next.rect.y?this.rect.y==this.prve.rect.y?(e.angle=90,e.active=!0):this.rect.x==this.prve.rect.x&&(i.angle=0,i.active=!0):this.prve.rect.x<this.next.rect.x&&this.prve.rect.y>this.next.rect.y?this.rect.y==this.prve.rect.y?(i.angle=90,i.active=!0):this.rect.x==this.prve.rect.x&&(e.angle=180,e.active=!0):this.prve.rect.x<this.next.rect.x&&this.prve.rect.y<this.next.rect.y?this.rect.y==this.prve.rect.y?(e.angle=270,e.active=!0):this.rect.x==this.prve.rect.x&&(i.angle=180,i.active=!0):this.prve.rect.x>this.next.rect.x&&this.prve.rect.y<this.next.rect.y&&(this.rect.y==this.prve.rect.y?(i.angle=270,i.active=!0):this.rect.x==this.prve.rect.x&&(e.angle=0,e.active=!0)))}var r=n.findChild(this.node,"body");r.active=!0,t=r}else{var s=n.findChild(this.node,"tail");s.active=!0,t=s,this.prve.rect.x==this.rect.x?this.dire=this.prve.rect.y>this.rect.y?h.Up:h.Down:this.prve.rect.y==this.rect.y&&(this.dire=this.prve.rect.x>this.rect.x?h.Right:h.Left)}else{var a=n.findChild(this.node,"head");a.active=!0,t=a}switch(this.dire){case h.Up:t.angle=90;break;case h.Down:t.angle=270;break;case h.Left:t.angle=180;break;case h.Right:t.angle=0}switch(this.both){case c.Top:case c.Bot:}}},i.hideAll=function(){var t=n.findChild(this.node,"head"),e=n.findChild(this.node,"body"),i=n.findChild(this.node,"tail"),r=n.findChild(this.node,"back"),s=n.findChild(this.node,"tripe");t.active=e.active=i.active=r.active=s.active=!1},i.clear=function(){this.id=0,this._node.removeFromParent(),this._parant=null,this._rect.set(0,0,50,50)},i.setXY=function(t,e){this._rect.x=t,this._rect.y=e,this.node&&this.node.setPosition(t,e,0)},i.operate=function(t){for(var e=this.next;e.next;)e=e.next;for(var i=e;i.prve;)i.setXY(i.prve.rect.x,i.prve.rect.y),i=i.prve;switch(i!=this&&console.error("mini-不能操作非蛇头"),t){case h.Up:this.setXY(this.rect.x,this.rect.y+this.rect.height);break;case h.Down:this.setXY(this.rect.x,this.rect.y-this.rect.height);break;case h.Left:this.setXY(this.rect.x-this.rect.width,this.rect.y);break;case h.Right:this.setXY(this.rect.x+this.rect.width,this.rect.y)}},e(t,[{key:"prveId",get:function(){return this.id-1}},{key:"nextId",get:function(){return this.id+1}},{key:"prve",get:function(){return this._parant.snakeList[this.prveId]}},{key:"next",get:function(){return this._parant.snakeList[this.nextId]}},{key:"rect",get:function(){return this._rect}},{key:"node",get:function(){return this._node},set:function(t){this._node=t,this.node.setPosition(this._rect.x,this._rect.y,0)}},{key:"parant",set:function(t){this.node&&(this.node.parent=t)}}]),t}());i._RF.pop()}}}));

