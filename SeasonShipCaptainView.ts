System.register("chunks:///_virtual/SeasonShipCaptainView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ConfigSeason_kv.ts","./CommonModel.ts","./MessageView.ts","./SeasonControl.ts","./SeasonDataCache.ts","./SeasonDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var n,o,i,e,r,s,a,h,d,l,u,f,p,c,v,S,m,C,g,A;return{setters:[function(t){n=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,e=t.ScrollView,r=t.Button,s=t.sys,a=t.HorizontalTextAlignment,h=t.Label,d=t.Layout},function(t){l=t.V2},function(t){u=t.ListItem},function(t){f=t.default},function(t){p=t.default},null,function(t){c=t.ConfigSeason_kv},function(t){v=t.CommonModel},function(t){S=t.default},function(t){m=t.default},function(t){C=t.SeasonDataCache},function(t){g=t.SeasonShipEventDefind},function(t){A=t.BaseSubView}],execute:function(){i._RF.push({},"f1221uQLlVNhqEzjiX+M8vk","SeasonShipCaptainView",void 0);t("default",function(t){function i(){var n;return(n=t.call(this)||this).shipUIList=void 0,n.capList1=void 0,n.capList2=void 0,n.nodeIcon=void 0,n.model=void 0,n.txtPower=void 0,n.name="SeasonShipCaptainView",n.url="ui/module/season/SeasonShipCaptainView",n}n(i,t);var u=i.prototype;return u.onInit=function(){var t=this.findChildComponent("bottom/nodeShipAttr/ScrollView",e);this.shipUIList=this.addUIList(t,L);var n=this.findChildComponent("bottom/nodeCapAttr/nodeSkill/ScrollView",e);this.capList1=this.addUIList(n,I);var o=this.findChildComponent("bottom/nodeCapAttr/nodeChange/ScrollView",e);this.capList2=this.addUIList(o,I),this.nodeIcon=this.findChild("bottom/nodeShip");var i=this.findChild("bottom/nodeShipAttr/btnRule");this.addComponentCallbackListener(i,r.EventType.CLICK,(function(){S.showBoxTip({title:GetLanguage(200048),tip:GetLanguage(204232),btnCnt:1,horizontalAlign:s.uiMirror?a.RIGHT:a.LEFT})}));var l=this.findChild("bottom/nodeCapAttr/btnRule");this.addComponentCallbackListener(l,r.EventType.CLICK,(function(){S.showBoxTip({title:GetLanguage(200048),tip:GetLanguage(204233),btnCnt:1,horizontalAlign:s.uiMirror?a.RIGHT:a.LEFT})})),this.txtPower=this.findChildComponent("top/power/Node",h);for(var u=this.node.getComponentsInChildren(d),f=0;f<u.length;f++)1==u[f].type&&this.dealMirrorLayout(u[f])},u.registerUpdateHandler=function(){this.addEvent(g.TYPE_SHIP_ROOM_INFO_UPDATE,this.refreshAttrShow,this),this.addEvent(g.TYPE_SHIP_POWER_INFO_UPDATE,this.refreshPowerInfo,this)},u.onAfterOpen=function(){IS(m).reqShipRoomInfo(),this.refreshPowerInfo()},u.loadRoleModel=function(){this.removeUnitModel(this.model),this.model=IS(v).AddRoleModel(this,IS(C).shipRoominfo.figure,this.nodeIcon,l.ZERO,1),s.uiMirror&&(this.getUnitModel(this.model).dir=-1)},u.refreshAttrShow=function(){for(var t,n=IS(C).shipRoominfo,i={},e=o(n.role_attr);!(t=e()).done;){var r=t.value;i[r.k]=r}for(var s,a=[],h=[],d=[],l=c.SEASON_SHIP_ATTR_SHOW,u=c.SEASON_CAPTAIN_ATTR_SHOW,f=c.SEASON_CAPTAIN_HIGH_ATTR_SHOW,p=o(l);!(s=p()).done;){var v=s.value;i[v]?a.push(i[v]):a.push({k:v,v:0})}for(var S,m=o(u);!(S=m()).done;){var g=S.value;i[g]?h.push(i[g]):h.push({k:g,v:0})}for(var A,I=o(f);!(A=I()).done;){var L=A.value;i[L]?d.push(i[L]):d.push({k:L,v:0})}this.shipUIList.datas=a,this.capList1.datas=h,this.capList2.datas=d,this.loadRoleModel()},u.refreshPowerInfo=function(){for(var t,n=IS(C),i=0,e=o(n.powerInfo);!(t=e()).done;){var r=t.value;0==r.type&&(i=r.power)}this.txtPower.string=p.GetNumString(i)},u.onBeforeClose=function(){},u.onDestroy=function(){},i}(A));var I=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).txtName=void 0,n.txtAttr=void 0,n}n(o,t);var i=o.prototype;return i.onInit=function(){this.txtName=f.findChildComponent(this.node,"name",h),this.txtAttr=f.findChildComponent(this.node,"attr",h)},i.onRender=function(t,n){var o=configAttribute.getDataByKey(t.k),i=1==o.num_type?"":"%";this.txtName.string=o.name,2==o.show_type?this.txtAttr.string=p.formatStr("+##1##2",p.GetNumString(t.v/100),i):3==o.show_type?this.txtAttr.string=p.formatStr("+##1",p.GetNumString(Math.floor(t.v/100)/100)):this.txtAttr.string=p.formatStr("+##1##2",p.GetNumString(t.v),i)},o}(u),L=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).txtName=void 0,n.txtAttr=void 0,n}n(o,t);var i=o.prototype;return i.onInit=function(){this.txtName=f.findChildComponent(this.node,"name",h),this.txtAttr=f.findChildComponent(this.node,"attr",h)},i.onRender=function(t,n){var o=configAttribute.getDataByKey(t.k);this.txtName.string=o.name,2==o.show_type?this.txtAttr.string=p.formatStr("+##1",p.GetNumString(t.v/100)):3==o.show_type?this.txtAttr.string=p.formatStr("+##1",p.GetNumString(Math.floor(t.v/100)/100)):this.txtAttr.string=p.formatStr("+##1",p.GetNumString(t.v))},o}(u);i._RF.pop()}}}));

