System.register("chunks:///_virtual/PayCashTabSubView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StorageUtil.ts","./StringUtil.ts","./index57.ts","./BagModel.ts","./RoleDataCache.ts","./RoleDefine.ts","./NativeToJs.ts","./PayDataCache.ts","./PayDefine.ts","./BaseSubView.ts"],(function(t){"use strict";var i,e,n,o,s,a,d,h,r,u,f,l,c,m,v,p,C,y;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Animation,o=t.ScrollView,s=t.Button,a=t.Sprite,d=t.Label},function(t){h=t.ListItem},function(t){r=t.default},function(t){u=t.default},function(t){f=t.default},null,function(t){l=t.BagModel},function(t){c=t.RoleDataCache},function(t){m=t.RoleEventDefine},function(t){v=t.NativeToJs},function(t){p=t.default},function(t){C=t.PayEventDefine},function(t){y=t.BaseSubView}],execute:function(){e._RF.push({},"33a1d8rBe1PhJUb9yVxZkoW","PayCashTabSubView",void 0);var g=[999],I=(t("default",function(t){function e(){var i;return(i=t.call(this)||this).scroll=void 0,i.imgDiamondText=void 0,i.nodeResItem=void 0,i.nodeResParent=void 0,i.animTop=void 0,i.resItems=void 0,i.diamondInfo={itemId:999,payType:8},i.btnOfficialReward=void 0,i.officialRedPoint=void 0,i.name="PayCashTabSubView",i.url="ui/module/shop/PayCashTabSubView",i.poolTime=3e3,i}i(e,t);var h=e.prototype;return h.onInit=function(){this.nodeResParent=this.findChild("resRoot"),this.nodeResItem=this.findChild("resRoot/resItem"),this.nodeResItem.active=!1,this.animTop=this.findChildComponent("top",n);var t=this.findChildComponent("scrollList",o);this.scroll=this.addUIList(t,I),this.officialRedPoint=this.findChild("Button/RedPoint"),this.btnOfficialReward=this.findChild("Button"),this.addComponentCallbackListener(this.btnOfficialReward,s.EventType.CLICK,(function(){uiMgr.openView("PayOfficialRewardView")})),this.initResShow()},h.onAfterOpen=function(){this.animTop.play(),this.Refresh(),IS(c).isHaveHideByType(11)&&IS(p).onCashRedPointUpdate(!1),this.updateRed()},h.registerUpdateHandler=function(){this.addEvent(C.PAY_INFO_UPDATE,this.updateInfo,this),this.addEvent(m.ROLE_RES_UPDATE,this.updateResShow,this),this.addEvent(C.PAY_OFFICIAL_REWARD_UPDATE,this.updateRed,this)},h.Refresh=function(){for(var t=this.diamondInfo,i=configPay_mall.getDatas(),e=[],n=[],o=0;o<i.length;o++){var s=i[o];s.type==t.payType&&e.push(s),(2==e.length||i.length-1==o&&e.length>0)&&(n.push(e),e=[])}this.scroll.datas=n,this.updateResShow()},h.updateInfo=function(){this.scroll.updateAll()},h.updateRed=function(t){var i="officalreward"+IS(c).GetRoleId().toString();this.btnOfficialReward.active=u.get(i)&&!v.IsPreviewServer(),IS(c).isHaveHideByType(11)&&(this.btnOfficialReward.active=!1,t=!1),this.officialRedPoint.active=null!=t?t:1==IS(p).cashRedPoint&&!v.IsPreviewServer()},h.initResShow=function(){this.resItems=new Array;for(var t=0;t<g.length;t++){var i=nodeInstantiate.instantiate(this.nodeResItem),e=g[t];i.parent=this.nodeResParent,i.active=!0;var n=r.findChildComponent(i,"imgIcon",a),o=configGoods.getDataByKey(e);this.loadIcon(n,o.icon_group,o.icon),r.findChild(i,"imgAdd").active=1==e||2==e,this.resItems.push({node:i,txtNum:r.findChildComponent(i,"txtNum",d),goodsGtid:e})}},h.updateResShow=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].txtNum.string=f.GetNumString(IS(l).getGoodsCountByGoodsGtid(this.resItems[t].goodsGtid))},h.onBeforeClose=function(){},h.onDestroy=function(){},e}(y)),function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).myList=[],i}i(e,t);var n=e.prototype;return n.onInit=function(){for(var t=0;t<2;t++)this.myList.push(new R),this.myList[t].onInit(this.view,r.findChild(this.node,"content/item"+(t+1)))},n.onRender=function(t,i){for(var e=0;e<2;e++)this.myList[e].onRender(t[e])},e}(h)),R=function(){function t(){this.bg=void 0,this.icon=void 0,this.txtName=void 0,this.btnBuy=void 0,this.txtPrice=void 0,this.priceIcon=void 0,this.gemNumNode=void 0,this.txtGemNum=void 0,this.gemExt=void 0,this.nums=[],this.data=void 0,this.view=void 0,this.extCashText=void 0,this.extCashNum=void 0,this.extCashNode=void 0,this.node=void 0}var i=t.prototype;return i.onInit=function(t,i){var e=this;this.node=i,this.view=t,this.txtName=r.findChildComponent(this.node,"txtName",d),this.icon=r.findChildComponent(this.node,"icon",a),this.txtPrice=r.findChildComponent(this.node,"btnBuy/Label",d),this.extCashNode=r.findChild(this.node,"extCash"),this.extCashText=r.findChildComponent(this.node,"extCash/Label",d),this.extCashNum=r.findChildComponent(this.node,"extCash/num",d);var n=r.findChildComponent(this.node,"extCash/icon",a);this.view.loadIcon(n,"icon_item","2"),this.txtGemNum=r.findChildComponent(this.node,"gemNum/txtNum",d),this.btnBuy=r.findChild(this.node,"btnBuy"),this.view.addComponentCallbackListener(this.btnBuy,s.EventType.CLICK,(function(){IS(p).Pay(e.data.id,8==e.data.type)}))},i.onRender=function(t,i){if(t){this.data=t,this.node.active=!0,this.txtName.string=t.name,this.txtPrice.string=IS(p).GetPriceString(t.cost_level);var e,n=IS(p).GetPayGiftInfo(t.id);this.view.loadIcon(this.icon,"pay4",t.pic_back),e=configStar_diamond_mall.getDataByKey(t.id),this.txtGemNum.string=999==e.reward[0][0]?String(e.reward[0][1]/100):String(e.reward[0][1]),this.extCashNode.active=!(null!=n&&n.bought_times>0),this.extCashText.string=GetLanguage(10410025),this.extCashNum.string=e.first_reward[0][1]}else this.node.active=!1},t}();e._RF.pop()}}}));

