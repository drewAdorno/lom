System.register("chunks:///_virtual/FlyPetAchievementTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ItemIcon.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,l,o,s,a,c,d,r,h,p,u,f,v,y,_;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,l=t.Label,o=t.ScrollView,s=t.Sprite,a=t.Node,c=t.UITransform,d=t.Size,r=t.Vec2,h=t.sys,p=t.js},function(t){u=t.ListItem},function(t){f=t.default},function(t){v=t.default},null,function(t){y=t.IconAseetType},function(t){_=t.BaseView}],execute:function(){e._RF.push({},"ed288lMXnNLm5U/zk5SicOW","FlyPetAchievementTipsView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).beskill_list=void 0,i.skillName=void 0,i.skillDesc=void 0,i.petModel=void 0,i.petNode=void 0,i.petName=void 0,i.pet_skill_frame=void 0,i.pet_skill_icon=void 0,i.quality_list={},i.tips_panel=void 0,i.pet_cfg=void 0,i.name="FlyPetAchievementTipsView",i.url="ui/module/flypet/FlyPetAchievementTipsView",i}i(e,t);var u=e.prototype;return u.onInit=function(){var t,i=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){i.onMaskClick()}));var r=this.findChild("root/btnClose");this.addComponentCallbackListener(r,n.EventType.CLICK,(function(){i.onMaskClick()})),this.petName=this.findChildComponent("root/name/name",l),this.petNode=this.findChild("root/icon");for(var h=((t={})[1]=205054,t[2]=205055,t[3]=205056,t),p=1;p<=3;p++){var u=this.findChild("root/quality/quality"+p),v=f.findChildComponent(u,"txtQuality",l);v.string=GetLanguage(h[p]),this.quality_list[p]={node:u,name:v}}var y=this.findChildComponent("root/nodeChange/ScrollView",o);this.beskill_list=this.addUIList(y,m),this.pet_skill_frame=this.findChildComponent("root/nodeSkill/Frame",s),this.pet_skill_icon=this.findChildComponent("root/nodeSkill/Icon",s),this.skillName=this.findChildComponent("root/nodeSkill/txtName",l),this.skillDesc=this.findChildComponent("root/nodeSkill/ScrollView/view/content/item",l),this.skillDesc.node.on(a.EventType.SIZE_CHANGED,(function(){var t=i.findChildComponent("root/nodeSkill/ScrollView/view/content",c),e=i.findChildComponent("root/nodeSkill/ScrollView/view/content/item",c);t.contentSize=new d(t.contentSize.x,e.height+10)})),this.tips_panel=this.findChild("root/tips_panel"),this.tips_panel.active=!1;var _=this.findChild("root/nodeChange/tips");this.addComponentCallbackListener(_,n.EventType.CLICK,(function(){i.tips_panel.active=!i.tips_panel.active}))},u.onMaskClick=function(){this.close()},u.onAfterOpen=function(){this.tips_panel.active=!1,this.pet_cfg=this.openArgs[0],this.updateData()},u.registerUpdateHandler=function(){},u.onBeforeClose=function(){},u.updateEntry=function(t){var i,e=null!=t?t:[],n=((i={})[3]=1,i[2]=2,i[5]=3,i[1]=4,i[4]=5,i[6]=6,i);e.sort((function(t,i){var e=configFly_entry.getDataByKeys("id",t[0],"level",1),l=configFly_entry.getDataByKeys("id",i[0],"level",1);return e.quality==l.quality?t.id-i.id:n[e.quality]-n[l.quality]})),this.beskill_list.datas=e},u.updateData=function(){for(var t,i=1;i<=3;i++)i==this.pet_cfg.quality?this.quality_list[i].node.active=!0:this.quality_list[i].node.active=!1;for(var e=null!=(t=this.pet_cfg.entry_weight)?t:[],n=[],l=0;l<e.length;l++)e[l][1]>0&&n.push(e[l]);this.updateEntry(n);var o=configFly_advance.getDataByKeys("id",this.pet_cfg.id,"advance_level",1);this.updateSkill(o.fly_skill),null!=this.petModel&&(this.removeUIEffect(this.petModel),this.petModel=null);var s=configUnitModel.getDataByKey(this.pet_cfg.unitid);this.petName.string=this.pet_cfg.name,this.petModel=this.addUIEffect(s.path,this.petNode,-1,new r(0,-60),s.scale/100*1.5,(function(t){h.uiMirror&&(t.dir=-1)}))},u.onDestroy=function(){null!=this.petModel&&(this.removeUIEffect(this.petModel),this.petModel=null)},u.updateSkill=function(t){var i=null!=t?t:[];if(!(i.length<=0)){var e=i[0][0],n=configSkill.getDataByKey(e),l=configSkill_level.getDataByKeys("id",e,"level",i[0][1]);this.loadIcon(this.pet_skill_frame,"icon_skill",p.formatStr("common_ICON_jinengkuang0%s",n.quality)),this.loadIcon(this.pet_skill_icon,"icon_skill",n.icon,null,y.ICON_SPRITE),this.skillName.string=n.name,this.skillDesc.string=v.formatStr.apply(v,[l.desc].concat(l.desc_parm))}},e}(_));var m=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return(i=t.call.apply(t,[this].concat(n))||this).skill_cfg=void 0,i.quality_list={},i}i(e,t);var o=e.prototype;return o.onInit=function(){for(var t=this,i=1;i<=6;i++){var e=f.findChild(this.node,"quality/quality"+i),o=f.findChildComponent(e,"txtQuality",l);this.quality_list[i]={node:e,name:o}}this.view.addComponentCallbackListener(this.node,n.EventType.CLICK,(function(){uiMgr.openView("JobSkillTipsView",v.formatStr.apply(v,[t.skill_cfg.desc].concat(t.skill_cfg.desc_parm)),t.node)}))},o.onRender=function(t,i){var e=configFly_entry.getDataByKeys("id",t[0],"level",1);this.skill_cfg=e;for(var n=1;n<=6;n++)n==e.quality?(this.quality_list[n].node.active=!0,this.quality_list[n].name.string=e.name):this.quality_list[n].node.active=!1},o.onItemClick=function(){},e}(u);e._RF.pop()}}}));

