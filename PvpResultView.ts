System.register("chunks:///_virtual/PvpResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./NodeUtil.ts","./index57.ts","./ConfigGlobal.ts","./PvpControl.ts","./PvpDataCache.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,s,r,a,h,d,c,v,f,p;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.Button,s=e.Label,r=e.sys,a=e.Sprite},function(e){h=e.ItemGrid},function(e){d=e.default},null,function(e){c=e.ConfigGlobal},function(e){v=e.default},function(e){f=e.PvpDataCache},function(e){p=e.BaseView}],execute:function(){n._RF.push({},"2c99dJXmThCG7wEjq6D8gSx","PvpResultView",void 0);e("PvpResultView",function(e){function n(){var t;return(t=e.call(this)||this).heads=void 0,t.txtTime=void 0,t.nodeWin=void 0,t.nodeDefeat=void 0,t.typeOpen=1,t.name="PvpResultView",t.url="ui/module/pvp/PvpResultView",t}t(n,e);var a=n.prototype;return a.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,o.EventType.CLICK,(function(){e.close(),1==e.typeOpen?(uiMgr.openView("PvpMainView"),uiMgr.openView("PvpChalleneView")):2==e.typeOpen&&(IS(v).reqCrossPvpInfo(),IS(f).cachePage=IS(f).cur_page,IS(f).CrossPvpRankList=[])})),this.txtTime=this.findChildComponent("title/txtTime",s),this.nodeWin=this.findChild("nodeWin"),this.nodeDefeat=this.findChild("nodeDefeat"),this.heads=[];for(var i=1;i<=2;i++){var n=this.findChild("head"+i);this.heads[i-1]=new l(n,this)}if(r.uiMirror){var a=this.findChild("head1"),h=this.findChild("head2"),d=h.position.x-a.position.x;this.adjustMirrorNode(a,d,!1),this.adjustMirrorNode(h,-d,!1)}},a.registerUpdateHandler=function(){},a.onAfterOpen=function(){this.typeOpen=this.openArgs[0];var e=IS(f).result;if(e){(1==this.typeOpen&&e.isWin||2==this.typeOpen)&&this.refreshReward(),this.nodeWin.active=e.isWin,this.nodeDefeat.active=!e.isWin;for(var t=0;t<2;t++)this.heads[t].onRender(e.objs[t],t)}},a.refreshReward=function(){var e=[];if(2==this.typeOpen){var t=IS(f).CrossPvpInfo;t&&(e=1==t.type?c.cross_pvp_grading_match_reward:c.cross_pvp_battle_reward)}else e=c.pvp_win_reward;if(this.findChild("nodeReward").active=!1,e){this.findChild("nodeReward").active=!0;var n=this.findChild("nodeReward/Layout"),o=this.findChild("nodeReward/item");n.removeAllChildren();for(var s,r=i(e);!(s=r()).done;){var a=s.value,d=nodeInstantiate.instantiate(o);d.active=!0,new h(this,d).SetItemId(a[0],a[1]),d.setParent(n)}}},a.onBeforeClose=function(){},a.onDestroy=function(){},n}(p));var l=function(){function e(e,t){this.node=void 0,this.nodeScore=void 0,this.bgScore=void 0,this.txtName=void 0,this.imgHeadIcon=void 0,this.txtScore=void 0,this.txtScoreChangeWin=void 0,this.txtScoreChangeDefeat=void 0,this.view=void 0,this.node=e,this.view=t,this.txtName=d.findChildComponent(this.node,"txtName",s),this.txtScore=d.findChildComponent(this.node,"score/txtScore",s),this.bgScore=d.findChild(this.node,"Sprite"),this.nodeScore=d.findChild(this.node,"score"),this.txtScoreChangeWin=d.findChildComponent(this.node,"score/txtScoreChangeWin",s),this.txtScoreChangeDefeat=d.findChildComponent(this.node,"score/txtScoreChangeDefeat",s),this.imgHeadIcon=d.findChildComponent(this.node,"imgHeadIcon",a)}return e.prototype.onRender=function(e,t){this.txtName.string=e.name,this.view.loadRemoteIcon(e.head,this.imgHeadIcon),this.txtScore.string=String(e.score);var i=e.scoreChange>=0?"+":"-";e.scoreChange>=0?(this.txtScoreChangeWin.node.active=!0,this.txtScoreChangeDefeat.node.active=!1,this.txtScoreChangeWin.string="("+i+Math.abs(e.scoreChange)+")"):(this.txtScoreChangeWin.node.active=!1,this.txtScoreChangeDefeat.node.active=!0,this.txtScoreChangeDefeat.string="("+i+Math.abs(e.scoreChange)+")");var n=IS(f).CrossPvpInfo;2==this.view.typeOpen&&n&&2!=n.type?(this.bgScore.active=!1,this.nodeScore.active=!1):(this.bgScore.active=!0,this.nodeScore.active=!0)},e}();n._RF.pop()}}}));

