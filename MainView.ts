System.register("chunks:///_virtual/MainView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./V2.ts","./AudioMgr.ts","./index3.ts","./NodeUtil.ts","./PlatformUtil.ts","./index57.ts","./BaseTabView.ts","./UIDefine.ts","./UIEffectAsset.ts","./ConfigGlobal.ts","./MathUtil.ts","./ObjectUtil.ts","./MainGame.ts","./BagDefine.ts","./ChapterDataCache.ts","./ChapterDefine.ts","./ChatControl.ts","./ChatDefine.ts","./CommonDefine.ts","./GameSetting.ts","./GuideModel.ts","./LowModeView.ts","./MessageView.ts","./EquipDefine.ts","./GuildDataCache.ts","./GuildDefine.ts","./GuildWarDefine.ts","./GvGDataCache.ts","./GvGDefine.ts","./LoginControl.ts","./LoginDataCache.ts","./LoginDefine.ts","./MysteryDataCache.ts","./ParkingDataCache.ts","./PayControl.ts","./PayDataCache.ts","./PetDataCache.ts","./PlantDataCache.ts","./PlantDefine.ts","./PlantModel.ts","./BubbleControl.ts","./CustomeHeadControl.ts","./HeadFrameControl.ts","./TitleControl.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./ScienceDataCache.ts","./ScienceModel.ts","./SkillDataCache.ts","./SlaveDataCache.ts","./TaskDataCache.ts","./MainViewModel.ts","./BaseView.ts","./EaseMethod.ts"],(function(t){"use strict";var e,i,n,o,a,s,d,l,u,h,r,c,f,p,m,_,R,I,v,S,M,g,C,T,P,y,w,b,D,E,A,k,G,L,B,F,V,U,O,N,x,H,K,W,q,Y,z,X,j,J,Q,Z,$,tt,et,it,nt,ot,at,st,dt,lt,ut,ht,rt,ct,ft,pt,mt,_t,Rt,It,vt,St,Mt,gt,Ct;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.regeneratorRuntime},function(t){o=t.cclegacy,a=t.Vec3,s=t.UITransform,d=t.Widget,l=t.Button,u=t.Sprite,h=t.game,r=t.director,c=t.screen,f=t.Color,p=t.KeyCode,m=t.HorizontalTextAlignment,_=t.sys,R=t.Label},function(t){I=t.ChapterType},function(t){v=t.V2},function(t){S=t.audioMgr},null,function(t){M=t.default},function(t){g=t.PlatformUtil},null,function(t){C=t.BaseTabView,T=t.ItemTabBtn},function(t){P=t.PanelTabType,y=t.OpenFunction,w=t.PanelTabData},function(t){b=t.UIEffectAsset},function(t){D=t.ConfigGlobal},function(t){E=t.default},function(t){A=t.default},function(t){k=t.GameState},function(t){G=t.BagEventDefine},function(t){L=t.ChapterDataCache},function(t){B=t.ChapterEventDefine},function(t){F=t.default},function(t){V=t.ChatDefine},function(t){U=t.CommonEventDefine},function(t){O=t.default,N=t.GameSettingKey},function(t){x=t.GuideModel},function(t){H=t.default},function(t){K=t.default},function(t){W=t.EquipEventDefine},function(t){q=t.default},function(t){Y=t.GuildEventDefine},function(t){z=t.GuildBossEventDefine},function(t){X=t.GvGDataCache},function(t){j=t.GvGEventDefine},function(t){J=t.default},function(t){Q=t.LoginDataCache},function(t){Z=t.LoginEventDefine},function(t){$=t.MysteryDataCache},function(t){tt=t.ParkingDataCache},function(t){et=t.default},function(t){it=t.default},function(t){nt=t.PetDataCache},function(t){ot=t.PlantDataCache},function(t){at=t.PlantEventDefine},function(t){st=t.PlantModel},function(t){dt=t.default},function(t){lt=t.default},function(t){ut=t.default},function(t){ht=t.default},function(t){rt=t.default},function(t){ct=t.RoleDataCache},function(t){ft=t.RoleEventDefine,pt=t.PlayerAttr,mt=t.RoleRedPointSystemEnum},function(t){_t=t.ScienceDataCache},function(t){Rt=t.ScienceModel},function(t){It=t.SkillDataCache},function(t){vt=t.SlaveDataCache},function(t){St=t.TaskDataCache},function(t){Mt=t.MainViewModel},function(t){gt=t.ViewEvent},function(t){Ct=t.EasingMethod}],execute:function(){o._RF.push({},"406d5oE22NEHpguP9M89FGs","MainView",void 0);var Tt=new a,Pt=new v,yt=(t("default",function(t){function o(){var e;return(e=t.call(this)||this).subRoots=void 0,e.nodeBlock=void 0,e.nodeBg=void 0,e.utBg=void 0,e.nodeDi=void 0,e.widgetBg=void 0,e.nodeFly=void 0,e.utFly=void 0,e.btnCoin=void 0,e.btnDiamo=void 0,e.btnBox=void 0,e.nodeTop=void 0,e.mask=void 0,e.isHideAll=void 0,e.nodeThiefRemind=void 0,e.nodeTreasureRemind=void 0,e.btnFarm=void 0,e.nodeSubRoots=void 0,e.battleState=void 0,e.hideUI=!1,e.name="MainView",e.url="ui/module/main/MainView",e.tabTypes=[P.Main_Role,P.Main_Partner,P.Main_Dungeon,P.Main_Mystery,P.Main_Guild,P.Main_Shop],e.tweenOpenTime=0,e}e(o,t);var R=o.prototype;return R.onInit=function(){var e=this;this.defaultMaker=yt,t.prototype.onInit.call(this),this.nodeDi=this.findChild("di"),this.nodeBg=this.findChild("di/SpriteSplash"),this.utBg=this.nodeBg.getComponent(s),this.initSubRoots(),this.widgetBg=this.nodeDi.getComponent(d),this.widgetBg.scheduleOnce((function(){e.SetMainViewBgStatus(!0)}),0),this.nodeBlock=this.findChild("block"),this.nodeFly=this.findChild("fly"),this.utFly=this.nodeFly.getComponent(s),this.btnBox=this.findChild("subRoots/boxRoot/btnBox"),this.btnCoin=this.findChild("top/playerTop/btnCoinRoot"),this.btnDiamo=this.findChild("top/playerTop/btnDiamondRoot"),this.nodeTop=this.findChild("top"),this.nodeSubRoots=this.findChild("subRoots");var i=this.nodeTop.getComponent(d);this.btnFarm=this.findChild("subRoots/btnFarm"),this.addComponentCallbackListener(this.btnFarm,l.EventType.CLICK,(function(){uiMgr.openView("FarmHelpView")})),this.nodeThiefRemind=this.findChild("thiefRemind"),this.nodeTreasureRemind=this.findChild("treasureRemind"),this.addComponentCallbackListener(this.findChild("battle/nodeWait"),l.EventType.CLICK,(function(){K.showFlyTip(GetLanguage(200441))})),this.mask=this.findChildComponent("mask",u),i.scheduleOnce((function(){e.setTopPos()}),0),this.sendProto(),GlobalDefine.IS_IPHONE_X&&(this.scrollTab.node.setPosition(new a(0,0,0)),this.scrollTab.node.setScale(new a(1,.95,1)));var n=h.totalTime;r.on("director_input_event",(function(){n=h.totalTime})),this.addTimer(1,-1,(function(){if(mainGame.state==k.Runing){if(IS(O).Get(N.LOW_ENERGY)&&h.totalTime-n>1e3*D.power_save_mode&&IS(H).show(),h.totalTime-n>1e3*D.task_guide_time){var t=IS(St).GetCurMainTaskId();if(t<D.task_guide_range[0])return;if(t>D.task_guide_range[1])return;if(!IS(Mt).checkGuideShow())return;IS(x).openGuide(9999)}}else n=h.totalTime}))},R.initSubRoots=function(){this.subRoots={MainView_PlayerTop:this.addSubView("MainView_PlayerTop",this.findChild("top/playerTop")),MainView_SystemTop:this.addSubView("MainView_SystemTop",this.findChild("top/systemTop")),MainView_AttrInfo:this.addSubView("MainView_AttrInfo",this.findChild("subRoots/attrRoot")),MainView_EquipInfo:this.addSubView("MainView_EquipInfo",this.findChild("subRoots/equipRoot")),MainView_TaskInfo:this.addSubView("MainView_TaskInfo",this.findChild("subRoots/taskRoot")),MainView_BoxInfo:this.addSubView("MainView_BoxInfo",this.findChild("subRoots/boxRoot")),MainView_ChatInfo:this.addSubView("MainView_ChatInfo",this.findChild("subRoots/btnChatRoot")),FloatADIcon:this.addSubView("FloatADIconView",this.findChild("FloatADIcon"))}},R.onUpdate=function(e){t.prototype.onUpdate.call(this,e);var i=!(uiMgr.openFullScreenNum.size>0);this.nodeSubRoots.active!=i&&(this.nodeSubRoots.active=i,this.nodeTop.active=i,this.nodeDi.active=i,1==i&&1!=this.subRoots.MainView_BoxInfo.curSkin&&this.subRoots.MainView_BoxInfo.spineBox&&this.subRoots.MainView_BoxInfo.spineBox.setAnimation(0,"idle",!0))},R.setTopPos=function(){if(!GlobalDefine.IPAD){var t=this.nodeTop,e=720/c.windowSize.width*c.windowSize.height,i=g.getMeunButtonTopDelta()*e,n=new a(0,e-i,0),o=t.parent.getComponent(s).convertToNodeSpaceAR(n),d=t.getPosition();t.setPosition(new a(d.x,o.y,d.z))}},R.registerUpdateHandler=function(){var t=this;this.addEvent(U.JUMP_TO_MAIN_VIEW_SELECT_TYPE,this.onJumpToMainViewSelectType,this),this.addEvent(Z.LOGIN_SUCCESS,this.onLoginCallback,this),this.addEvent(U.UPDATE_MAIN_GUILD_RED_POINT,this.onUpdateMainGuildRedPoint,this),this.addEvent(G.GOODS_INFO_UPDATE,this.onUpdateMainGuildRedPoint,this),this.addEvent(U.UPDATE_MAIN_ROLE_RED_POINT,this.onUpdateMainRoleRedPoint,this),this.addEvent(U.UPDATE_MAIN_SHOP_RED_POINT,this.onUpdateMainShopRedPoint,this),this.addEvent(U.UPDATE_MAIN_MYSTERY_RED_POINT,this.onUpdateMainMysteryRedPoint,this),this.addEvent(B.BATTLE_STATE,this.onBattleState,this,!0),this.addEvent(U.MAIN_FLOAT_AD,this.onFloatADUpdate,this),this.addEvent(B.CHAPTER_KILL_REWARD,this.killReward,this),this.addEvent(U.FLY_DIAMO,this.flyDiamo,this),this.addEvent(U.FLY_LAMP,this.flyLamp,this),this.addEvent(U.FLY_COIN,this.flyCoin,this),this.addEvent(ft.ROLE_OPEN_FUNCTION_UPDATE,this.UpdateFunctionOpen,this),this.addEvent(ft.ROLE_INFO_INIT,this.onRoleInfoInit,this),this.addEvent(U.KEY_DOWN,this.onKeyDown,this),this.addEvent(U.HIDE_MAINVIEW,(function(){t.nodeTop.active=!t.hideUI,t.hideUI&&uiMgr.closeAllView(["MainView","BattleHubView","GMView"])}),this),this.addEvent(at.ROLE_LAND_INFO_UPDATE,this.onRoleLandUpdate,this,!0),this.addEvent(at.HOME_FARM_INFO_INIT,this.updateThiefRemind,this,!0),this.addEvent(at.FARM_HELP_LIST,this.updateFarmHelp,this,!0),this.addEvent(Y.GUILD_BOX_SHOW,this.updateTreasureRemind,this),this.addEvent(ft.ROLE_INFO_UPDATE,this.checkGuildActBtn2,this),this.addEvent(j.GVG_INFO_UPDATE,this.onUpdateMainGuildRedPoint,this),this.addEvent(j.GVG_ROAD_INFO_UPDATE,this.onUpdateMainGuildRedPoint,this),this.addEvent(ft.ROLE_RED_POINT_LIST_UPDATE,this.onUpdateMainGuildRedPoint,this),this.addEvent(z.TYPE_SOLO_BOX_INFO_UPDATE,this.onUpdateMainGuildRedPoint,this),this.addEvent(ft.ROLE_RED_DETAIL_UPDATE,this.onRoleRedDetailUpdate,this),this.addEvent(U.HIDE_MAINVIEWALL,this.hideMainView,this,!0),this.addEvent(B.DOUBLE_CHAPTER_ENTRANCE_INFO_BACK,this.onUpdateMainDungeonRedPoint,this),this.addEvent(B.DOUBLE_CHAPTER_REWARD_UPDATE,this.onUpdateMainDungeonRedPoint,this),this.addEvent(W.EQUIP_GOT_UPDATE,(function(t){t&&IS(ct).GetLevel()>=11&&(IS(x).newHeadGuide=1)}))},R.maskOpen=function(){var t=this;this.mask.node.active=!0,this.mask.color=new f(0,0,0,255);var e=new f(0,0,0,0);normalTween.to(255,0,1,(function(i,n){e.a=n,t.mask.color=e})).call((function(){t.mask.node.active=!1})).start()},R.onLoginCallback=function(){if(1==IS(Q).newRole){var t=n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=IS(Q).newRole){t.next=5;break}return void(t.next=3);case 3:t.next=0;break;case 5:return IS(Q).newRole=0,e.maskOpen(),t.next=9,coroutine.wait(1);case 9:return e.subRoots.MainView_BoxInfo.openBoxAni=!0,e.subRoots.MainView_BoxInfo.activeBox(),e.subRoots.MainView_BoxInfo.boxFallAni(),t.next=14,coroutine.wait(.5);case 14:IS(x).openGuide(IS(ct).guideId);case 15:case"end":return t.stop()}}),t)})),e=this;return this.mask.node.active=!0,void this.startCoroutine(t())}this.subRoots.MainView_BoxInfo.activeBox(),this.subRoots.MainView_BoxInfo.openBoxAni=!0,this.playAnim(),IS(x).openGuide(IS(ct).guideId),IS(Rt).tryRemindScienceUp(),IS(rt).send_3_16(),IS(ht).send_42_1(),IS(ut).send_47_1(),IS(dt).send_52_1(),IS(et).send_pay_ask_not_confirm_order_c2s()},R.onAfterOpenTab=function(){this.showSubRoots(),this.updateFarmHelp(),this.updateThiefRemind(),this.updateTreasureRemind(),IS(L).chapterType!=I.Main&&(this.visible=!1)},R.updateThiefRemind=function(){this.nodeThiefRemind.active=IS(st).checkBeStealing()},R.updateFarmHelp=function(){var t=IS(ot).helpList;this.btnFarm.active=A.getPropertyCount(t)>0},R.checkGuildActBtn2=function(t){!t[pt.ROLE_ATTR_GUILD_ID]||IS(ct).HasGuild()||(this.nodeTreasureRemind.active=!1)},R.updateTreasureRemind=function(){IS(ct).HasGuild()?this.nodeTreasureRemind.active=IS(q).checkTreasureMapping():this.nodeTreasureRemind.active=!1},R.checkFunctionOpen=function(t){return IS(ct).CheckFuncOpen(t,!0)},R.showSubRoots=function(){for(var t in this.setRedPoint(P.Main_Shop,this.getShopRedPoint()),this.setRedPoint(P.Main_Role,this.getRoleRedPoint()),this.setRedPoint(P.Main_Mystery,IS(_t).getAllScienceRedPoint()+IS($).getMineRedPoint()+IS(ot).getFarmRedPoint()+IS(tt).getParkingRedPoint()),this.setRedPoint(P.Main_Partner,IS(nt).getAllPetEquipRedPoint()+IS(nt).getAllPetUpgradeRedPoint()+IS(nt).getAllPetComposeRedPoint()),this.setRedPoint(P.Main_Guild,this.getGuildRedPoint()),this.setRedPoint(P.Main_Dungeon,IS(L).getDoubleChapterRewardRedNum()),this.subRoots)"FloatADIcon"!=t&&this.subRoots[t].setActive(!0)},R.UpdateFunctionOpen=function(t){for(var e in t==y.FUNC_MALL&&this.setRedPoint(P.Main_Shop,this.getShopRedPoint()),this.btnList){var i=this.btnList[e];if(i.funcId==t){i.updateLock();break}}},R.onRoleInfoInit=function(){for(var t in this.btnList){this.btnList[t].updateLock()}},R.onKeyDown=function(t){if(t!=p.F1){if(t==p.F2){var e=m.LEFT;_.uiMirror&&(e=m.RIGHT),K.showBoxTip({tip:GetLanguage(201356),title:GetLanguage(200048),btnCnt:1,horizontalAlign:e})}}else null==uiMgr.getOpenView("GMView")?netManager.send("system.system_open_gm_c2s",{}):uiMgr.close("GMView")},R.getRoleRedPoint=function(){var t=0;return t+=IS(It).getAllSkillEquipRedPoint(),t+=IS(It).getAllSkillUpgradeRedPoint(),t+=IS(It).getAllSkillComposeRedPoint(),t+=IS(ct).GetJobRed(),t+=IS(ct).GetAwakeRed()},R.getShopRedPoint=function(){if(!IS(ct).CheckFuncOpen(y.FUNC_MALL))return 0;var t=0;return IS(it).IsShowView()&&(t+=IS(it).GetRedByTabType(1),t+=IS(it).GetRedByTabType(2),t+=IS(it).GetRedByTabType(3)),t},R.getGuildRedPoint=function(){if(!IS(ct).CheckFuncOpen(y.FUNC_GUILD))return 0;var t=0;return t+=IS(q).GetMainRedNum(),t+=IS(X).getGvGRedPoint()},R.onUpdateMainRoleRedPoint=function(){this.setRedPoint(P.Main_Role,this.getRoleRedPoint())},R.onUpdateMainGuildRedPoint=function(){this.setRedPoint(P.Main_Guild,this.getGuildRedPoint())},R.onRoleRedDetailUpdate=function(t){t!=mt.System_Parking&&t!=mt.System_Slave||this.onUpdateMainMysteryRedPoint(),t==mt.System_Guild&&this.onUpdateMainGuildRedPoint()},R.onUpdateMainShopRedPoint=function(){this.setRedPoint(P.Main_Shop,this.getShopRedPoint())},R.onUpdateMainDungeonRedPoint=function(){this.setRedPoint(P.Main_Dungeon,IS(L).getDoubleChapterRewardRedNum())},R.onUpdateMainMysteryRedPoint=function(){this.setRedPoint(P.Main_Mystery,IS(_t).getAllScienceRedPoint()+IS($).getMineRedPoint()+IS(ot).getFarmRedPoint()+IS(tt).getParkingRedPoint()+IS(vt).getSlaveRedPoint())},R.onBattleState=function(t,e){this.battleState=e,this.visible=!e&&!this.isHideAll,[I.Main,I.ShenQi,I.CrossPvp,I.WingPreview].includes(t)&&!e&&uiMgr.ShowAllHideView()},R.hideMainView=function(t){this.isHideAll=t,this.visible=!t&&!this.battleState},R.SetMainViewBgStatus=function(t){this.subRoots.MainView_ChatInfo.setActive(t)},R.onBeforeClose=function(){},R.onDestroy=function(){},R.updateTabScroll=function(){for(var t,e=1,n=i(this.initTypes);!(t=n()).done;){var o=t.value;this.canShowType(o)?(this.tabTypes.push(o),this.addBtnItem(o,e),e+=1):this.removeBtnItem(o)}this.setIndex(0)},R.setIndex=function(t,e,i,n){var o;if(uiMgr.close("ChatView"),this.curType==t&&n){if(this.curPanel=this.getTabPanel(this.curType),this.curPanel){var a=[e];null!=i&&(a=a.concat(i)),this.curPanel.openArgs=a,this.curPanel.setActive(!0),normalEvent.emit(gt.ViewOpen,this.curPanel.name),e&&normalEvent.emit(U.JUMP_TO_SUB_VIEW_SUB_TYPE,t,e)}}else{if(this.curType>0){this.btnList[this.curType].setSelected(!1),this.SetMainViewBgStatus(!0),this.curType==P.Main_Dungeon&&(uiMgr.close("DoubleChapterMainView"),uiMgr.close("DoubleChapterLevelMainView"));var s=this.getTabPanel(this.curType);null!=s&&(this.tryReplyBattleMusic(s),null==s||s.setActive(!1),o=null==s?void 0:s.name)}if(0==t||this.curType==t)return this.nodeBlock.active=!1,this.curType=0,void(null!=o&&normalEvent.emit(gt.ViewClose,o));if(this.SetMainViewBgStatus(!1),this.nodeBlock.active=!0,this.curType=t,this.btnList[this.curType].setSelected(!0),this.curPanel=this.getTabPanel(this.curType),this.curPanel){var d=[e];null!=i&&(d=d.concat(i)),this.curPanel.openArgs=d,this.curPanel.setActive(!0),normalEvent.emit(gt.ViewOpen,this.curPanel.name)}null!=o&&normalEvent.emit(gt.ViewClose,o)}},R.tryReplyBattleMusic=function(t){null!=t&&(null!=t.name&&("MysteryMainView"==t.name&&S.playMusic("battle"),"GuildMainView"==t.name&&t.tryReplyBattleMusic()))},R.onJumpToMainViewSelectType=function(t,e,i){var n=w[t];if(!n.openFuncId||IS(ct).CheckFuncOpen(n.openFuncId,!0)){if(e){var o=w[e];if(o.openFuncId&&!IS(ct).CheckFuncOpen(o.openFuncId,!0))return}this.setIndex(t,e,i,!0)}},R.onRoleLandUpdate=function(t){t==IS(ct).GetRoleId()&&this.updateThiefRemind()},R.sendProto=function(){IS(F).reqBanChat(),IS(F).reqChatHistory(V.Channel.World),IS(F).reqChatHistory(V.Channel.Guild),IS(F).reqChatHistory(V.Channel.News),IS(F).reqChatHistory(V.Channel.Activity),IS(F).send_customer_service_info_c2s(),IS(F).send_customer_service_kf_list_c2s(),IS(F).send_customer_service_offline_msg_c2s(),IS(F).send_red_all_list_c2s(),IS(J).reqPnodeUrl(),IS(lt).send_role_photo_list_c2s()},R.flyCoin=function(t){this.utFly.convertToNodeSpaceAR(t,Tt),this.flyAni("ui/module/common/FlyCoin",Tt,this.btnCoin)},R.flyDiamo=function(t){this.utFly.convertToNodeSpaceAR(t,Tt),this.flyAni("ui/module/common/FlyDiamo",Tt,this.btnDiamo)},R.flyLamp=function(t){this.utFly.convertToNodeSpaceAR(t,Tt),this.flyAni("prefab/ui-effect/MX_tx_shendengdiaoluo",Tt,this.btnBox,Ct.QUAD_IN)},R.killReward=function(t,e){var n=this;if(!(uiMgr.openFullScreenNum.size>0)){for(var o,a=i(this.tabTypes);!(o=a()).done;){var s,d=o.value;if(null!=(s=this.getTabPanel(d,!1))&&s.isActive)return}e.forEach((function(e){1001==e.gtid?n.flyKillLamp(e.num,t):1==e.gtid&&n.flyKillCoin(e.num,t)}))}},R.onFloatADUpdate=function(t){this.subRoots.FloatADIcon.setActive(t)},R.flyKillLamp=function(t,e){t=Math.min(t,5);var i=new a(e.x,e.y);i.y+=50,this.startCoroutine(this.flyKillAni("prefab/ui-effect/MX_tx_diaoluo_shendeng",i,t,this.btnBox,1001))},R.flyKillCoin=function(t,e){t=Math.min(t,5);var i=new a(e.x,e.y);i.y+=20,this.startCoroutine(this.flyKillAni("prefab/ui-effect/MX_tx_diaoluo_jinbi",i,t,this.btnCoin,1))},R.flyKillAni=n().mark((function t(e,i,o,s,d){var l,u,h,r,c=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===d&&(d=1),o=Math.min(o,5),l=this.utFly.convertToNodeSpaceAR(s.worldPosition,new a),u=0,h=n().mark((function t(o){var s,d,h,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Tt.set(i),Tt.y+=E.random(-50,50),Tt.x+=E.random(-100,100),(s=b.alloc(e,c.nodeFly,2.1,null,20)).position=Pt.set(Tt.x,Tt.y),_.uiMirror&&(s.dir=-1),d=new v(Tt.x,Tt.y),h=new a(l.x-Tt.x,l.y-Tt.y),normalTween.to(0,1,.95,(function(t,e){Pt.set(d).add2f(h.x*e,h.y*e),s.position=Pt})).delay(E.random(.9,1.1)).easing(Ct.BACK_IN).call((function(){0==o&&uiMgr.openFullScreenNum.size<=0&&S.playSound("common_jinbitiao")})).start(),r=E.random(.01,.1),u+=r,t.next=13,coroutine.wait(r);case 13:case"end":return t.stop()}}),t)})),r=0;case 6:if(!(r<o)){t.next=11;break}return t.delegateYield(h(r),"t0",8);case 8:r++,t.next=6;break;case 11:return t.next=13,coroutine.wait(2-u);case 13:t.t1=d,t.next=1===t.t1?16:1001===t.t1?18:20;break;case 16:return normalEvent.emit(ft.ROLE_MONET_UPDATE),t.abrupt("break",20);case 18:return normalEvent.emit(G.GOODS_BOX_UPDATE),t.abrupt("break",20);case 20:case"end":return t.stop()}}),t,this)})),R.flyAni=function(t,e,i,n){if(void 0===n&&(n=Ct.BACK_IN),!(uiMgr.openFullScreenNum.size>0)){var o=this.utFly.convertToNodeSpaceAR(i.worldPosition,new a),s=b.alloc(t,this.nodeFly,1);s.position=Pt.set(e.x,e.y);var d=new v(e.x,e.y),l=a.subtract(new a,o,e);normalTween.to(0,1,.95,(function(t,e){a.multiplyScalar(Tt,l,e),Pt.set(d).add2f(Tt.x,Tt.y),s.position=Pt})).easing(n).call((function(){uiMgr.openFullScreenNum.size<=0&&S.playSound("common_jinbitiao")})).start()}},o}(C)),function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).imgNormal=void 0,e.txtCommonName=void 0,e.nodeLock=void 0,e.txtLockName=void 0,e.imgMaskBg=void 0,e.funcId=void 0,e}e(i,t);var n=i.prototype;return n.init=function(e,i,n){this.redOnNormal=!0,t.prototype.init.call(this,e,i,n),this.imgNormal=M.findChildComponent(this.nodeItem,"normal/icon",u),this.txtCommonName=M.findChildComponent(this.nodeItem,"normal/txtName",R),this.nodeLock=M.findChild(this.nodeItem,"normal/lock"),this.txtLockName=M.findChildComponent(this.nodeItem,"normal/lock/txtName",R),this.imgMaskBg=M.findChildComponent(this.nodeItem,"normal/lock/imgBg",u)},n.setText=function(t){this.funcId=t.openFuncId,this.view.loadIcon(this.imgNormal,"main",t.imgNormal),this.txtCommonName.string=GetLanguage(t.name),this.txtLockName.string=GetLanguage(t.name),this.view.loadIcon(this.imgMaskBg,"main",t.imgMask),this.updateLock()},n.updateLock=function(){var t=this.funcId&&!IS(ct).CheckFuncOpen(this.funcId);this.nodeLock.active=t},i}(T));o._RF.pop()}}}));

