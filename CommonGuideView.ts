System.register("chunks:///_virtual/CommonGuideView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./index57.ts","./ItemIcon.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,s,o,a,h,c,r,d,g;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,s=t.Button,o=t.Label,a=t.UITransform,h=t.Node,c=t.Sprite},function(t){r=t.default},null,function(t){d=t.IconAseetType},function(t){g=t.BaseView}],execute:function(){n._RF.push({},"c05b2jadDdNpKFkpcrS4FFe","CommonGuideView",void 0);t("default",function(t){function n(){var e;return(e=t.call(this)||this).btnLeft=void 0,e.btnRight=void 0,e.txtDesc=void 0,e.img=void 0,e.maxPage=0,e.curPage=0,e.pageGo=void 0,e.pageItemGo=void 0,e.pageItems=[],e.cfgs=[],e.name="CommonGuideView",e.url="ui/module/common/CommonGuideView",e}e(n,t);var r=n.prototype;return r.onInit=function(){var t=this,e=this.findChild("view/btnClose");this.addComponentCallbackListener(e,s.EventType.CLICK,(function(){t.close()})),this.btnLeft=this.findChild("view/btnLeft"),this.addComponentCallbackListener(this.btnLeft,s.EventType.CLICK,(function(){t.SwitchPage(-1)})),this.btnRight=this.findChild("view/btnRight"),this.addComponentCallbackListener(this.btnRight,s.EventType.CLICK,(function(){t.SwitchPage(1)})),this.txtDesc=this.findChildComponent("view/desc/view/content/txtDesc",o);var i=this.findChildComponent("view/desc/view/content",a);this.addComponentCallbackListener(this.txtDesc.node,h.EventType.SIZE_CHANGED,(function(){i.height=t.txtDesc.node.getComponent(a).height})),this.img=this.findChildComponent("view/img",c),this.pageGo=this.findChild("view/page"),this.pageItemGo=this.findChild("view/page/pageItem"),this.pageItemGo.active=!1},r.registerUpdateHandler=function(){},r.onAfterOpen=function(){var t=this.openArgs[0];this.cfgs=[];for(var e,n=i(configPic_text_guide.getDatas());!(e=n()).done;){var s=e.value;s.type==t&&this.cfgs.push(s)}this.cfgs.sort((function(t,e){return t.order-e.order})),this.maxPage=this.cfgs.length,this.ClearPageItem();for(var o=0;o<this.maxPage;o++){var a=nodeInstantiate.instantiate(this.pageItemGo);this.pageGo.addChild(a),a.active=!0;var h=new u;h.Init(this,a),this.pageItems.push(h)}this.SetPage(1)},r.onBeforeClose=function(){this.curPage=0,this.maxPage=0,this.ClearPageItem()},r.onDestroy=function(){},r.SetPage=function(t){if(this.curPage!=t&&0!=this.pageItems.length){this.curPage&&this.curPage>0&&this.pageItems[this.curPage-1].SetSelected(!1),this.curPage=t,this.pageItems[this.curPage-1].SetSelected(!0),this.UpdateSwitchBtn();var e=this.cfgs[t-1];this.loadIcon(this.img,"icon_common_guide",e.pic,null,d.ICON_SPRITE),this.txtDesc.string=e.text}},r.ClearPageItem=function(){for(var t,e=i(this.pageItems);!(t=e()).done;){t.value.Clear()}this.pageItems=[]},r.UpdateSwitchBtn=function(){this.maxPage>1?(this.btnLeft.active=this.curPage>1,this.btnRight.active=this.curPage<this.maxPage):(this.btnLeft.active=!1,this.btnRight.active=!1)},r.SwitchPage=function(t){if(t>0){if(this.curPage>=this.maxPage)return}else if(this.curPage<=1)return;var e=this.curPage+t;this.SetPage(e)},n}(g));var u=function(){function t(){this.view=void 0,this.node=void 0,this.normalGo=void 0,this.selectedGo=void 0}var e=t.prototype;return e.Init=function(t,e){this.view=t,this.node=e,this.normalGo=r.findChild(this.node,"normal"),this.selectedGo=r.findChild(this.node,"selected"),this.selectedGo.active=!1},e.SetSelected=function(t){this.normalGo.active=!t,this.selectedGo.active=t},e.Clear=function(){this.node.destroy()},t}();n._RF.pop()}}}));

