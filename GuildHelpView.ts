System.register("chunks:///_virtual/GuildHelpView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./UIList.ts","./NodeUtil.ts","./TimeUtil.ts","./index57.ts","./RoleDataCache.ts","./GuildControl.ts","./GuildDataCache.ts","./GuildDefine.ts","./EaseMethod.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,s,a,d,l,h,r,u,c,f,g,m,v,p,C;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.ScrollView,s=t.sys,a=t.Sprite,d=t.Label,l=t.Vec3,h=t.UITransform},null,function(t){r=t.ListItem},function(t){u=t.default},function(t){c=t.default},null,function(t){f=t.RoleDataCache},function(t){g=t.default},function(t){m=t.default},function(t){v=t.GuildEventDefine},function(t){p=t.EasingMethod},function(t){C=t.BaseView}],execute:function(){e._RF.push({},"02fe2hMJEdCL7eZ2kd63Fza","GuildHelpView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).scroll=void 0,i.nothing=void 0,i.name="GuildHelpView",i.url="ui/module/guild/GuildHelpView",i}i(e,t);var a=e.prototype;return a.onInit=function(){var t=this,i=this.findChild("view/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("view/btnHelp");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.nothing.active||IS(g).send_29_30(0)})),this.nothing=this.findChild("view/nothing");var a=this.findChildComponent("view/scroll",o);(this.scroll=this.addUIList(a,I),s.uiMirror)&&this.findChild("view/desc/Sprite").setSiblingIndex(2)},a.registerUpdateHandler=function(){this.addEvent(v.GUILD_HELP_UPDATE,this.updateInfo,this)},a.onAfterOpen=function(){IS(g).send_29_28(1)},a.onBeforeClose=function(){},a.onDestroy=function(){},a.updateInfo=function(){var t=[],i=IS(f).GetRoleId(),e=IS(m).getHelpList(),n=c.serverTime,o=IS(m).GetGuildInfo(),s=configGuild_level.getDataByKey(o.level);for(var a in e)if(e.hasOwnProperty(a)){var d=e[a];d.role_id!=i&&d.help_num<s.help_limit&&n<d.end_time&&!IS(m).isHelp(d.id)&&t.push(d)}this.scroll.datas=t,this.scroll.node.active=t.length>0,this.nothing.active=0==t.length},e}(C));var I=function(t){function e(){for(var i,e,n,o,s,a=arguments.length,d=new Array(a),l=0;l<a;l++)d[l]=arguments[l];return(s=t.call.apply(t,[this].concat(d))||this).imgRes=((i={})[1]="jiazu_ui_shendengbg",i[2]="jiazu_ui_kejibg",i[3]="jiazu_ui_zhuangyuan",i),s.txtLabel1=((e={})[1]=999000245,e[2]=999000242,e[3]=999000245,e),s.txtLabel2=((n={})[1]=999000246,n[2]=999000243,n[3]=999000247,n),s.txtLabel3=((o={})[1]=999000244,o[2]=999000244,o[3]=999000244,o),s.imgHeadFrame=void 0,s.imgIcon=void 0,s.txtName=void 0,s.txt1=void 0,s.txt2=void 0,s.txt3=void 0,s.imgBg=void 0,s.moveTween=void 0,s}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this,i=u.findChild(this.node,"btnHelp");this.view.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.flyOut()})),this.imgIcon=u.findChildComponent(this.node,"head/imgIcon",a),this.imgHeadFrame=u.findChildComponent(this.node,"head/imgHeadFrame",a),this.txtName=u.findChildComponent(this.node,"name",d),this.txt1=u.findChildComponent(this.node,"txt1",d),this.txt2=u.findChildComponent(this.node,"txt2",d),this.txt3=u.findChildComponent(this.node,"txt3",d),this.imgBg=u.findChildComponent(this.node,"imgBg",a)},o.onRender=function(t,i){this.view.loadIcon(this.imgBg,"guild_help",this.imgRes[t.type]),this.txt1.string=GetLanguage_UI(this.txtLabel1[t.type]),this.txt2.string=GetLanguage_UI(this.txtLabel2[t.type]),this.txt3.string=GetLanguage_UI(this.txtLabel3[t.type]),this.txtName.string=t.name,this.view.loadRemoteIcon(t.head.url,this.imgIcon);var e=t.head.frame_id;if(e>0){var n=configAvatar_frame.getDataByKey(e);this.view.loadIcon(this.imgHeadFrame,"icon_frame",n.icon),this.imgHeadFrame.node.active=!0}else this.imgHeadFrame.node.active=!1},o.flyOut=function(){var t=this;null!=this.moveTween&&this.moveTween.stop();var i=new l,e=this.node.getComponent(h).contentSize,n=this.node.position,o=new l(n.x,n.y);this.moveTween=this.view.addTween(0,1,.15,(function(n,s){i.set(o).add3f(-1.1*e.x*s,0,0),t.node.position=i})).easing(p.LINEAR).call((function(){IS(g).send_29_30(t.data.id)})).start()},e}(r);e._RF.pop()}}}));

