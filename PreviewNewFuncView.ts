System.register("chunks:///_virtual/PreviewNewFuncView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./index3.ts","./NodeUtil.ts","./BaseView.ts","./GuideModel.ts","./RoleDefine.ts","./EaseMethod.ts"],(function(i){"use strict";var e,n,t,o,s,c,l,a,r,h,d,u,f;return{setters:[function(i){e=i.inheritsLoose},function(i){n=i.cclegacy,t=i.Vec3,o=i.Label,s=i.UITransform,c=i.Button,l=i.Sprite},function(i){a=i.V2},null,function(i){r=i.default},function(i){h=i.BaseView},function(i){d=i.GuideModel},function(i){u=i.RoleEventDefine},function(i){f=i.EasingMethod}],execute:function(){n._RF.push({},"8b0fb81IeFDEZWUOmGs0YxU","PreviewNewFuncView",void 0);var v=new a,w=new t;i("default",function(i){function n(){var e;return(e=i.call(this)||this).closeBtn=void 0,e.icon=void 0,e.iconGo=void 0,e.scrollView=void 0,e.uiTrans=void 0,e.iconName=void 0,e.closeTween=void 0,e.btnMask=void 0,e.cfg=void 0,e.panelGo=void 0,e.defaultPos=new t(0,100,0),e.defaultV2=new a(0,100),e.closeTimer=void 0,e.name="PreviewNewFuncView",e.url="ui/module/role/PreviewNewFuncView",e}e(n,i);var h=n.prototype;return h.registerUpdateHandler=function(){this.addEvent(u.ROLE_PREVIEW_UPDATE,this.refreshScroll,this)},h.onInit=function(){var i=this;this.panelGo=this.findChild("panel"),this.btnMask=this.findChild("panel/imgMask"),this.iconName=this.findChildComponent("panel/nameBg/name",o),this.uiTrans=this.findChildComponent("",s),this.addComponentCallbackListener(this.btnMask,c.EventType.CLICK,(function(){i.removeTimer(i.closeTimer),i.closeAnim()})),this.icon=this.findChildComponent("iconGo/icon",l),this.iconGo=this.findChild("iconGo")},h.onAfterOpen=function(){var i=this,e=this.openArgs[0];this.refreshScroll(e),this.closeTimer=this.addTimer(5,1,(function(){i.closeAnim()}))},h.closeAnim=function(){var i=this;this.panelGo.active=!1;var e=uiMgr.getOpenView("MainView"),n=r.findChild(e.node,this.cfg.falling_end);if(n){var o=this.uiTrans.convertToNodeSpaceAR(n.worldPosition,new t);this.iconGo.position=this.defaultPos,v.set(this.defaultV2);var s=this.defaultV2,c=t.subtract(new t,o,this.defaultPos);w.set(this.defaultPos),this.closeTween=this.addTween(0,1,.95,(function(e,n){t.multiplyScalar(w,c,n),v.set(s).add2f(w.x,w.y);var o=Math.max(1-n+.1,.2);i.iconGo.scale=new t(o,o,o),i.iconGo.position=new t(v.x,v.y,0)})).easing(f.BACK_IN).call((function(e){i.closeTween=null,i.close()})).start()}else printLogErr("功能开启图标路径未找到："+this.cfg.falling_end);this.cfg.guide>0&&IS(d).openGuide(this.cfg.guide)},h.refreshScroll=function(i){this.closeTween&&null!=this.closeTween&&(this.closeTween.stop(),this.closeTween=null),this.panelGo.active=!0,this.iconGo.scale=t.ONE,this.iconGo.position=this.defaultPos,i&&(this.cfg=configPre_func.getDataByKey(i),this.loadIcon(this.icon,this.cfg.icon_atlas,this.cfg.icon),this.iconName.string=this.cfg.desc)},h.onBeforeClose=function(){},h.onDestroy=function(){},n}(h));n._RF.pop()}}}));

