System.register("chunks:///_virtual/DungeonControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleData.ts","./BattleDataFill.ts","./AudioMgr.ts","./StorageUtil.ts","./TimeUtil.ts","./ConfigGlobal.ts","./ObjectUtil.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./MessageView.ts","./ControlMgr.ts","./CrossWarSceneDataCache.ts","./FateDataCache.ts","./GuildWarControl.ts","./PvpControl.ts","./RoleDataCache.ts","./TeamControl.ts","./ChapterControl.ts","./ChapterDataCache.ts","./ChapterDefine.ts","./DungeonDefine.ts"],(function(e){"use strict";var t,n,a,_,o,r,i,u,d,s,c,l,p,g,h,f,E,b,v,m,T,D,C,y,M,w,L;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){a=e.ChapterType,_=e.PlayerData,o=e.BattleData},function(e){r=e.BattleDataFill},function(e){i=e.audioMgr},function(e){u=e.default},function(e){d=e.default},function(e){s=e.ConfigGlobal},function(e){c=e.default},function(e){l=e.default},function(e){p=e.ActivityType,g=e.ActivityState},function(e){h=e.default},function(e){f=e.controlMgr},function(e){E=e.CrossWarSceneDataCache},function(e){b=e.default},function(e){v=e.default},function(e){m=e.default},function(e){T=e.RoleDataCache},function(e){D=e.default},function(e){C=e.default},function(e){y=e.ChapterDataCache},function(e){M=e.ChapterEventDefine,w=e.DungeonDefine},function(e){L=e.DungeonEvent}],execute:function(){n._RF.push({},"0d1aewiRERFb5KYjSksX1hG","DungeonControl",void 0);e("default",function(){var e=n.prototype;function n(){netManager.addEventListener("dungeon.dungeon_list_s2c",this.on_dungeon_list_s2c,this),netManager.addEventListener("dungeon.dungeon_start_s2c",this.on_dungeon_start_s2c,this),netManager.addEventListener("dungeon.dungeon_battle_start_s2c",this.on_dungeon_battle_start_s2c,this),netManager.addEventListener("dungeon.dungeon_battle_more_start_s2c",this.on_dungeon_battle_more_start_s2c,this),netManager.addEventListener("dungeon.dungeon_result_s2c",this.on_dungeon_result_s2c,this),netManager.addEventListener("dungeon.dungeon_battle_result_s2c",this.on_dungeon_battle_result_s2c,this),netManager.addEventListener("dungeon.dungeon_type_s2c",this.on_dungeon_type_s2c,this),netManager.addEventListener("dungeon.dungeon_combat_s2c",this.dungeon_combat_s2c,this),netManager.addEventListener("dungeon.dungeon_update_s2c",this.on_dungeon_update_s2c,this),netManager.addEventListener("dungeon.dungeon_world_boss_info_s2c",this.on_dungeon_world_boss_info_s2c,this),netManager.addEventListener("dungeon.dungeon_world_boss_change_s2c",this.on_world_boss_change_s2c,this),netManager.addEventListener("dungeon.dungeon_sweep_s2c",this.on_dungeon_sweep_s2c,this),netManager.addEventListener("dungeon.dungeon_dc_entrance_info_s2c",this.on_dungeon_dc_entrance_info_s2c,this),netManager.addEventListener("dungeon.dungeon_dc_info_s2c",this.on_dungeon_dc_info_s2c,this),netManager.addEventListener("double_chapter.double_change_optional_reward_s2c",this.on_double_change_optional_reward_s2c,this),netManager.addEventListener("double_chapter.double_chapter_get_teammate_info_s2c",this.on_double_chapter_get_teammate_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_single_teammate_info_s2c",this.on_double_chapter_single_teammate_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_use_teammate_s2c",this.on_double_chapter_use_teammate_s2c,this),netManager.addEventListener("double_chapter.double_chapter_abandon_teammate_s2c",this.on_double_chapter_abandon_teammate_s2c,this),netManager.addEventListener("double_chapter.double_chapter_get_help_manage_info_s2c",this.on_double_chapter_get_help_manage_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_get_invite_help_setting_info_s2c",this.on_double_chapter_get_invite_help_setting_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_change_invite_setting_s2c",this.on_double_chapter_change_invite_setting_s2c,this),netManager.addEventListener("double_chapter.double_chapter_agree_invite_s2c",this.on_double_chapter_agree_invite_s2c,this),netManager.addEventListener("double_chapter.double_chapter_refuse_invite_s2c",this.on_double_chapter_refuse_invite_s2c,this),netManager.addEventListener("double_chapter.double_chapter_cancel_help_s2c",this.on_double_chapter_cancel_help_s2c,this),netManager.addEventListener("double_chapter.double_chapter_get_teammate_skill_delay_time_s2c",this.on_double_chapter_get_teammate_skill_delay_time_s2c,this),netManager.addEventListener("double_chapter.double_chapter_set_teammate_skill_delay_time_s2c",this.on_double_chapter_set_teammate_skill_delay_time_s2c,this),netManager.addEventListener("double_chapter.double_chapter_get_level_info_s2c",this.on_double_chapter_get_level_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_change_pos_info_s2c",this.on_double_chapter_change_pos_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_change_strategy_s2c",this.on_double_chapter_change_strategy_s2c,this),netManager.addEventListener("double_chapter.double_chapter_get_through_level_info_s2c",this.on_double_chapter_get_through_level_info_s2c,this),netManager.addEventListener("double_chapter.double_chapter_restart_level_s2c",this.on_double_chapter_restart_level_s2c,this),netManager.addEventListener("double_chapter.double_chapter_restart_chapter_s2c",this.on_double_chapter_restart_chapter_s2c,this),netManager.addEventListener("double_chapter.double_chapter_week_reward_s2c",this.on_double_chapter_week_reward_s2c,this),netManager.addEventListener("double_chapter.double_chapter_is_in_invite_list_s2c",this.on_double_chapter_is_in_invite_list_s2c,this),netManager.addEventListener("double_chapter.double_chapter_info_update_s2c",this.on_double_chapter_info_update_s2c,this),normalEvent.on(M.CHAPTER_BATTLE_RESUTL,this.signal_show_dialog,this),f.addControl(this)}return e.clear=function(){printLog("DungeonControl")},e.onLogin=function(){this.reqDungeonList(),netManager.send("dungeon.dungeon_type_c2s",{}),u.set("DefeatViewStamp",0),this.reqDoubleChapterEntranceInfo()},e.onReconnect=function(){},e.reqDungeonList=function(){netManager.send("dungeon.dungeon_list_c2s",{})},e.reqDungeonBattleStart=function(e,t){var n=IS(y);if(0==n.currentLoadType){n.battleData=null,i.playSound("common_jinrufuben");var a={type:e,level:t};n.chapterType=e,n.currentLoadType=e,n.curDungeonId=t,netManager.send("dungeon.dungeon_battle_start_c2s",a),normalEvent.emit(M.BATTLE_STATE,e,!0)}},e.reqDungeonBattleResult=function(e,t,n,a,_,o){void 0===a&&(a=0);var r=IS(y);netManager.send("dungeon.dungeon_battle_result_c2s",{type:e,dungeon_id:t,result:n,args:o,manual_operators:a,operators:_}),IS(C).reqEnterChapter(r.curChapterId)},e.reqDungeonMountResult=function(e,t,n,a,_,o){void 0===a&&(a=0);var r=IS(y);netManager.send("dungeon.dungeon_mount_battle_result_c2s",{dungeon_id:e,result:t,buffs:n,args:o,manual_operators:a,operators:_}),IS(C).reqEnterChapter(r.curChapterId)},e.reqDungeonBattleMoreStart=function(e,t){var n=IS(y);if(0==n.currentLoadType){n.battleData=null,i.playSound("common_jinrufuben");var a={type:e,level:t};n.chapterType=e,n.currentLoadType=e,n.curDungeonId=t,netManager.send("dungeon.dungeon_battle_more_start_c2s",a),normalEvent.emit(M.BATTLE_STATE,e,!0)}},e.reqDungeonCombat=function(e,t){var n={type:e,dungeon_id:t};netManager.send("dungeon.dungeon_combat_c2s",n)},e.reqFateDailyRewrad=function(){netManager.send("dungeon.dungeon_fate_daily_reward_c2s",{})},e.reqWingQuickPass=function(e){netManager.send("dungeon.dungeon_wing_quick_pass_c2s",{type:e})},e.reqWingReset=function(e){netManager.send("dungeon.dungeon_wing_reset_c2s",{type:e})},e.on_dungeon_list_s2c=function(e){for(var n,_=IS(y),o=t(e.dungeon_list);!(n=o()).done;){var r=n.value;_.updateDungeon(r),IS(y).curDungeonLevel[r.type]=r.max_level,r.type==a.Fate&&IS(b).UpdateRed()}},e.on_dungeon_update_s2c=function(e){var t=IS(y);e.dungeon.max_level!=t.getDungeonInfoByID(e.dungeon.type).max_level?t.curDungeonLevel[e.dungeon.type]=e.dungeon.max_level:t.curDungeonLevel[e.dungeon.type]=e.dungeon.cur_level,t.updateDungeon(e.dungeon),normalEvent.emit(M.DUNGEON_UPDATE,e.dungeon)},e.on_dungeon_battle_start_s2c=function(e){var t=IS(y);if(0==t.currentLoadType||t.currentLoadType==e.type){if(t.currentLoadType=0,0!=e.code)return IS(C).reqEnterChapter(0),void normalEvent.emit(M.BATTLE_STATE,e.type,!1);if(e.battle_checkout>0){var n=new o;n.chapterId=e.dungeon_id,n.chapterMode=0,n.battleCheckout=2,n.seed=e.random_seed,n.playerList[1]=new _(1),IS(m).setPlayerList(e.roles[0],n.playerList[1]),n.chapterType=e.type,t.battleData=n,(e.ext&&e.type==a.Fate||e.type==a.Wing||e.type==a.Wing2||e.type==a.Wing3)&&r.setChapterExt(n,e.ext)}else t.chapterType=e.type,t.battleData=t.createBattleData(e.type,e.dungeon_id,0),t.curDungeonId=e.dungeon_id,(e.ext&&e.type==a.Fate||e.type==a.Wing||e.type==a.Wing2||e.type==a.Wing3)&&r.setChapterExt(t.battleData,e.ext)}},e.on_dungeon_start_s2c=function(e){var t=IS(y);if(0==t.currentLoadType||t.currentLoadType==e.type){if(t.currentLoadType=0,0!=e.code)return IS(C).reqEnterChapter(0),void normalEvent.emit(M.BATTLE_STATE,e.type,!1);t.chapterType=e.type,t.battleData=t.createBattleData(e.type,e.dungeon_id,0),t.curDungeonId=e.dungeon_id,(e.data&&e.type==a.Fate||e.type==a.Wing||e.type==a.Wing2||e.type==a.Wing3)&&r.setChapterExt(t.battleData,e.data)}},e.on_dungeon_battle_more_start_s2c=function(e){var n=IS(y);if(0==n.currentLoadType||n.currentLoadType==e.type){if(n.currentLoadType=0,0!=e.code)return IS(C).reqEnterChapter(0),void normalEvent.emit(M.BATTLE_STATE,e.type,!1);var a=new o;a.chapterId=e.dungeon_id,a.chapterMode=0,a.seed=e.random_seed,a.battleCheckout=2;for(var i,u=t(e.roles);!(i=u()).done;){var d=i.value,s=new _(d.id);a.playerList[d.id]=s,IS(m).setPlayerList(d,s)}r.setChapterExt(a,e.ext),n.worldBossRank=e.rank_list,e.deal_role&&r.setDummy(a,e.deal_role,n.chapterType),a.chapterType=e.type,n.battleData=a}},e.on_dungeon_battle_result_s2c=function(e){var t=IS(y);t.chapterType=a.Main,t.curDungeonId=e.dungeon_id,2==e.code&&h.showBoxTip({tip:GetLanguage(200142),ensure:GetLanguage(200129),btnCnt:1,title:GetLanguage(200143)}),printLogErr(e.type,w.CHAPTER_TYPE_WORLDBOSS,e.type==w.CHAPTER_TYPE_WORLDBOSS),0==e.result&&(e.type==w.CHAPTER_TYPE_LEAGUE_SOLO?uiMgr.openView("SingleRewardView",e):e.type==w.CHAPTER_TYPE_MOUNT?uiMgr.openView("MountDungeonRewardView",e):e.type==w.CHAPTER_TYPE_WORLDBOSS&&uiMgr.openView("WorldBossRewardView",e))},e.on_dungeon_result_s2c=function(e){var t=IS(y);if(t.chapterType=a.Main,t.curDungeonId=e.dungeon_id,0==e.result){if(e.type==w.CHAPTER_TYPE_LEAGUE_SOLO)uiMgr.openView("SingleRewardView",e);else if(e.type==w.CHAPTER_TYPE_MOUNT)uiMgr.openView("MountDungeonRewardView",e);else if(e.type==w.CHAPTER_TYPE_WORLDBOSS)uiMgr.openView("WorldBossRewardView",e);else if(e.type==w.CHAPTER_TYPE_STRATEGY_ACTIVITY)uiMgr.openView("ActivityStrategyRewardView",e);else if(e.type==w.CHAPTER_TYPE_SEVEN_TRIAL)uiMgr.openView("ActivitySevenBossRewardView",e);else if(e.type==w.CHAPTER_TYPE_DARK_TRIAL)uiMgr.openView("WingDungeonView",1),uiMgr.openView("GoodsGetView",e.reward_list);else if(e.type==w.CHAPTER_TYPE_DARK_TRIAL_2)uiMgr.openView("WingDungeonView",2),uiMgr.openView("GoodsGetView",e.reward_list);else if(e.type==w.CHAPTER_TYPE_DARK_TRIAL_3)uiMgr.openView("WingDungeonView",3),uiMgr.openView("GoodsGetView",e.reward_list);else if(e.type==w.CHAPTER_TYPE_DOUBLE_LADDER){var n=e.reward_list;n&&n.length>0?(uiMgr.openView("DoubleChapterMainView"),uiMgr.openView("DoubleChapterGoodsGetView",n)):(uiMgr.openView("DoubleChapterMainView"),uiMgr.openView("DoubleChapterLevelMainView"),uiMgr.openView("DoubleChapterFightResultView",e.ext))}}else if(1==e.result)if(e.type==w.CHAPTER_TYPE_STRATEGY_ACTIVITY){var _=IS(y).cacheFailResult;if(_&&_.type==a.StrategyActivity)IS(y).cacheFailResult=null,this.signal_show_dialog(_.id,_.type,_.result,_.mode,_.endTime,!0);else{var o=IS(l).GetActivityInfo(p.Strategy);o&&o.state==g.Open&&(uiMgr.openView("ActivityStrategyView"),uiMgr.openView("ActivityStrategyDungeonView"))}}else e.type==w.CHAPTER_TYPE_DOUBLE_LADDER&&(uiMgr.openView("DoubleChapterMainView"),uiMgr.openView("DoubleChapterLevelMainView"),uiMgr.openView("DoubleChapterDefeatView"))},e.on_dungeon_type_s2c=function(e){if(0==IS(E).currenSceneType){var t=IS(y);if(t.chapterType=e.type,e.type==a.Main)t.curChapterId=e.dungeon_id,IS(C).reqEnterChapter(e.dungeon_id);else{if(t.curDungeonId=e.dungeon_id||1,e.type==a.Team3)return void IS(D).reqTeamCombat();if(e.type==a.Team20)return void IS(v).reqGuildBossEnter();if(e.type==a.WorldBoss)return void IS(C).reqEnterChapter(0);IS(C).reqEnterChapter(0)}}},e.dungeon_combat_s2c=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){})),e.getDefeatPopCache=function(){var e,t="DefeatViewPopTime"+IS(T).GetRoleId(),n=null!=(e=u.get(t))?e:"0";return Number(n)},e.setDefeatPopCache=function(){var e="DefeatViewPopTime"+IS(T).GetRoleId();u.set(e,d.serverTime)},e.signal_show_dialog=function(e,t,n,_,o,r){var i;if(void 0===r&&(r=!1),!(IS(T).guideId>0)){var u=[a.Main,a.Coin,a.Diamond,a.Legacy,a.Mount,a.StrategyActivity,a.ArtifactGem],c=((i={})[a.StrategyActivity]=!0,i);if(u.includes(t)){if(0==n)return;if(uiMgr.getOpenView("MultiWaitView"))return;if(IS(y).curChapterId<=s.defeat_tips)return void(uiMgr.checkBanDefeatView()||(uiMgr.openView("DungeonDefeatView",t),this.setDefeatPopCache()));if(IS(y).curChapterId<=1e4&&d.serverTime-this.getDefeatPopCache()>28800)return void(uiMgr.checkBanDefeatView()||(uiMgr.openView("DungeonDefeatView",t),this.setDefeatPopCache()));if(d.serverTime-this.getDefeatPopCache()>43200)return void(uiMgr.checkBanDefeatView()||(uiMgr.openView("DungeonDefeatView",t),this.setDefeatPopCache()));t!=a.Main&&(o?h.showFlyTip(GetLanguage(200144)):h.showFlyTip(GetLanguage(200145))),IS(y).cacheFailResult=null,c[t]&&!r&&(IS(y).cacheFailResult={id:e,type:t,result:n,mode:_,endTime:o})}}},e.reqWorldBossInfo=function(){netManager.send("dungeon.dungeon_world_boss_info_c2s",{})},e.on_dungeon_world_boss_info_s2c=function(e){IS(y).worldBossInfo=e,normalEvent.emit(L.TYPE_WORLD_BOSS_INFO_CHANGE)},e.reqWorldBossInfoChange=function(){netManager.send("dungeon.dungeon_world_boss_change_c2s",{})},e.on_world_boss_change_s2c=function(e){normalEvent.emit(L.TYPE_WORLD_BOSS_INFO_UPDATE)},e.reqSweep=function(e,t,n){netManager.send("dungeon.dungeon_sweep_c2s",{type:e,dungeon_id:t,sweep_num:n})},e.on_dungeon_sweep_s2c=function(e){if(e.dungeon_id==w.CHAPTER_TYPE_MOUNT){var t={type:e.dungeon_id,reward_list:e.reward_list,ext:[{k:6,v:0},{k:1,v:100}]};uiMgr.openView("MountDungeonRewardView",t)}else e.dungeon_id==w.CHAPTER_TYPE_GEM||uiMgr.openView("GoodsGetView",e.reward_list)},e.reqDoubleChapterEntranceInfo=function(){netManager.send("dungeon.dungeon_dc_entrance_info_c2s",{})},e.on_dungeon_dc_entrance_info_s2c=function(e){var t=IS(y).checkDounleChapterOpen();IS(y).doubleChapterEntraceInfo=c.clone(e),IS(y).checkDounleChapterOpen()||IS(y).tryCloseChapterViews(t),normalEvent.emit(M.DOUBLE_CHAPTER_ENTRANCE_INFO_BACK)},e.reqDoubleChapterInfo=function(){netManager.send("dungeon.dungeon_dc_info_c2s",{})},e.on_dungeon_dc_info_s2c=function(e){IS(y).doubleChapterInfo=c.clone(e),normalEvent.emit(M.DOUBLE_CHAPTER_INFO_BACK)},e.reqDoubleChangeOptionalReward=function(e){netManager.send("double_chapter.double_change_optional_reward_c2s",{choose_reward:e})},e.on_double_change_optional_reward_s2c=function(e){0==e.code&&(c.isEmpty(IS(y).doubleChapterEntraceInfo)||(IS(y).doubleChapterEntraceInfo.choose_reward_list=e.choose_reward,normalEvent.emit(M.DOUBLE_CHAPTER_REWARD_UPDATE)))},e.reqDoubleChapterGetTeammateInfo=function(){netManager.send("double_chapter.double_chapter_get_teammate_info_c2s",{})},e.on_double_chapter_get_teammate_info_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_GET_TEAMMATE_INFO_BACK,e)},e.reqDoubleChapterSingleTeammateInfo=function(e){netManager.send("double_chapter.double_chapter_single_teammate_info_c2s",{id:e})},e.on_double_chapter_single_teammate_info_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_SINGLE_TEAMMATE_INFO_BACK,e)},e.reqDoubleChapterUseTeammate=function(e){netManager.send("double_chapter.double_chapter_use_teammate_c2s",{id:e})},e.on_double_chapter_use_teammate_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_USE_TEAMMATE_CHANGE,e.id)},e.reqDoubleChapterAbandonTeammate=function(e){netManager.send("double_chapter.double_chapter_abandon_teammate_c2s",{id:e})},e.on_double_chapter_abandon_teammate_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_ABANDON_TEAMMATE_CHANGE,e.id)},e.reqDoubleChapterGetHelpManageInfo=function(){netManager.send("double_chapter.double_chapter_get_help_manage_info_c2s",{})},e.on_double_chapter_get_help_manage_info_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_GET_HELP_MANAGE_INFO_BACK,e)},e.reqDoubleChapterGetInviteHelpSettingInfo=function(){netManager.send("double_chapter.double_chapter_get_invite_help_setting_info_c2s",{})},e.on_double_chapter_get_invite_help_setting_info_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_INVATE_SETTING_BACK,e.setting)},e.reqDoubleChapterChangeInviteSetting=function(e){netManager.send("double_chapter.double_chapter_change_invite_setting_c2s",{setting:e})},e.on_double_chapter_change_invite_setting_s2c=function(e){},e.reqDoubleChapterAgreeInvite=function(e){netManager.send("double_chapter.double_chapter_agree_invite_c2s",{apply_id:e})},e.on_double_chapter_agree_invite_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_AGREE_INVITE,e.apply_id)},e.reqDoubleChapterRefuseInvite=function(e){netManager.send("double_chapter.double_chapter_refuse_invite_c2s",{apply_id:e})},e.on_double_chapter_refuse_invite_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_REFUSE_INVITE,e.apply_id)},e.reqDoubleChapterCancelHelp=function(e){netManager.send("double_chapter.double_chapter_cancel_help_c2s",{help_id:e})},e.on_double_chapter_cancel_help_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_CANCEL_HELP,e.help_id)},e.reqDoubleChapterGetTeammateSkillDelayTime=function(e){netManager.send("double_chapter.double_chapter_get_teammate_skill_delay_time_c2s",{check_id:e})},e.on_double_chapter_get_teammate_skill_delay_time_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_GET_TEAMMATE_SKILL_DELAY_BACK,e)},e.reqDoubleChapterSetTeammateSkillDelayTime=function(e,t){netManager.send("double_chapter.double_chapter_set_teammate_skill_delay_time_c2s",{target_id:e,set_delay_time:t})},e.on_double_chapter_set_teammate_skill_delay_time_s2c=function(e){},e.reqDoubleChapterGetLevelInfo=function(e){netManager.send("double_chapter.double_chapter_get_level_info_c2s",{level:e})},e.on_double_chapter_get_level_info_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_GET_LEVEL_INFO_BACK,e)},e.reqDoubleChapterChangePosInfo=function(e){netManager.send("double_chapter.double_chapter_change_pos_info_c2s",{battle_pos:e})},e.on_double_chapter_change_pos_info_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_LEVEL_INFO_POS_UPDATE,e.battle_pos)},e.reqDoubleChapterChangeStrategy=function(e){netManager.send("double_chapter.double_chapter_change_strategy_c2s",{strategy_id:e})},e.on_double_chapter_change_strategy_s2c=function(e){0==e.code&&normalEvent.emit(M.DOUBLE_CHAPTER_LEVEL_INFO_STRATEGY_UPDATE,e.strategy_id)},e.reqDoubleChapterGetThroughLevelInfo=function(e){netManager.send("double_chapter.double_chapter_get_through_level_info_c2s",{level:e})},e.on_double_chapter_get_through_level_info_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_GET_THROUGH_INFO_BACK,e)},e.reqDoubleChapterRestartLevel=function(e){netManager.send("double_chapter.double_chapter_restart_level_c2s",{level:e})},e.on_double_chapter_restart_level_s2c=function(e){e.code},e.reqDoubleChapterRestartChapter=function(){netManager.send("double_chapter.double_chapter_restart_chapter_c2s",{})},e.on_double_chapter_restart_chapter_s2c=function(e){},e.on_double_chapter_week_reward_s2c=function(e){uiMgr.openView("DoubleChapterResultView",e)},e.reqDoubleChapterIsInInvateList=function(e){netManager.send("double_chapter.double_chapter_is_in_invite_list_c2s",{check_id:e})},e.on_double_chapter_is_in_invite_list_s2c=function(e){normalEvent.emit(M.DOUBLE_CHAPTER_CHECK_IN_INVATE_BACK,e)},e.on_double_chapter_info_update_s2c=function(e){for(var t in e)if(e[t]&&(IS(y).doubleChapterInfo[t]=e[t],"now_dc_level"==t)){for(var n=e[t],a=configDouble_ladder_chapter.getDatas(),_=0,o=0;o<a.length;o++)n>a[o].id&&a[o].final_reward_times&&a[o].final_reward_times>_&&(_=a[o].final_reward_times);IS(y).doubleChapterEntraceInfo.max_reward_num!=_&&(IS(y).doubleChapterEntraceInfo.max_reward_num=_,normalEvent.emit(M.DOUBLE_CHAPTER_ENTRANCE_INFO_BACK))}normalEvent.emit(M.DOUBLE_CHAPTER_INFO_UPDATE)},n}());n._RF.pop()}}}));

