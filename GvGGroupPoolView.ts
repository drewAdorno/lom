System.register("chunks:///_virtual/GvGGroupPoolView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GuildPinItem.ts","./UIList.ts","./NodeUtil.ts","./StringUtil.ts","./BaseView.ts","./GvGControl.ts","./GvGDataCache.ts","./GvGDefine.ts"],(function(t){"use strict";var n,i,e,o,r,a,s,u,l,c,h,d,g,f,v;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.Button,o=t.ScrollView,r=t.js,a=t.Sprite,s=t.Label},function(t){u=t.GuildPinItem},function(t){l=t.ListItem},function(t){c=t.default},function(t){h=t.default},function(t){d=t.BaseView},function(t){g=t.default},function(t){f=t.GvGDataCache},function(t){v=t.GvGEventDefine}],execute:function(){i._RF.push({},"5c043DGnetCNYTHNEIIuh/Y","GvGGroupPoolView",void 0);t("default",function(t){function i(){var n;return(n=t.call(this)||this).rankingTitleItems=void 0,n.imgRanking=void 0,n.txtNum=void 0,n.curRanking=void 0,n.infoScroll=void 0,n.curInfo=void 0,n.rankingItems=void 0,n.name="GvGGroupPoolView",n.url="ui/module/gvg/GvGGroupPoolView",n}n(i,t);var u=i.prototype;return u.onInit=function(){var t=this,n=this.findChild("imgMask");this.addComponentCallbackListener(n,e.EventType.CLICK,(function(){t.onMaskClick()}));var i=this.findChild("content/btnClose");this.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.close()}));var u=this.findChildComponent("content/ScrollView",o);this.infoScroll=this.addUIList(u,k),this.rankingTitleItems=new Array;for(var l=1;l<=4;l++)this.rankingTitleItems.push({ranking:l,node:this.findChild(r.formatStr("content/imgJbTitle/title%s",l))});this.imgRanking=this.findChildComponent("content/imgJb",a),this.txtNum=this.findChildComponent("content/txtNum",s),this.rankingItems=[];for(var h=function(n){var i=t.findChild(r.formatStr("content/bottomBtns/btnRanking%s",n));t.addComponentCallbackListener(i,e.EventType.CLICK,(function(){t.curRanking!=n&&(t.curRanking=n,t.updateRanking())})),t.rankingItems.push({node:i,nodeSelect:c.findChild(i,"imgSelect"),ranking:n})},d=1;d<=4;d++)h(d)},u.registerUpdateHandler=function(){this.addEvent(v.GVG_RANK_LIST_BACK,this.onGvGRankListBack,this)},u.onMaskClick=function(){this.close()},u.onAfterOpen=function(){this.curRanking=IS(f).curRanking||1,this.updateRanking()},u.updateRanking=function(){for(var t=0;t<this.rankingItems.length;t++){var n=this.rankingItems[t];n.nodeSelect.active=n.ranking==this.curRanking}IS(g).reqGvGRankList(this.curRanking);var i=configFamiliybrawl_rank.getDataByKey(this.curRanking);this.updateRankingTitleShow(),this.loadIcon(this.imgRanking,"icon_gvg",i.rank_picture)},u.updateRankingTitleShow=function(){for(var t=0;t<this.rankingTitleItems.length;t++)this.rankingTitleItems[t].node.active=this.rankingTitleItems[t].ranking==this.curRanking},u.updateInfo=function(){this.infoScroll.datas=this.curInfo.rank_list,this.txtNum.string=h.formatStrWithMirrorDeal(GetLanguage(201587),this.curInfo.num)},u.onBeforeClose=function(){this.curInfo=null},u.onDestroy=function(){},u.onGvGRankListBack=function(t){t.ranking==this.curRanking&&(this.curInfo=t,this.updateInfo())},i}(d));var k=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).guildFlag=void 0,n.txtGuildName=void 0,n.txtServer=void 0,n.txtFight=void 0,n}n(i,t);var e=i.prototype;return e.onInit=function(){this.guildFlag=new u(this.view,c.findChild(this.node,"GuildPinItem")),this.txtGuildName=c.findChildComponent(this.node,"txtGuildName",s),this.txtServer=c.findChildComponent(this.node,"txtServer",s),this.txtFight=c.findChildComponent(this.node,"txtFight",s)},e.onRender=function(t,n){this.guildFlag.SetItem(t.guild_flag),this.txtGuildName.string=t.guild_name,this.txtServer.string=r.formatStr("[s%s]",t.serv_id),this.txtFight.string=h.GetNumString(t.power)},i}(l);i._RF.pop()}}}));

