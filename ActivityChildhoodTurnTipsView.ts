System.register("chunks:///_virtual/ActivityChildhoodTurnTipsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StorageUtil.ts","./index57.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./HorseCarnivalControl.ts","./HorseCarnivalDataCache.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,a,c,s,r,d,l,u,f,h,v,p,C;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,a=t.js,c=t.Sprite,s=t.Label},function(t){r=t.default},function(t){d=t.default},null,function(t){l=t.RoleDataCache},function(t){u=t.default},function(t){f=t.ActivityEventDefine,h=t.ActivityType},function(t){v=t.default},function(t){p=t.HorseCarnivalDataCache},function(t){C=t.BaseView}],execute:function(){n._RF.push({},"ba38aFWz+dEzolrskq5B0IS","ActivityChildhoodTurnTipsView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).itemList=[],i.lockNode=void 0,i.unlockNode=void 0,i.cfg=void 0,i.name="ActivityChildhoodTurnTipsView",i.url="ui/module/childhood/ActivityChildhoodTurnTipsView",i}i(n,t);var C=n.prototype;return C.onInit=function(){var t=this,i=this.findChild("imgMask");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()})),this.lockNode=this.findChild("view/lock"),this.unlockNode=this.findChild("view/unlock");for(var e=function(i){var e=r.findChild(t.node,a.formatStr("view/item/item%s",i)),n={itemGo:e,select:r.findChild(e,"select"),icon:r.findChildComponent(e,"imgIcon",c),name:r.findChildComponent(e,"name",s),index:i};t.addComponentCallbackListener(e,o.EventType.CLICK,(function(){t.setSelect(i)})),t.itemList[i]=n},n=1;n<=3;n++)e(n)},C.registerUpdateHandler=function(){this.addEvent(f.OnHorseCarnivalUpdate,this.updateInfo,this)},C.onAfterOpen=function(){var t=IS(u).GetActivityInfo(h.ChildhoodTurn),i=configMount_draw.getDatas();for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o.type==t.type&&o.group_id==t.roundCfg.group_id&&4==o.quality){this.cfg=o;break}}for(var a,c=e(this.cfg.reward_replace);!(a=c()).done;){var s=a.value,r=this.itemList[s[0]],v=configGoods.getDataByKey(s[1][0]);r.name.string=v.name,this.loadIcon(r.icon,v.icon_group,v.icon),r.select.active=!1}if(this.updateInfo(),this.unlockNode.active){var p,C=String(t.id)+"#"+String(t.round),y="ActivityChildhoodSelectRed"+IS(l).GetRoleId();(null!=(p=d.get(y))?p:"")!=C&&(d.set(y,C),IS(u).UpdateMainRedByActType(t.type),normalEvent.emit(f.OnHorseCarnivalUpdate))}},C.onBeforeClose=function(){},C.onDestroy=function(){},C.setSelect=function(t){this.lockNode.active||IS(v).send_24_66(h.ChildhoodTurn,this.cfg.id,t)},C.updateInfo=function(){var t,i,e=null!=(t=null==(i=IS(p).getInfo(h.ChildhoodTurn).choose_list[this.cfg.id])?void 0:i[1])?t:0;for(var n in this.lockNode.active=0==e,this.unlockNode.active=e>0,this.itemList)if(this.itemList.hasOwnProperty(n)){var o=this.itemList[n];o.select.active=e==o.index}},n}(C));n._RF.pop()}}}));

