System.register("chunks:///_virtual/CustomeHeadDataCache.ts",["cc","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./CustomeHeadDefine.ts"],(function(t){"use strict";var e,o,a,n,i,s;return{setters:[function(t){e=t.cclegacy},function(t){o=t.default},function(t){a=t.RoleDataCache},function(t){n=t.ClientData,i=t.RoleEventDefine},function(t){s=t.CustomeHeadDefine}],execute:function(){e._RF.push({},"702c99tT/1Hq4tNJYnWdO9d","CustomeHeadDataCache",void 0);t("CustomeHeadDataCache",function(){function t(){this.customeHead={},this.redList={},normalEvent.on(i.ROLE_CLIENT_DATA,this.UpdateRed,this)}var e=t.prototype;return e.clear=function(){throw new Error("Method not implemented.")},e.UpdateCustomeHeadInfo=function(t){this.customeHead={};for(var e=0;e<t.photo_list.length;e++){var o=t.photo_list[e];this.customeHead[o.pos]=o}this.UpdateRed(),normalEvent.emit(s.UpdateHeadInfo)},e.UpdateCustomeHeadState=function(t){for(var e=0;e<t.photo.length;e++){var o=t.photo[e];this.customeHead[o.pos]=o}this.UpdateRed(),normalEvent.emit(s.UpdateHeadInfo)},e.AddPhoto=function(t){this.customeHead[t.photo.pos]=t.photo,this.UpdateRed(),normalEvent.emit(s.UpdateHeadInfo)},e.DeletePhoto=function(t){for(var e in this.customeHead){if(this.customeHead[e].id==t.id){delete this.customeHead[e];break}}this.UpdateRed(),normalEvent.emit(s.UpdateHeadInfo)},e.GetPhotoInfo=function(t){return this.customeHead[t]},e.UpdateRed=function(t){if(!t||t[n.CustomeHeadCheckRed]){var e=IS(a).getClientDataInfo(n.CustomeHeadCheckRed),o={};if(e)for(var i in e)o[i]=!0;for(var d in this.redList={},this.customeHead){var r=this.customeHead[d];1!=r.state||o[r.id]||(this.redList[r.id]=!0)}normalEvent.emit(s.UpdateHeadRed)}},e.GetIsRed=function(){for(var t in this.redList)if(this.redList[t])return 1;return 0},e.GetIsRedById=function(t){return this.redList[t]},e.GetRedList=function(){return this.redList},e.SendCheckRed=function(t){var e=IS(a).getClientDataInfo(n.CustomeHeadCheckRed),i=[],s={};if(e)for(var d in e)i.push({k:d,s:e[d]}),s[d]=!0;var r=!1;for(var u in this.customeHead){var c=this.customeHead[u];1!=c.state||s[c.id]||t&&c.id!=t||(r=!0,i.push({k:c.id.toString(),s:"1"}))}r&&IS(o).send_3_29_All(n.CustomeHeadCheckRed,0,i)},t}());e._RF.pop()}}}));

