System.register("chunks:///_virtual/MountDungeonRewardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./index57.ts","./ChapterDataCache.ts","./BaseView.ts"],(function(e){"use strict";var t,i,n,o,r,a,d,s,h,c;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.Button,r=e.sys,a=e.Layout,d=e.Label},function(e){s=e.ItemGrid},null,function(e){h=e.ChapterDataCache},function(e){c=e.BaseView}],execute:function(){n._RF.push({},"e79acWA/dJAVYUnZ2a3VOcQ","MountDungeonRewardView",void 0);e("default",function(e){function n(){var t;return(t=e.call(this)||this).rewardList=void 0,t.txtRewardType=void 0,t.nodeReward=void 0,t.data=void 0,t.is_new=!1,t.name="MountDungeonRewardView",t.url="ui/module/dungeon/MountDungeonRewardView",t.poolTime=3e3,t}t(n,e);var c=n.prototype;return c.onInit=function(){var e=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,o.EventType.CLICK,(function(){e.close()})),this.nodeReward=this.findChild("root/Node/Layout"),this.txtRewardType=this.findChild("root/Node/Label"),r.uiMirror&&(this.nodeReward.getComponent(a).horizontalDirection=1)},c.onAfterOpen=function(){this.data=this.openArgs[0];var e=configMount_chapter.getDatas(),t=e[e.length-1].index,i=IS(h).getDungeonInfoByID(this.data.type);i.cur_level==i.max_level-1&&i.cur_level<t&&(this.is_new=!0),this.rewardList=this.data.reward_list,this.refreshRewardTips(),this.refreshReward()},c.registerUpdateHandler=function(){},c.refreshReward=function(){var e=this.findChild("root/Node/item");this.nodeReward.removeAllChildren();for(var t,n=i(this.rewardList);!(t=n()).done;){var o=t.value,r=nodeInstantiate.instantiate(e);r.setParent(this.nodeReward),new s(this,r).SetItemId(o.gtid,o.num)}},c.refreshRewardTips=function(){var e=this.findChild("root/Node/nodeDefence/txtDesc1"),t=this.findChild("root/Node/nodeDefence/txtDesc2"),n=this.findChild("root/Node/nodeDefence/txtNum"),o=this.findChild("root/Node/txtNum");this.findChild("root/Node/nodeDefence").active=!0;for(var r,a=0,s=i(this.data.ext);!(r=s()).done;){var h=r.value,c=h.k,u=h.v;6==c?(a=u,n.getComponent(d).string=u+"%"):1==c&&(o.getComponent(d).string="+"+u+"%")}n.active=!0,e.active=!0,t.active=!1,this.txtRewardType.active=!1,a>=100?o.active=!1:0==a&&(n.active=!1,e.active=!1,t.active=!0,this.is_new&&(this.txtRewardType.active=!0))},c.onBeforeClose=function(){this.is_new=!1},c.onDestroy=function(){},n}(c));n._RF.pop()}}}));

