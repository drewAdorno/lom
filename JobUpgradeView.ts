System.register("chunks:///_virtual/JobUpgradeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./StringUtil.ts","./index57.ts","./ItemIcon.ts","./ConfigGlobal.ts","./MessageView.ts","./RoleDataCache.ts","./RoleDefine.ts","./BaseView.ts"],(function(i){"use strict";var t,e,o,n,s,l,a,c,r,d,m,h,f,v,u,p;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,o=i.Button,n=i.Sprite,s=i.Label,l=i.RichText,a=i.js,c=i.sys},function(i){r=i.default},function(i){d=i.default},null,function(i){m=i.IconAseetType},function(i){h=i.ConfigGlobal},function(i){f=i.default},function(i){v=i.RoleDataCache},function(i){u=i.PlayerAttr},function(i){p=i.BaseView}],execute:function(){e._RF.push({},"715ecSVq2BMfZhc8B8+bpsr","JobUpgradeView",void 0);i("default",function(i){function e(){var t;return(t=i.call(this)||this).icon=void 0,t.txtName1=void 0,t.txtName2=void 0,t.imgFrame=void 0,t.imgIcon=void 0,t.activeSkillName=void 0,t.activeSkillDesc=void 0,t.passiveList=[],t.curJob=0,t.name="JobUpgradeView",t.url="ui/module/role/JobUpgradeView",t}t(e,i);var p=e.prototype;return p.onInit=function(){var i=this,t=this.findChild("imgMask");this.addComponentCallbackListener(t,o.EventType.CLICK,(function(){i.close()})),this.icon=this.findChildComponent("icon",n),this.txtName1=this.findChildComponent("name1",s),this.txtName2=this.findChildComponent("name2",s),this.imgFrame=r.findChildComponent(this.node,"skill/active/frame",n),this.imgIcon=r.findChildComponent(this.node,"skill/active/icon",n),this.activeSkillName=r.findChildComponent(this.node,"skill/active/name",s),this.activeSkillDesc=r.findChildComponent(this.node,"skill/active/desc/view/desc",l);for(var e=h.job_passive_skill,c=function(t){var l=r.findChild(i.node,a.formatStr("skill/passive/item%s",t+1)),c={node:l,frame:r.findChildComponent(l,"frame",n),icon:r.findChildComponent(l,"icon",n),txtLev:r.findChildComponent(l,"lev",s),mask:r.findChild(l,"mask"),levLimit:0,skillId:0,skillLev:0};i.addComponentCallbackListener(l,o.EventType.CLICK,(function(){if(0==c.skillId)f.showFlyTip(d.formatStrWithMirrorDeal(GetLanguage(200110),e[t]));else{var i=configSkill_level.getDataByKeys("id",c.skillId,"level",c.skillLev);uiMgr.openView("JobSkillTipsView",d.formatStr.apply(d,[i.desc].concat(i.desc_parm)),c.node)}})),i.passiveList.push(c)},m=0;m<5;m++)c(m)},p.registerUpdateHandler=function(){},p.onAfterOpen=function(){this.curJob=this.openArgs[0];var i=this.openArgs[1],t=configJobs.getDataByKey(this.curJob);2==IS(v).GetRoleAttr(u.ROLE_ATTR_GENDER)&&5==t.change_times?(this.loadIcon(this.icon,"icon_job",a.formatStr("job_%s_2",this.curJob),null,m.ICON_SPRITE),this.icon.node.setScale(1.5,1.5),this.icon.node.setPosition(c.uiMirror?-t.position[2]-15:t.position[2]+15,t.position[3]+250,0)):(this.loadIcon(this.icon,"icon_job",a.formatStr("job_%s",this.curJob),null,m.ICON_SPRITE),this.icon.node.setScale(1.5,1.5),this.icon.node.setPosition(c.uiMirror?-t.position[0]-15:t.position[0]+15,t.position[1]+250,0)),this.txtName1.string=configJobs.getDataByKey(i).name,this.txtName2.string=t.name,this.updateSkill()},p.onBeforeClose=function(){},p.onDestroy=function(){},p.updateSkill=function(){var i=configJobs.getDataByKey(this.curJob),t=configSkill.getDataByKey(i.skill[0][1][0]),e=IS(v).GetLevel(),o=configSkill_level.getDataByKeys("id",t.id,"level",e);this.activeSkillName.string=t.name,this.activeSkillDesc.string=a.formatStr("<b><color=#304231>%s</color></b>",d.formatStr.apply(d,[o.desc].concat(o.desc_parm))),this.loadIcon(this.imgFrame,"icon_skill",a.formatStr("common_ICON_jinengkuang0%s",t.quality)),this.loadIcon(this.imgIcon,"icon_skill",t.icon);for(var n=0;n<5;n++){var s=this.passiveList[n];if(n<i.passive_skill.length){s.levLimit=i.passive_skill[n][0],s.skillId=i.passive_skill[n][1][0],s.skillLev=i.passive_skill[n][1][1];var l=configSkill.getDataByKey(s.skillId);s.icon.node.active=!0,this.loadIcon(s.frame,"icon_skill",a.formatStr("common_ICON_jinengkuang0%s",l.quality)),this.loadIcon(s.icon,"icon_skill",l.icon,null,m.ICON_SPRITE),s.txtLev.string=a.formatStr("Lv.%s",s.levLimit),e<s.levLimit?(s.mask.active=!0,s.txtLev.node.active=!0):(s.mask.active=!1,s.txtLev.node.active=!1)}else s.levLimit=0,s.skillId=0,s.skillLev=0,this.loadIcon(s.frame,"icon_skill","common_ICON_jinengwenhao"),s.icon.node.active=!1,s.mask.active=!0,s.txtLev.node.active=!1}},e}(p));e._RF.pop()}}}));

