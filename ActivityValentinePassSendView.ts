System.register("chunks:///_virtual/ActivityValentinePassSendView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./index57.ts","./PayDataCache.ts","./PayDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,s,n,a,c,o,h,r,l;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,n=t.Button,a=t.Label,c=t.RichText},function(t){o=t.default},null,function(t){h=t.default},function(t){r=t.PayEventDefine},function(t){l=t.BaseView}],execute:function(){s._RF.push({},"8fa51C1arFNRrSDQSWy8OLJ","ActivityValentinePassSendView",void 0);t("default",function(t){function s(){var e;return(e=t.call(this)||this).txtDesc=void 0,e.price=void 0,e.Info=void 0,e.payCfg=void 0,e.item0=void 0,e.item1=void 0,e.select0=void 0,e.select1=void 0,e.priceDesc0=void 0,e.priceDesc1=void 0,e.curPassId=19,e.passSendCfg=[],e.name="ActivityValentinePassSendView",e.url="ui/module/valentine/ActivityValentinePassSendView",e}e(s,t);var l=s.prototype;return l.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var i=this.findChild("view/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()})),this.price=this.findChildComponent("view/btnBuy/txtPrice",a);var s=this.findChild("view/btnBuy");this.addComponentCallbackListener(s,n.EventType.CLICK,(function(){IS(h).Pay(t.payCfg.id)})),this.txtDesc=this.findChildComponent("view/txtDesc",c),this.item0=this.findChild("view/present/item0"),this.addComponentCallbackListener(this.item0,n.EventType.CLICK,(function(){t.switchSelect(0)})),this.item1=this.findChild("view/present/item1"),this.addComponentCallbackListener(this.item1,n.EventType.CLICK,(function(){t.switchSelect(1)})),this.priceDesc0=this.findChildComponent("view/present/item0/num",a),this.priceDesc1=this.findChildComponent("view/present/item1/num",a),this.select0=this.findChild("view/present/item0/select"),this.select1=this.findChild("view/present/item1/select")},l.registerUpdateHandler=function(){this.addEvent(r.PAY_RECHARGE_SUCCESS,this.close,this)},l.onAfterOpen=function(){this.Info=this.openArgs[0],this.passSendCfg=[];for(var t,e=configPay_mall.getDatas(),s=i(e);!(t=s()).done;){var n=t.value;n.conditon.length>0&&"fairybattlepass"==n.conditon[0]&&n.conditon[1]==this.curPassId&&2==n.conditon[2]&&this.passSendCfg.push(n)}this.passSendCfg.sort((function(t,e){return t.price-e.price})),this.priceDesc0.string=IS(h).GetPriceString(this.passSendCfg[0].cost_level),this.priceDesc1.string=IS(h).GetPriceString(this.passSendCfg[1].cost_level),this.item0.active=!this.Info.ta_pay_status_2,this.item1.active=!this.Info.ta_pay_status,this.switchSelect(0)},l.switchSelect=function(t){if(this.item0.active=!this.Info.ta_pay_status_2,this.item1.active=!this.Info.ta_pay_status,this.Info.ta_pay_status&&this.Info.ta_pay_status_2)this.close();else{if(0==t){if(this.Info.ta_pay_status_2)return void this.switchSelect(1);this.select0.active=!0,this.select1.active=!1}else{if(this.Info.ta_pay_status)return void this.switchSelect(0);this.select0.active=!1,this.select1.active=!0}this.payCfg=this.passSendCfg[t];var e=t?GetLanguage(204332):GetLanguage(204333);this.txtDesc.string=o.formatStr(GetLanguage(204330),this.Info.ta_name,e),this.price.string=IS(h).GetPriceString(this.payCfg.cost_level)}},l.onBeforeClose=function(){this.switchSelect(0)},l.onDestroy=function(){},s}(l));s._RF.pop()}}}));

