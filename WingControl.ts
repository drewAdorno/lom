System.register("chunks:///_virtual/WingControl.ts",["cc","./BattleData.ts","./UnitMgr.ts","./index57.ts","./BagDefine.ts","./ChapterDataCache.ts","./ChapterDefine.ts","./ControlMgr.ts","./RoleDefine.ts","./WingDataCache.ts","./UIDefine.ts"],(function(n){"use strict";var e,t,i,_,a,s,c,o,g,l,r;return{setters:[function(n){e=n.cclegacy},function(n){t=n.ChapterType},function(n){i=n.UnitMgr},null,function(n){_=n.GoodsType,a=n.BagEventDefine},function(n){s=n.ChapterDataCache},function(n){c=n.ChapterEventDefine},function(n){o=n.controlMgr},function(n){g=n.RoleEventDefine},function(n){l=n.WingDataCache},function(n){r=n.OpenFunction}],execute:function(){e._RF.push({},"08517ToRThNK4akEZ5n8Es3","WingControl",void 0);n("default",function(){var n=e.prototype;function e(){netManager.addEventListener("wing.wing_info_s2c",this.on_wing_info_s2c,this),netManager.addEventListener("wing.wing_feather_level_up_s2c",this.on_wing_feather_level_up_s2c,this),netManager.addEventListener("wing.wing_use_s2c",this.on_wing_use_s2c,this),netManager.addEventListener("wing.wing_talent_lev_up_s2c",this.on_wing_talent_lev_up_s2c,this),netManager.addEventListener("wing.wing_talent_reset_s2c",this.on_wing_talent_reset_s2c,this),netManager.addEventListener("wing.wing_skill_use_s2c",this.on_wing_skill_use_s2c,this),netManager.addEventListener("wing.wing_collection_active_s2c",this.on_wing_collection_active_s2c,this),netManager.addEventListener("wing.wing_skin_level_up_s2c",this.on_wing_skin_level_up_s2c,this),netManager.addEventListener("wing.wing_talent_choose_tab_s2c",this.on_wing_talent_choose_tab_s2c,this),netManager.addEventListener("wing.wing_talent_change_tab_name_s2c",this.on_wing_talent_change_tab_name_s2c,this),normalEvent.on(a.GOODS_INFO_UPDATE,this.updateItemCheck,this),normalEvent.on(g.ROLE_OPEN_FUNCTION_UPDATE,this.updateFunOpenCheck,this),normalEvent.on(g.ROLE_OPEN_FUNCTION_UPDATE,this.sendProto,this),normalEvent.on(g.ROLE_INFO_INIT,this.sendProto,this),normalEvent.on(g.ROLE_INFO_INIT,this.updateFunOpenCheck,this),o.addControl(this)}return n.clear=function(){printLog("WingControl")},n.onLogin=function(){this.sendProto()},n.sendProto=function(){IS(l).isSendProto||(this.send_wing_info_c2s(),IS(l).isSendProto=!0)},n.onReconnect=function(){IS(l).isSendProto=!1,this.sendProto()},n.updateItemCheck=function(n,e){if(e&&1084!=e&&1085!=e&&configGoods.getDataByKey(e).type!=_.Wing)return;IS(l).UpdateTalentRed(),IS(l).UpdateFeatureRed(),IS(l).checkSkinRP()},n.updateFunOpenCheck=function(n){n&&n!=r.FUNC_BACK||(IS(l).UpdateTalentRed(),IS(l).UpdateFeatureRed(),IS(l).checkSkinRP())},n.send_wing_info_c2s=function(){netManager.send("wing.wing_info_c2s",{})},n.on_wing_info_s2c=function(n){IS(l).SetWingData(n)},n.send_wing_feather_level_up_c2s=function(n,e){netManager.send("wing.wing_feather_level_up_c2s",{cfg_id:n,type:e})},n.on_wing_feather_level_up_s2c=function(n){IS(l).UpdateFeatureData(n)},n.send_wing_use_c2s=function(n){netManager.send("wing.wing_use_c2s",{cfg_id:n})},n.on_wing_use_s2c=function(n){IS(l).UpdateWingId(n)},n.send_wing_talent_lev_up_c2s=function(n,e,t){netManager.send("wing.wing_talent_lev_up_c2s",{type:n,cfg_id:e,tab:t})},n.on_wing_talent_lev_up_s2c=function(n){IS(l).UpdateTalentList(n)},n.send_wing_talent_reset_c2s=function(n,e){netManager.send("wing.wing_talent_reset_c2s",{type:n,tab:e})},n.on_wing_talent_reset_s2c=function(n){IS(l).ResetTalentList(n)},n.send_wing_skill_use_c2s=function(n){netManager.send("wing.wing_skill_use_c2s",{cfg_id:n})},n.on_wing_skill_use_s2c=function(n){IS(l).ChangeUseSkill(n)},n.send_wing_skin_level_up_c2s=function(n){netManager.send("wing.wing_skin_level_up_c2s",{cfg_id:n})},n.on_wing_skin_level_up_s2c=function(n){IS(l).UpdateSkinLevel(n)},n.send_wing_collection_active_c2s=function(n){netManager.send("wing.wing_collection_active_c2s",{cfg_id:n})},n.on_wing_collection_active_s2c=function(n){IS(l).UpdateCollection(n)},n.send_wing_talent_choose_tab_c2s=function(n){netManager.send("wing.wing_talent_choose_tab_c2s",{tab:n})},n.on_wing_talent_choose_tab_s2c=function(n){IS(l).UpdateTab(n)},n.send_wing_talent_change_tab_name_c2s=function(n,e){netManager.send("wing.wing_talent_change_tab_name_c2s",{tab:n,name:e})},n.on_wing_talent_change_tab_name_s2c=function(n){IS(l).UpdateTabName(n),uiMgr.close("WingTalentPlanRenameView")},n.previewBattle=function(n){IS(l).prviewId=n;var e=IS(s);e.currentLoadType=0,e.chapterType=t.WingPreview,e.battleData=e.createBattleData(t.WingPreview,50001,0,!0);var _=e.battleData.playerList[1].units[0];_.skin.wing=n;var a=configBack_skin.getDataByKeys("back_id",n,"skin_level",1),o=configSkill.getDataByKey(a.skin_skill[0][0]);i.addSkill(_,o.id,1),e.curDungeonId=50001,battleMain.enterChapter(configArtifact_preview_chapter.getDataByKey(50001).bossModel),uiMgr.HideAllView(["MainView","BattleHubView"]),normalEvent.emit(c.BATTLE_STATE,t.WingPreview,!0)},e}());e._RF.pop()}}}));

