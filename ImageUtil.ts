System.register("chunks:///_virtual/ImageUtil.ts",["cc"],(function(e){"use strict";var t,n,r,a;return{setters:[function(e){t=e.cclegacy,n=e.Color,r=e.Texture2D,a=e.ImageAsset}],execute:function(){t._RF.push({},"00127xKTU9ADJARdH9bz4xo","ImageUtil",void 0);e("default",function(){function e(){}return e.getTrim=function(e,t,n){var r,a,o,i=0,u=0,c=4*t;e:for(i=0;i<t;i++)for(u=0;u<n;u++){if(0!==e[c*u+4*i+3])break e}r=i;e:for(i=t-1;i>=0;i--)for(u=0;u<n;u++){if(0!==e[c*u+4*i+3])break e}a=i+1;e:for(i=0;i<n;i++)for(u=0;u<t;u++){if(0!==e[c*i+4*u+3])break e}o=i;e:for(i=n-1;i>=0;i--)for(u=0;u<t;u++){if(0!==e[c*i+4*u+3])break e}return{minX:r,maxX:a,minY:o,maxY:i+1}},e.getPixelsData=function(e){if(!window||!window.document)return null;var t=document.createElement("canvas"),n=t.getContext("2d"),r=e.width,a=e.height;t.width=r,t.height=a;var o=e.image.data;n.drawImage(o,0,0,r,a);var i=n.getImageData(0,0,r,a);return t.remove(),new Uint8Array(i.data)},e.getPixelColor=function(t,r,a){if(!window||!window.document)return null;var o=e.getPixelsData(t),i=4*t.width*Math.floor(a)+4*Math.floor(r),u=o.slice(i,i+4);return new n(u[0],u[1],u[2],u[3])},e.imageToBase64=function(e,t){return new Promise((function(n){var r,a=null==(r=/\.png|\.jpg|\.jpeg/.exec(e))?void 0:r[0];if([".png",".jpg",".jpeg"].includes(a)){var o=document.createElement("canvas"),i=o.getContext("2d"),u=new Image;u.src=e,u.onload=function(){o.height=u.height,o.width=u.width,i.drawImage(u,0,0),a=".jpg"===a?"jpeg":a.replace(".","");var e=o.toDataURL("image/"+a);t&&t(e),n(e),u.remove(),o.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),t&&t(null),n(null)}))},e.base64ToCCTexture=function(e){if(!window||!window.document)return null;var t=new Image;t.src=e;var n=new r;return n.image=new a(t),t.remove(),n},e}());t._RF.pop()}}}));

