System.register("chunks:///_virtual/SlumberPartyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./V2.ts","./AudioMgr.ts","./index3.ts","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./StorageUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./SpineSkeleton.ts","./ConfigGlobal.ts","./BagDefine.ts","./BagModel.ts","./MessageView.ts","./MallDefine.ts","./PayDataCache.ts","./PayDefine.ts","./RoleDefine.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./SlumberPartyControl.ts","./SlumberPartyDataCache.ts","./BaseView.ts","./EaseMethod.ts"],(function(t){"use strict";var i,e,o,n,r,s,a,d,l,c,h,f,u,p,m,g,v,w,y,C,T,I,S,_,L,k,G,b,R,x,V,F,E,D,A,j,B,M;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,n=t.Button,r=t.sys,s=t.HorizontalTextAlignment,a=t.Sprite,d=t.RichText,l=t.Label,c=t.ScrollView,h=t.Toggle,f=t.js},function(t){u=t.V2},function(t){p=t.audioMgr},null,function(t){m=t.ItemGrid},function(t){g=t.ListItem},function(t){v=t.default},function(t){w=t.default},function(t){y=t.default},function(t){C=t.default},null,function(t){T=t.SpineSkeleton},function(t){I=t.ConfigGlobal},function(t){S=t.BagEventDefine},function(t){_=t.BagModel},function(t){L=t.default},function(t){k=t.MallType},function(t){G=t.default},function(t){b=t.GiftType},function(t){R=t.RoleEventDefine},function(t){x=t.default},function(t){V=t.ActivityEventDefine,F=t.ActivityState,E=t.ActivityType},function(t){D=t.default},function(t){A=t.SlumberPartyDataCache},function(t){j=t.ViewEvent,B=t.BaseView},function(t){M=t.EasingMethod}],execute:function(){var N,P;o._RF.push({},"468ffBn9GBJSqL5ZPHGIE/P","SlumberPartyView",void 0);var O=((N={})[1]=300,N[2]=300,N[3]=1e3,N),U=((P={})[1]=0,P[2]=0,P),K=["ArtifactGetView","HorseGetView","PlayerSkinGetView","FateNewView","GoodsGetView2"],H=(t("default",function(t){function o(){var i;return(i=t.call(this)||this).actType=void 0,i.nodeResParent=void 0,i.nodeResItem=void 0,i.nodeRolling=void 0,i.rollEff=void 0,i.bgEff=void 0,i.turnEff=void 0,i.resItems=void 0,i.btnGift=void 0,i.btnStore=void 0,i.btnTask=void 0,i.taskRed=void 0,i.fightRed=void 0,i.togSkip=void 0,i.skipAnim=void 0,i.iconTen=void 0,i.iconOne=void 0,i.txtOne=void 0,i.txtTen=void 0,i.txtNumReward=void 0,i.numScroll=void 0,i.tipsGo=void 0,i.tipsScroll=void 0,i.imgPreview=void 0,i.preDescNum=void 0,i.preDescGet=void 0,i.onlyRewardNum=0,i.preViewCount=0,i.refreshTimer=void 0,i.curTips=0,i.tipsTimer=0,i.txtLeftTime=void 0,i.deltaTime=0,i.leftTime=0,i.canUpdate=!1,i.jackpot=0,i.jackpotType=0,i.curIndex=0,i.finalIndex=0,i.reward_list=[],i.actionTime=2,i.moveTween=void 0,i.rerwardList=[],i.waitRewardList=[],i.rewardNum=12,i.txtTitle=void 0,i.name="SlumberPartyView",i.url="ui/module/slumberparty/SlumberPartyView",i.poolTime=3e3,i.fullScreen=!0,i.actType=E.OpenGaCha,i}i(o,t);var m=o.prototype;return m.onInit=function(){var t=this;this.initResShow();var i=this.findChild("root/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()})),this.btnTask=this.findChild("root/bottomBtn/btnTask"),this.taskRed=this.findChild("root/bottomBtn/btnTask/red"),this.addComponentCallbackListener(this.btnTask,n.EventType.CLICK,(function(){uiMgr.openView("HorseCarnivalTaskView",t.actType)})),this.btnGift=this.findChild("root/bottomBtn/btnGift"),this.addComponentCallbackListener(this.btnGift,n.EventType.CLICK,(function(){uiMgr.openView("SlumberPartyGiftView",t.actType)}));var e=this.findChild("root/btnShow/btnShow");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){uiMgr.openView("SlumberPartyTipsView",e,t.actType)}));var o=this.findChild("root/turn/img/nodeTips/btnTips");this.addComponentCallbackListener(o,n.EventType.CLICK,(function(){for(var i=I.LIMITED_RANK_SYSTEM_DETAILS,e="",o=0;o<i.length;o++)i[o][0]==t.actType&&(e=GetLanguage(i[o][1]));""!=e&&L.showBoxTip({tip:e,btnCnt:1,horizontalAlign:r.uiMirror?s.RIGHT:s.LEFT})}));var f=this.findChild("root/turn/img/nodeTips2/tips");this.addComponentCallbackListener(f,n.EventType.CLICK,(function(){uiMgr.openView("CommonPopTipsView",GetLanguage(400204),f)})),this.nodeRolling=this.findChild("root/turn/img/nodeRolling"),this.imgPreview=this.findChildComponent("root/turn/img/imgPreview",a),this.preDescNum=this.findChild("root/turn/img/preDesc/num"),this.preDescGet=this.findChild("root/turn/img/preDesc/get"),this.txtLeftTime=this.findChildComponent("root/top/nodeTime/txtTime",d),this.txtNumReward=this.findChildComponent("root/numReward/num",l);var u=this.findChildComponent("root/numReward/ScrollView",c);this.numScroll=this.addUIList(u,H),this.tipsGo=this.findChild("root/top/tips");var p=this.findChildComponent("root/top/tips/ScrollView",c);this.tipsScroll=this.addUIList(p,q),this.iconOne=this.findChildComponent("root/btnOne/icon",a),this.iconTen=this.findChildComponent("root/btnTen/icon",a),this.txtOne=this.findChildComponent("root/btnOne/num",d),this.txtTen=this.findChildComponent("root/btnTen/num",d);var m=this.findChild("root/btnOne");this.addComponentCallbackListener(m,n.EventType.CLICK,(function(){t.onLottery(1)}));var g=this.findChild("root/btnTen");this.addComponentCallbackListener(g,n.EventType.CLICK,(function(){t.onLottery(2)})),this.togSkip=this.findChildComponent("root/toggleSkip",h),this.addComponentCallbackListener(this.togSkip.node,h.EventType.TOGGLE,(function(){t.togSkip.isChecked?w.set("SkipHCAnim",1):w.set("SkipHCAnim",0)})),this.skipAnim=this.findChild("skipAnim"),this.addComponentCallbackListener(this.skipAnim,n.EventType.CLICK,(function(){t.SkipAnim()}));for(var y=function(){var i=t.findChild("root/turn/itemRoll/itemGrid"+C),e={node:i,index:C,item_id:0,cfg_id:0,imgFram:v.findChildComponent(i,"imgFrame",a),imgIcon:v.findChildComponent(i,"imgIcon",a),num:v.findChildComponent(i,"num",l),select:v.findChild(i,"select"),light:v.findChild(i,"light"),limit:v.findChild(i,"nodeLimit")};t.addComponentCallbackListener(i,n.EventType.CLICK,(function(){0!=e.item_id&&IS(_).OpenItemTips(e.item_id,i)})),t.rerwardList.push(e)},C=0;C<this.rewardNum;C++)y();this.txtTitle=this.findChildComponent("root/top/txtTitle",l),r.uiMirror&&this.loadIcon(v.findChildComponent(this.togSkip.node,"Checkmark",a),"zqkh","zqkh_ui_gouxuan01")},m.initResShow=function(){var t=this;this.nodeResParent=this.findChild("resRoot"),this.nodeResItem=this.findChild("resRoot/resItem"),this.nodeResItem.active=!1;var i=[IS(A).GetCost(this.actType)[0]];this.resItems=new Array;for(var e=function(e){var o=nodeInstantiate.instantiate(t.nodeResItem),r=i[e];t.addComponentCallbackListener(o,n.EventType.CLICK,(function(){IS(_).OpenItemTips(r,v.findChild(o,"txtNum"))})),o.parent=t.nodeResParent,o.active=!0;var s=v.findChildComponent(o,"imgIcon",a),d=configGoods.getDataByKey(r);t.loadIcon(s,"icon_item",d.icon),t.resItems.push({node:o,txtNum:v.findChildComponent(o,"txtNum",l),goodsGtid:r})},o=0;o<i.length;o++)e(o)},m.registerUpdateHandler=function(){this.addEvent(V.OnSlumberPartyUpdate,this.updateInfo,this),this.addEvent(V.OnSlumberPartyReward,this.updateReward,this),this.addEvent(V.OnSlumberPartyLottery,this.updateLotteryResult,this),this.addEvent(S.GOODS_INFO_UPDATE,this.updateResShow,this),this.addEvent(R.ROLE_RES_UPDATE,this.updateResShow,this),this.addEvent(j.ViewClose,this.onViewClose,this),this.addEvent(V.OnPartyFightInfoUpdate,this.OnFightUpdate,this),this.addEvent(V.OnActivityInfoTaskUpdate,this.OnTaskUpdate,this),this.addEvent(V.OnActivityInfoUpdate,this.OnTaskUpdate,this)},m.onAfterOpen=function(){var t=this;this.rollEff=null,this.bgEff=null,this.turnEff=null,this.updateResShow(),IS(D).send_24_16(this.actType),this.togSkip.isChecked=1==w.get("SkipHCAnim"),this.skipAnim.active=!1,this.nodeRolling.active=!1;var i=IS(x).GetActivityInfo(this.actType);if(i){var e,o,n;this.txtTitle.string=i.activityCfg.name;var r=null!=(e=configMall.getDataByList("type",k.Activity))?e:[],s=[];for(var a in r)if(r.hasOwnProperty(a)){var l=r[a];l.condition.length>0&&"activity_group"==l.condition[0][0]&&l.condition[0][1]==i.type&&l.condition[0][2]==i.roundCfg.group_id&&s.push(l)}var c=null!=(o=i.state_time[i.state])?o:i.state_time[F.Open];this.leftTime=c.end_time-C.serverTime,this.leftTime>0?(this.canUpdate=!0,this.txtLeftTime.string=f.formatStr("<b><outline color=#181B1F width=2><color=#FFFFFF>%s</color></outline><outline color=#181B1F width=2><color=#5ADE47>%s</color></outline></b>",GetLanguage(200085),C.formatTimeStringForSecond(this.leftTime))):this.txtLeftTime.string="<color=#FFFFFF>"+GetLanguage(14810206)+"</color>",IS(G).GetAcivityGift(b.Activity,i.type,i.round).length>0?this.btnGift.active=!0:this.btnGift.active=!1;var h=IS(A).GetCost(this.actType),p=configGoods.getDataByKey(h[0]);this.loadIcon(this.iconOne,p.icon_group,p.icon),this.loadIcon(this.iconTen,p.icon_group,p.icon);var m=configMount_draw_cumulative_times.getDatas(),g=[];for(var v in m)if(m.hasOwnProperty(v)){var I=m[v];I.type==i.type&&I.group_id==i.roundCfg.group_id&&g.push(I)}this.numScroll.datas=g;var S=configMount_draw.getDatas(),_=[];for(var L in S)if(S.hasOwnProperty(L)){var R=S[L];R.type==i.type&&R.group_id==i.roundCfg.group_id&&(_.push(R),1==R.is_jackpot&&(O[1]=R.guaranteed,O[2]=R.guaranteed))}_.sort((function(t,i){return t.id-i.id}));for(var V=0;V<_.length;V++){var E=_[V],j=this.rerwardList[E.order-1];j.item_id=E.reward[0],j.num.string=E.reward[1],j.cfg_id=E.id;var B=configGoods.getDataByKey(j.item_id);this.loadIcon(j.imgIcon,B.icon_group,B.icon);var M=configColor.getDataByKey(B.quality);this.loadIcon(j.imgFram,"icon_equip",M.path),j.limit&&(j.limit.active=!1),j.select.active=!1,j.light.active=!1}this.clearTimer(),this.preViewCount=1,this.loadIcon(this.imgPreview,"xmpd","xmpd_ui_dj0"+this.preViewCount);var N=O[this.preViewCount];this.preDescNum.active=!0,this.preDescGet.active=!1;var P=f.formatStr("<b><outline width = 2 color=#943b30><color=#fffeea>%s</color></outline></b>",GetLanguage(400187));this.findChildComponent("root/turn/img/preDesc/num/num",d).string=y.formatStr(P,f.formatStr("<color=#fff71e>%s</color>",N));var K=IS(A).getInfo(this.actType),H=this.findChildComponent("root/turn/img/nodeTips2/jackPotNum",d),q=U[this.preViewCount],z=null!=(n=K.guaranteed_list[this.rerwardList[q].cfg_id])?n:0;if(z>0){H.node.active=!0;var X=f.formatStr("<b><outline color=#5C2E1A width=2><color=#FFF8C6>%s</color></outline></b>",GetLanguage(400202));H.string=y.formatStr(X,f.formatStr("<b><outline color=#943B30 width=2><color=#FFF71E>%s</color></outline></b>",z))}else H.node.active=!1;if(this.refreshTimer=this.addTimer(5,-1,(function(){var i;t.preViewCount=2==t.preViewCount?1:t.preViewCount+1,t.loadIcon(t.imgPreview,"xmpd","xmpd_ui_dj0"+t.preViewCount);var e=O[t.preViewCount];t.preDescNum.active=!0,t.preDescGet.active=!1;var o=f.formatStr("<b><outline width = 2 color=#943b30><color=#fffeea>%s</color></outline></b>",GetLanguage(400187));t.findChildComponent("root/turn/img/preDesc/num/num",d).string=y.formatStr(o,f.formatStr("<color=#fff71e>%s</color>",e));var n=IS(A).getInfo(t.actType),r=t.findChildComponent("root/turn/img/nodeTips2/jackPotNum",d),s=U[t.preViewCount],a=null!=(i=n.guaranteed_list[t.rerwardList[s].cfg_id])?i:0;if(a>0){r.node.active=!0;var l=f.formatStr("<b><outline color=#5C2E1A width=2><color=#FFF8C6>%s</color></outline></b>",GetLanguage(400202));r.string=y.formatStr(l,f.formatStr("<b><outline color=#943B30 width=2><color=#FFF71E>%s</color></outline></b>",a))}else r.node.active=!1})),null==this.bgEff){this.bgEff=this.addUIEffect("prefab/ui-effect/MX_tx_xingmengpaidui",this.findChild("root/turn/itemRoll/bg"),-1,new u(0,-116),1,(function(t){t.node.getComponent(T).needAnimation="ren"}))}if(null==this.turnEff){this.turnEff=this.addUIEffect("prefab/ui-effect/MX_tx_xingmengpaidui",this.findChild("root/turn/img"),-1,new u(0,-43.5),1,(function(t){t.node.getComponent(T).needAnimation="deng1"}))}}this.OnTaskUpdate()},m.clearTimer=function(){null!=this.refreshTimer&&(this.removeTimer(this.refreshTimer),this.refreshTimer=null)},m.onBeforeClose=function(){this.canUpdate=!1,this.curIndex=0,this.tipsTimer=0;for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.jackpot=0,this.jackpotType=0,this.waitRewardList=[],this.clearTimer()},m.onDestroy=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].node.destroy();this.resItems={}},m.onUpdate=function(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=f.formatStr("<b><outline color=#181B1F width=2><color=#FFFFFF>%s</color></outline><outline color=#181B1F width=2><color=#5ADE47>%s</color></outline></b>",GetLanguage(200085),C.formatTimeStringForSecond(this.leftTime)):(this.txtLeftTime.string="<b><outline color=#181B1F width=2><color=#FFFFFF>"+GetLanguage(14810206)+"</color></outline></b>",this.canUpdate=!1)))},m.updateResShow=function(){for(var t=0;t<this.resItems.length;t++)this.resItems[t].txtNum.string=y.GetNumString(IS(_).getGoodsCountByGoodsGtid(this.resItems[t].goodsGtid));var i,e,o=IS(A).GetCost(this.actType),n=IS(_).getGoodsCountByGoodsGtid(o[0]);n>=o[1]?(e="#5aff42",i="#27720d"):(e="#ff1f1f",i="#891000"),this.txtOne.string=f.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",i,e,o[1]),n>=10*o[1]?(e="#5aff42",i="#27720d"):(e="#ff1f1f",i="#891000"),this.txtTen.string=f.formatStr("<b><outline color=%s width=2><color=%s>%s<color></outline></b>",i,e,10*o[1])},m.OnFightUpdate=function(){this.fightRed.active=IS(A).GetFightRed()>0},m.OnTaskUpdate=function(){this.taskRed.active=IS(x).GetTaskRedNum(this.actType)>0},m.updateInfo=function(){var t=this,i=IS(A).getInfo(this.actType);this.tipsGo.active=i.lucky_list.length>0,0!=this.tipsTimer&&this.removeTimer(this.tipsTimer),this.tipsGo.active&&(this.tipsScroll.datas=i.lucky_list,this.curTips=0,this.tipsTimer=this.addTimer(1,-1,(function(){t.curTips=t.curTips+1,t.curTips==i.lucky_list.length&&(t.curTips=0);var e=0==t.curTips?.2:1;t.tipsScroll.scrollTo(t.curTips,e)}))),this.updateReward()},m.updateReward=function(){var t,i=IS(A).getInfo(this.actType);this.txtNumReward.string=i.count+"",this.numScroll.updateAll(),this.findChildComponent("root/turn/img/nodeTips/drawNum",l).string=y.formatStr(GetLanguage(999300100),IS(A).getInfo(this.actType).remain_draw);for(var o,n=e(this.rerwardList);!(o=n()).done;){var r=o.value,s=configMount_draw.getDataByKey(r.cfg_id);if(s.num){r.limit.active=!0;var a=IS(A).getInfo(this.actType),c=v.findChildComponent(r.limit,"Node",l);if(c.string=GetLanguage(300160)+" "+s.num,a.get_drop.length>0)for(var h,u=e(a.get_drop);!(h=u()).done;){var p=h.value,m=p.k,g=p.v;m==r.cfg_id&&(c.string=GetLanguage(300160)+" "+(s.num-g))}}if(5==s.quality){r.only.active=!0;var w=s.guaranteed-i.count;this.onlyRewardNum=w}if(s.reward_replace.length>0){var C,T,I=null!=(C=null==(T=i.choose_list[r.cfg_id])?void 0:T[1])?C:0;if(I>0){5==s.quality&&(r.only.active=!1,this.onlyRewardNum=0);for(var S,_=e(s.reward_replace);!(S=_()).done;){var L=S.value;if(L[0]==I){r.num.string=L[1][1],r.item_id=L[1][0];var k=configGoods.getDataByKey(r.item_id);this.loadIcon(r.imgIcon,k.icon_group,k.icon);var G=configColor.getDataByKey(k.quality);this.loadIcon(r.imgFram,"icon_equip",G.path)}}}}}var b=this.findChildComponent("root/turn/img/nodeTips2/jackPotNum",d),R=U[this.preViewCount],x=null!=(t=i.guaranteed_list[this.rerwardList[R].cfg_id])?t:0;if(x>0){b.node.active=!0;var V=f.formatStr("<b><outline color=#5C2E1A width=2><color=#FFF8C6>%s</color></outline></b>",GetLanguage(400202));b.string=y.formatStr(V,f.formatStr("<b><outline color=#943B30 width=2><color=#FFF71E>%s</color></outline></b>",x))}else b.node.active=!1},m.onLottery=function(t){var i=IS(A).GetCost(this.actType),e=i[0],o=i[1];2==t&&(o*=10),IS(_).getGoodsCountByGoodsGtid(e)>=o?IS(D).send_24_17(this.actType,t):this.btnGift.active&&uiMgr.openView("SlumberPartyGiftView",this.actType)},m.updateLotteryResult=function(t){var i=this;if(t.act_type==this.actType)if(this.nodeRolling.active=!1,this.checkJackpot(t.drop_id_list),this.togSkip.isChecked)0!=this.jackpot?(this.openTypeView(this.jackpot,this.jackpotType),this.waitRewardList=t.reward_list,this.jackpot=0,this.jackpotType=0):uiMgr.openView("GoodsGetView",t.reward_list);else{var e=t.drop_id_list[t.drop_id_list.length-1];if(this.finalIndex=configMount_draw.getDataByKey(e).order-1,this.reward_list=t.reward_list,this.skipAnim.active=!0,this.nodeRolling.active=!0,null==this.rollEff){this.rollEff=this.addUIEffect("prefab/ui-effect/MX_tx_xingmengpaidui",this.nodeRolling,-1,new u(0,-43.5),1,(function(t){t.node.getComponent(T).needAnimation="deng2"}))}1==t.drop_id_list.length?this.doLotteryTween(this.finalIndex,(function(){for(var e=0;e<i.rerwardList.length;e++)i.rerwardList[e].select.active=!1,i.rerwardList[e].light.active=!1;i.rerwardList[i.finalIndex].select.active=!0,i.rerwardList[i.finalIndex].light.active=!0,i.curIndex=i.finalIndex,0!=i.jackpot?(i.waitRewardList=t.reward_list,i.openTypeView(i.jackpot,i.jackpotType),i.jackpot=0,i.jackpotType=0):uiMgr.openView("GoodsGetView",t.reward_list),i.skipAnim.active=!1,i.nodeRolling.active=!1})):this.lotteryNext(0,t)}},m.lotteryNext=function(t,i){var e,o=this,n=configMount_draw.getDataByKey(i.drop_id_list[t]).order-1;e=t<i.drop_id_list.length-1?function(){o.curIndex=n,o.lotteryNext(t+1,i)}:function(){for(var t=0;t<o.rerwardList.length;t++)o.rerwardList[t].select.active=!1,o.rerwardList[t].light.active=!1;o.rerwardList[n].select.active=!0,o.rerwardList[n].light.active=!0,o.curIndex=n,0!=o.jackpot?(o.waitRewardList=i.reward_list,o.openTypeView(o.jackpot,o.jackpotType),o.jackpot=0,o.jackpotType=0):uiMgr.openView("GoodsGetView",i.reward_list),o.skipAnim.active=!1,o.nodeRolling.active=!1},this.doLotteryTween(n,e)},m.doLotteryTween=function(t,i){var e=this;null!=this.moveTween&&this.moveTween.stop(),p.playSound("common_guguji");var o=4*this.rewardNum+t-this.curIndex;this.moveTween=this.addTween(0,1,this.actionTime,(function(t,i){for(var n=o*i,r=Math.floor((n+e.curIndex)%e.rewardNum),s=0;s<e.rerwardList.length;s++)e.rerwardList[s].select.active=!1,e.rerwardList[s].light.active=!1;e.rerwardList[r].select.active=!0})).easing(M.SINE_OUT).call((function(){i()}),.5).start()},m.SkipAnim=function(){null!=this.moveTween&&this.moveTween.stop();for(var t=0;t<this.rerwardList.length;t++)this.rerwardList[t].select.active=!1,this.rerwardList[t].light.active=!1;this.rerwardList[this.finalIndex].select.active=!0,this.rerwardList[this.finalIndex].light.active=!0,this.curIndex=this.finalIndex,0!=this.jackpot?(this.waitRewardList=this.reward_list,this.openTypeView(this.jackpot,this.jackpotType),this.jackpot=0,this.jackpotType=0):uiMgr.openView("GoodsGetView",this.reward_list),this.skipAnim.active=!1,this.nodeRolling.active=!1},m.checkJackpot=function(t){this.jackpot=0,this.jackpotType=0;for(var i,o=e(t);!(i=o()).done;){var n=i.value,r=configMount_draw.getDataByKey(n);if(r.goods_type)if(r.reward_replace.length>0){var s,a,d=null!=(s=null==(a=IS(A).getInfo(this.actType).choose_list[r.id])?void 0:a[1])?s:0;if(d>0)for(var l,c=e(r.reward_replace);!(l=c()).done;){var h=l.value;if(h[0]==d&&r.goods_type)return this.jackpot=h[1][0],this.jackpotType=r.goods_type,!0}else if(r.goods_type)return this.jackpot=r.reward[0],this.jackpotType=r.goods_type,!0}else if(r.goods_type)return this.jackpot=r.reward[0],this.jackpotType=r.goods_type,!0}return!1},m.onViewClose=function(t){this.waitRewardList.length<=0||K.includes(t)&&(uiMgr.openView("GoodsGetView",this.waitRewardList),this.waitRewardList=[])},m.openTypeView=function(t,i){switch(i){case 1:return void uiMgr.openView("ArtifactGetView",configGoods.getDataByKey(t).effect[0],!0);case 2:return void uiMgr.openView("HorseGetView",configGoods.getDataByKey(t).effect[0],!0);case 3:return void uiMgr.openView("PlayerSkinGetView",configGoods.getDataByKey(t).effect[0],!0);case 4:return void uiMgr.openView("FateNewView",configGoods.getDataByKey(t).effect[0])}},o}(B)),function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).txtDesc=void 0,i.itemGridNode=void 0,i.itemGrid=void 0,i.isReward=void 0,i.eff=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.txtDesc=v.findChildComponent(this.node,"desc",d),this.itemGridNode=v.findChild(this.node,"itemGrid"),this.itemGrid=new m(this.view,this.itemGridNode,(function(){var i=IS(A).getInfo(t.view.actType);!t.isReward&&i.count>=t.data.cumulative_times?IS(D).send_24_18(t.view.actType,t.data.id):IS(_).OpenItemTips(t.data.reward[0],t.itemGridNode)}))},o.onRender=function(t,i){this.itemGrid.SetItemId(t.reward[0],t.reward[1]);var e=IS(A).getInfo(this.view.actType);this.isReward=e.gotReward[t.id],this.view.removeUIEffect(this.eff),this.isReward?this.txtDesc.string=f.formatStr(f.formatStr("<b><color=#80342e>%s</color></b>",GetLanguage(200314))):e.count>=t.cumulative_times?(this.txtDesc.string=f.formatStr(f.formatStr("<b><color=#80342e>%s</color></b>",GetLanguage(200732))),this.eff=this.view.addUIEffect("prefab/ui-effect/MX_tx_tongyong_daojulingqu",this.itemGridNode,-1)):this.txtDesc.string=f.formatStr("<b><color=#ff1c1c>%s</color><color=#80342e>/%s</color></b>",e.count,t.cumulative_times)},e}(g)),q=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).txt=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){this.txt=v.findChildComponent(this.node,"txt",d)},o.onRender=function(t,i){var e,o=null==(e=configGoods.getDataByKey(t.k))?void 0:e.name;this.txt.string=y.formatStrWithMirrorDeal(GetLanguage(200050),t.s,o)},e}(g);o._RF.pop()}}}));

