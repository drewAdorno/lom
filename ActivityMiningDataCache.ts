System.register("chunks:///_virtual/ActivityMiningDataCache.ts",["cc","./RedPointMgr.ts","./StorageUtil.ts","./BattlePassDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts"],(function(t){"use strict";var i,e,n,a,s,r,o;return{setters:[function(t){i=t.cclegacy},function(t){e=t.RedPointMgr},function(t){n=t.default},function(t){a=t.BattlePassDataCache},function(t){s=t.default},function(t){r=t.ActivityType,o=t.ActivityEventDefine}],execute:function(){i._RF.push({},"a789av2d3JJc7Ss9jpLPmxf","ActivityMiningDataCache",void 0);var c="openMiningGuideRecord";t("default",function(){var t=i.prototype;function i(){this.chapterDataList={},this.mainGroupId=0,this.localChapterData={id:0,round:0,gold:0,gift:0,shovel_list:null}}return t.clear=function(){},t.UpdateMiningInfo=function(t){for(var i in t)if(t.hasOwnProperty(i)){for(var n=0;n<t[i].length;n++)this.chapterDataList[t[i][n].id]={round:t[i][n].round,gold:t[i][n].gold,gift:t[i][n].gift,finish:t[i][n].finish,shovel_list:t[i][n].shovel_list};this.mainGroupId=configMining_level.getDataByKey(t[i][0].id).group}for(var c=IS(a).getPassInfo(14),f=!1,u=1;u<25;u++){if(c.if_buy)switch(c.high_reward[u].status){case 0:break;case 1:f=!0,IS(e).changeValue("MiningPassView/Reward",2),IS(s).UpdateMainRedByActType(r.Mining)}switch(c.free_reward[u].status){case 0:break;case 1:f=!0,IS(e).changeValue("MiningPassView/Reward",1),IS(s).UpdateMainRedByActType(r.Mining)}}0==f&&IS(e).changeValue("MiningPassView/Reward",0),IS(s).UpdateMainRedByActType(r.Mining),normalEvent.emit(o.OnMiningInfoUpdate)},t.UpdateSingleInfo=function(t){this.chapterDataList[t.id]={round:t.round,gold:t.gold,gift:t.gift,finish:t.finish,shovel_list:t.shovel_list}},t.UpdateInherit=function(t){this.UpdateSingleInfo(t.chapter),normalEvent.emit(o.OnMiningInheritUpdate)},t.UpdateSettle=function(t){this.UpdateSingleInfo(t.chapter),normalEvent.emit(o.OnMiningSettleUpdate)},t.UpdateResult=function(t){this.UpdateSingleInfo(t.chapter),normalEvent.emit(o.OnMiningRoundUpdate)},t.SaveLocalMiningInfo=function(t,i,e,n,a){this.localChapterData={id:t,round:i,gold:e,gift:n,shovel_list:a}},t.getLocalMiningInfo=function(){return this.localChapterData},t.getChapterData=function(){return this.chapterDataList},t.GetRed=function(){var t=0,i=IS(a).getPassInfo(14);if(i)for(var e=1;e<25;e++){if(i.if_buy)switch(i.high_reward[e].status){case 0:break;case 1:t+=2}switch(i.free_reward[e].status){case 0:break;case 1:t+=1}}return t},t.checkHasOpenGuide=function(){var t=n.get(c);return null!=t&&""!=t},t.setOpenGuide=function(){n.set(c,1)},i}());i._RF.pop()}}}));

