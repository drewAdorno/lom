System.register("chunks:///_virtual/FriendInviteView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIList.ts","./NodeUtil.ts","./index57.ts","./ChatDataCache.ts","./ChatDefine.ts","./MessageView.ts","./FriendControl.ts","./FriendDefine.ts","./FriendModel.ts","./TeamDataCache.ts","./TeamDefine.ts","./BaseView.ts"],(function(t){"use strict";var i,e,n,o,a,s,d,r,h,l,c,f,m,u,v,C,p,I,g;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Button,o=t.ScrollView,a=t.Sprite,s=t.Label},function(t){d=t.SelectedType,r=t.ListItem},function(t){h=t.default},null,function(t){l=t.ChatDataCache},function(t){c=t.ChatDefine},function(t){f=t.default},function(t){m=t.default},function(t){u=t.FriendListType,v=t.FriendDefine},function(t){C=t.FriendModel},function(t){p=t.TeamDataCache},function(t){I=t.TeamEvent},function(t){g=t.BaseView}],execute:function(){e._RF.push({},"97077EH7kZAxp9AtIOwhzPy","FriendInviteView",void 0);t("default",function(t){function e(){var i;return(i=t.call(this)||this).friendList=void 0,i.showList=void 0,i.name="FriendInviteView",i.url="ui/module/team/FriendInviteView",i.poolTime=3e3,i}i(e,t);var a=e.prototype;return a.onInit=function(){var t=this,i=this.findChild("root/bg/btnClose");this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.close()}));var e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.close()}));var a=this.findChildComponent("root/list",o);this.friendList=this.addUIList(a,L),this.friendList.selectedMode=d.SINGLE},a.onAfterOpen=function(){IS(m).reqFriendList(u.FriendList,1)},a.registerUpdateHandler=function(){this.addEvent(v.FriendInfoBack,this.updateInfo,this),this.addEvent(I.TEAM_APPLY_INFO,this.updateInfo,this)},a.updateInfo=function(){this.showList=IS(C).GetListByType(u.FriendList),this.showList=this.showList.filter((function(t){return 1==t.is_online})),this.friendList.datas=this.showList},a.onBeforeClose=function(){},a.onDestroy=function(){},e}(g));var L=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).imgFrame=void 0,i.imgIcon=void 0,i.imgHeadFrame=void 0,i.txtName=void 0,i.txtPower=void 0,i.txtRank=void 0,i.btnInvite=void 0,i.look_btn=void 0,i.txtInvite=void 0,i.is_invited=void 0,i}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.imgFrame=h.findChildComponent(this.node,"imgFrame",a),this.imgIcon=h.findChildComponent(this.node,"imgFrame/imgIcon",a),this.imgHeadFrame=h.findChildComponent(this.node,"imgFrame/imgHeadFrame",a),this.txtName=h.findChildComponent(this.node,"name",s),this.txtPower=h.findChildComponent(this.node,"power",s),this.txtRank=h.findChildComponent(this.node,"rank",s),this.btnInvite=h.findChild(this.node,"btnInvite"),this.txtInvite=h.findChildComponent(this.node,"btnInvite/Label",s),this.view.addComponentCallbackListener(this.btnInvite,n.EventType.CLICK,(function(){t.is_invited?f.showFlyTip(GetLanguage(200614)):t.onBtnClick()})),this.look_btn=h.findChild(this.node,"imgFrame"),this.view.addComponentCallbackListener(this.look_btn,n.EventType.CLICK,(function(){IS(m).reqOtherRoleNotice(t.data.role_id)}))},o.onRender=function(t,i){this.view.loadRemoteIcon(t.head.url,this.imgIcon),this.txtName.string=t.name+" Lv."+t.lv,this.txtPower.string=GetLanguage(200295)+t.cur_power,this.txtRank.string=i+1+"",this.is_invited=IS(p).apply_list.includes(this.data.role_id),this.checkBtnState();var e=t.head.frame_id;if(e>0){this.imgHeadFrame.node.active=!0;var n=configAvatar_frame.getDataByKey(e);this.view.loadIcon(this.imgHeadFrame,"icon_frame",n.icon)}else this.imgHeadFrame.node.active=!1},o.onBtnClick=function(){IS(l).SendShareData(c.ChatLinkType.MakeTeam,{teamID:IS(p).team_id,level:IS(p).teamDiff},c.Channel.Private,this.data.role_id)},o.checkBtnState=function(){this.is_invited?(this.btnInvite.getComponent(a).grayscale=!0,this.txtInvite.string=GetLanguage(200055)):(this.txtInvite.string=GetLanguage(200602),this.btnInvite.getComponent(a).grayscale=!1)},e}(r);e._RF.pop()}}}));

