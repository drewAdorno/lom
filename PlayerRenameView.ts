System.register("chunks:///_virtual/PlayerRenameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlatformUtil.ts","./StringUtil.ts","./index57.ts","./ConfigGlobal.ts","./GlobalDefine.ts","./BagModel.ts","./MessageView.ts","./RoleControl.ts","./RoleDataCache.ts","./RoleDefine.ts","./BaseView.ts"],(function(t){"use strict";var e,i,n,o,s,a,l,r,c,d,h,u,f,g,C,m,p;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Button,o=t.Label,s=t.EditBox,a=t.sys,l=t.Widget},function(t){r=t.PlatformUtil},function(t){c=t.default},null,function(t){d=t.ConfigGlobal},function(t){h=t._GlobalDefine},function(t){u=t.BagModel},function(t){f=t.default},function(t){g=t.default},function(t){C=t.RoleDataCache},function(t){m=t.PlayerAttr},function(t){p=t.BaseView}],execute:function(){i._RF.push({},"e96133yhgVPw41ktWcPp/qS","PlayerRenameView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).btnDes=void 0,e.editBox=void 0,e.txtCost=void 0,e.cost=void 0,e.limit=void 0,e.name="PlayerRenameView",e.url="ui/module/player/PlayerRenameView",e}e(i,t);var p=i.prototype;return p.onInit=function(){var t=this,e=this.findChild("imgMask");this.addComponentCallbackListener(e,n.EventType.CLICK,(function(){t.onCloseClick()}));var i=this.findChild("btnRename");if(this.addComponentCallbackListener(i,n.EventType.CLICK,(function(){t.onRenameClick()})),this.txtCost=this.findChildComponent("cost",o),this.btnDes=this.findChildComponent("btnRename/Label",o),this.editBox=this.findChildComponent("EditBox",s),this.addComponentCallbackListener(this.editBox.node,s.EventType.EDITING_DID_BEGAN,(function(){r.UpdateCurrentEditBox(t.editBox)})),a.uiMirror){this.txtCost.node.setScale(-1,1,1);var c=this.findChildComponent("cost/Sprite",l);c.alignFlags=32,c.right=-50.225}},p.onCloseClick=function(){this.close()},p.onRenameClick=function(){var t=this.editBox.string,e=t.length,i=IS(u).getGoodsCountByGoodsGtid(this.cost[0]);e<this.limit[0]||e>this.limit[1]?f.showFlyTip(GetLanguage(200070)):t==IS(C).GetRoleName()?f.showFlyTip(GetLanguage(200541)):isNaN(Number(t))?t.includes(GetLanguage(200449))?f.showFlyTip(GetLanguage(200327)):i<this.cost[1]&&IS(C).GetRoleAttr(m.ROLE_ATTR_RENAME)>0?f.showFlyTip(GetLanguage(200069)):h.ENABLE_SDK?sdkControl.checkStr(t,(function(t,e){1==e&&IS(g).send_3_11(t)})):IS(g).send_3_11(t):f.showFlyTip(GetLanguage(200327))},p.registerUpdateHandler=function(){},p.onAfterOpen=function(){var t=IS(C).GetRoleAttr(m.ROLE_ATTR_RENAME);this.cost=d.change_name_cost,this.limit=d.name_limit,this.editBox.maxLength=this.limit[1],t>0?(this.txtCost.node.active=!0,this.txtCost.string=this.cost[1],this.btnDes.string=GetLanguage(200053)):(this.txtCost.node.active=!1,this.btnDes.string=GetLanguage(200045)),this.editBox.placeholderLabel.string=c.formatStrWithMirrorDeal(GetLanguage(200328),this.limit[1])},p.onBeforeClose=function(){r.ClearCurrentEditBox(this.editBox),this.editBox.string=""},p.onDestroy=function(){},i}(p));i._RF.pop()}}}));

