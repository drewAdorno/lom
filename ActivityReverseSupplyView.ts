System.register("chunks:///_virtual/ActivityReverseSupplyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemGrid.ts","./UIList.ts","./RedPoint.ts","./RedPointMgr.ts","./NodeUtil.ts","./StringUtil.ts","./TimeUtil.ts","./index57.ts","./ConfigGlobal.ts","./ActivityDefine.ts","./ActivityReverseControl.ts","./ActivityReverseDataCache.ts","./BaseView.ts"],(function(t){"use strict";var e,i,r,n,o,s,d,a,l,c,u,f,m,h,v,p,w,y,S;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,r=t.Button,n=t.Sprite,o=t.Vec2,s=t.ScrollView,d=t.Label},function(t){a=t.ItemGrid},function(t){l=t.ListItem},function(t){c=t.RedPointType},function(t){u=t.RedPointMgr},function(t){f=t.default},function(t){m=t.default},function(t){h=t.default},null,function(t){v=t.ConfigGlobal},function(t){p=t.ActivityEventDefine},function(t){w=t.default},function(t){y=t.default},function(t){S=t.BaseView}],execute:function(){i._RF.push({},"309e124WwJPdqQLPyti7TRd","ActivityReverseSupplyView",void 0);t("default",function(t){function i(){var e;return(e=t.call(this)||this).rewardBtn=void 0,e.time=void 0,e.rewardScroll=void 0,e.timer=void 0,e.name="ActivityReverseSupplyView",e.url="ui/module/reverse/ActivityReverseSupplyView",e}e(i,t);var a=i.prototype;return a.onInit=function(){var t=this;this.addComponentCallbackListener(this.findChild("imgMask"),r.EventType.CLICK,(function(){t.close()})),this.rewardBtn=this.findChildComponent("view/btnReward",n),this.addRedPoint("ActReverseSupply",this.rewardBtn.node,new o(90,25),c.Dot),this.addComponentCallbackListener(this.rewardBtn.node,r.EventType.CLICK,(function(){var t=IS(y).getInfo().reward_time;-1==t||t-h.serverTime>0||IS(w).send_24_115()}));var e=this.findChildComponent("view/rewardScroll",s);this.rewardScroll=this.addUIList(e,g,!1),this.rewardScroll.lackCenter=!0,this.time=this.findChildComponent("view/time",d)},a.registerUpdateHandler=function(){this.addEvent(p.OnActivityReverseUpdate,this.updateInfo,this)},a.onAfterOpen=function(){IS(u).updateRed("ActReverseSupply"),this.rewardScroll.datas=v.reversion_war_basic_supply,this.updateInfo()},a.onBeforeClose=function(){this.timer&&(this.removeTimer(this.timer),this.timer=null)},a.onDestroy=function(){},a.updateInfo=function(){var t=this,e=IS(y).getInfo().reward_time;this.timer&&(this.removeTimer(this.timer),this.timer=null),-1!=e&&e-h.serverTime>0?(this.rewardBtn.grayscale=!0,this.time.string=m.formatStrWithMirrorDeal(GetLanguage(200113),h.formatTimeStringForSecond(e-h.serverTime)),this.timer=this.addTimer(1,e-h.serverTime,(function(){var i=e-h.serverTime;t.time.string=m.formatStrWithMirrorDeal(GetLanguage(200113),h.formatTimeStringForSecond(i)),e-h.serverTime<=0&&(t.removeTimer(t.timer),t.timer=null,t.updateInfo())}))):(this.rewardBtn.grayscale=!1,this.time.string="")},i}(S));var g=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).itemGridNode=void 0,e.itemGrid=void 0,e}e(i,t);var r=i.prototype;return r.onInit=function(){this.itemGridNode=f.findChild(this.node,"itemGrid"),this.itemGrid=new a(this.view,this.itemGridNode)},r.onRender=function(t,e){this.itemGrid.SetItemId(t[0],t[1])},i}(l);i._RF.pop()}}}));

