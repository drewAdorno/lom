System.register("chunks:///_virtual/CodeInviteView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ItemGrid.ts","./UIList.ts","./NodeUtil.ts","./BaseView.ts","./ConfigGlobal.ts","./MessageView.ts","./CodeInviteControl.ts","./CodeInviteDataCache.ts","./CodeInviteDefine.ts"],(function(t){"use strict";var i,e,n,o,s,d,a,r,h,C,l,c,v,u,f,g,m,p,I;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Button,s=t.ProgressBar,d=t.Label,a=t.ScrollView,r=t.Sprite},function(t){h=t.HTML5},function(t){C=t.ItemGrid},function(t){l=t.SelectedType,c=t.ListItem},function(t){v=t.default},function(t){u=t.BaseView},function(t){f=t.ConfigGlobal},function(t){g=t.default},function(t){m=t.default},function(t){p=t.CodeInviteDataCache},function(t){I=t.CodeInviteDefine}],execute:function(){n._RF.push({},"2178aPmI6RDhaTiJWfWaScn","CodeInviteView",void 0);t("default",function(t){function n(){var i;return(i=t.call(this)||this).taskList=void 0,i.btnInputCode=void 0,i.btnCreateCode=void 0,i.txtMyCode=void 0,i.txtInviteNum=void 0,i.pbInvite=void 0,i.name="CodeInviteView",i.url="ui/module/codeinvite/CodeInviteView",i.fullScreen=!1,i}i(n,t);var r=n.prototype;return r.onInit=function(){var t=this,i=this.findChild("btnClose");this.addComponentCallbackListener(i,o.EventType.CLICK,(function(){t.close()})),this.btnInputCode=this.findChild("root/btnInputCode"),this.addComponentCallbackListener(this.btnInputCode,o.EventType.CLICK,(function(){uiMgr.openView("CodeInputView")})),this.btnCreateCode=this.findChild("root/btnCreateCode"),this.addComponentCallbackListener(this.btnCreateCode,o.EventType.CLICK,(function(){uiMgr.openView("CodeCreateView")}));var e=this.findChild("root/nodeCode/nodeMyCode/btnCopy");this.addComponentCallbackListener(e,o.EventType.CLICK,(function(){try{navigator.clipboard.writeText(IS(p).inviteCode)?g.showFlyTip(GetLanguage(999300103)):console.error("复制到剪贴板失败")}catch(t){console.error("复制到剪贴板失败")}})),e.active=h,this.pbInvite=this.findChildComponent("root/nodeInvite/pbInvite",s),this.txtMyCode=this.findChildComponent("root/nodeCode/nodeMyCode/txtMyCode",d),this.txtInviteNum=this.findChildComponent("root/nodeInvite/pbInvite/txtInviteNum",d);var n=this.findChildComponent("root/taskList",a);this.taskList=this.addUIList(n,b),this.taskList.selectedMode=l.SINGLE},r.registerUpdateHandler=function(){this.addEvent(I.OnInviteStateUpdate,this.OnInfoUpdate,this),this.addEvent(I.OnInviteInfoUpdate,this.OnInfoUpdate,this)},r.onAfterOpen=function(){IS(m).reqCodeInviteInfo(),this.OnInfoUpdate()},r.onBeforeClose=function(){},r.onDestroy=function(){},r.OnInfoUpdate=function(){this.txtMyCode.string=IS(p).inviteCode,this.pbInvite.progress=IS(p).inviteCount/10;var t=IS(p).inviteCount>10?10:IS(p).inviteCount;this.txtInviteNum.string=t+"/10",1==IS(p).inviteState?(this.btnCreateCode.setPosition(-150,-460),this.btnInputCode.active=!0):(this.btnCreateCode.setPosition(0,-460),this.btnInputCode.active=!1);for(var i=[],e=0;e<10;e++){var n={id:e+1,task:this.checkTaskComplete(e+1),reward:f.invite_reward[e][1]};i.push(n)}this.taskList.datas=i},r.checkTaskComplete=function(t){if(IS(p).inviteCount<t)return 0;for(var i,n=e(IS(p).inviteClaimList);!(i=n()).done;){if(i.value==t)return 2}return 1},n}(u));var b=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).id=void 0,i.txtTitle=void 0,i.txtDesc=void 0,i.imgbg1=void 0,i.imgbg2=void 0,i.imgTitle1=void 0,i.imgTitle2=void 0,i.imgCanGet=void 0,i.itemGridNode=void 0,i.itemGrid=void 0,i.nodeMask=void 0,i.taskState=0,i}i(e,t);var n=e.prototype;return n.onInit=function(){this.txtTitle=v.findChildComponent(this.node,"txtTitle",d),this.txtDesc=v.findChildComponent(this.node,"txtDesc",d),this.imgbg1=v.findChildComponent(this.node,"bg1",r),this.imgbg2=v.findChildComponent(this.node,"bg2",r),this.imgTitle1=v.findChildComponent(this.node,"imgTitle1",r),this.imgTitle2=v.findChildComponent(this.node,"imgTitle2",r),this.imgCanGet=v.findChildComponent(this.node,"imgCanGet",r),this.itemGridNode=v.findChild(this.node,"itemGrid"),this.itemGrid=new C(this.view,this.itemGridNode),this.nodeMask=v.findChild(this.node,"nodeMask");var t=v.findChildComponent(this.node,"nodeMask/imgGet",r);this.view.loadIcon(t,"yqhy","grxx_ui_gouxuan")},n.onRender=function(t,i){this.id=t.id,this.txtTitle.string=t.id.toString(),this.itemGrid.SetItemId(t.reward[0]),this.txtDesc.string="X"+t.reward[1],this.imgbg1.node.active=10!=t.id,this.imgTitle1.node.active=10!=t.id,this.imgbg2.node.active=10==t.id,this.imgTitle2.node.active=10==t.id,this.taskState=t.task,this.imgCanGet.node.active=1==t.task,this.nodeMask.active=2==t.task,0==t.task?(this.imgbg1.grayscale=!0,this.imgTitle1.grayscale=!0,this.imgbg2.grayscale=!0,this.imgTitle2.grayscale=!0,this.itemGrid.SetGrey(!0)):(this.imgbg1.grayscale=!1,this.imgTitle1.grayscale=!1,this.imgbg2.grayscale=!1,this.imgTitle2.grayscale=!1,this.itemGrid.SetGrey(!1))},n.onItemClick=function(){0==this.taskState?g.showFlyTip(GetLanguage(899000026)):1==this.taskState?IS(m).reqCodeInviteReward(this.id):2==this.taskState&&g.showFlyTip(GetLanguage(200314))},e}(c);n._RF.pop()}}}));

