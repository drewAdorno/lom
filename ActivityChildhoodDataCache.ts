System.register("chunks:///_virtual/ActivityChildhoodDataCache.ts",["cc","./RedPointMgr.ts","./StorageUtil.ts","./TimeUtil.ts","./BagDefine.ts","./BattlePassControl.ts","./RoleDataCache.ts","./ActivityDataCache.ts","./ActivityDefine.ts","./ActivityAutumnDataCache.ts","./HorseCarnivalDataCache.ts"],(function(t){"use strict";var e,i,n,o,a,c,r,u,d,h,s,f,l,v;return{setters:[function(t){e=t.cclegacy,i=t.js},function(t){n=t.RedPointMgr},function(t){o=t.default},function(t){a=t.default},function(t){c=t.BagEventDefine},function(t){r=t.default},function(t){u=t.RoleDataCache},function(t){d=t.default},function(t){h=t.ActivityType,s=t.ActivityState,f=t.ActivityEventDefine},function(t){l=t.default},function(t){v=t.HorseCarnivalDataCache}],execute:function(){e._RF.push({},"14b94DGALVFXIopyaY/CJeJ","ActivityChildhoodDataCache",void 0);t("default",function(){var t=e.prototype;function e(){normalEvent.on(f.OnActivityListUpdate,this.checkPop,this),normalEvent.on(f.OnActivityInfoUpdate,this.checkPop,this),normalEvent.on(c.GOODS_INFO_UPDATE,this.onBagUpdate,this)}return t.clear=function(){},t.checkPop=function(){var t=IS(d).GetActivityInfo(h.Childhood);if(t&&t.state==s.Open){var e,n=new Date(1e3*a.serverTime),c=i.formatStr("#%s#%s#%s",n.getFullYear(),n.getMonth()+1,n.getDate()),r="ActivityChildhoodPopView"+IS(u).GetRoleId();if((null!=(e=o.get(r))?e:"")==c)return;uiMgr.ViewIsAddPop("ActivityChildhoodPopView")||(uiMgr.addPopView("ActivityChildhoodPopView"),o.set(r,c))}},t.onBagUpdate=function(t,e){1055==e&&(IS(d).UpdateMainRedByActType(h.ChildhoodTurn),IS(n).changeValue("childhood_pass",IS(l).getPassRedNum()))},t.getPassRedNum=function(){var t=IS(d).GetActivityInfo(h.ChildhoodPass);if(!t||t.state!=s.Open)return 0;var e=0,i=t.roundCfg.group_id;return e=(e=e+r.checkRewardRP(i)>=0?1:0)+r.checkAddRewardRP(i)>0?1:0},t.GetStoreRed=function(){var t=IS(d).GetActivityInfo(h.Childhood);if(!t||t.state!=s.Open)return 0;if(t){var e,i=String(t.id)+"#"+String(t.round),n="ActivityChildhoodStoreRed"+IS(u).GetRoleId();return(null!=(e=o.get(n))?e:"")==i?0:1}return 0},t.GetTurnRed=function(){var t=IS(d).GetActivityInfo(h.ChildhoodTurn);if(!t||t.state!=s.Open)return 0;var e=0;return e+=IS(v).getRedNum(h.ChildhoodTurn),e+=this.GetTurnSelectRed()},t.GetTurnSelectRed=function(){return 0},e}());e._RF.pop()}}}));

